!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("lodash"),require("coreUtils"),require("experiment"),require("utils"),require("documentServicesSchemas"),require("mobileCore"),require("tpa"),require("wixappsCore"),require("layout"),require("wixCode"),require("core"),require("zepto"),require("santa-core-utils"),require("wixappsClassics"),require("platformEvents"),require("wixappsBuilder"),require("platformInit"),require("platformUtils"),require("mobx"),require("immutable"),require("immutableDiff"),require("wixImmutable"),require("warmupUtilsLib"),require("speakingurl"),require("coreMultilingual"),require("wix-ui-santa/componentsMetaData.bundle"),require("editorSkinsData"),require("color"),require("skins"),require("wix-ui-santa/dsComponentsService.bundle"),require("pmrpc"),require("platformAPI"),require("elementory-browser-support"),require("wix-data-schemas-creator"),require("host-platform-api"),require("compUtils"),require("js-platform-apps-configuration-editor"),require("skinExports"),require("textCommon"),require("wix-ui-santa/componentsHooks.bundle"),require("santa-components"),require("warmupUtils"),require("image-client-api"),require("componentsCore"),require("wix-ui-santa/baseUIDSComponentsService.bundle"),require("wix-json-schema-utils"),require("localSiteSerializer"));else if("function"==typeof define&&define.amd)define(["lodash","coreUtils","experiment","utils","documentServicesSchemas","mobileCore","tpa","wixappsCore","layout","wixCode","core","zepto","santa-core-utils","wixappsClassics","platformEvents","wixappsBuilder","platformInit","platformUtils","mobx","immutable","immutableDiff","wixImmutable","warmupUtilsLib","speakingurl","coreMultilingual","wix-ui-santa/componentsMetaData.bundle","editorSkinsData","color","skins","wix-ui-santa/dsComponentsService.bundle","pmrpc","platformAPI","elementory-browser-support","wix-data-schemas-creator","host-platform-api","compUtils","js-platform-apps-configuration-editor","skinExports","textCommon","wix-ui-santa/componentsHooks.bundle","santa-components","warmupUtils","image-client-api","componentsCore","wix-ui-santa/baseUIDSComponentsService.bundle","wix-json-schema-utils","localSiteSerializer"],t);else{var n="object"==typeof exports?t(require("lodash"),require("coreUtils"),require("experiment"),require("utils"),require("documentServicesSchemas"),require("mobileCore"),require("tpa"),require("wixappsCore"),require("layout"),require("wixCode"),require("core"),require("zepto"),require("santa-core-utils"),require("wixappsClassics"),require("platformEvents"),require("wixappsBuilder"),require("platformInit"),require("platformUtils"),require("mobx"),require("immutable"),require("immutableDiff"),require("wixImmutable"),require("warmupUtilsLib"),require("speakingurl"),require("coreMultilingual"),require("wix-ui-santa/componentsMetaData.bundle"),require("editorSkinsData"),require("color"),require("skins"),require("wix-ui-santa/dsComponentsService.bundle"),require("pmrpc"),require("platformAPI"),require("elementory-browser-support"),require("wix-data-schemas-creator"),require("host-platform-api"),require("compUtils"),require("js-platform-apps-configuration-editor"),require("skinExports"),require("textCommon"),require("wix-ui-santa/componentsHooks.bundle"),require("santa-components"),require("warmupUtils"),require("image-client-api"),require("componentsCore"),require("wix-ui-santa/baseUIDSComponentsService.bundle"),require("wix-json-schema-utils"),require("localSiteSerializer")):t(e.lodash,e.coreUtils,e.experiment,e.utils,e.documentServicesSchemas,e.mobileCore,e.tpa,e.wixappsCore,e.layout,e.wixCode,e.core,e.zepto,e["santa-core-utils"],e.wixappsClassics,e.platformEvents,e.wixappsBuilder,e.platformInit,e.platformUtils,e.mobx,e.immutable,e.immutableDiff,e.wixImmutable,e.warmupUtilsLib,e.speakingurl,e.coreMultilingual,e["wix-ui-santa/componentsMetaData.bundle"],e.editorSkinsData,e.color,e.skins,e["wix-ui-santa/dsComponentsService.bundle"],e.pmrpc,e.platformAPI,e["elementory-browser-support"],e["wix-data-schemas-creator"],e["host-platform-api"],e.compUtils,e["js-platform-apps-configuration-editor"],e.skinExports,e.textCommon,e["wix-ui-santa/componentsHooks.bundle"],e["santa-components"],e.warmupUtils,e["image-client-api"],e.componentsCore,e["wix-ui-santa/baseUIDSComponentsService.bundle"],e["wix-json-schema-utils"],e.localSiteSerializer);for(var o in n)("object"==typeof exports?exports:e)[o]=n[o]}}(this,function(e,t,n,o,i,r,a,s,c,p,l,u,d,g,f,m,y,E,I,S,h,P,A,T,v,C,_,O,D,w,M,b,R,N,x,L,B,F,k,U,H,V,W,G,Y,z,K){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=231)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){var o,i;o=[n(1)],void 0===(i=function(e){"use strict";return{VIEW_MODES:{DESKTOP:"DESKTOP",MOBILE:"MOBILE"},DATA_TYPES:e.constants.DATA_TYPES,DEVICES:{DESKTOP:"desktop",MOBILE:"mobile"},ANCHORS:{LOCK_THRESHOLD:70,LOCK_CONDITION:{ALWAYS:"always",NEVER:"never",THRESHOLD:"threshold"}},DOM_ID_PREFIX:{DESKTOP:"",MOBILE:"mobile_"},RESIZE_SIDES:{TOP:"RESIZE_TOP",LEFT:"RESIZE_LEFT",BOTTOM:"RESIZE_BOTTOM",RIGHT:"RESIZE_RIGHT"},MOVE_DIRECTIONS:{HORIZONTAL:"HORIZONTAL_MOVE",VERTICAL:"VERTICAL_MOVE"},COMP_TYPES:{PAGE:"Page",MASTER_PAGE:"Document",HEADER:"wysiwyg.viewer.components.HeaderContainer",FOOTER:"wysiwyg.viewer.components.FooterContainer"},COMP_IDS:{PAGE_GROUP:"SITE_PAGES",PAGES_CONTAINER:"PAGES_CONTAINER",HEADER:"SITE_HEADER",FOOTER:"SITE_FOOTER",BACKGROUND:"SITE_BACKGROUND"},MOBILE_ONLY_COMPONENTS:{TINY_MENU:"TINY_MENU",MENU_AS_CONTAINER:"MENU_AS_CONTAINER",MENU_AS_CONTAINER_TOGGLE:"MENU_AS_CONTAINER_TOGGLE",BACK_TO_TOP_BUTTON:"BACK_TO_TOP_BUTTON",MENU_AS_CONTAINER_EXPANDABLE_MENU:"MENU_AS_CONTAINER_EXPANDABLE_MENU"},MOBILE_ONLY_COMPONENT_TYPES:{BACK_TO_TOP_BUTTON:"wysiwyg.viewer.components.BackToTopButton",BACK_TO_TOP_BUTTON_LEGACY:"wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton"},PERMISSIONS:{EDIT_REVISIONS:"html-editor.edit-revisions",EDIT:"html-editor.edit",SAVE:"html-editor.save",PREVIEW:"html-editor.preview",PUBLISH:"html-editor.publish",UNPUBLISH:"html-editor.unpublish",VIEW_REVISIONS:"html-editor.view-revisions"},POPUPS:{DEFAULT_DELAY:2},HERO_IMAGE:{MIN_HEIGHT:7},MENU_ITEM_TYPES:{PAGE:"page",LINK:"link",HEADER:"header"},SITE_STRUCTURE:e.siteConstants.MASTER_PAGE_ID,MASTER_PAGE_ID:e.siteConstants.MASTER_PAGE_ID,SITE_SEGMENTS_GAP_THRESHOLD:20,JSON_TYPES:{FULL:"fullJson",DISPLAYED:"siteData"},COMP_ALIGNMENT_OPTIONS:{LEFT:"left",RIGHT:"right",CENTER:"center",TOP:"top",BOTTOM:"bottom",MIDDLE:"middle"},COMP_DISTRIBUTION_OPTIONS:{BOTH:"verticalAndHorizontal",VERTICAL:"vertical",HORIZONTAL:"horizontal"},COMP_MATCH_SIZE_OPTIONS:{WIDTH:"width",HEIGHT:"height",BOTH:"heightAndWidth"},URLS:{MAX_LENGTH:40},SNAPSHOT_TAGS:{MOBILE_MERGE:"mobileMerge"},STYLES:{THEME_DATA_ID:"THEME_DATA",COMPONENT_STYLE:"ComponentStyle",TOP_LEVEL_STYLE:"TopLevelStyle",FLAT_THEME:"WFlatTheme",TYPES:{SYSTEM:"system",CUSTOM:"custom"},STYLES_PER_PAGE_VER:e.constants.STYLES_PER_PAGE_VER}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(241),n(59),n(80),n(242),n(6),n(34),n(16),n(5)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p){"use strict";const{DATA_TYPES:l,COMP_DATA_QUERY_KEYS:u}=t.constants,{dataValidators:d,schemasService:g}=c.services,f={Repeater:"Repeater",VerticalAnchorsMenu:"VerticalAnchorsMenu",Anchor:"Anchor"},m={MediaContainerDesignData:!0},y={StripColumnsContainerProperties:!0,ColumnProperties:!0},E={"wysiwyg.viewer.components.StripColumnsContainer":(t,n,o)=>e.isUndefined(o.fullWidth)?s.NO:s.YES,"wysiwyg.viewer.components.VectorImage":s.DONT_CARE},I=t.constants.BASE_PROPS_SCHEMA_TYPE;function S(e,t){return c.services.createDataItemByType(t)}function h(e){return A("ObsoleteBehaviorsList",{items:e})}function P(e){return A("MobileHints",e)}function A(t,n){let o=null;return t&&(o={type:t},d.resolveDefaultItem(t,o)),o?e.assign(o,n):o}function T(e,t,o){return e&&t&&o?n.addSerializedDataItemToPage(e,o,t):null}function v(e,t,n){if(!e||!t)return null;const o=e.pointers.getInnerPointer(t,n),i=(e.dal.isExist(t)?e.dal:e.dal.full).get(o);return i?i.replace("#",""):null}function C(n,o,i){if(o.type===t.constants.VIEW_MODES.MOBILE)return;const r=function(n,o){const i=n.pointers.componentStructure.getModesOverrides(o),r=n.dal.full.isExist(i)&&n.dal.full.get(i),a=e.map(r,"designQuery"),s=n.pointers.getInnerPointer(o,"designQuery");let c;c=t.displayedOnlyStructureUtil.isDisplayedComponent(o.id)?n.dal.get(s):n.dal.full.get(s);return a.concat(c)}(n,o),a=n.pointers.components.getMobilePointer(o);if(n.dal.isExist(a)){const t=n.pointers.getInnerPointer(a,"designQuery"),o=n.dal.get(t);e.includes(r,o)||n.dal.set(t,`#${i}`)}}function _(e,t,n,o){const i=e.pointers.getInnerPointer(t,o);e.dal.full.set(i,n)}function O(e,t,n,o){const i=v(e,t,n);return i?o(i,(e.pointers.full.components.getPageOfComponent(t)||e.pointers.components.getPageOfComponent(t)).id):null}function D(e,t){return O(e,t,"dataQuery",e.pointers.data.getDataItem)}function w(e,t){return O(e,t,"designQuery",e.pointers.data.getDesignItem)}function M(e,t){return O(e,t,"propertyQuery",e.pointers.data.getPropertyItem)}function b(e,t){return O(e,t,"behaviorQuery",e.pointers.data.getBehaviorsItem)}function R(e,t){return O(e,t,"connectionQuery",e.pointers.data.getConnectionsItem)}function N(e,t){return O(e,t,"mobileHintsQuery",e.pointers.data.getMobileHintsItem)}function x(e,t,n,o=!1){const i=D(e,t);return k(e,l.data,i,n,o)}function L(e,t){return e.siteDataAPI.runtime.getCompData(t.id)}function B(e,t,n){const o=w(e,t);return k(e,l.design,o,n)}function F(e,t){const n=M(e,t);return k(e,l.prop,n)}function k(e,t,o,i,r=!1){if(e&&o){const s=e.dal.full.get(o);if(s&&g.getSchema(t,s.type)){const c=n.serializeDataItem(e,t,o,i,r);return a.executeHook(a.HOOKS.DATA.AFTER_GET,s.type,[e,c]),c}}return null}function U(t,n){const o=["trigger","type","part","name"];return e.isEqual(e.pick(t,o),e.pick(n,o))}function H(t,n,o){const i=e.map(n,function(t){return{isEqualFunc:e.partial(U,t),behavior:t}});let r=t;return e.forEach(i,function(t){r=e.reject(r,t.isEqualFunc),o||(r=r.concat(t.behavior))}),r}function V(t,i,r,c){if(!t||!i)throw new Error("invalid args");!r.background||r.background.colorOverlay||r.background.imageOverlay||(r.dataChangeBehaviors=e.reject(r.dataChangeBehaviors,{part:"overlay"}));const p=s.getComponentType(t,i);a.executeHook(a.HOOKS.DESIGN.UPDATE_BEFORE,p,[t,i,r]),c||(r.charas=o.generateNewDesignId());let l=v(t,i,"designQuery");const u=t.pointers.full.components.getPageOfComponent(i).id,d=Boolean(l);return l=n.addSerializedDesignItemToPage(t,u,r,l,i),d||function(e,t,n){_(e,t,`#${n}`,"designQuery")}(t,i,l),C(t,i,l),a.executeHook(a.HOOKS.DESIGN.UPDATE_AFTER,p,[t,i,r]),l}function W(e,t,o){let i=v(e,t,"mobileHintsQuery");const r=!!i,a=e.pointers.full.components.getPageOfComponent(t).id,s=P(o);return i=n.addSerializedMobileHintsItemToPage(e,a,s,i,t),r||function(e,t,n){_(e,t,n,"mobileHintsQuery")}(e,t,i),i}function G(n,o){const i=R(n,o);let r=e.get(k(n,l.connections,i),"items");return r=function(n,o,i){return e.map(i,function(i){if("WixCodeConnectionItem"===i.type)return i;const r=function(e,n,o){const i=t.displayedOnlyStructureUtil.isDisplayedComponent(o.id)?e.pointers.components.getPageOfComponent(o):e.pointers.full.components.getPageOfComponent(o),r=Y(e,i,n);if(r)return r;if(e.pointers.components.isMasterPage(i))return null;return function(e,t){const n=e.siteDataAPI.siteData.getViewMode(),o=e.pointers.components.getMasterPage(n);return Y(e,o,t)}(e,n)}(n,i.controllerId,o),a=e.assign({},e.omit(i,"controllerId"),{controllerRef:r});return e.has(a,"config")?(a.config=JSON.parse(a.config),a):a})}(n,o,r),e.isEmpty(r)?null:r}function Y(n,o,i){const r=n.dal.full.get(o),a=n.siteDataAPI.siteData.isMobileView(),s=t.dataUtils.findCompInStructure(r,a,function(t){return e.get(t,"dataQuery","").replace("#","")===i});return s?n.pointers.full.components.getComponent(s.id,o):null}function z(t,o,i,r){if(!t||!o)throw new Error("invalid args");let c=v(t,o,"propertyQuery");const p=t.pointers.full.components.getPageOfComponent(o).id,l=s.getComponentType(t,o);a.executeHook(a.HOOKS.PROPERTIES.UPDATE_BEFORE,l,[t,o,i]),i.type=i.type||function(t){const n=g.getDefinition(t);return n.propertyType||e.find(n.propertyTypes)||I}(l),e.set(i,["metaData","autoGenerated"],!1);const u=Boolean(c);return c=n.addSerializedPropertyItemToPage(t,p,i,r||c,o),u||function(e,t,n){const o=e.pointers.getInnerPointer(t,"propertyQuery");e.dal.set(o,n)}(t,o,c),a.executeHook(a.HOOKS.PROPERTIES.UPDATE_AFTER,l,[t,o,i]),c}return{shouldUpdateDataWithSingleComp:function(e,t){const n=x(e,t);return!n||!f[n.type]},shouldUpdatePropertiesWithSingleComp:function(e,t){const n=F(e,t);return!n||!y[n.type]},shouldUpdateDesignWithSingleComp:function(e,t){const n=B(e,t);return!n||!m[n.type]},shouldUpdateAnchorsAfterPropertiesUpdate:function(t,n,o){if(!t.dal.isExist(n))return s.YES;const i=s.getComponentType(t,n),r=E[i];return r?e.isFunction(r)?r.apply(this,o):r:s.NO},getPlatformAppConnections:function(t,n){return e.reject(function(e,t){return G(e,t)||[]}(t,n),{type:"WixCodeConnectionItem"})},addLink:function(t,n,o,i){const r=S(0,n);if(r)return o&&(e.assign(r,o),d.validateDataBySchema(r,"data")),T(t,r,i||"masterPage");return null},createDataItemByType:S,createStyleItemByType:function(e){return c.services.createStyleItemByType(e)},createDesignItemByType:function(e,t){let n=null;return g.getSchema(l.design,t)&&(n=A(t)),n},createBehaviorsItem:h,createMobileHintsItem:P,addDataItem:T,getDataItem:x,updateDesignItem:V,getRuntimeDataItem:L,updateDesignItemBehaviors:function(e,t,n){if(!e||!t)throw new Error("invalid args");const o=B(e,t);return o.dataChangeBehaviors=H(o.dataChangeBehaviors,n,!1),V(e,t,o)},removeDesignItemBehaviors:function(e,t,n){if(!e||!t)throw new Error("invalid args");const o=B(e,t);return o.dataChangeBehaviors=H(o.dataChangeBehaviors,n,!0),V(e,t,o)},getDesignItem:B,getDesignItemByModes:function(t,n,o){if(n){const i=function(t,n,o){if(n){const i=t.dal.full.get(t.pointers.componentStructure.getModesOverrides(n)),r=e.find(i,function(t){return o&&t.modeIds.length===o.length&&e.intersection(t.modeIds,o).length===t.modeIds.length});let a=e.get(r,"designQuery");if(!a){const e=t.pointers.getInnerPointer(n,"designQuery");a=t.dal.full.get(e)}if(a){const e=t.pointers.full.components.getPageOfComponent(n);return t.pointers.data.getDesignItem(a.replace("#",""),e.id)}}return null}(t,n,o);return k(t,l.design,i)}return null},getMediaRef:function(t){return e.get(t,"background.mediaRef")},getDataItemById:function(e,t,n,o=!1,i=!1){if(e&&t){const r=e.pointers.data.getDataItem(t,n||"masterPage");return k(e,l.data,r,o,i)}return null},getDesignItemById:function(e,t,n,o=!1){if(e&&t){const i=e.pointers.data.getDesignItem(t,n||"masterPage");return k(e,l.design,i,o)}return null},getPropertiesItemById:function(e,t,n){if(e&&t){const o=e.pointers.data.getPropertyItem(t,n||"masterPage");return k(e,l.prop,o)}return null},getMobileHintsItemById:function(e,t,n){if(!e||!t)return null;const o=e.pointers.data.getMobileHintsItem(t,n||"masterPage");return k(e,l.mobileHints,o)},getDataItemPointer:D,getPropertyItemPointer:M,getDesignItemPointer:w,getBehaviorsItemPointer:b,getConnectionsItemPointer:R,getMobileHintsItemPointer:N,updateDataItem:function(t,o,i,r=!1){if(!t||!o)throw new Error("invalid args");const c=s.getComponentType(t,o);a.executeHook(a.HOOKS.DATA.UPDATE_BEFORE,c,[t,o,i]);const l=t.pointers.full.components.getPageOfComponent(o).id,u=x(t,o);let d=e.get(u,"id");!d&&p.isOpen("sv_livePreview")&&(d=e.get(L(t,o),"id"));const g=Boolean(d);return d=n.addSerializedDataItemToPage(t,l,i,d,r),g||function(e,t,n){_(e,t,`#${n}`,"dataQuery")}(t,o,d),a.executeHook(a.HOOKS.DATA.UPDATE_AFTER,c,[t,o,u]),d},removeComponentDataItem:function(t,n){if(!t||!n)throw new Error("invalid args");const o=g.getDefinition(s.getComponentType(t,n));if(o.dataTypes&&!e.includes(o.dataTypes,""))throw new Error("component's data can't be deleted");const i=t.pointers.getInnerPointer(n,"dataQuery");t.dal.full.remove(i)},removeComponentDesignItem:function(e,t){if(!e||!t)throw new Error("invalid args");const n=e.pointers.getInnerPointer(t,"designQuery");e.dal.remove(n)},removeComponentPropertyItem:function(e,t){if(!e||!t)throw new Error("invalid args");const n=g.getDefinition(s.getComponentType(e,t));if(n.propertyType&&""!==n.propertyType)throw new Error("component's property can't be deleted");const o=e.pointers.getInnerPointer(t,"propertyQuery");e.dal.remove(o)},removeComponentMobileHintsItem:function(e,t){if(!e||!t)throw new Error("invalid args");const n=e.pointers.getInnerPointer(t,"mobileHintsQuery");e.dal.full.remove(n)},setDataItemByPointer:function(t,n,o,i){e.set(o,"metaData.isPreset",!1),d.validateDataBySchema(o,i),t.dal.full.set(n,o),a.executeHook(a.HOOKS.DATA.SET_BY_POINTER_AFTER,"setDataItem",[t,n,o])},deleteDataItem:r.deleteDataItem,deleteDesignItem:r.deleteDesignItem,deleteMobileHintsItem:r.removeMobileHintsItem,removeDesignItemRecursively:r.removeDesignItemRecursively,removeDataItemRecursively:r.removeDataItemRecursively,getDataSchemaByType:function(e,t){if(t){const e=g.getSchema(l.data,t);return e&&e.properties}return null},createPropertiesItemByType:function(e,t){return c.services.createPropertiesItemByType(t)},getPropertiesItem:F,getPropertiesItemFields:function(t){return t?e.keys(t):[]},updatePropertiesItem:function(e,t,n){z(e,t,n)},setPropertiesItem:z,deletePropertiesItem:r.deletePropertiesItem,getPropertiesSchemaByType:function(t,n){if(n){const t=g.getSchema(l.prop,n);return e.get(t,["allOf",0],t)}return null},updateBehaviorsItem:function(e,t,o){let i=v(e,t,"behaviorQuery");const r=e.pointers.full.components.getPageOfComponent(t).id,a=Boolean(i),s=h(o);return i=n.addSerializedBehaviorsItemToPage(e,r,s,i),a||function(e,t,n){_(e,t,n,"behaviorQuery")}(e,t,i),i},getBehaviorsItem:function(t,n){const o=b(t,n);return e.get(k(t,l.behaviors,o),"items")},removeBehaviorsItem:r.removeBehaviorsItem,updateConnectionsItem:function(t,o,i){let r=v(t,o,"connectionQuery");const s=t.pointers.full.components.getPageOfComponent(o).id,c=Boolean(r),p=A("ConnectionList",{items:function(t,n){return e.map(n,function(n){if("WixCodeConnectionItem"===n.type)return n;const o=v(t,n.controllerRef,"dataQuery"),i=e.assign({},e.omit(n,"controllerRef"),{controllerId:o});if(!e.has(i,"config"))return i;try{i.config=JSON.stringify(i.config)}catch(e){throw new Error("Invalid connection configuration - should be JSON stringifiable")}return i})}(t,i)});return r=n.addSerializedConnectionsItemToPage(t,s,p,r),c||function(e,t,n){_(e,t,n,"connectionQuery")}(t,o,r),a.executeHook(a.HOOKS.DATA.AFTER_UPDATE_CONNECTIONS,"updateConnectionsItem",[t,p,o]),r},getConnectionsItem:G,removeConnectionsItem:r.removeConnectionsItem,updateMobileHintsItem:W,updateMobileHintsHidden:function(t,n,o){return W(t,n,e.pick(o,["id","type","hidden"]))},getMobileHintsItem:function(e,t){const n=N(e,t);return k(e,l.mobileHints,n)},generateNewDataItemId:o.generateNewDataItemId,generateNewPropertiesItemId:o.generateNewPropertiesItemId,generateNewDesignItemId:o.generateNewDesignId,addSerializedStyleItemToPage:n.addSerializedStyleItemToPage,addSerializedDataItemToPage:n.addSerializedDataItemToPage,addSerializedDesignItemToPage:n.addSerializedDesignItemToPage,addSerializedBehaviorsItemToPage:n.addSerializedBehaviorsItemToPage,addSerializedLayoutItemToPage:n.addSerializedLayoutItemToPage,addSerializedConnectionsItemToPage:n.addSerializedConnectionsItemToPage,addSerializedPropertyItemToPage:n.addSerializedPropertyItemToPage,addSerializedMobileHintsItemToPage:n.addSerializedMobileHintsItemToPage,serializeDataItem:n.serializeDataItem,executeForDataItemRefs:i.executeForDataItemRefs,isOfType:i.isOfType,isPropertiesItemValid:function(e,t,n,o){return d.isItemValid(t,n,o,"properties")},isDataItemValid:function(e,t,o,i){const r=n.deserializeDataItem(e,t,"data");return d.isItemValid(r,o,i,"data")},getComponentDataItemId:v,getComponentLayoutData:function(e,t){return function(e,t,n){const o=v(e,t,u[n]),i=e.pointers.full.components.getPageOfComponent(t).id,r=e.pointers.data.getItem(n,o,i);return k(e,n,r)}(e,t,l.layout)},updateComponentLayoutData:function(e,t,o){let i=v(e,t,u[l.layout]);const r=e.pointers.full.components.getPageOfComponent(t).id,a=Boolean(i);return i=n.addSerializedItemToPage(e,r,o,i,l.layout),a||function(e,t,n,o){_(e,t,n,u[o])}(e,t,`#${i}`,l.layout),i}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(12),n(3),n(91),n(6),n(67),n(10),n(163),n(398),n(8),n(18),n(24),n(63),n(31),n(41),n(22),n(11),n(14),n(83),n(84),n(47),n(25),n(53),n(5),n(2)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l,u,d,g,f,m,y,E,I,S,h,P,A,T,v,C){"use strict";const _=["custom","data","props","style","design","connections","activeModes","behaviors","mobileHints","layoutResponsive"],O="mobile_",D=["wysiwyg.viewer.components.SiteSegmentContainer","wysiwyg.viewer.components.FooterContainer","wysiwyg.viewer.components.HeaderContainer","wysiwyg.viewer.components.PagesContainer","wysiwyg.viewer.components.PageGroup","wysiwyg.viewer.components.ScreenWidthContainer","wysiwyg.viewer.components.StripContainer","wysiwyg.viewer.components.StripColumnsContainer","wysiwyg.viewer.components.Column","wysiwyg.viewer.components.SiteRegionContainer","core.components.Container","core.components.ContainerOBC","wysiwyg.viewer.components.PopupContainer","mobile.core.components.Container","wysiwyg.viewer.components.Group","wysiwyg.viewer.components.FormContainer","wixapps.integration.components.common.formcontainer.viewer.FormContainer","wixapps.integration.components.Area","wysiwyg.viewer.components.BoxSlideShow","wysiwyg.viewer.components.BoxSlideShowSlide","wysiwyg.viewer.components.StateBox","wysiwyg.viewer.components.StateBoxState","wysiwyg.viewer.components.StateStrip","wysiwyg.viewer.components.StateStripState","wysiwyg.viewer.components.StripContainerSlideShow","wysiwyg.viewer.components.StripContainerSlideShowSlide","platform.components.AppWidget"],w=["mobile.core.components.Page","core.components.Page","wixapps.integration.components.AppPage"],M=["wysiwyg.viewer.components.Repeater"];function b(e,n,o,i){const r=i||te(),a=e.pointers.components.getViewMode(n),s=t.displayedOnlyStructureUtil;if(s.isDisplayedComponent(n.id)){const t=s.getItemId(n.id);return e.pointers.components.getUnattached(s.getUniqueDisplayedId(r,t),a)}return e.pointers.components.getUnattached(r,a)}function R(t,o,i,r,a,s){const c=e.get(r,"componentType"),p=e.get(t.dal.get(i),"componentType");n.integrations.ravenUtils.breadcrumb(`Adding comp ${c}, id: "${o.id}" , to container: ${p}, id: "${i.id}"`),N(t,o,i,r,a,s),U(t,o)}function N(t,n,o,i,a,s){const p=y.getContainerToAddComponentTo(t,o),l=c.validateComponentToAdd(t,n,i,p,s);if(!l.success)throw new Error(l.error);r.executeHook(r.HOOKS.ADD_ROOT.BEFORE,i.componentType,[t,n,o,i,a,s]),L(t,n,o,i,a,!1,{}),e.isEqual(p,o)?e.isFinite(s)&&S.moveToIndex(t,n,s):(E.adjustCompLayoutToNewContainer(t,n,p),E.addCompToContainer(t,n,p,s)),r.executeHook(r.HOOKS.ADD_ROOT.AFTER,i.componentType,arguments)}function x(t){return e.omit(t,_)}function L(n,i,a,s,p,l,u,g){const f=c.validateComponentToSet(n,i,s,p,a,l);if(!f.success)throw new Error(f.error);s.layout&&delete s.layout.anchors,r.executeHook(r.HOOKS.ADD.BEFORE,s.componentType,arguments);let m=t.objectUtils.cloneDeep(s);u&&s.id&&(u[s.id]=i.id),m.id=t.displayedOnlyStructureUtil.getOriginalId(i.id),m.type||function(t){e.includes(M,t.componentType)?t.type="RepeaterContainer":e.includes(D,t.componentType)?t.type="Container":e.includes(w,t.componentType)?t.type="Page":t.type="Component"}(m),function(t){t.layout=t.layout||{};const n={},o=c.ALLOWED_LAYOUT_PARAMS;var i;e.forEach(o,function(e){const o=t.layout[e];if(o){const t=c.validateLayoutParam(e,o);if(!t.success)throw new Error(t.error);n[e]=o}}),delete n.anchors,t.layout=e.assign({x:0,y:0,fixedPosition:!1,width:160,height:90,scale:1,rotationInDegrees:0},n),t.layout.docked&&(((i=t.layout).docked.right||i.docked.left||i.docked.hCenter)&&(i.docked.right&&i.docked.left&&delete i.width,delete i.x),(i.docked.top||i.docked.bottom||i.docked.vCenter)&&(i.docked.top&&i.docked.bottom&&delete i.height,delete i.y))}(m),function(t){const n=e.get(t,["connections","items"],[]);e.forEach(n,function(e){const t=c.validateComponentConnection(e);if(!t.success)throw new Error(t.error)})}(m),(g=g||{ancestorsModes:B(n,a,{}),oldModeIdsToNew:{}}).ancestorsModes=e.merge(g.ancestorsModes,function(t){const n={};return e.forEach(e.get(t,"modes.definitions"),function(e){n[e.modeId]=!0}),n}(m)),function(t,n){e.defaults(n,function(t){const n=e.get(t,"modes.definitions");if(n){const o=t.id;return e.reduce(n,function(e,t){return e[t.modeId]=d.createUniqueModeId(o),e},{})}return{}}(t)),function(t,n){t.modes&&t.modes.definitions&&(t.modes.definitions=e.map(t.modes.definitions,function(t){return e.defaults({modeId:n[t.modeId]},t)}))}(t,n),function(t,n){e.get(t,"modes.overrides")&&(t.modes.overrides=e.map(t.modes.overrides,function(t){const o=e.map(t.modeIds,function(e){return n[e]||e});return e.defaults({modeIds:o},t)}))}(t,n),function(t,n){e.get(t,"props.mobileDisplayedModeId")&&(t.props.mobileDisplayedModeId=n[t.props.mobileDisplayedModeId])}(t,n)}(m=function(n,o,i,r){const a=r.ancestorsModes;if(e.isEmpty(a))return function(n,o,i){const r=i.activeModes,a=t.fullToDisplayedJson.applyModesOnSerializedStructure(i,r);e.isEmpty(r)||(s=a,c=i.layout,s.layout.x=e.get(c,"x")||e.get(s,"layout.x"),s.layout.y=e.get(c,"y")||e.get(s,"layout.y"));var s,c;return a}(0,0,o);return function(t,n){if(t&&n){let o=e.get(t,"modes.overrides");o&&(o=e.filter(o,function(t){return e.every(t.modeIds,function(e){return n[e]})}),t.modes.overrides=o)}return t}(o,a)}(0,m,0,g),g.oldModeIdsToNew);const y=l?i.id:n.pointers.full.components.getPageOfComponent(a).id;!function(t,n,i,r,a,s,c){V(t,i,r,a,s,n),G(t,i,r,s,n),W(t,i,r,s,n),function(t,n,i,r,a,s){if(!s.behaviors)return;e.isString(s.behaviors)&&(s.behaviors=o.createBehaviorsItem(s.behaviors));s.behaviors=function(t,n,o){if(t&&t.items){let i=t.items;e.isString(i)&&(i=JSON.parse(i));const r=e.map(i,function(t){return function(t,n){const o=e.get(t,"params.modeIds");o&&e.set(t,"params.modeIds",e.map(o,function(e){return n.oldModeIdsToNew[e]||e}))}(t,n),function(t,n){if("comp"===e.get(t,"action.type")){const o=e.get(t,"action.sourceId");e.set(t,"action.sourceId",e.get(n,o,o))}if("runCode"===e.get(t,"behavior.name")&&e.has(t,"behavior.params.compId")){const o=e.get(t,"behavior.params.compId");e.set(t,"behavior.params.compId",e.get(n,o,o))}}(t,o),t}),a=e.omit(t,"items");return a.items=JSON.stringify(r),a}return t}(s.behaviors,a,r),i=Y(r,s.behaviors,i);const c=function(e,t,n,i){return t?o.addSerializedBehaviorsItemToPage(e,n,t,i):null}(t,s.behaviors,n,i);c&&(s.behaviorQuery=c,z(s.behaviors,c,r))}(t,i,r,s,c,n),function(e,t,n,i,r){n=Y(i,r.mobileHints,n);const a=function(e,t,n,i){return t?o.addSerializedMobileHintsItemToPage(e,n,t,i):null}(e,r.mobileHints,t,n);if(!a)return;r.mobileHintsQuery=a,z(r.mobileHints,a,i)}(t,i,r,s,n),function(e,t,n,i,r){n=Y(i,r.layoutResponsive,n);const a=function(e,t,n,i){return t?o.addSerializedLayoutItemToPage(e,n,t,i):null}(e,r.layoutResponsive,t,n);a&&(r.layoutQuery=a,z(r.layoutResponsive,a,i))}(t,i,r,s,n),function(e,t,n){k(e,t,n.componentType,n)}(t,i,n),function(t,n,o,i,r){let a=e.get(n,"modes.overrides");e.isEmpty(a)||(e.forEach(a,function(e){k(t,o,n.componentType,e),W(t,o,i,r,e),G(t,o,i,r,e)}),a=e.map(a,x),e.set(n,"modes.overrides",a))}(t,n,i,r,s),function(e,t,n,i,r){i=Y(r,e.connections,i);const a=function(e,t,n,i){return t?o.addSerializedConnectionsItemToPage(e,n,t,i):null}(t,e.connections,n,i);a&&(e.connectionQuery=a,z(e.connections,a,r))}(n,t,i,r,s)}(n,m,y,p,l,u,g);const E=s.components;E&&(m.components=[]);const I=s.mobileComponents;I&&(m.mobileComponents=[]);const h=x(m);if(l)n.dal.full.set(i,h);else{const o=n.pointers.full.components.getChildrenContainer(a),r=S.getNewIndexForNewComp(n,h,a);n.dal.full.push(o,h,i,r),function(o,r){const a=n.pointers.components.getAllDisplayedOnlyComponents(i);!e.isEmpty(a)&&t.displayedOnlyStructureUtil.isDisplayedComponent(i.id)&&(r.dataQuery||r.designQuery)&&e.forEach(a,function(i){const a=t.displayedOnlyStructureUtil.getItemId(i.id);if(r.dataQuery){const i=t.displayedOnlyStructureUtil.getUniqueDisplayedId(r.dataQuery.replace("#",""),a);n.dal.full.isExist(n.pointers.data.getDataItem(i,o))||V(n,o,i,l,u,e.clone(s))}if(r.designQuery){const i=t.displayedOnlyStructureUtil.getUniqueDisplayedId(r.designQuery.replace("#",""),a);n.dal.full.isExist(n.pointers.data.getDesignItem(i,o))||W(n,o,i,u,e.clone(s))}})}(y,h)}if(H(n,E,i,u,g,m.activeModes),I){const e=n.pointers.components.getPage(y,"MOBILE");H(n,I,e,u,g,m.activeModes)}const P=[n,i,m,p,u,a];return r.executeHook(r.HOOKS.ADD.AFTER,m.componentType,P),i}function B(t,n,o){let i=[];for(;n;){const e=F(t,n,o);i=i.concat(e),n=t.pointers.full.components.getParent(n)}return e(i).groupBy(e.identity).mapValues(Boolean).value()}function F(t,n,o){const i=[],r=d.getComponentModes(t,n);return e.forEach(r,function(e){const t=o[e.modeId];t?i.push(t):i.push(e.modeId)}),i}function k(n,i,r,a){if(a.style)if(e.isObject(a.style)){const t=n.runtimeConfig.stylesPerPage&&"custom"===a.style.styleType,r=t?i:"masterPage";e.set(a.style,"type",t?C.STYLES.COMPONENT_STYLE:C.STYLES.TOP_LEVEL_STYLE);const s=o.addSerializedStyleItemToPage(n,a.style,void 0,r);a.styleId=s}else{const o=a.style;if(!T(o)){if(v.isOpen("reportBiErrorWhenAddingCompWithCustomeStyleId")){"onboarding"===e.get(n.config,["origin"])&&!v.isOpen("reportBiErrorInADIAddingCompWithCustomeStyleId")||A.error(n,P.ADD_COMPONENT_WITH_CUSTOM_STYLE_ID,{compType:r,styleId:o})}t.log.warnDeprecation("You tried to create a component with an unknown system style Id. It should be either called with a string for system style, or an object for custom style")}s.styles.get(n,o)||u.style.createSystemStyle(n,o,r),a.styleId=o}}function U(e,t){a.updateAnchors(e,t)}function H(t,n,o,i,r,a){n&&o&&e.forEach(n,function(e){const n=i&&i[e.id],s=b(t,o,0,n);e.activeModes=a,L(t,s,o,e,n,!1,i,r),U(t,s)})}function V(n,i,r,a,s,c){if(a)c.dataQuery=`#${i}`;else{r=Y(s,c.data,r);const a=function(n,i,r,a){let s=null;if(i)if(e.isObject(i))"RepeatedData"===i.type?(s=o.addSerializedDataItemToPage(n,r,i.original,a),e.forEach(i.overrides,function(e,i){const a=t.displayedOnlyStructureUtil.getUniqueDisplayedId(s,i);o.addSerializedDataItemToPage(n,r,e,a)})):s=o.addSerializedDataItemToPage(n,r,i,a);else if(e.isString(i)){const e=o.createDataItemByType(n,i);s=o.addSerializedDataItemToPage(n,r,e,a)}return s}(n,c.data,i,r);a&&(c.dataQuery=`#${a}`,z(c.data,a,s))}}function W(n,i,r,a,s){r=Y(a,s.design,r);const c=function(n,i,r,a){let s=null;if(i){if(e.isObject(i))"RepeatedData"===i.type?(s=o.addSerializedDesignItemToPage(n,r,i.original,a),e.forEach(i.overrides,function(e,i){const a=t.displayedOnlyStructureUtil.getUniqueDisplayedId(s,i);o.addSerializedDesignItemToPage(n,r,e,a)})):s=o.addSerializedDesignItemToPage(n,r,i,a);else if(e.isString(i)){const e=o.createDataItemByType(n,i);s=o.addSerializedDesignItemToPage(n,r,e,a)}s&&!e.startsWith(s,"#")&&(s=`#${s}`)}return s}(n,s.design,i,r);c&&(s.designQuery=c,z(s.design,c,a))}function G(t,n,i,r,a){i=Y(r,a.props,i);const s=function(t,n,i,r){let a=null;if(n)if(e.isObject(n))a=o.addSerializedPropertyItemToPage(t,i,n,r);else if(e.isString(n)){const e=o.createPropertiesItemByType(t,n);a=o.addSerializedPropertyItemToPage(t,i,e,r)}return a}(t,a.props,n,i);s&&(a.propertyQuery=s,z(a.props,s,r))}function Y(t,n,o){let i=o;if(!t||!n)return i;const r=J(n.id);if(t[r])i=t[r];else if(e.startsWith(r,O)){const e=t[r.substring(O.length)];e&&(i=O+e)}return i}function z(e,t,n){if(!n)return;const o=J(e.id);t=J(t),e.id&&n&&!n[o]&&(n[o]=t)}function K(t,n,o){if(o=o||e.noop,d.shouldDeleteComponentFromFullJson(t,n)){if(t.pointers.components.isMobile(n))throw new Error(c.ERRORS.CANNOT_DELETE_MOBILE_COMPONENT);!function(t,n,o){o=o||e.noop,q(t,n)?(!function(t,n){const o=$(t,n);e.forEach(o,function(e){g.isDeleteHandlerExists(e.id)&&g.executeDeleteHandler(e.id)})}(t,n),e.delay(function(){g.unRegisterHandlers(t,n.id),o()},500)):o()}(t,n,o)}else o()}function $(e,t){const n=y.getTpaChildren(e,t);return f.isTpaByCompType(y.getType(e,t))&&n.push(t),n}function q(t,n){if(!y.isExist(t,n))return!1;const o=$(t,n);return e.some(o,function(e){return g.isDeleteHandlerExists(e.id)})}function j(n,r){const a=[r];if(t.displayedOnlyStructureUtil.isDisplayedComponent(r.id)){const e=t.displayedOnlyStructureUtil.getOriginalId(r.id),o=n.pointers.components.getPageOfComponent(r),i=n.pointers.full.components.getComponent(e,o);a.push(i)}const c=!n.pointers.components.isMobile(r);e.forEach(a,function(t){const r=c?t:n.pointers.components.getDesktopPointer(t),a=c?n.pointers.components.getMobilePointer(t):t,p=n.dal.isExist(a);if(c&&(o.deleteDataItem(n,r),o.removeBehaviorsItem(n,r),o.deleteMobileHintsItem(n,r),o.deleteDesignItem(n,r),o.deletePropertiesItem(n,r),o.removeConnectionsItem(n,r),function(t,n){const o=u.style.get(t,n);if(e.get(o,"type")===C.STYLES.COMPONENT_STYLE){const e=(t.pointers.components.getPageOfComponent(n)||t.pointers.full.components.getPageOfComponent(n)).id;s.styles.remove(t,o.id,e)}}(n,r)),p){const t=!e.isEqual(o.getDesignItemPointer(n,r),o.getDesignItemPointer(n,a)),s=i.isMobileComponentPropertiesSplit(n,a);t&&o.deleteDesignItem(n,a),s&&o.deletePropertiesItem(n,a)}})}function Q(t,n,i,s,c,p,l){const u=t.pointers.components.getParent(n),g=y.getType(t,n);r.executeHook(r.HOOKS.REMOVE.BEFORE,g,arguments);const f=t.pointers.components.getChildren(n),m=c||d.shouldDeleteComponentFromFullJson(t,n);e.forEachRight(f,function(e){return l(t,e,!0,s,m)});const E=o.getDataItem(t,n),I=h.getPlatformAppConnections(t,n);t.pointers.components.isPage(n)||j(t,n);const S=[t,n,i,s,c,E,u,I];(t.dal.isExist(n)?t.dal:t.dal.full).remove(n),r.executeHook(r.HOOKS.REMOVE.AFTER,g,S),a&&u&&!i&&t.dal.get(u)&&a.updateAnchors(t,u),p(t)}function X(t,n,o,i,r,a){const s=t.pointers.full.components.getAllDisplayedOnlyComponents(n);a=a||e.noop;const p=e.after(s.length,a);e.forEach(s,function(e){!function(e,t,n,o,i,r){if(!i&&!d.shouldDeleteComponentFromFullJson(e,t))return void function(e,t,n){e.dal.remove(t),n&&n(e)}(e,t,r);const a=c.validateComponentToDelete(e,t);if(!a.success)throw new Error(a.error);Q(e,t,n,o,i,r,X)}(t,e,o,i,r,p)})}function Z(t,n,o,i,r,a){const s=t.pointers.full.components.getAllDisplayedOnlyComponents(n);a=a||e.noop;const p=e.after(s.length,a);e.forEach(s,function(e){!function(e,t,n,o,i,r){let a=c.validateComponentTypeToDelete(e,t);if(!a.success)throw new Error(a.error);if(!(a=c.validateComponentExistOnFull(e,t)).success)throw new Error(a.error);Q(e,t,n,o,i,r,Z)}(t,e,o,i,r,p)})}function J(t){return e.isString(t)?t.replace("#",""):null}function ee(e,t){return m.getComponentLayout(e,t)}function te(){return t.guidUtils.getUniqueId("comp","-")}return e.merge({isContainsCompWithType:y.isContainsCompWithType,isRenderedOnSite:y.isRenderedOnSite,getComponentToAddRef:b,getComponentToDuplicateRef:function(e,t,n,o){const i=o||te(),r=e.pointers.components.getViewMode(n);return e.pointers.components.getUnattached(i,r)},add:R,addWithConstraints:function(t,n,o,i,r,a){if(function(t){if(e.isNull(t)||e.isPlainObject(t)&&e.isEmpty(t))return!0;if(!e.isObject(t))throw new Error("Non valid constraints value. Expected null or object");let n=Object.getOwnPropertyNames(t);if(1!==n.length||e.isUndefined(t.under))throw new Error('Constrains should be empty {} or have only property "under"');if(!e.isPlainObject(t.under))throw new Error('Constrains "under" property should have plain object value');if(2!==(n=Object.getOwnPropertyNames(t.under)).length||e.isUndefined(t.under.margin)||e.isUndefined(t.under.comp))throw new Error('Constraints "under" property should has the schema {comp: compRef, margin: number}');if(!e.isNumber(t.under.margin))throw new Error('Constrains "margin" should be a number')}(r),!t.pointers.components.isPage(o))throw new Error("this API works only for page parent for now");if(!E.isSimpleLayout(i.layout))throw new Error("the layout of the added comp should be simple, no fixed, docked, rotated and such");let s=i;if(!e.isEmpty(r)){const n=t.dal.get(t.pointers.getInnerPointer(r.under.comp,"layout"));if(!E.isSimpleLayout(n))throw new Error("you cannot place a component below a fixed, rotated, docked and such comps.");(s=e.clone(i)).layout=e.assign({},s.layout,function(e,t){const n=ee(e,t.under.comp);return{y:n.y+n.height+t.under.margin}}(t,r))}R(t,n,o,s,a)},addAndAdjustLayout:N,duplicate:function(e,t,n,o,i){R(e,t,o,p.serializeComponent(e,n),i)},serialize:p.serializeComponent,remove:function(e,t,n,o){if(e.pointers.components.isMobile(t))throw new Error(c.ERRORS.CANNOT_DELETE_MOBILE_COMPONENT);X(e,t,!1,o,!1,n)},removeFromFull:function(e,t,n,o){if(e.pointers.components.isMobile(t))throw new Error(c.ERRORS.CANNOT_DELETE_MOBILE_COMPONENT);Z(e,t,!1,o,!1,n)},deleteComponent:X,validateRemoval:function(e,t){K(e,t,e.setOperationsQueue.asyncPreDataManipulationComplete.bind(e.setOperationsQueue))},validateRemovalInternal:K,shouldDelayDeletion:q,getContainer:y.getContainer,getAncestors:y.getAncestors,getAncestorsFromFull:y.getAncestorsFromFull,getPage:y.getPage,getSiblings:y.getSiblings,getRepeatedComponents:y.getRepeatedComponents,getChildren:y.getChildren,getChildrenFromFull:y.getChildrenFromFull,getAllJsonChildren:y.getAllJsonChildren,getTpaChildren:y.getTpaChildren,getBlogChildren:y.getBlogChildren,getType:y.getType,getDefinition:y.getDefinition,setComponent:L,isComponentRemovable:function(e,t){if(!l.public.isRemovable(e,t))return!1;const n=y.getType(e,t);return r.executeHook(r.HOOKS.REMOVE.IS_OPERATION_ALLOWED,n,arguments,function(e){return!1===e})},isComponentVisible:function(e,n){const o=e.dal.get(e.pointers.general.getRenderFlags()),i=e.pointers.components.getViewMode(n),r=e.dal.get(e.pointers.general.getIsCompHiddenPointer(n.id,i)),a={compId:n.id,compType:y.getType(e,n),compProperties:y.getPropertiesItem(e,n),compLayout:m.getComponentLayout(e,n),isMobile:I.isMobileView(e),isVisible:l.public.isVisible(e,n),renderFlags:o,isCompHiddenByRenderPlugin:r};return t.componentVisibility.isComponentVisible(a)},isComponentModal:function(e,t){return l.public.isModal(e,t)},isComponentUsingLegacyAppPartSchema:function(e,t){return l.public.isUsingLegacyAppPartSchema(e,t)},isComponentDuplicatable:function(e,t,n){if(!l.public.isDuplicatable(e,t,n))return!1;const o=y.getType(e,t);return r.executeHook(r.HOOKS.DUPLICATE.IS_OPERATION_ALLOWED,o,arguments,function(e){return!1===e})},getChildrenArrayKey:y.getChildrenArrayKey,isPageComponent:y.isPageComponent,generateNewComponentId:te,properties:{update:o.updatePropertiesItem,get:o.getPropertiesItem,mobile:{fork:i.splitMobileComponentProperties,join:i.resetMobileComponentProperties,isForked:i.isMobileComponentPropertiesSplit}},data:{get:o.getDataItem,update:o.updateDataItem},design:{updateDesignItem:function(t,n,i,r){const a=o.getDesignItem(t,n)||{},s=i.background&&!e.isEqual(i.background,a.background),c=o.updateDesignItem(t,n,i,r);return s&&function(t,n){const i=d.getAllCompDesignItems(t,n),r=e.map(i,function(t){return e.pick(o.getMediaRef(t),["uri","videoId","type"])});(!e.every(r,function(t){return e.isEqual(t,e.head(r))})||r.length<=1)&&d.removeDesignBehaviorsFromAllModes(t,n,["media"])}(t,n),c}},layout:{get:ee},isExist:y.isExist,getContainerToAddComponentTo:y.getContainerToAddComponentTo,applyComponentToMode:function(t,n,i){e.forEach(n,function(n){const r=n.compRef;d.removeSingleModeBehaviors(t,r);const a=t.pointers.componentStructure.getModes(r),s=t.dal.full.get(a);e.some(s.overrides,function(t){return e.includes(t.modeIds,i)})?s.overrides=s.overrides.map(function(t){return e.includes(t.modeIds,i)&&(t.isHiddenByModes=!1),t}):s.overrides.push({modeIds:[i],isHiddenByModes:!1}),t.dal.full.set(a,s);const c=e.find(n.compDefinition.modes.overrides,function(t){const o=e(n.compDefinition.activeModes).keys().head();return e.includes(t.modeIds,o)}),p=c&&c.layout?c.layout:n.compDefinition.layout,l=t.pointers.getInnerPointer(r,"layout");t.dal.set(l,p);const g=c&&c.props?c.props:n.compDefinition.props;g&&o.updatePropertiesItem(t,r,g),c&&c.style&&u.style.setId(t,r,c.previousStyleId)})}},{modes:d})}.apply(t,o))||(e.exports=i)},function(e,t){e.exports=n},function(e,t,n){var o,i;o=[n(240)],void 0===(i=function(e){"use strict";return e.createHandler()}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(58),n(49),n(14),n(19),n(27),n(11),n(22),n(4),n(110)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p){"use strict";function l(e,t,n){const o=t.right-t.left+1,i=t.bottom-t.top+1,r={x:t.left+o/2,y:t.top+i/2},a={A:e,B:r},s=e.y-r.y,c=e.x-r.x;a.hypotenuse=Math.pow(Math.pow(c,2)+Math.pow(s,2),.5),a.ABHorizontalXangle=0===c?s>0?Math.PI/2:-Math.PI/2:Math.atan(s/c);const p=n*Math.PI/180;a.ABComponentXangle=a.ABHorizontalXangle-p;const l=Math.abs(a.hypotenuse*Math.cos(a.ABComponentXangle)),u=Math.abs(a.hypotenuse*Math.sin(a.ABComponentXangle));return l<o/2&&u<i/2}function u(e,t,n,o,i,r,s){const c={x:t,y:a.isShowOnFixedPosition(e,s)?n-i:n,margin:o};let p=function(e,t,n){return n(e,t)}(e,s,r);const u=p.rotationInDegrees,d=u>0;d||(p=p.bounding);const g=isNaN(o)?0:o,f=function(e,t,n,o,i){return{left:n-i,top:o-i,right:n+e+i,bottom:o+t+i}}(p.width,p.height,p.x,p.y,g);return d?l(c,f,u):(m=c).x>(y=f).left&&m.x<y.right&&m.y>y.top&&m.y<y.bottom;var m,y}function d(t,n,o,i){const r=t.siteAPI.getSiteMeasureMap(),s=i?t.pointers.full:t.pointers,c=n.reverse();return e(c).map(function(e){return s.components.getChildrenRecursivelyRightLeftRootIncludingRoot(e)}).flattenDeep().filter(o).sortBy(function(n){const o=e.get(r,["zIndex",n.id],0);return a.isFixedPosition(t,n)||a.isAncestorFixedPosition(t,n)?-1:1e3-o}).value()}function g(t,n,o){const i=o?t.dal.full:t.dal;return e.filter(n,function(e){return"platform.components.AppController"===i.get(t.pointers.getInnerPointer(e,"componentType"))})}function f(t,o,a,s){a=a||n.getViewMode(t);const c=s?t.pointers.full:t.pointers,p=c.components.getMasterPage(a),l=c.components.getChildren(p);if(o===p.id)return l;const u=o?[o]:i.getPagesList(t,!1,!0),d=e.map(u,function(e){return c.components.getPage(e,a)});let f;if(o&&t.siteAPI.isPageLandingPage(o)){const e=c.components.getLandingPageComponents(a);return f=g(t,l,s),e.concat(d,f)}if(o&&r.isPopup(t,o))return f=g(t,l,s),d.concat(f);const m=e.findIndex(l,{id:"PAGES_CONTAINER"})+1;return l.splice.apply(l,[m,0].concat(d)),l}function m(t,n,o,i,r,a,c){let l=n,g=o;const m=(y=t,p.getScroll(y));var y;if(c){const e=t.pointers.general.getRenderFlag("siteScale"),n=t.dal.get(e);l+=m.x,g+=m.y/n}const E=e.partial(u,t,l,g,i,m.y,a);r=r||t.siteAPI.getFocusedRootId();const I=f(t,r);let S=d(t,I,E);return r===t.siteAPI.getFocusedRootId()&&(S=e.reject(S,function(e){return!s.isRenderedOnSite(t,e)})),S}function y(e,t,n,i){if(!t)return null;n=n||e.siteAPI.getCurrentUrlPageId(),i=i||o.getViewMode(e);let r,a=e.pointers.components.getPage(n,i);return a&&(r=e.pointers.components.getComponent(t,a))?r:(a=e.pointers.full.components.getPage(n,i))&&e.pointers.full.components.getComponent(t,a)}return{getComponentsAtXYRelativeToStructure:function(e,t,n,o,i){return m(e,t,n,o,i,a.getCompLayoutRelativeToStructure,!1)},getComponentsAtXYRelativeToScreen:function(e,t,n,o,i){return m(e,t,n,o,i,a.getCompLayoutRelativeToScreen,!0)},getComponentByType:function(t,n,o){const i=e.isArray(n)?n:[n],r=o?[o]:f(t,void 0,void 0,!0);let a=function(t,n){return e(n).map(function(e){return t.pointers.full.components.getChildrenRecursively(e)}).flattenDeep().value()}(t,r);return a=a.concat(r),e.filter(a,function(n){const o=t.dal.full.get(t.pointers.getInnerPointer(n,"componentType"));return e.includes(i,o)})},getAllComponents:function(e,t,n,o){return d(e,f(e,t,o),n)},getAllComponentsFromFull:function(e,t,n,o){return d(e,f(e,t,o,!0),n,!0)},getComponentsUnderAncestor:function(e,t){return e.pointers.components.getChildrenRecursively(t)},getComponentById:y,getSiteHeader:function(e,t){return y(e,"SITE_HEADER","masterPage",t)},isDescendantOfComp:function(e,t,n){return n&&e.pointers.full.components.isDescendant(t,n)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(12),n(150),n(42),n(2),n(9),n(158),n(14),n(61),n(27),n(6),n(10)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l,u,d){"use strict";const g={};function f(e,t){return a.isContainer(a.getComponentType(e,t))||e.pointers.components.isMasterPage(t)}function m(t,n,o,i){const r=f(n,i)&&(function(e,t,n,o){const i=a.getComponentType(t,o),r=e?n.componentType:a.getComponentType(t,n),s=v(t,n,e),c=v(t,o),p=a.isHeaderOrFooterOrPageOrMasterPage(i),l=a.isNonContainableFullWidth(r);return!s||c&&!l||p}(t,n,o,i)||function(e,t,n,o){const i=a.getComponentType(t,o),r=e?n.componentType:a.getComponentType(t,n);return a.isComponentParentTypeMatchesComponentChildType(i,r)}(t,n,o,i)||function(e,t){const n=a.getComponentType(e,t);return l.isPopupContainer(n)}(n,i))&&!function(t,n,o){let i=t.pointers.components.getParent(o);for(;i;){if(e.isEqual(i,n))return!0;i=t.pointers.components.getParent(i)}return!1}(n,o,i);return t?r:r&&function(e,t,n){if(e.pointers.components.getPageOfComponent(t).id!==e.pointers.components.getPageOfComponent(n).id){if(!e.pointers.components.isInMasterPage(t)&&!e.pointers.components.isInMasterPage(n))return!1;if(c.isMobileView(e))return!1}return!0}(n,o,i)}function y(e,t,n,o){return o?m(e,t,n,o):!(c.isMobileView(t)||v(t,n,e)||D(t,n))}g[s.MOVE_DIRECTIONS]=u.HOOKS.METADATA.MOVE_DIRECTIONS,g[s.REMOVABLE]=u.HOOKS.METADATA.REMOVABLE,g[s.DUPLICATABLE]=u.HOOKS.METADATA.DUPLICATABLE,g[s.CAN_REPARENT]=u.HOOKS.METADATA.CAN_REPARENT,g[s.ROTATABLE]=u.HOOKS.METADATA.ROTATABLE,g[s.FIXED_POSITION]=u.HOOKS.METADATA.FIXED_POSITION,g[s.RESIZABLE_SIDES]=u.HOOKS.METADATA.RESIZABLE_SIDES,g[s.CONTAINABLE]=u.HOOKS.METADATA.CONTAINABLE,g[s.LAYOUT_LIMITS]=u.HOOKS.METADATA.LAYOUT_LIMITS;const E={containable:y.bind(null,!1),containableByStructure:y.bind(null,!0),container:f,canContain:f,canContainByStructure:f,shouldKeepChildrenInPlace:!0,disableable:!1,isRepeater:!1,isRepeatable:!0,isContainCheckRecursive:!0,moveDirections:[r.MOVE_DIRECTIONS.HORIZONTAL,r.MOVE_DIRECTIONS.VERTICAL],resizableSides:[r.RESIZE_SIDES.TOP,r.RESIZE_SIDES.LEFT,r.RESIZE_SIDES.BOTTOM,r.RESIZE_SIDES.RIGHT],rotatable:!1,flippable:!1,anchors:{to:{allow:!0,lock:r.ANCHORS.LOCK_CONDITION.THRESHOLD},from:{allow:!0,lock:r.ANCHORS.LOCK_CONDITION.THRESHOLD}},canBeFixedPosition:!0,canBeStretched:!1,showMarginsIndicator:!1,removable:!0,alignable:function(e,t){const n=e.dal.get(e.pointers.getInnerPointer(t,"layout"));return!(n.fixedPosition||n.docked)},duplicatable:function(e){return!c.isMobileView(e)},hiddenable:!0,minimalChildrenNumber:0,maximumChildrenNumber:Number.MAX_VALUE,collapsible:!0,dockable:!0,fullWidth:function(e,t){const o=e.pointers.getInnerPointer(t,"layout"),i=e.dal.get(o);return n.dockUtils.isHorizontalDockToScreen(i)||a.isLegacyFullWidthContainer(e,t)},fullWidthByStructure:function(e,t){return n.dockUtils.isHorizontalDockToScreen(t.layout)||a.isLegacyFullWidthContainerByType(t.componentType)},styleCanBeApplied:!1,groupable:function(e,t){return P(e,s.CONTAINABLE,t)},enforceContainerChildLimitsByWidth:!0,enforceContainerChildLimitsByHeight:!0,nickname:a.getComponentNickname,layoutLimits:{minWidth:n.siteConstants.COMP_SIZE.MIN_WIDTH,minHeight:n.siteConstants.COMP_SIZE.MIN_HEIGHT,maxWidth:n.siteConstants.COMP_SIZE.MAX_WIDTH,maxHeight:n.siteConstants.COMP_SIZE.MAX_HEIGHT,aspectRatio:null},isProportionallyResizable:function(e,t){return G(e,t)&&Y(e,t)},ignoreChildrenOnProportionalResize:!1,enforceMaxDimensionsOnProportionalResize:!1,resizeOnlyProportionally:!1,isVisible:!0,enforceResizableCorners:!1,forceMaintainIDsOnSerialize:!1,canReparent:!0};let I;const S=(t,n)=>{const i=e.get(o,[t,"isExternal"],!1),r=e.get(o,[t,n]);return i&&!e.isUndefined(r)};function h(t,n){const i=e.get(o,[t,n]);return e.isUndefined(i)?E[n]:i}function P(t,n,o,...i){const r=a.getComponentType(t,o);let s=h(r,n);const c=[o,...i];if(e.isFunction(s)){let e;if(S(r,n)){if(!I)return E[n];e=I(t,o)}else e=t;const i=[e].concat(c);s=s.apply(this,i)}return g[n]?u.executeHookAndUpdateValue(t,g[n],r,c,s):s}function A(t,n,o,...i){let r=h(o.componentType,n);return e.isFunction(r)&&(r=r(t,o,...i)),r}function T(e,t){return P(e,s.RESIZABLE_SIDES,t)}function v(e,t,n){return n?A(e,s.FULL_WIDTH_BY_STRUCTURE,t):P(e,s.FULL_WIDTH,t)}function C(e,t){return P(e,s.CONTAINER,t)}function _(e,t){return!!P(e,s.MOVE_DIRECTIONS,t).length}function O(t){return e.isObject(t)&&0!==t.rotationInDegrees}function D(e,t){const o=e.pointers.getInnerPointer(t,"layout"),i=e.dal.get(o);return n.dockUtils.isHorizontalDockToScreen(i)}function w(e,t){const n=a.getComponentType(e,t);return a.isLegacyFullWidthContainer(e,t)||l.isPopupContainer(n)}function M(e,t,n,o){let i,r=!0;const a=n;for(;n&&r;)i=P(e,s.IS_CONTAIN_CHECK_RECURSIVE,n),r=o(e,t,n,a),n=i?e.pointers.components.getParent(n):null;return r}function b(e,t,n,o){return P(e,s.CAN_CONTAIN,n,t,o)}const R=(e,t)=>P(e,s.IS_REPEATER,t),N=e=>h(e,s.IS_REPEATABLE),x=(t,n)=>{const o=t.pointers.full.components.getChildren(n);return e.size(o)>0},L=(t,n)=>{const o=((e,t)=>P(e,s.IS_REPEATABLE,t))(t,n),i=t.pointers.components.getChildren(n);return o&&(()=>e.every(i,e=>L(t,e)))()},B=(e,t,n)=>{const o=R(e,n);return(!o||!x(e,n))&&(!(o||U(e,n))||L(e,t))};function F(e,t){return P(e,s.CAN_REPARENT,t)}function k(t,o,i,r){if(function(t,n,o,i){if(i.id!==o.id)return!1;const r=R(t,i);if(r&&x(t,i))return!0;if(r||U(t,i)){const t=a.getChildrenTypesDeep([n]);return!e.every(t,N)}return!1}(t,o,i,r))return!1;let c=P(t,s.CAN_CONTAIN_BY_STRUCTURE,i,o,r);n.dockUtils.isHorizontalDockToScreen(o.layout)&&(c=c&&w(t,i));const p=A(t,s.CONTAINABLE_BY_STRUCTURE,o,i);return Boolean(c&&p)}function U(e,n){return t.displayedOnlyStructureUtil.isDisplayedComponent(n.id)}function H(e,t){return P(e,s.ENFORCE_CONTAINER_CHILD_LIMITS_BY_WIDTH,t)}function V(e,t){return P(e,s.ENFORCE_CONTAINER_CHILD_LIMITS_BY_HEIGHT,t)}function W(t,n){const o=e.defaults(P(t,s.LAYOUT_LIMITS,n),E.layoutLimits);return!e.isNull(o.aspectRatio)}function G(t,n){return!!e.intersection(T(t,n),[r.RESIZE_SIDES.LEFT,r.RESIZE_SIDES.RIGHT]).length||W(t,n)}function Y(t,n){return!!e.intersection(T(t,n),[r.RESIZE_SIDES.TOP,r.RESIZE_SIDES.BOTTOM]).length||W(t,n)}return{init(e){I=e},public:{isContainable:function(e,n,o){return!!(o&&C(e,o)&&B(e,n,o))&&!(!F(e,n)&&function(e,t,n){return!e.pointers.isSamePointer(e.pointers.components.getParent(t),n)}(e,n,o))&&P(e,s.CONTAINABLE,n,o)&&M(e,n,o,b)&&function(e,n,o){return!c.isMobileView(e)||!U(0,n)&&!U(0,o)||t.displayedOnlyStructureUtil.getItemId(n.id)===t.displayedOnlyStructureUtil.getItemId(o.id)}(e,n,o)&&(!D(e,n)||w(e,o))},isContainableByStructure:function(e,t,n){return M(e,t,n,k)},isContainer:C,isAlignable:function(e,t){return P(e,s.ALIGNABLE,t)&&_(e,t)},isMovable:_,isHorizontallyMovable:function(t,n){return e.includes(P(t,s.MOVE_DIRECTIONS,n),r.MOVE_DIRECTIONS.HORIZONTAL)},isVerticallyMovable:function(t,n){return e.includes(P(t,s.MOVE_DIRECTIONS,n),r.MOVE_DIRECTIONS.VERTICAL)},getMobileConversionConfig:function(t,n,i){const a=n.componentType||n.documentType,c=e.get(o,[a,s.MOBILE_CONVERSION_CONFIG]),p=e.mapValues(c,function(o){return e.isFunction(o)?o(t,n,i):o});let l=e.get(o,[a,s.LAYOUT_LIMITS]);if(e.isFunction(l)){const e=t.pointers.components.getPage(i,r.VIEW_MODES.DESKTOP),o=t.pointers.components.getComponent(n.id,e);l=o&&t.dal.isExist(o)?l(t,o):l}const u=e.get(o,[a,s.HIDDENABLE],!0);return e.defaults(p,l?{layoutLimits:l}:{},{hiddenable:u})},getMobileConversionConfigByName:function(t,n,i,r){const a=n.componentType||n.documentType,c=e.get(o,[a,s.MOBILE_CONVERSION_CONFIG,i]);return e.isFunction(c)?c(t,n,r):c},getMinimalChildrenNumber:(e,t)=>P(e,s.MINIMAL_CHILDREN_NUMBER,t),allowedToContainMoreChildren(e,t){const n=P(e,s.MAXIMUM_CHILDREN_NUMBER,t);return n===Number.MAX_VALUE||n>e.pointers.components.getChildren(t).length},getDefaultMobileProperties:function(t,n,o){const i=h(n.componentType,s.DEFAULT_MOBILE_PROPERTIES);return e.isFunction(i)?i(t,n,o):i},getResizableSides:function(e,t){return T(e,t)},isHorizontallyResizable:G,isVerticallyResizable:Y,isProportionallyResizable:(e,t)=>P(e,s.IS_PROPORTIONALLY_RESIZABLE,t),isIgnoreChildrenOnProportionalResize:function(e,t){return P(e,s.IGNORE_CHILDREN_ON_PROPORTINAL_RESIZE,t)},enforceMaxDimensionsOnProportionalResize:function(e,t){return P(e,s.ENFORCE_MAX_DIM_ON_PROPORTIONAL_RESIZE,t)},isResizable:function(e,t){return!!T(e,t).length},isRotatable:function(e,t){return P(e,s.ROTATABLE,t)&&!function(e,t){const o=e.pointers.getInnerPointer(t,"layout"),i=e.dal.get(o);return n.dockUtils.isStretched(i)}(e,t)},isFlippable:function(e,t){return P(e,s.FLIPPABLE,t)},isGroupable:function(e,t){return P(e,s.GROUPABLE,t)&&F(e,t)},canBeFixedPosition:function(e,t){return P(e,s.FIXED_POSITION,t)},isModal:function(e,t){return!!P(e,s.MODAL,t)},isMobileOnly:function(e,t){return!!P(e,s.MOBILE_ONLY,t)},isUsingLegacyAppPartSchema:function(e,t){return!!P(e,s.USING_LEGACY_APP_PART_SCHEMA,t)},canBeStretched:function(e,t){const n=e.pointers.components.getPageOfComponent(t);return!(l.isPopup(e,n.id)&&!l.isPopupFullWidth(e,n))&&P(e,s.CAN_BE_STRETCHED,t)&&!function(e,t){const n=e.pointers.getInnerPointer(t,"layout");return O(e.dal.get(n))}(e,t)},canBeStretchedByStructure:function(e,t){return A(e,s.CAN_BE_STRETCHED,t)&&!O(t.layout)},resizeOnlyProportionally:W,enforceResizableCorners:function(e,t){return P(e,s.ENFORCE_RESIZABLE_CORNERS,t)},isRepeatedComponent:U,isEnforcingContainerChildLimitations:function(e,t){return H(e,t)||V(e,t)},isEnforcingContainerChildLimitationsByWidth:H,isEnforcingContainerChildLimitationsByHeight:V,isFullWidth:function(e,t){return v(e,t,!1)},isFullWidthByStructure:function(e,t){return v(e,t,!0)},isRemovable:function(e,t){return P(e,s.REMOVABLE,t)},isDuplicatable:function(e,t,n){return P(e,s.DUPLICATABLE,t,n)},isStyleCanBeApplied:function(e,t){return P(e,s.STYLE_CAN_BE_APPLIED,t)},getLayoutLimits(t,n,o){const i=e.defaults(P(t,s.LAYOUT_LIMITS,n,o),E.layoutLimits),r=t.pointers.components.isMobile(n)&&p.isWidgetPage(t,e.get(t.pointers.components.getParent(n),"id"));return i.maxWidth=Math.min(i.maxWidth,E.layoutLimits.maxWidth,r?320:Number.MAX_SAFE_INTEGER),i.maxHeight=Math.min(i.maxHeight,E.layoutLimits.maxHeight),i.minWidth=Math.max(i.minWidth,E.layoutLimits.minWidth),i.minHeight=Math.max(i.minHeight,E.layoutLimits.minHeight),i},isHiddenable:(e,t)=>P(e,s.HIDDENABLE,t),isCollapsible:(e,t)=>P(e,s.COLLAPSIBLE,t),isDockable:(e,t)=>P(e,s.DOCKABLE,t),isDisableable:(e,t)=>!!P(e,s.DISABLEABLE,t),isAnchorableFrom:function(t,o){const i=a.getComponentType(t,o),r=n.getComponentsAnchorsMetaData();return e.get(r[i],"from.allow",r.default.from.allow)},isAnchorableTo:function(t,o){const i=a.getComponentType(t,o),r=n.getComponentsAnchorsMetaData();return e.get(r[i],"to.allow",r.default.to.allow)},isVisible:(e,t)=>P(e,s.VISIBLE,t),isPotentialContainerForScreenWidthComp:(e,t)=>w(e,t),canReparent:F},getShouldKeepChildrenInPlace:function(e,t){return P(e,s.SHOULD_KEEP_CHILDREN_IN_PLACE,t)},getAnchorableHeight:function(e,t){const o=e.dal.get(e.pointers.getInnerPointer(t,"layout.height"));if(!C(e,t))return o;const i=function(e,t){const n=e.dal.get(e.pointers.getInnerPointer(t,"styleId")),o=e.pointers.components.getPageOfComponent(t).id;return n?d.styles.get(e,n,o):null}(e,t),r=i&&i.skin||e.dal.get(e.pointers.getInnerPointer(t,"skin"));return o-n.layoutAnchors.getNonAnchorableHeightForSkin(r,i)},getDefaultNickname:function(e,t){return P(e,s.NICKNAME,t)},shouldForceMaintainIDsOnSerialize:(e,t)=>P(e,s.FORCE_MAINTAIN_IDS_ON_SERIALIZE,t),getComponentType:a.getComponentType}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(12),n(34),n(107),n(27),n(16),n(248),n(3),n(51)],void 0===(i=function(e,t,n,o,i,r,a,s,c){"use strict";const p="wysiwyg.viewer.components.WSiteStructure",l=["wysiwyg.viewer.components.SiteSegmentContainer","wysiwyg.viewer.components.FooterContainer","wysiwyg.viewer.components.HeaderContainer","wysiwyg.viewer.components.PagesContainer"],u={"wysiwyg.viewer.components.ScreenWidthContainer":!0,"wysiwyg.viewer.components.StripContainerSlideShow":!0,"wysiwyg.viewer.components.StripContainerSlideShowSlide":!0,"wysiwyg.viewer.components.StateStrip":!0,"wysiwyg.viewer.components.StateStripState":!0},d=["wysiwyg.viewer.components.FooterContainer","wysiwyg.viewer.components.HeaderContainer","mobile.core.components.Page","core.components.Page","wixapps.integration.components.AppPage",p],g=["wysiwyg.viewer.components.BoxSlideShowSlide","wysiwyg.viewer.components.BoxSlideShow","wysiwyg.viewer.components.StateBoxState","wysiwyg.viewer.components.StateBox","wysiwyg.viewer.components.StateStripState","wysiwyg.viewer.components.StateStrip","wysiwyg.viewer.components.StripContainerSlideShowSlide","wysiwyg.viewer.components.StripContainerSlideShow","wysiwyg.viewer.components.StripColumnsContainer","wysiwyg.viewer.components.HoverBox","wysiwyg.common.components.anchor.viewer.Anchor","wysiwyg.common.components.verticalanchorsmenu.viewer.VerticalAnchorsMenu","wysiwyg.viewer.components.tpapps.TPAWidget","wysiwyg.viewer.components.tpapps.TPASection","wysiwyg.viewer.components.tpapps.TPAGluedWidget","wysiwyg.viewer.components.tpapps.TPAMultiSection","wixapps.integration.components.AppPart","platform.components.AppWidget","wixapps.integration.components.AppPart2"],f={isSiteStructure:e=>e===p,isSiteSegment:t=>e.includes(l,t),isContainer:e=>r.services.isContainer(e),isLegacyFullWidthContainer(t,o){const i=n.getComponentType(t,o),r=a[i];return e.isFunction(r)?r(t,o):!!r},isLegacyFullWidthContainerByType:t=>!(!a[t]||e.isFunction(a[t])),isHeaderOrFooterOrPageOrMasterPage:t=>e.includes(d,t),isComponentSuitableForNonRenderingState:t=>!e.includes(g,t),isPopupPageOrPopupContainer:(e,t)=>i.isPopup(e,t.id)||"wysiwyg.viewer.components.PopupContainer"===n.getComponentType(e,t),isComponentParentTypeMatchesComponentChildType:(e,t)=>o.isSlideShowComponent(e)&&o.isSlideComponent(t)&&o.getMatchingChildSlideType(e)===t,isNonContainableFullWidth:t=>!(!u[t]||e.isFunction(u[t])),getComponentType:n.getComponentType,getComponentNickname(t,n){const o=t.dal.full.get(t.pointers.getInnerPointer(n,"componentType"));if(!o)return"";const i=e.get(r.services.schemasService.getDefinition(o),"nickname");return i||e.camelCase(e.last(o.split(".")))},getChildrenTypesDeep:(t=[])=>t.length?e.flatMap(t,e=>{const t=e.componentType,n=f.getChildrenTypesDeep(e.components);return[t].concat(n)}):[],containableByFullWidthPopup(e,t,n){const o=e.pointers.components.getPageOfComponent(n);return!(i.isPopup(e,o.id)&&!i.isPopupFullWidth(e,o))},notContainableByPopup(e,t,n){const o=e.pointers.components.getPageOfComponent(n);return!i.isPopup(e,o.id)},isMaintainSvgAspectRatio(e,t){const n=e.dal.get(t),o=e.pointers.components.getPageOfComponent(t),i=e.pointers.data.getPropertyItem(n.propertyQuery,o.id);return"fit"===e.dal.get(i).displayMode},isMaintainWPhotoAspectRatio(e,n,o){const{STRETCH:i,LEGACY_FULL:r}=t.imageTransform.fittingTypes,a=e.pointers.data.getPropertyItem(n.propertyQuery,o),{autoFill:s,displayMode:c}=e.dal.get(a)||{};return!s&&c!==i&&c!==r},getControllerNickname(t,n){const{applicationId:o,controllerType:i}=s.getDataItem(t,n)||{},{nickname:r}=c.getControllerStageData(t,n.id,i,o)||{};return e.camelCase(r||i)}};return f}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(3),n(368),n(369),n(370),n(12),n(1),n(26),n(16),n(2),n(53),n(159)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l,u){"use strict";const d=r.fonts,g=c.services.themeValidationHelper,f=c.services.schemasService,m=r.constants.DATA_TYPES,y="THEME_DATA",E=[];function I(t,n,o,i){const r=e.omit(n,["id"]);return r.styleType="custom",T(t,r,null,o,i)}function S(t,n,o,i,r){_(n,o);const a=e.omit(o,["styleType","type"]),s=t.pointers.data.getThemeItem(n,i),c=t.dal.get(s),l=e.assign(c||{},a),u=e.get(c,"styleType")||e.get(o,"styleType");!function(e,t,n,o){const i=o&&e.runtimeConfig.stylesPerPage&&t===p.STYLES.TYPES.CUSTOM;n.type=i?p.STYLES.COMPONENT_STYLE:p.STYLES.TOP_LEVEL_STYLE}(t,u,l,r),l.styleType=u,l.id=n,t.dal.set(s,l),t.setOperationsQueue.executeAfterCurrentOperationDone(G.bind(this,{type:"STYLE",values:n}))}function h(e,t,n,o="masterPage"){S(e,t,n,o,!0)}const P=e.once((...e)=>r.log.warnDeprecation(...e));const A=["system","custom"];function T(e,t,n,o=p.MASTER_PAGE_ID,i=!1){const r=C(e,t,n);return v(e,r,r,o,i),r.id}function v(t,n,o,i=p.MASTER_PAGE_ID,a=!1){i!==p.MASTER_PAGE_ID&&"system"===e.get(n,"styleType")?(i=p.MASTER_PAGE_ID,r.log.warnVerbose(`You tried to add a system style with page ${i}. \nPlease update API call to use the master page`)):i=t.runtimeConfig.stylesPerPage?i:p.MASTER_PAGE_ID,_(n.id,n);const s=a?t.dal.full:t.dal,c=t.pointers.data.getThemeItem(n.id,i);s.set(c,n)}function C(n,o,i){if(!e.includes(A,o.styleType))throw new Error(`Unable to create a style without a styleType. styleType must be one of ${JSON.stringify(A)}`);if("system"===o.styleType&&!function(e){return l(e)}(i))throw new Error(`Unable to create a system style whose id - ${i}, is not in componentDefinitionMap`);return function(n,o,i){const r=n.runtimeConfig.stylesPerPage&&o.styleType===p.STYLES.TYPES.CUSTOM?p.STYLES.COMPONENT_STYLE:p.STYLES.TOP_LEVEL_STYLE,a=t.createStyleItemByType(r);return e.merge(a,o),a.compId="",a.pageId="",a.id=i||u.getStyleIdToAdd(),a.metaData={isPreset:!1,schemaVersion:"1.0",isHidden:!1},a.style=a.style||{properties:{},propertiesSource:{}},a.type=r,a}(n,o,i)}function _(e,t){if(!e||!t)throw new Error(`missing arguments - styleId: ${e}, styleValue: ${t}`);const n=function(e){if("object"!=typeof e)return{success:!1,error:"received style value is not an object"};if(!e.skin)return{success:!1,error:"received style did not contain a skin property"};if(!e.type)return{success:!1,error:"received style did not contain a type property"};return{success:!0}}(t);if(!n.success)throw new Error(n.error)}function O(e){return H(e,"font")}function D(t){function n(e){let t;if(0!==e.indexOf("#")){const n=0===e.indexOf("r")?e:`rgba(${e})`;t=new o(n)}else t=new o(e);return t.hexString()}return e.isArray(t)?e.map(t,n):e.isObject(t)?e.mapValues(t,n):n(t)}function w(e){return D(H(e,"color"))}function M(e,t){const n=V(e,"color",t);return n&&D(n)}const b=e.once((...e)=>r.log.warnDeprecation(...e));function R(e,t,n=p.MASTER_PAGE_ID,o){const i=o?e.dal.full:e.dal,r=e.pointers.data.getThemeItem(t,n);return i.get(r)}const N=(e,t,n=p.MASTER_PAGE_ID)=>R(e,t,n,!1),x=t=>t.dal.getKeys(t.pointers.page.getAllPagesPointer()).reduce((n,o)=>e.assign(n,e.defaults({},n,t.dal.get(t.pointers.general.getAllStylesInPage(o)))),{}),L=e.once((...e)=>r.log.warnDeprecation(...e));const B=t=>e(t.pointers.page.getAllPagesPointer()).thru(t.dal.getKeys).reduce((e,n)=>e.concat(t.dal.getKeys(t.pointers.general.getAllStylesInPage(n))),[]),F=e.once((...e)=>r.log.warnDeprecation(...e));function k(e,t,n){const o=e.pointers.data.getThemeItem(y,p.MASTER_PAGE_ID);return e.pointers.getInnerPointer(o,[t,n])}function U(t,n,o){const i=H(t,n);!function(t,n,o,i){e.forEach(n,function(e,r){if(!o[r])throw new Error(`Invalid Key ${r}`);if("color"===i){const t=function(e){if(e){const t=/^(rgb|rgba)\(([0-9,\\.]*)\)$/.exec(e);e=t&&t[2]||e}return e}(e),o=g.validateColor(t);if(!o)throw new Error(`color value isn't valid ${e} .Please supply or hex/rgb string`);n[r]=t}"font"===i&&function(e,t){const n=g.validateFont(t,w(e));if(n.isValid)return!0;if(n.error)throw n.error}(t,e)})}(t,o,i,n),e.forEach(o,function(e,o){const i=W(o),r=k(t,n,i);t.dal.set(r,e)})}function H(t,n){const o={},i=t.pointers.data.getThemeItem(y,p.MASTER_PAGE_ID),r=t.pointers.getInnerPointer(i,n),a=t.dal.get(r);return e.forEach(a,function(e,t){o[`${n}_${t}`]=e}),o}function V(t,n,o){const i=W(o);if(!e.isNaN(i)){const e=k(t,n,i);return t.dal.get(e)}return e.template("Non valid <%=type %> value <%=name %>")({type:n,name:o})}function W(e){return parseInt(e.split("_")[1],10)}function G(t){e(E).filter("callback").invokeMap("callback",t).value()}const Y="skins.viewer.svgshape.SvgShapeDefaultSkin";function z(t,o){return e.includes(o,"svgshape.")?n[Y]:n[o]}const K={pl:["latin-ext","latin"],ru:["cyrillic","latin"],ja:["japanese","latin"],ko:["korean","latin"]};return{colors:{update:function(e,t){if("object"!=typeof t)throw new Error(`Value "${t}" is not valid.Param should be an object`);U(e,"color",t),e.setOperationsQueue.executeAfterCurrentOperationDone(G.bind(this,{type:"COLOR",values:t}))},get:M,getAll:w,getCustomUsedInSkins:function(t,n){const o=x(t),i=function(t,n){const o=t.pointers.page.getAllPagesPointer(),i=t.dal.getKeys(o);return e.reduce(i,function(o,i){const r=t.pointers.data.getDesignItemsWithPredicate(n,i);return e.forEach(r,function(e){o.push(t.dal.get(e))}),o},[])}(t,function(e){return"BackgroundMedia"===e.type}),r=(a=i,e.reduce(a,function(t,n){return e(n).pickBy(function(t,o){return n[o]&&"color"===e.get(f.getSchema(m.design,"BackgroundMedia").properties[o],"format")}).forOwn(function(e){t[e]=e}),t},{}));var a;const s=function(t,n){return e.transform(n,function(t,n){const o=z(0,n.skin);if(n.type!==p.STYLES.FLAT_THEME&&o){const i=n.style&&n.style.properties||{};e(i).pickBy(function(t,n){return o[n]&&e.includes(o[n].type,"COLOR")}).forOwn(function(e){t[e]=e})}},{})}(0,o),c=e.merge(r,s);let l=e.filter(c,t=>!e.includes(t,"color"));if(l=D(l),n){const n=w(t);l=e.difference(l,n)}return l},getColorPresets:function(){return i},getCssString:function(e){const t=e.pointers.data.getThemeItem("THEME_DATA",p.MASTER_PAGE_ID),n=e.pointers.getInnerPointer(t,"color"),o=e.dal.get(n);return r.cssUtils.getColorsCssString(o)},render:function(t,n){if(e.includes(n,"color"))return M(t,n);if("#"===n.charAt(0)||e.includes(n,"rgb"))return n;const o=n.split(",");return 3===o.length?`rgb(${n})`:4===o.length?`rgba(${n})`:n}},fonts:{update:function(e,t){if("object"!=typeof t)throw new Error(`Value "${t}" is not valid.Param should be an object`);U(e,"font",t),e.setOperationsQueue.executeAfterCurrentOperationDone(G.bind(this,{type:"FONT",values:t}))},get:function(e,t){return V(e,"font",t)},getAll:O,getMap:function(t){const n=w(t),o=O(t);return e.transform(o,function(e,t,i){return e[i]=d.fontUtils.parseStyleFont(i,o,n),e},{})},getCharacterSet:function(t){const n=t.pointers.data.getDataItemFromMaster("masterPage");let o=t.dal.get(n).characterSets;return o?e.includes(o,"latin")||o.push("latin"):o=["latin"],o},getLanguageCharacterSet:function(e,t){if(t)return K[t]},getCharacterSetByGeo:function(t){let n=[];const o=s.getGeo(t);return o&&a.countryCodes.countries[o]&&(n=e.clone(a.countryCodes.countries[o].characterSets)),n.length>0&&!e.includes(n,"latin")?n.push("latin"):n=["latin"],n},updateCharacterSet:function(t,n){if(e.isArray(n)){const e=t.pointers.data.getDataItemFromMaster("masterPage"),o={characterSets:n};t.dal.merge(e,o)}},getThemeStyles:function(e){const t=e.pointers.data.getThemeItem("THEME_DATA",p.MASTER_PAGE_ID),n=e.pointers.getInnerPointer(t,"color"),o=e.pointers.getInnerPointer(t,"font"),i=e.dal.get(n),r=e.dal.get(o);return d.fontUtils.getThemeFontsCss(r,i)}},styles:{updateAndWarn:function(t,n,o,i="masterPage"){_(n,o);const a=N(t,n,i);"custom"===e.get(a,"styleType")&&P(`You tried to update a custom style with id ${n}. \nPlease use components.style.update(compPointer, style) instead. theme.style.update should only be used for theme styles`);const s=t.pointers.data.getThemeItem(n,i);if(t.dal.isExist(s)){const e=t.pointers.data.getPageIdOfData(s);e!==i&&r.log.warnVerbose(`You tried to update a style with id ${n} and page ${i}, but the style belongs to page ${e}. Please update API call to use the correct page`)}else P(`You are trying to update style with id ${n} and page ${i}, but the style does not exist. Previously, a style would be created with this id - but this is no longer supported and will be deprecated soon.`);return h(t,n,o,i)},update:h,updateWithoutChangingType:function(e,t,n,o="masterPage"){S(e,t,n,o,!1)},createAndAddStyleItem:(e,t,n,o=p.MASTER_PAGE_ID)=>T(e,t,n,o,!1),addStyleItem:(e,t,n,o=p.MASTER_PAGE_ID)=>v(e,t,0,o,!1),createStyleItemToAdd:C,getAndWarn:function(t,n,o=p.MASTER_PAGE_ID){const i=N(t,n,o);return"custom"===e.get(i,"styleType")&&b(`You tried to get a custom style with id ${n} and page ${o}. \nPlease use components.style.get(compPointer) instead. theme.style.get should only be used for theme styles`),i},get:N,getAll:(e,t)=>t?((e,t)=>e.dal.get(e.pointers.general.getAllStylesInPage(t)))(e,t):(L("You tried to get all styles without providing pageId, which causes styles from all pages to be returned. Please use theme.styles.getAllFromAllPages instead"),x(e)),getAllFromAllPages:x,getAllIds:(e,t)=>t?((e,t)=>e.dal.getKeys(e.pointers.general.getAllStylesInPage(t)))(e,t):(F("You tried to get all styles Ids without providing pageId, which causes styles Ids from all pages to be returned. Please use theme.styles.getAllIdsFromAllPages instead"),B(e)),getAllIdsFromAllPages:B,fork:(e,t,n)=>I(e,t,n,!1),remove:function(e,t,n){e.dal.remove(e.pointers.data.getThemeItem(t,n))},internal:{addStyleItem:v,createAndAddStyleItem:T,get:R,fork:I}},skins:{getComponentSkins:function(e,t){return c.services.getComponentSkins(t)},getSkinDefinition:function(t,n){return e.clone(z(0,n))}},getSchema:function(){return e.cloneDeep(f.getSchema(m.data,"FlatTheme").properties)},events:{onChange:{addListener:function(e,t){if("function"!=typeof t)throw new Error(`Value "${t}" is not valid.Param should be function`);const n=E.length;return E.push({listenerId:n,callback:t}),n},removeListener:function(t,n){if(e.isNil(n))throw new Error(`missing argument - listenerId: ${n}`);const o=e.findIndex(E,{listenerId:n});if(-1===o)throw new Error(`Value "${n}" is not valid.No listener with this id exist`);E.splice(o,1)},executeListeners:G}},FONT_POSSIBLE_VALUES:g.FONT_POSSIBLE_VALUES}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(12),n(83),n(62),n(67),n(8),n(22),n(109),n(24),n(41),n(160),n(2),n(3),n(388),n(165),n(6),n(90),n(110),n(86),n(166),n(85),n(48),n(36)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l,u,d,g,f,m,y,E,I,S,h,P,A){"use strict";const T=["x","y","width","height","rotationInDegrees","scale","fixedPosition","aspectRatio"],v=["bounding","anchors"],C="ANY",_={x:C,y:C,width:C,height:C,anchors:C,bounding:C,rotationInDegrees:0,scale:1,fixedPosition:!1},O={"wysiwyg.viewer.components.StripColumnsContainer":!0,"wysiwyg.viewer.components.Column":!0};function D(t,n,o){const i=t.pointers.components.getParent(n);if(!t.pointers.components.isPage(i)){let i=a.getPage(t,n);i=a.getContainerToAddComponentTo(t,i);const r=o?function(t,n,o){const i=l.getCompLayoutRelativeToStructure(t,n),r=l.getCompLayoutRelativeToStructure(t,o),a=e.pick(i,["x","y"]);return a.y-=r.y,a}(t,n,i):null;te(t,n,i),o&&H(t,n,r)}}function w(n,o,i){const r=n.pointers.getInnerPointer(o,"layout");i=i||n.dal.get(r);const a=p.getPositionAndSize(n,o,e.omit(i,"aspectRatio")),s=t.layout.calcAspectRatio(a.width,a.height),c=n.pointers.getInnerPointer(r,"aspectRatio");n.dal.set(c,s)}function M(e,n){const o=e.pointers.getInnerPointer(n,"layout"),i=e.dal.get(o);return t.layout.isAspectRatioOn(i)}const b=e=>e.dal.get(e.pointers.getInnerPointer((e=>e.pointers.data.getDataItemFromMaster("masterPage"))(e),"layoutSettings")),R=(t,o)=>{const i=t.pointers.components.getParent(o);((e,t)=>e.pointers.isSamePointer(t,e.dal.pointers.components.getMasterPage(t.type)))(t,i)&&(t=>e.get(b(t),"soapCompsAroundPagesContainer",!1))(t)&&n.fixIndexForMasterPageChild(t,o)};function N(e){const t=e?V:H;return function(e,n,o){t(e,n,o,!0)}}const x=e=>e.dal.get(e.pointers.general.getRenderFlag("enforceShouldKeepChildrenInPlace")),L=e=>e.dal.get(e.pointers.general.getRenderFlag("preserveCompLayoutOnReparent"));function B(t,n,o,i,s){const c=t.pointers.getInnerPointer(n,"layout"),l=t.dal.get(c),u=a.getType(t,n),d=N(i);m.executeHook(m.HOOKS.LAYOUT.UPDATE_BEFORE,u,[t,n,o,d,s,l]);const g=S.getValidLayoutToUpdate(t,n,o);if(f.constrainByDimensionsLimits(t,n,g),f.constrainByDockingLimits(g),r.public.isContainer(t,n)&&r.public.isEnforcingContainerChildLimitations(t,n)){const e=r.public.isEnforcingContainerChildLimitationsByWidth(t,n),o=r.public.isEnforcingContainerChildLimitationsByHeight(t,n);f.constrainByChildrenLayout(t,n,g,!e,!o)}f.constrainBySpecificType(t,n,g),f.constrainsByContainer(t,n,g,l);const y=p.getPositionAndSize(t,n);if(t.dal.set(c,g),e.has(g,"aspectRatio")&&w(t,n,g),r.getShouldKeepChildrenInPlace(t,n)&&x(t)){const o=p.getPositionAndSize(t,n),i=function(e,t){return t.width!==e.width&&t.x!==e.x}(y,g),r=function(e,t){return t.height!==e.height&&t.y!==e.y}(y,g);(i||r)&&function(t,n,o,i){const r=t.pointers.components.getChildren(n),a=(i.x||0)-(o.x||0),s=(i.y||0)-(o.y||0);e.forEach(r,function(e){const n=t.pointers.getInnerPointer(e,"layout"),o=t.dal.get(n);p.isHorizontallyDocked(o)||(o.x-=a),p.isVerticallyDocked(o)||(o.y-=s),t.dal.merge(n,o)})}(t,n,y,o)}m.executeHook(m.HOOKS.LAYOUT.UPDATE_AFTER,u,[t,n,g,d,s,l])}function F(t,n,o){if(ne(t,n)){const i=I.applyPositionAndSizeOnCurrentLayoutSchema(t,n,o);return e.assign(i,o)}return o}function k(e,n){if(e.siteAPI.getLayoutMechanism()===t.constants.LAYOUT_MECHANISMS.MESH&&e.dal.set(e.pointers.layoutAdjustment.getLayoutAdjustmentPointer(),{id:null}),y.isGroupedComponent(e,n)){const t=a.getContainer(e,n);i.updateAnchors(e,n,t)}else i.updateAnchors(e,n)}function U(t,n,o,i,r){const a=(s=o,e.omit(s,v));var s;e.isEmpty(a)||(!function(t){const n=e.omit(t,T);if(!e.isEmpty(n))throw new Error("updateCompLayout: new layout properties are not supported")}(a),B(t,n,F(t,n,a),i,r))}function H(e,t,n,o){U(e,t,n,!1,o),k(e,t)}function V(e,n,o,r){e.dal.set(e.pointers.layoutAdjustment.getLayoutAdjustmentPointer(),n),U(e,n,o,!0,r),e.siteAPI.getLayoutMechanism()===t.constants.LAYOUT_MECHANISMS.ANCHORS&&e.setOperationsQueue.executeAfterCurrentOperationDone(()=>{i.updateAnchorsForCompChildren(e,n)})}function W(e,n){const o=t.displayedOnlyStructureUtil.isDisplayedComponent(n.id),i=t.displayedOnlyStructureUtil.isDisplayedComponent(e.id);return!o&&i}function G(e,n){const o=t.displayedOnlyStructureUtil.isDisplayedComponent(n.id),i=t.displayedOnlyStructureUtil.isDisplayedComponent(e.id);return o&&!i}function Y(e){return!t.displayedOnlyStructureUtil.isDisplayedComponent(e.id)}function z(e,n,o){const i=t.displayedOnlyStructureUtil.isDisplayedComponent(o.id),r=t.displayedOnlyStructureUtil.isDisplayedComponent(n.id);if(i&&r){const t=a.getAncestorByPredicate(e,n,Y),i=a.getAncestorByPredicate(e,o,Y);return!e.pointers.isSamePointer(t,i)}return!1}function K(e,t,n){const o=e.pointers.components.getParent(t);return e.pointers.components.isPage(o)&&e.pointers.components.isMasterPage(n)||e.pointers.components.isPage(n)&&e.pointers.components.isMasterPage(o)}function $(t,n,o){const i=c.getComponentModes(t,n);if(!i||0===i.length){const n=function(t,n){const o=A.getComponentBehaviors(t,n),i=["modeChange","modeIn","modeOut"];return e.filter(o,function(t){return e.includes(i,t.action)})}(t,o);e.forEach(n,function(e){A.removeComponentSingleBehavior(t,o,e.name,e.action)})}const r=t.pointers.full.components.getPageOfComponent(o),a=t.pointers.full.components.getPageOfComponent(n);e.isEqual(r,a)||function(t,n){let o=[n];for(;!e.isEmpty(o);){const e=o.pop();q(t,e);const n=t.pointers.full.components.getChildren(e);o=o.concat(n)}}(t,o)}function q(t,n){const o=c.getComponentModes(t,n);e.forEach(o,function(e){t.siteAPI.deactivateMode(n,e.modeId)})}function j(e,t){return Boolean(s.getShowOnSomePagesRoot(e,t))}const Q=(e,t,n)=>e.dal.isExist(t)&&e.dal.isExist(n)?r.public.isContainable(e,t,n)?function(e,t){return r.public.allowedToContainMoreChildren(e,t)}(e,n)?"":"maximum number of child components reached":`component isn't containable in container: ${n.id}`:"invalid component ref or new parent container ref";function X(e,t,n){if(L(e)||l.isFixedPosition(e,t)&&K(e,t,n))return;const o=oe(e,t);o||re(e,t);const i=e.pointers.getInnerPointer(t,"layout"),r=l.getCompLayoutRelativeToScreenConsideringScroll(e,t,!0),a=l.getCompLayoutRelativeToScreenConsideringScroll(e,n,!0),s={x:r.x-a.x,y:r.y-a.y};o&&delete s.x,e.dal.merge(i,s)}function Z(t,n){const o=t.pointers.components.getAllDisplayedOnlyComponents(n);e.forEach(o,function(e){d.deleteDataItem(t,e),d.deleteDesignItem(t,e)})}function J(n,o,i,r,a){const s=[o].concat(a);e.forEach(s,function(o){!function(n,o,i,r){const a=n.dal.get(o),s=a.dataQuery&&t.displayedOnlyStructureUtil.getOriginalId(a.dataQuery.replace("#","")),c=a.designQuery&&t.displayedOnlyStructureUtil.getOriginalId(a.designQuery.replace("#","")),p=n.pointers.components.getAllDisplayedOnlyComponents(i),l=s&&d.getDataItemById(n,s,r,!0),u=c&&d.getDesignItemById(n,c,r,!0);(l||u)&&e.forEach(p,function(e){const o=t.displayedOnlyStructureUtil.getItemId(e.id);if(l){const e=t.displayedOnlyStructureUtil.getUniqueDisplayedId(s.replace("#",""),o);d.addSerializedDataItemToPage(n,r,l,e)}if(u){const e=t.displayedOnlyStructureUtil.getUniqueDisplayedId(c.replace("#",""),o);d.addSerializedDesignItemToPage(n,r,u,e)}})}(n,o,i,r)})}function ee(e,n,o,i){if(o.dataQuery){const r=d.getDataItem(e,n,!0),a=t.displayedOnlyStructureUtil.getOriginalId(o.dataQuery).replace("#",""),s=e.pointers.data.getDataItem(a,i.id);d.removeDataItemRecursively(e,s),d.addSerializedDataItemToPage(e,i.id,r,a)}if(o.designQuery){const r=d.getDesignItem(e,n,!0),a=t.displayedOnlyStructureUtil.getOriginalId(o.designQuery).replace("#",""),s=e.pointers.data.getDesignItem(a,i.id);d.removeDesignItemRecursively(e,s),d.addSerializedDesignItemToPage(e,i.id,r,a)}}function te(i,r,a,s,c){const l=c||r,u=i.pointers.components.getPageOfComponent(r),g=i.pointers.components.getPageOfComponent(a);u.id!==g.id&&function n(o,i,r,a){const s=t.constants.DATA_TYPES;const c=o.runtimeConfig.stylesPerPage?t.constants.COMP_DATA_QUERY_KEYS_WITH_STYLE:t.constants.COMP_DATA_QUERY_KEYS;function l(n,i){const s=c[i],l=o.pointers.getInnerPointer(n,s);if(s&&o.dal.full.isExist(l)){let n;const s=(n=t.displayedOnlyStructureUtil.isDisplayedComponent(l.id)?o.dal.get(l):o.dal.full.get(l)).replace("#",""),c=o.pointers.data.getItem(i,s,a.id);c.useOriginalLanguage=!0,function t(n,o,i,r){const a=o&&n.dal.full.get(o);if(a&&p.canMoveDataItemToAnotherPage(a,r)){const s=n.pointers.data.getPageIdOfData(o);d.executeForDataItemRefs(r,a,function(o){if(!e.isString(o))return;const a=n.pointers.data.getItem(r,o.replace("#",""),s);t(n,a,i,r)}),n.dal.full.remove(o);const c=n.pointers.data.getItem(r,o.id,i);n.dal.full.set(c,a)}}(o,c,r.id,i)}}e.forEach(s,function(e){l(i,e)});const u=o.pointers.page.getPageTranslations(a.id,o.siteAPI.isExperimentOpen.bind(o.siteAPI));const g=o.dal.full.get(u);const f=o.pointers.getInnerPointer(i,"dataQuery");if(o.dal.full.isExist(f)){const t=o.dal.full.get(f).replace("#","");e.forEach(g,(e,n)=>{const i=o.pointers.multilingualTranslations.translationDataItem(a.id,n,t);if(o.dal.full.isExist(i)){const e=o.dal.full.get(i),a=o.pointers.multilingualTranslations.translationDataItem(r.id,n,t);o.dal.fullJsonDal.set(a,e),o.dal.fullJsonDal.remove(i)}}),o.siteDataAPI.createDisplayedPages()}!function(){const t=o.pointers.componentStructure.getModesOverrides(i);if(t&&o.dal.full.isExist(t)){const n=o.dal.full.get(t);e.forEach(n,function(e,n){const i=o.pointers.getInnerPointer(t,n);l(i,s.design),l(i,s.prop)})}}();const m=o.pointers.full.components.getChildren(i);const y=o.pointers.components.getChildren(i);const E=e.unionBy(m,y,function(e){return e.id});e.forEach(E,function(e){n(o,e,r,a)})}(i,r,g,u);const f=i.pointers.components.getChildrenRecursively(r),m=i.dal.full.get(r);let y=i.dal.get(r);const E=W(r,a),I=G(r,a),S=z(i,r,a);S?(ee(i,r,y,g),Z(i,r),J(i,r,a,g.id,f)):E?(ee(i,r,y,g),Z(i,r)):I&&J(i,r,a,g.id,f);const h=n.getNewIndex(i,r,a,s);if(i.dal.full.remove(r),E||I||S){const e=i.pointers.full.components.getMobilePointer(r);i.dal.full.isExist(e)&&i.dal.full.remove(e)}const P=i.pointers.full.components.getChildrenContainer(a),A=i.pointers.getOriginalPointerFromInner(P),T=t.displayedOnlyStructureUtil.getOriginalId(l.id);y=t.displayedOnlyStructureUtil.getOriginalStructure(y);const v=o.adjustModesToNewContainer(i.pointers,i.dal.fullJsonDal,i.dal.displayedJsonDal,A,e.assign(m,e.omit(y,["components","modes","parent","id"]),{id:T}));i.dal.full.push(P,v,l,h)}function ne(e,t){return!!ie(e,t)}function oe(e,n){return t.dockUtils.isHorizontalDockToScreen(e.dal.get(e.pointers.getInnerPointer(n,["layout"])))}function ie(e,t){const n=e.pointers.getInnerPointer(t,["layout","docked"]);return e.dal.get(n)}function re(t,n){if(!ne(t,n))return;const o=I.getPositionAndSize(t,n),i=t.pointers.getInnerPointer(n,"layout"),r=t.dal.get(i);e.assign(r,o),delete r.docked,t.dal.set(i,r)}function ae(e,t,n){const o=e.pointers.getInnerPointer(t,"layout"),i=e.dal.get(o),r=S.getValidLayoutToUpdate(e,t,{docked:n}),s=a.getType(e,t);m.executeHook(m.HOOKS.LAYOUT.UPDATE_BEFORE,s,[e,t,r,H,!1,i]),f.constrainByDockingLimits(r),e.dal.set(o,r),M(e,t)&&w(e,t),m.executeHook(m.HOOKS.LAYOUT.UPDATE_AFTER,s,[e,t,r,H,!1,i]),k(e,t)}return{initialize:function(t){g.initialize(t);const n=h.createInitialGapMap(t);e.some(n,function(e){return e>0})&&t.siteAPI.reportBI(P.SITE_GAPS_MAP,{above_header:n.aboveHeader,above_page:n.abovePagesContainer,above_footer:n.aboveFooter})},getDockedStyle:function(e,n){return t.dockUtils.applyDockedStyleWithMargins(n,{width:n.width,height:n.height},e.siteAPI.getPageMargins(),e.siteAPI.getScreenWidth(),e.siteAPI.getSiteWidth(),e.siteAPI.getSiteX())},unDock:function(e,t){re(e,t),k(e,t)},updateDock:ae,setDock:function(e,t,n){re(e,t),ae(e,t,n)},getDock:ie,isHorizontallyStretchedToScreen:oe,isHorizontallyStretchedToScreenByStructure:function(e,n){return t.dockUtils.isHorizontalDockToScreen(n.layout)},getPositionAndSize:p.getPositionAndSize,updateCompLayout:H,getProportionStructure:function(t,n,o){const i=function t(n,o){const i=n.pointers.components.getChildren(o),r=n.pointers.components.getParent(o),a=p.getComponentLayout(n,r),s=p.getComponentLayout(n,o);var c,l;return{component:o,proportions:(l=a,{x:(c=s).x/l.width,y:c.y/l.height,width:c.width/l.width,height:c.height/l.height}),children:e.map(i,function(e){return t(n,e)})}}(t,n);return f.addCompMinLayout(t,i,o),i},updateCompLayoutAndAdjustLayout:V,updateAndPreserveProportions:function t(n,o,i,s){const c=r.public.isIgnoreChildrenOnProportionalResize(n,i.component),l=r.public.enforceMaxDimensionsOnProportionalResize(n,i.component);let u=i.children;const d=n.dal.get(n.pointers.getInnerPointer(i.component,"layout"));f.constrainProportionalResize(n,i,o,s,l),f.constrainsByContainer(n,i.component,o,d,!0),e.isArray(c)&&(u=p.getChildrenToPreserveProportionsByType(n,r,u,c)),!0===c||e.isEmpty(u)||e.forEach(u,function(i){const r=function(t,n){let o={x:t.width*n.x,y:t.height*n.y,width:t.width*n.width,height:t.height*n.height};return o=e(o).pickBy(e.isFinite).mapValues(Math.round).value()}(o,i.proportions);t(n,r,i,!1)}),o=e.pick(o,["x","y","width","height"]),function(e,t,n){const o=e.pointers.getInnerPointer(t,"layout"),i=e.dal.get(o);n=F(e,t,n);const r=a.getType(e,t),s=N(!1);m.executeHook(m.HOOKS.LAYOUT.UPDATE_BEFORE,r,[e,t,n,s,!1,i]);const c=S.getValidLayoutToUpdate(e,t,n);e.dal.set(o,c),m.executeHook(m.HOOKS.LAYOUT.UPDATE_AFTER,r,[e,t,c,H,!1,i])}(n,i.component,o),k(n,i.component)},canSetContainer:(t,n,o)=>e.isEmpty(Q(t,n,o)),setContainer:function(t,n,o,r){!function(t,n,o){const i=Q(t,n,o);if(!e.isEmpty(i))throw new Error(i)}(t,o,r);const s=a.getContainerToAddComponentTo(t,r);X(t,o,s),function(e,t,n){if(l.isFixedPosition(e,t)&&!K(e,t,n)){const n=e.pointers.getInnerPointer(t,"layout.fixedPosition");e.dal.set(n,!1)}}(t,o,s);const c=t.pointers.components.getParent(o),p=a.getType(t,o);return m.executeHook(m.HOOKS.CHANGE_PARENT.BEFORE,p,[t,o,r]),$(t,r,o),te(t,o,s,void 0,n),m.executeHook(m.HOOKS.CHANGE_PARENT.AFTER,p,[t,o,r]),i.updateAnchors(t,o,c),n},getNewComponentPointerAfterReparent:function(n,o,i){const r=e.clone(o);if(z(n,o,i)){const e=t.displayedOnlyStructureUtil.getOriginalId(o.id),n=t.displayedOnlyStructureUtil.getItemId(i.id);r.id=t.displayedOnlyStructureUtil.getUniqueDisplayedId(e,n)}else if(W(o,i))r.id=t.displayedOnlyStructureUtil.getOriginalId(o.id);else if(G(o,i)){const e=t.displayedOnlyStructureUtil.getItemId(i.id);r.id=t.displayedOnlyStructureUtil.getUniqueDisplayedId(o.id,e)}const a=n.pointers.components.getViewMode(i);return n.pointers.components.getUnattached(r.id,a)},isShowOnAllPages:function(e,t){return e.pointers.components.isInMasterPage(t)&&!j(e,t)},isShowOnSomePages:j,getCompLayoutRelativeToStructure:l.getCompLayoutRelativeToStructure,getCompLayoutRelativeToScreen:l.getCompLayoutRelativeToScreen,getCompLayoutRelativeToScreenConsideringScroll:l.getCompLayoutRelativeToScreenConsideringScroll,addCompToContainer:te,isFixedPosition:l.isFixedPosition,isAncestorFixedPosition:function(e,t){let n=t;do{if(!(n=e.pointers.components.getParent(n)))return!1}while(!l.isFixedPosition(e,n));return!0},isRenderedInFixedPosition:l.isRenderedInFixedPosition,isAncestorRenderedInFixedPosition:l.isAncestorRenderedInFixedPosition,getClosestAncestorRenderedInFixedPosition:l.getClosestAncestorRenderedInFixedPosition,isShowOnFixedPosition:l.isShowOnFixedPosition,isDocked:ne,isDockedToScreen:function(e,n){return t.layout.isDockToScreen(e.dal.get(e.pointers.getInnerPointer(n,["layout"])))},isRotated:function(e,t){const n=e.pointers.getInnerPointer(t,["layout","rotationInDegrees"]);return 0!==e.dal.get(n)},getDeprecatedMinDimensions:function(){return{width:0,height:0}},getSiteHeight:function(e){const n=e.siteAPI.getSiteMeasureMap();if(n){const o=e.siteAPI.getCurrentPopupId();if(o)return n.height[o];const i=e.pointers.general.getRenderFlag("extraSiteHeight");return n.height[t.siteConstants.MASTER_PAGE_ID]+(e.dal.get(i)||0)}return 0},getSiteWidth:function(e){return e.siteAPI.getSiteWidth()},setScroll:E.setScroll,isScrollingEnabled:function(e){return!e.siteAPI.isSiteScrollingBlocked()},getScroll:E.getScroll,setScrollAndScale(e,t,n,o,i,r){const a=e.pointers.general.getRenderFlag("siteScale");e.dal.set(a,o),E.setScrollAndScale(e,t,n,o,i,r)},animateScroll:E.animateScroll,updateFixedPosition:function(t,n,o){const i=t.pointers.getInnerPointer(n,"layout"),r=t.dal.get(i);o!==r.fixedPosition&&(function(t,n,o,i){const r={fixedPosition:o};if(o){const o=l.getCompLayoutRelativeToScreen(t,n);e.assign(r,e.pick(o,["x","y"])),r.y-=E.getScroll(t).y}else{const o=t.pointers.components.getParent(n),a=l.getCompLayoutRelativeToScreen(t,o,!0);e.assign(r,{y:i.y-a.y+E.getScroll(t).y,x:i.x-a.x})}H(t,n,r)}(t,n,o,r),o?D(t,n):R(t,n))},reparentComponentToPage:D,getEffectiveTextDimensions:function(e,t){const n=e.pointers.general.getTextRuntimeOverallBorders(),o=e.pointers.getInnerPointer(n,t.id);if(o)return e.dal.get(o)},updateAspectRatio:w,removeAspectRatio:function(t,n){const o=t.pointers.getInnerPointer(n,"layout"),i=t.dal.get(o);e.isUndefined(i.aspectRatio)||(delete i.aspectRatio,t.dal.set(o,i))},getSiteX:l.getSiteX,isAspectRatioOn:M,shouldUpdateSingleComp:function(e,t){const n=r.getComponentType(e,t);return!O[n]},adjustCompLayoutToNewContainer:X,isHorizontallyStretched:function(e,n){return t.dockUtils.isHorizontallyStretched(e.dal.get(e.pointers.getInnerPointer(n,["layout"])))},isVerticallyStretched:function(e,n){return t.dockUtils.isVerticallyStretched(e.dal.get(e.pointers.getInnerPointer(n,["layout"])))},isSimpleLayout:function(t){if(!t)return!0;let n=!0;return e.forOwn(t,function(t,o){const i=_[o];if(e.isUndefined(i)||i!==C&&t!=i)return n=!1,!1}),n},isSiteLayoutMesh:function(e){return b(e).mechanism===t.constants.LAYOUT_MECHANISMS.MESH},migrateToMeshLayout:function(n){const o=n.pointers.getInnerPointer(n.pointers.data.getDataItemFromMaster("masterPage"),"layoutSettings"),i=n.dal.get(o);n.dal.set(o,e.assign({},i,{mechanism:t.constants.LAYOUT_MECHANISMS.MESH}))}}}.apply(t,o))||(e.exports=i)},function(e,t){e.exports=o},function(e,t,n){var o,i;o=[n(0),n(40),n(147),n(233),n(234),n(235),n(26),n(237),n(238),n(239),n(82)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l){"use strict";return{PROPERTY_NAMES:t.PROPERTY_NAMES,getProperty:t.getProperty,setProperty:t.setProperty,getRevertibleMetaDataInfo:t.getRevertibleMetaDataInfo,getNonRevertibleMetaDataInfo:t.getNonRevertibleMetaDataInfo,seo:n,social:o,favicon:i,premiumFeatures:r,generalInfo:a,siteName:s,statistics:c,compatibility:p,language:l}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(2)],void 0===(i=function(e){"use strict";return{getViewMode:t=>t.siteAPI.isMobileView()?e.VIEW_MODES.MOBILE:e.VIEW_MODES.DESKTOP,isMobileView:e=>e.siteAPI.isMobileView()}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(13),n(33),n(31),n(7),n(4)],void 0===(i=function(e,t,n,o,i,r){"use strict";let a=!1;const s=function(e,t,o){return(n.getAppData(e,t).widgets||{})[o]||null},c=function(e){const t=e.published,n=e.santaEditorPublished;return t||n},p=function(t,n){let o=n&&n.widgets;return o=e.filter(o,t=>e.isNil(t.appPage)),a||(o=e.filter(o,c)),o},l=function(t,n){let o=n&&n.widgets;return o=e.filter(o,t=>!e.isNil(t.appPage)),a||(o=e.filter(o,c)),o},u=function(t){return!e.isUndefined(t)&&!e.isUndefined(t.appType)&&"Hybrid"===t.appType},d=function({appType:e}={}){return"Hybrid"===e||"Editor"===e},g=function(t){return t.permissions&&e.isBoolean(t.permissions.revoked)&&t.permissions.revoked},f=function(t,n){const o=l(0,n);return e.find(o,e=>!e.appPage.hidden)};return{registerAppData:n.registerAppData,getAppData:n.getAppData,getAppDataByAppDefinitionId:n.getAppDataByAppDefinitionId,getAppsData:n.getAppsData,filterApps:function(t){return e.pickBy(t,t=>o.isTpaByAppType(t.type)&&(e.isUndefined(t.appType)||d(t)))},getLargestApplicationId:function(t){const o=n.getAppsData(t);return e(o).keys().map(e=>parseInt(e,10)).compact().concat(0).max()},getWidgetData:s,getExtensionsWidgets:p,isHybridAppAndEditorPartNotDismissed:function(t){return u(t)&&(e.isUndefined(t.editorPartDismissed)||!1===t.editorPartDismissed)},isHybridApp:function(e,t){const o=t&&n.getAppData(e,t);return u(o)},isHybridAppFromAppData:u,isDashboardAppOnly:function(t){return!e.isUndefined(t)&&!e.isUndefined(t.appType)&&"Dashboard"===t.appType},isEditorOrHybridApp:d,setAppsData:function(e,n){t.setProperty(e,t.PROPERTY_NAMES.CLIENT_SPEC_MAP,n)},isAppPermissionsIsRevoked:g,isAppActive:function(t){return!e.isUndefined(t)&&!g(t)&&"REMOVE"!==t.pendingAction},isAppAutoRevoked:function(t){return!e.has(t,"appFields.platform.studio")},isPremiumApp:function(e,t){const o=n.getAppData(e,t);return!!o&&!!o.vendorProductId},hasPremiumOffering:function(t,o){const i=n.getAppData(t,o);return!!i&&e.size(i.vendorProducts)>0},hasHiddenPages:function(t,o){const i=n.getAppData(t,o),r=l(0,i),a=e.filter(r,"appPage.hidden");return e.size(a)>0},getAppSections:l,getAppSectionsToInstall:function(t,o){const i=n.getAppData(t,o);let r=l(0,i);return r=e.filter(r,{autoAddToSite:!0}),e.sortBy(r,"appPage.order")},widgetsToAutoAddToSite:function(t,n){const o=p(0,n);return e.filter(o,"autoAddToSite")},getWidgetDataFromTPAPageId:function(t,o,i){const r=l(0,n.getAppDataByAppDefinitionId(t,o));return e.find(r,{appPage:{id:i}})},getWidgetDataFromTPAWidgetId:function(t,o,i){const r=p(0,n.getAppDataByAppDefinitionId(t,o));return e.find(r,{tpaWidgetId:i})},setIsInDevMode:function(e){a=e},isWidgetHasMobileUrl:function(t,n,o){if(!n||!o)return!1;const i=s(t,n,o);if(i&&i.mobileUrl){const t=i.mobileUrl,n=i.mobilePublished&&e.isBoolean(i.mobilePublished)&&i.mobilePublished;return!e.isEmpty(t)&&(a||n)}return!1},isAppPermissionsIsGranted:function(t){return t.permissions&&e.isBoolean(t.permissions.revoked)&&!t.permissions.revoked},hasSections:function(t,n){const o=l(0,n);return!e.isEmpty(o)},isAppProvisionedOnServer:function(e,t){return!n.getAppData(e,t).notProvisioned},hasMainSection:function(t,n){const o=l(0,n);return e.some(o,e=>!e.appPage.hidden)},getMainSectionWidgetData:f,getMainSectionWidgetDataFromApplicationId:function(e,t){return f(0,n.getAppData(e,t))},getSectionsWidgetIdsToPreFetch:function(t){return e(t.widgets).filter("preFetch").filter("appPage").filter(c).map("widgetId").value()},isDemoAppAfterProvision:function(t){const n=e.get(t,"instance");if(!e.isEmpty(n)){const n=t.instance.split("."),o=JSON.parse(atob(n[1]));return!e.isEmpty(o.originInstanceId)}},isSuperAppByCompId:function(t,o){const a=i.getComponentById(t,o),s=r.data.get(t,a),c=e.get(s,"applicationId");return n.getAppData(t,c).isWixTPA},getDependentApps:function(){return[]},hasEditorPlatformPart:function(t){return!!e.get(t,"appFields.platform.editorScriptUrl")},isPageMarkedAsAutoAddToSite:function(t,o){const i=n.getAppData(t,e.get(o,"tpaApplicationId")),r=l(0,i),a=e.find(r,{appPage:{id:e.get(o,"tpaPageId")}});return e.get(a,"autoAddToSite")},computeHidePage:function(t,n,o){let i=e.defaultTo(n,e.get(t,"componentFields.hiddenInPagesPanel"));return i=e.defaultTo(i,o)},isMultiSectionInstanceEnabled:function(t,n){if(!n)return!1;const o=e.get(t,["widgets",n]);return e.get(o,"appPage.multiInstanceEnabled")}}}.apply(t,o))||(e.exports=i)},function(e,t){e.exports=i},function(e,t,n){var o,i;o=[n(0),n(1),n(50),n(12),n(6),n(116),n(36),n(2),n(4),n(7),n(18),n(3),n(81),n(27),n(19),n(170),n(28),n(14),n(117),n(93),n(37),n(432),n(118),n(15),n(49),n(5),n(60)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l,u,d,g,f,m,y,E,I,S,h,P,A,T,v,C,_){"use strict";const O="wysiwyg.viewer.components.PopupContainer";function D(t,n,o,i,r){const a=p.getComponentByType(t,"wysiwyg.common.components.verticalanchorsmenu.viewer.VerticalAnchorsMenu",n),s=n.id;e.forEach(a,function(n){!function(t,n,o,i){const r=e.findKey(i,function(e){return e===o}),a=c.data.get(t,n);let s;s=r?function(t,n){return e.compact(e.map(t,function(e){return n[e]}).concat(e.includes(t,"PAGE_TOP_ANCHOR")?"PAGE_TOP_ANCHOR":null))}(a.hiddenAnchorIds[r],i):[];a.hiddenAnchorIds[o]=s,c.data.update(t,n,a)}(t,n,s,r)})}function w(t){if(!e.isString(t))throw Error(`pageId to remove should be a string ${t}`);return t.replace("#","")}function M(n,o,r,a,p=!0){const u=o.id;let d;const g=A.getBlankPageStructure(n,u);!function(e,t){const n=e.pointers.components.getPage(e.siteAPI.getPrimaryPageId(),s.VIEW_MODES.DESKTOP),o=l.style.get(e,n),i=l.skin.get(e,n);t.style=o,t.skin=i}(n,g),a&&(d=e.cloneDeep(a),e.defaultsDeep(d,g)),(d=d||g).data.title=r||d.data.title;const m=d.data;m.id=u,f.addPageData(n,u,m,p);const y=function({dal:e,pointers:n},o,i){const r={data:{component_properties:{},document_data:{},theme_data:{},behaviors_data:{},connections_data:{},mobile_hints:{},design_data:{}},pageUriSEO:i,structure:{},title:o};return r.translations=t.multilingual.generatePageTranslationsData({dal:e,pointers:n}),r}(n,d.data.title,d.data.pageUriSEO),E=n.pointers.page.getNewPagePointer(u);n.dal.full.set(E,y);const h=d.mobileComponents&&{};c.setComponent(n,o,null,d,u,!0,h),S.markPageAsInitialized(n,u),i.executeHook(i.HOOKS.ADD_PAGE.AFTER,d.componentType,[n,o]),i.executeHook(i.HOOKS.ADD_ROOT.AFTER,d.componentType,[n,o]),d.mobileComponents&&function(t,n,o,i){const r=I.hiddenComponents.get(t,n),a=e(i).pick(r).values().value();I.hiddenComponents.set(t,o,a)}(n,d.id,o.id,h)}function b(e,t){const n=w(t),o=B(e,n);if(!o.success)throw new Error(o.description);const i=e.pointers.components.getPage(n,s.VIEW_MODES.DESKTOP);c.validateRemovalInternal(e,i)}function R(e,t,n){const o=k(e,t),i=e.pointers.data.getDataItemFromMaster(t);n=n||!1;const r=c.serialize(e,o,i,!1,n,!1,void 0,!0);return r.data=f.getPageDataWithoutIds(e,t,!0),r}function N(e,t,n){const o=k(e,t);return c.isContainsCompWithType(e,o,n)}function x(t,n){const o=function(e){return"string"==typeof e?{pageId:e}:e}(n);return o.pageId&&t.siteAPI.getFocusedRootId()!==o.pageId||function(t,n){const o=t.siteAPI.getRootNavigationInfo();return!e.isEqual(n.routerDefinition,o.routerDefinition)||n.innerRoute!==o.innerRoute}(t,n)}function L(t,n,o){let r=function(t,n){if(e.isString(n))return{pageId:n};if("PageLink"===n.type){const e=f.getPageData(t,n.pageId);return{pageId:e.id,title:e.pageUriSEO}}if("DynamicPageLink"===n.type){const e=_.get.byId(t,n.routerId);if(!e)return;const o=n.innerRoute;return{routerDefinition:e,innerRoute:o,pageAdditionalData:o&&"/"!==o?`${e.prefix}/${o}`:e.prefix}}}(t,n);if(r){if(r.pageId&&!r.routerDefinition){const n=_.getRouterDataForPageIfExist(t,r.pageId);n&&(r=e.assign(r,{routerDefinition:n}))}x(t,r)?(C.isOpen("ds_updateAnchorsOnlyOnNavigation")&&function(t,n){const o=t.siteDataAPI,i=t.siteDataAPI.siteData.anchorsMap,r=t.siteDataAPI.siteData.getViewMode();e.has(i,[n,r])||o.anchors.createPageAnchors(n)}(t,n),o&&t.setOperationsQueue.waitForChangesApplied(o),t.siteAPI.navigateToPage(r),i.executeHook(i.HOOKS.PAGE.AFTER_NAVIGATE_TO_PAGE,n,[t])):o&&o()}}function B(e,t){const n=w(t);return d.isMasterPage(e,n)?{success:!1,description:"It is not allowed to remove masterPage"}:f.doesPageExist(e,n)?d.isHomepage(e,n)?{success:!1,description:`It is not allowed to delete homePage (${n}), please set a new page as homePage (page.setAsHomepage) and try again`}:e.siteAPI.getPrimaryPageId()===n?{success:!1,description:`It is not allowed to delete current page (${t}), please navigate to another page (page.navigateTo) and try again`}:e.siteAPI.getCurrentPopupId()===n?{success:!1,description:`It is not allowed to delete open popup (${n}), please close the popoup nand try again`}:{success:!0,description:""}:{success:!1,description:`Page with id "${n}" does not exist`}}function F(t,n){const o=w(n),i=f.getPageData(t,o),r=N(t,o,[y.COMP_TYPES.TPA_MULTI_SECTION,y.COMP_TYPES.TPA_SECTION]),a=i&&i.appInnerID&&T.getAppData(t,i.appInnerID)&&"blog"===T.getAppData(t,i.appInnerID).packageName;return d.isMasterPage(t,o)?{success:!1,description:"It is not allowed to duplicate masterPage"}:f.doesPageExist(t,o)?r?{success:!1,description:"It is not allowed to duplicate TPA pages"}:a?{success:!1,description:"It is not allowed to duplicate Blog pages"}:"AppPage"===e.get(i,"type")?{success:!1,description:"It is not allowed to duplicate Old blog page"}:{success:!0,description:""}:{success:!1,description:`Page with id "${o}" does not exist`}}function k(e,t){return e.pointers.components.getPage(t,E.getViewMode(e))}i.registerHook(i.HOOKS.ADD.AFTER,D,"mobile.core.components.Page");const U={shouldDelayDeletion:function(e,t){const n=e.pointers.components.getPage(t,E.getViewMode(e));return c.shouldDelayDeletion(e,n)},initialize:function(n){try{t.loggingUtils.performance.start(t.loggingUtils.performanceMetrics.PAGE.INITIALIZE),t.loggingUtils.fedopsLogger.interactionStarted(t.loggingUtils.fedopsLogger.INTERACTIONS.PAGE.INITIALIZE);const i=f.getPagesList(n);e.forEach(i,function(t){const o=f.getPageData(n,t);(function(t){return!!e.get(t,"pageSecurity.passwordDigest")})(o)&&(function(e,t){P.setPagePassword(e,t.id,{value:t.pageSecurity.passwordDigest,isHashed:!0})}(n,o),function(e,t){f.setPageData(e,t.id,{pageSecurity:{requireLogin:!1,dialogLanguage:t.pageSecurity.dialogLanguage}})}(n,o)),function(t,n){if(n.tpaApplicationId>0&&n.tpaPageId){const o=T.getAppData(t,n.tpaApplicationId),i=T.getWidgetDataFromTPAPageId(t,o.appDefinitionId,n.tpaPageId);e.isBoolean(e.get(i,"appPage.indexable"))&&e.get(i,"appPage.indexable")!==n.indexable&&n.indexable&&f.setPageData(t,n.id,{indexable:e.get(i,"appPage.indexable")})}}(n,o)}),t.loggingUtils.fedopsLogger.interactionEnded(t.loggingUtils.fedopsLogger.INTERACTIONS.PAGE.INITIALIZE),t.loggingUtils.performance.finish(t.loggingUtils.performanceMetrics.PAGE.INITIALIZE)}catch(e){o.integrations.ravenUtils.captureError(e,{tags:{pageInitializationFailed:!0}})}},getPageBottomByComponents:function(e,t){return e.siteAPI.getSiteMeasureMap().pageBottomByComponents[t]},getPageIdToAdd:function(e){const n=e.pointers.page.getAllPagesPointer(),o=e.pointers.general.getDeletedPagesMapPointer(),i=e.dal.getKeys(n).concat(e.dal.getKeys(o)),r=t.guidUtils.generateNewPageId(i);return e.pointers.components.getNewPage(r)},add:M,duplicate:function(e,t,n,o=!0){const r=w(n),a=e.pointers.page.getPagePointer(r);if(!a)throw new Error(`page does not exist ${n}`);const s=F(e,n);if(!s.success)throw new Error(s.description);const c=e.dal.get(e.pointers.getInnerPointer(a,"title"));h.runPartialConversionAllPages(e);const p=R(e,r,!0);p.data.pageUriSEO=f.getValidPageUriSEO(e,"",p.data.pageUriSEO),i.executeHook(i.HOOKS.DUPLICATE_ROOT.BEFORE,p.componentType,[e,p]),M(e,t,c,p,o),f.copyTranslationData(e,r,t.id,g.isPopup(e,r)),i.executeHook(i.HOOKS.DUPLICATE_ROOT.AFTER,p.componentType,[e,t.id,r])},remove:function(t,n,o){o=o||e.noop;const i=w(n),a=t.pointers.components.getPage(i,s.VIEW_MODES.DESKTOP);c.deleteComponent(t,a),t.siteDataAPI.removeResolvedDataMapForPage(i),function(e,t){const n=e.pointers.data.getDataItemFromMaster(t),o=e.pointers.page.getPagePointer(t);f.removePageData(e,n),e.dal.full.remove(o),function(e,t){const n=e.pointers.general.getDeletedPagesMapPointer(),o={};o[t]=!0,e.dal.merge(n,o)}(e,t)}(t,i),function(e,t){const n=r.getPagesGroupByPageId(e,t);n&&r.removePageFromPagesGroup(e,n,t)}(t,i),o(t)},validatePageRemoval:function(e,t){b(e,t),e.setOperationsQueue.asyncPreDataManipulationComplete()},validatePageRemovalInternal:b,navigateTo:L,scrollToComponent:function(e,t,n){e.siteAPI.scrollToComponent(t,n)},navigateToPageAndScrollToAnchor:function(e,n,o,i){const r=t.scrollAnchors.isSpecialAnchor(o),a=e.siteAPI.scrollToAnchor.bind(e.siteAPI,o,i);r?a():L(e,n,a)},willNavigateNavigateAndScroll:function(e,n,o){return!t.scrollAnchors.isSpecialAnchor(o)&&x(e,n)},willNavigateNavigateToPage:x,isRemovable:function(e,t){return B(e,t).success},isDuplicable:function(e,t){return F(e,t).success},isLandingPage:function(e,t){const n=e.pointers.data.getDataItemFromMaster(t),o=e.pointers.getInnerPointer(n,"isLandingPage"),i=e.pointers.getInnerPointer(n,"isMobileLandingPage"),r=e.siteAPI.isMobileView(),a=e.dal.isExist(o)&&e.dal.get(o),s=r&&e.dal.isExist(i)&&e.dal.get(i);return a||s},isPageContainsCompWithType:N,getSocialUrl:function(e,t,n){const o=e.pointers.general.getPublicUrl(),i=e.dal.get(o);return n?d.getMainPageUrl(e,t,i):d.getCurrentUrl(e,t,i)},getPageUrl:function(e,t,n,o){const i=f.getPageUriSEO(e,t);return n=n||e.dal.get(e.pointers.general.getPublicUrl()),d.getPageUrl(e,{pageId:t,title:i},o,n)},getPageTitle:function(e,t){const n=e.pointers.data.getDataItemFromMaster(t),o=e.pointers.getInnerPointer(n,"title");return e.dal.get(o)||""},getPage:k,getPageIdList:f.getPagesList,getPagesDataItems:f.getPagesDataItems,getLayout:function(e,t){const n=k(e,t),o=c.layout.get(e,n),i=e.siteAPI.getSiteWidth();return o.width=i,o},getReference:k,serializePage:R,homePage:{set:function(e,t){if(t=w(t),!e.pointers.page.isExists(t))throw Error(`pageId ${t} does not exist. cannot set as home page.`);if(g.isPopup(e,t))throw Error("Can't set popup page as home page.");const n=e.pointers.data.getDataItemFromMaster(s.MASTER_PAGE_ID),o=e.pointers.getInnerPointer(n,"mainPage"),i=e.pointers.getInnerPointer(n,"mainPageId");e.dal.set(o,`#${t}`),e.dal.set(i,t)},get:d.getHomepageId},data:{set:f.setPageData,get:f.getPageData},style:{setId:function(e,t,n){const o=k(e,t);l.style.setId(e,o,n)},connectToThemeStyle:function(e,t,n){const o=k(e,t);l.style.connectToThemeStyle(e,o,n)},getId:function(e,t){const n=k(e,t);return l.style.getId(e,n)},setCustom:function(e,t,n,o,i,r){const a=k(e,n);l.style.setCustom(e,t,a,o,i,r)}},background:{get:f.getBgDataItem,update:f.updateBgDataItem},getPageAnchors:function(n,o,i){const r=n.pointers.data.getDataItemsWithPredicate({type:"Anchor"},o).map(n.dal.get),a=t.scrollAnchors.getPageTopAnchor(o,i);r.push(a);const s=n.pointers.components.getPage(o,"DESKTOP"),c=e.keyBy(n.pointers.components.getChildren(s),"id");return e.sortBy(r,function(e){let o=t.scrollAnchors.SCROLL_PAGE_TOP_Y_POS;const i=c[e.compId];if(i){const e=n.pointers.getInnerPointer(i,"layout.y");o=n.dal.get(e)}return o})},permissions:{hasPassword:function(e,t){return P.isPageProtected(e,t)},updatePassword:function(n,o,i){e.isObject(i)?(t.log.warnDeprecation("pages.permissions.updatePassword: Pass password as a string and not an object"),P.setPagePassword(n,o,i)):P.setPagePassword(n,o,{value:i,isHashed:!1})},removePassword:function(e,t){P.setPageToNoRestriction(e,t)},isPagesProtectionOnServerOn:function(e){return t.log.warnDeprecation("pages.permissions.isPagesProtectionOnServerOn: Use true instead of calling this function, because it always returns true"),P.isPagesProtectionOnServerOn(e)}},properties:{get:m.getPageProperties,update:m.updatePageProperties}};return U.popupPages={open:L,close(e,t){const n=e.siteAPI.getRootNavigationInfo();n&&U.navigateTo(e,n.pageId,t)},getCurrentPopupId:e=>e.siteAPI.getCurrentPopupId(),getCurrentMainContainer(e,t){const n={id:U.popupPages.getCurrentPopupId(e),type:t||v.getViewMode(e)};return g.getPopupContainer(e,n)},add:function(n,o,i,r){r?function(t){if(!e.find(t.components,{componentType:O}))throw new Error("Can't create a popup page. Main container inside the popup was not found")}(r):r=A.getBlankPopupPageStructure(n),r.data.pageUriSEO=r.data.pageUriSEO||t.siteConstants.DEFAULT_POPUP_URI_SEO_PREFIX+o.id,M(n,o,i,r),function(e,t){const n=k(e,e.siteAPI.getPrimaryPageId()),o=k(e,s.MASTER_PAGE_ID),i=a.getActionDefinition(e,"load"),r=a.getBehaviorDefinition(e,"openPopup");a.hasBehavior(e,n,i,null,r)||a.hasBehavior(e,o,i,null,r)||a.updateBehavior(e,n,i,t,r)}(n,o)},getPopupIdToAdd:function(n){const o=n.pointers.page.getAllPagesPointer(),i=n.pointers.general.getDeletedPagesMapPointer(),r=n.dal.getKeys(o),a=r.concat(n.dal.getKeys(i)),s=e.filter(r,e.partial(g.isPopup,n)),c=t.guidUtils.generateNewPopupId(a,s);return n.pointers.components.getNewPage(c)},getDataList:f.getPopupsDataItems,isPopup:(e,t)=>g.isPopup(e,t),isPopupOpened:e=>e.siteAPI.isPopupOpened()},U}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(386),n(67),n(9),n(163),n(2),n(10),n(16),n(53)],void 0===(i=function(e,t,n,o,i,r,a,s,c){"use strict";function p(e,t,n){let o=null;if(e&&t){o=(n?e.dal.full:e.dal).get(e.pointers.getInnerPointer(t,"styleId"))}return o}const l=(e,t,n,i)=>{const r=(i?e.pointers.full:e.pointers).components.getPageOfComponent(t).id,s=n||A(e,t,i);s.componentClassName=s.componentClassName||o.getComponentType(e,t);const c=a.styles.internal.fork(e,s,r,i);return d(e,t,c,null,i),c},u=(e,t,n)=>l(e,t,n,!1);function d(e,t,n,s,c){let p=r.MASTER_PAGE_ID;if(e.runtimeConfig.stylesPerPage){const n=c?e.pointers.full:e.pointers;p=n.components.getPageOfComponent(t)}let l=a.styles.internal.get(e,n,p,c);l||(n=f(e,n,o.getComponentType(e,t)),l=a.styles.internal.get(e,n,r.MASTER_PAGE_ID,c));const u=i.validateSetStyleIdParams(e,n,p);if(!u.success)throw new Error(u.error);!function(e,t,n,o){const i=o?e.dal.full:e.dal,a=o?e.pointers.full:e.pointers,s=t.type===r.VIEW_MODES.DESKTOP?a.components.getMobilePointer(t):a.components.getDesktopPointer(t);if(!i.isExist(s))return;const c=e.pointers.getInnerPointer(s,"styleId");i.set(c,n)}(e,t,n,c),(c?e.dal.full:e.dal).set(e.pointers.getInnerPointer(t,"styleId"),n),e.setOperationsQueue.executeAfterCurrentOperationDone(function(){s&&s({styleProperties:a.styles.internal.get(e,n,p,c).style.properties}),a.events.onChange.executeListeners({type:"STYLE",values:n})}),y(e,t,l.skin,c)}const g=(e,t,n,o)=>d(e,t,n,o,!1);function f(e,t,n){const o=s.services.schemasService.getDefinition(n);if(!o)throw new Error(`Component of type - ${n} is not listed in componentsDefinitionsMap`);const i=o.styles[t];if(!i)throw new Error(`Style id - ${t} is not a known system style id.`);const c=function(e,t,n){return{compId:"",componentClassName:n,pageId:"",styleType:"system",type:"TopLevelStyle",skin:t,style:{groups:{},properties:m(e,t),propertiesSource:{}}}}(e,i,n);return a.styles.createAndAddStyleItem(e,c,t,r.MASTER_PAGE_ID)}function m(t,n){return e.mapValues(a.skins.getSkinDefinition(t,n),"defaultValue")}function y(e,t,n,o){const i=e.pointers.getInnerPointer(t,"skin");(o?e.dal.full:e.dal).set(i,n)}function E(t,n){return e.mapValues(n,function(t){return e.isNumber(t)||e.isBoolean(t)||e.isString(t)&&(e.includes(t,"#")||e.includes(t,"rgb"))?"value":/^(font|color)_[0-9]+$/.test(t)?"theme":"value"})}function I(e,t,o,i,r=!1){S(e,t,o,i,r),n.updateAnchors(e,t)}function S(t,n,o,r,s){const c=i.validateExistingComponent(t,n,s);if(!c.success)throw new Error(c.error);const p=T(t,n);let d;if(p)if(d=p.id,"system"===p.styleType)d=u(t,n,o);else{const i=t.pointers.components.getPageOfComponent(n).id;o.componentClassName=o.componentClassName||p.componentClassName,e.set(o,"style.propertiesSource",E(0,o.style.properties)),a.styles.update(t,p.id,o,i)}else d=l(t,n,o,s);t.setOperationsQueue.executeAfterCurrentOperationDone(function(){r&&r({styleProperties:o.style.properties}),a.events.onChange.executeListeners({type:"STYLE",values:d})}),y(t,n,o.skin,s)}function h(e,t){let n=null;if(t){const o=T(e,t);n=o&&o.skin?o.skin:e.dal.get(e.pointers.getInnerPointer(t,"skin"))}return n}function P(e,n){const o=h(e,n);return t.params.getSkinDefaultParams(o)}function A(e,t,n){const o=p(e,t,n);if(o){const i=(n?e.pointers.full:e.pointers).components.getPageOfComponent(t).id;return a.styles.internal.get(e,o,i,n)}return null}const T=(e,t)=>A(e,t,!1);return{style:{setId:g,getId:(e,t)=>p(e,t,!1),get:T,setCustom:function(t,n,r,s,c){if(!t.dal.isExist(r))throw new Error("component param does not exist");const p=i.validateComponentCustomStyleParams(t,s,c);if(!p.success)throw new Error(p.error);const l=r.id,u=o.getComponentType(t,r);let d,f;if(c)f=E(0,d=c);else if(s)d={},f={};else{const n=T(t,r);d=e.get(n,"style.properties",{}),f=e.get(n,"style.propertiesSource",{})}const m=t.pointers.components.getPageOfComponent(r).id,y={id:n,compId:l,componentClassName:u,pageId:"",styleType:"custom",type:"TopLevelStyle",skin:s||h(t,r),style:{groups:{},properties:d,propertiesSource:f}};a.styles.update(t,n,y,m),g(t,r,n)},update:function(e,t,n,o){return I(e,t,n,o,!1)},updateAndAdjustLayout:S,createSystemStyle:f,connectToThemeStyle:(e,t,n,o)=>{if(!c(n))throw new Error("connectToThemeStyle called with custom style");g(e,t,n,o)},fork:u,internal:{setId:d,getId:p,get:A,fork:l,update:I}},skin:{set:function(e,t,n){const o=i.validateSetSkinParams(e,t,n);if(!o.success)throw new Error(o.error);y(e,t,n)},get:h,getComponentSkinExports:function(e,n){const o=h(e,n);return t.params.getSkinExports(o)},getComponentSkinDefaults:P,getCompSkinParamValue:function(t,n,o){const i=T(t,n).style.properties||{},r=P(t,n);return e.isArray(r[o])&&1===r[o].length?i[r[o]]:r[o]}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(50),n(12),n(3),n(81),n(27),n(2),n(60),n(6),n(82),n(66)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l){"use strict";const{DATA_TYPES:u}=n.constants,d=["desktop","mobile"];function g(t,n,o){const i=t.pointers.page.getNonDeletedPagesPointers(n);return e(i).map("id").filter(function(e){const n=r.isPopup(t,e);return o?n:!n}).value()}function f(t,n,i,r=!1){const a=t.pointers.data.getDataItemFromMaster(n),s=o.serializeDataItem(t,u.data,a,i,r);return s&&s.pageBackgrounds&&e.forEach(d,function(e){const n=s.pageBackgrounds[e];if(n&&n.ref){const e=t.pointers.data.getDataItemFromMaster(n.ref.replace("#",""));n.ref=o.serializeDataItem(t,u.data,e,i,r)}}),s}function m(t,n,o){if(function(e,t){return!!s.get.byPrefix(e,t)}(t,o))return!0;const i=D.getPagesList(t,!1);return e(i).pull(n).some(function(e){return D.getPageUriSEO(t,e)===o})}function y(e,t,n){const o=D.getForbiddenPageUriSEOs(e);return delete o[D.getPageUriSEO(e,t)],o.hasOwnProperty(n.toLowerCase())}function E(t,n){return n=n||0,e.size(t)>a.URLS.MAX_LENGTH-n}function I(e){return/[A-Z]/.test(e)}function S(e){return!/^[a-z0-9\-]+$/.test(e)}function h(t,n){return e.chain(t).find(function(e){return e[0](n)}).get(1,"").value()}function P(e,t,n){return h([[m.bind(null,e,t),"pageUriSEO is invalid: not unique across site"],[y.bind(null,e,t),"pageUriSEO is invalid: reserved word"]],n)}function A(e,t,o){const i=e.pointers.general.getUrlFormat();return e.dal.get(i)===n.siteConstants.URL_FORMATS.HASH_BANG?"":P(e,t,o)||function(e){return h([[E,`pageUriSEO is invalid: over ${a.URLS.MAX_LENGTH} chars`],[I,"pageUriSEO is invalid: all letters must be lowercase"],[S,"pageUriSEO is invalid: must only be alphanumeric or hyphen"]],e)}(o)}const T=5;function v(e,t,n){E(n=i.convertPageNameToUrl(e,n),T)&&(n=n.slice(0,a.URLS.MAX_LENGTH-T));let o=n;for(let i=1;P(e,t,o);i++)o=`${n}-${i}`;return o}function C(t,n,i){return e.isString(i.pageUriSEO)&&e.isEmpty(i.pageUriSEO)&&(i.pageUriSEO=v(t,n,i.title)),i.pageUriSEO&&(!function(t,n,o){const i=A(t,n,o);if(!e.isEmpty(i))throw new Error(i)}(t,n,i.pageUriSEO),e.get(i,["translationData","uriSEOTranslated"])||(i.translationData={uriSEOTranslated:!1})),function(t,n,i){const r=t.pointers.data.getDataItemFromMaster(n),a=o.serializeDataItem(t,u.data,r,!1);return i.pageBackgrounds&&(e.forEach(d,function(e){const r=i.pageBackgrounds[e];if(r&&r.ref){let s,c,p;a?(c=a.pageBackgrounds&&a.pageBackgrounds[e]&&a.pageBackgrounds[e].ref,s=(p=i.pageBackgrounds[e]&&i.pageBackgrounds[e].ref&&i.pageBackgrounds[e].ref.id)||c&&a.pageBackgrounds[e].ref.replace("#","")):s=`${n}_${e}_bg`,r.ref=`#${o.addSerializedDataItemToPage(t,"masterPage",r.ref,s)}`}}),i.pageBackgrounds=e.assign(a&&a.pageBackgrounds||{},i.pageBackgrounds)),i}(t,n,i)}function _(e,t,n,i=!1){(n=C(e,t,n)).pageUriSEO&&p.patchPageTranslations(e,t,{pageUriSEO:n.pageUriSEO}),o.addSerializedDataItemToPage(e,"masterPage",n,t,i)}function O(t,n){return e(t.pointers.components.getChildrenRecursively(n)).map(e=>o.getComponentDataItemId(t,e,"dataQuery")).reject(e.isNull).value()}const D={getPagesDataItems(t){const n=D.getPagesList(t,!1);return e.map(n,function(e){return D.getPageData(t,e)})},getPopupsDataItems:e=>D.getPopupsList(e).map(function(t){return D.getPageData(e,t)}),getNumberOfPages:e=>D.getPagesList(e,!1).length,getPagesList:(t,n,o)=>o?function(t,n){const o=t.pointers.page.getNonDeletedPagesPointers(n);return e.map(o,"id")}(t,n):g(t,n,!1),getPopupsList:e=>g(e,!1,!0),doesPageExist(e,t){const n=e.pointers.page.getPagePointer(t);return Boolean(n)},addPageData(e,t,n,o=!0){_(e,t,n),i.executePageAddedCallback(e,t,o)},setPageData(e,t,n,o=!1){_(e,t,n,o),i.executePageDataChangedCallback(e,t,n,o)},getPageData:(e,t)=>f(e,t,!1),getPageDataWithoutIds:(e,t,n=!1)=>f(e,t,!0,!0),getBgDataItem(t,n,o){if(!e.includes(d,o))throw new Error("unknown device for background");return D.getPageData(t,n).pageBackgrounds[o]},updateBgDataItem(t,n,o,i){if(!e.includes(d,i))throw new Error("unknown device for background");const r={pageBackgrounds:{}};r.pageBackgrounds[i]=e.cloneDeep(o),D.setPageData(t,n,r),c.executeHook(c.HOOKS.SITE_BACKGROUND_UPDATE.AFTER,null,[t,n,i])},removePageData(t,n){const i=t.dal.get(n),r=t.pointers.data.getPageIdOfData(n);i.pageBackgrounds&&e.forEach(d,function(e){const n=i.pageBackgrounds[e];if(n&&n.ref){const e=t.pointers.data.getDataItem(n.ref.replace("#",""),r);o.removeDataItemRecursively(t,e)}}),o.removeDataItemRecursively(t,n)},getPageUriSEO(e,t){const n=e.pointers.data.getDataItemFromMaster(t),o=e.pointers.getInnerPointer(n,"pageUriSEO");return e.dal.get(o)},getForbiddenPageUriSEOs(e){const t=e.pointers.general.getForbiddenPageUriSEOs();return e.dal.get(t)||{}},isDuplicatePageUriSeo:m,isForbiddenPageUriSeo:y,getValidPageUriSEO:v,isPageUriSeoTooLong:E,copyTranslationData:function(t,n,i,r=!1){if(!p.multilingual.isEnabled(t))return;const s=t.dal.full.get(t.pointers.data.getDataItemFromMaster(i)),c={id:i,pageBackgrounds:e.cloneDeep(s.pageBackgrounds)};p.copyDataItemTranslations(t,a.MASTER_PAGE_ID,n,a.MASTER_PAGE_ID,c),function(t,n,o){const i=t.pointers.components.getPage(n,a.VIEW_MODES.DESKTOP),r=t.pointers.components.getPage(o,a.VIEW_MODES.DESKTOP),s=e.zipObject(O(t,i),O(t,r)),c=p.component.getTranslations(t,i);p.copyTranslationData(t,r,c,s)}(t,n,i),function(t,n,i,r=!1){const{pageBackgrounds:s}=t.dal.full.get(t.pointers.data.getDataItemFromMaster(n)),{pageBackgrounds:c}=t.dal.full.get(t.pointers.data.getDataItemFromMaster(i)),l=r?n:a.MASTER_PAGE_ID,d=r?i:a.MASTER_PAGE_ID;e.forEach(a.DEVICES,n=>{if(!s[n]||!s[n].ref)return;const i=s[n].ref.replace("#",""),r={id:c[n].ref.replace("#","")};p.copyDataItemTranslations(t,l,i,d,r),function(t,n){p.patchDataItemTranslations(t,a.MASTER_PAGE_ID,n,n=>{if(!n.mediaRef)return n;const i=n.mediaRef.replace("#",""),r=t.pointers.data.getDataItem(i,a.MASTER_PAGE_ID);if(!t.dal.fullJsonDal.isExist(r))return n;const s=o.serializeDataItem(t,u.data,r,!0),c=o.addSerializedDataItemToPage(t,a.MASTER_PAGE_ID,s);return e.assign({},n,{mediaRef:`#${c}`})})}(t,r.id)})}(t,n,i,r),r||function(e,t,n){const o=l.getPageMenuItemPointer(e,t),i=l.getPageMenuItemPointer(e,n),r={id:i.id,link:l.getLinkIdByMenuItemId(e,i.id)};p.copyDataItemTranslations(e,a.MASTER_PAGE_ID,o.id,a.MASTER_PAGE_ID,r)}(t,n,i)},convertPageNameToUrl:i.convertPageNameToUrl};return D}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";const e=["wixCode"],t=e.concat("nonUndoable"),n=e.concat("undoable"),o=["rendererModel","wixCodeModel"],i=o.concat("appData"),r=i.concat("codeAppId"),a=t.concat("isAppReadOnly");return{paths:{BASE:e,NON_UNDOABLE_BASE_PATH:t,UNDOABLE_BASE_PATH:n,DUPLICATED_FILES_INFO:t.concat("duplicatedFilesInfo"),LOADED_FILE_CONTENTS:t.concat("loadedFileContents"),MODIFIED_FILE_CONTENTS:t.concat("modifiedFileContents"),UNDOABLE_MODIFIED_FILE_CONTENTS:n.concat("modifiedFileContents"),FILE_PATH_TO_ID_MAP:t.concat("filePathToIdMap"),LOADED_CHILDREN:t.concat("loadedChildren"),ARE_CHILDREN_LOADED:t.concat("areChildrenLoaded"),WIX_CODE_MODEL:o,WIX_CODE_APP_DATA:i,GRID_APP_ID:r,IS_APP_READ_ONLY:a,DIRECTORY_FLAG_BY_DELETED_PATH:t.concat("directoryFlagByDeletedPath")},WIX_CODE_APP_ID:"wixCode",WIX_CODE_SERVICE_URL_KEY:"wixCodeServiceUrl",WIX_CODE_SPEC_TYPE:"siteextension",PAGES_ROOT:"pages",JS_EXTENSION:".js"}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";const t=["wixapps"],n=t.concat("appbuilder"),o=n.concat("descriptor"),i={VIEWS:o.concat("views"),TYPES:o.concat("types"),PARTS:o.concat("parts"),DATA_SELECTORS:o.concat("dataSelectors"),PAGES:o.concat("pages"),ITEMS:n.concat("items"),DELETED_ITEMS:n.concat("deletedItems")};function r(e,t){if(!e)throw new Error(t)}return{initBasePaths(r){const a=[t,n,o].concat(e.values(i));e.forEach(a,function(e){r.dal.isPathExist(e)||r.dal.full.setByPath(e,{})})},getBaseItemsPath:e=>e?i.ITEMS.concat(e):i.ITEMS,getItemPath(e,t,n){r(e,"Must provide a type ID"),r(t,"Must provide an item ID");let o=this.getBaseItemsPath(e).concat(t);return n&&(o=o.concat(n)),o},getBaseDeletedItemsPath:e=>e?i.DELETED_ITEMS.concat(e):i.DELETED_ITEMS,getDeletedItemPath(e,t){return r(e,"Must provide a type ID"),r(t,"Must provide an item ID"),this.getBaseDeletedItemsPath(e).concat(t)},getBaseTypesPath:()=>i.TYPES,getTypePath(e){return r(e,"Must provide a type ID"),this.getBaseTypesPath().concat(e)},getBasePartsPath:()=>i.PARTS,getPartPath(e){return r(e,"Must provide a part ID"),this.getBasePartsPath().concat(e)},getBaseViewsPath:()=>i.VIEWS,getViewPath(e){return r(e,"Must provide a view ID"),this.getBaseViewsPath().concat(e)},getBaseDataSelectorsPath:()=>i.DATA_SELECTORS,getDataSelectorPath(e){return r(e,"Must provide a data selector ID"),this.getBaseDataSelectorsPath().concat(e)},getPagePath:e=>(r(e,"Must provide a page ID"),i.PAGES.concat(e)),getApplicationInstanceVersionPath:()=>o.concat(["applicationInstanceVersion"]),getOffsetFromServerTimePath:()=>o.concat(["offsetFromServerTime"]),getRepoPath:()=>o,getAppbuilderPath:()=>n,getPackageMetaDataPath:()=>n.concat(["metadata"]),getAppbuilderMetadataPath:t=>e.compact(n.concat(["metadata","appbuilder_metadata"].concat(t))),getAppPart2MetadataPath:e=>n.concat(["metadata",e])}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(8),n(9),n(3),n(6),n(31),n(2),n(16)],void 0===(i=function(e,t,n,o,i,r,a,s,c){"use strict";function p(e,t){let o=null;return e&&t&&(o=e.pointers.components.isMasterPage(t)?"wysiwyg.viewer.components.WSiteStructure":n.getComponentType(e,t)),o}function l(e,t){return e.pointers.components.getParent(t)}function u(e,t){return e.pointers.full.components.getParent(t)}function d(e,t,n){let o=n(e,t);const i=[];for(;null!==o;)i.push(o),o=n(e,o);return i}function g(e,t){return e.pointers.components.isPage(t)}function f(e,t,n){return n?e.pointers.components.getChildrenRecursively(t):e.pointers.components.getChildren(t)}return{buildDefaultComponentStructure:(e,t)=>c.services.buildDefaultComponentStructure(t),getType:p,getDefinition:function(e,t){return c.services.schemasService.getDefinition(t)},getPropertiesItem:function(e,t){const n=e.pointers.getInnerPointer(t,"propertyQuery"),o=n&&e.dal.get(n),i=e.pointers.components.getPageOfComponent(t),r=i&&i.id,a=o&&e.pointers.data.getPropertyItem(o,r);return a&&e.dal.get(a)},getPage:(e,t)=>e.pointers.full.components.getPageOfComponent(t),getContainerToAddComponentTo:function(e,t){const n=p(e,t),o=r.executeHooksAndCollectValues(r.HOOKS.ADD_ROOT.GET_CONTAINER_TO_ADD_TO,n,[e,t]);if(o.length>1)throw new Error("you can't have more that one hook returning a container");return o[0]||t},getContainer:l,getAncestors:(e,t)=>d(e,t,l),getAncestorsFromFull:(e,t)=>d(e,t,u),getSiblings:function(t,n){const o=t.pointers.components.getParent(n),i=f(t,o);return e.remove(i,{id:n.id}),i},getRepeatedComponents:function(e,n){return t.displayedOnlyStructureUtil.isDisplayedComponent(n.id)?e.pointers.components.getAllDisplayedOnlyComponents(n):[]},getChildren:f,getChildrenFromFull:function(e,t,n){return n?e.pointers.full.components.getChildrenRecursively(t):e.pointers.full.components.getChildren(t)},getAllJsonChildren:function(e,t){return f(e,t,!1)},getTpaChildren:function(t,n){const o=t.pointers.components.getChildrenRecursively(n);return e.filter(o,function(e){const n=p(t,e);return a.isTpaByCompType(n)})},getBlogChildren:function(t,n){const o=t.pointers.components.getChildrenRecursively(n);return e.filter(o,function(e){return"wixapps.integration.components.AppPart"===p(t,e)})},getAncestorByPredicate:function(e,t,n){return e.pointers.components.getAncestorByPredicate(t,n)},getChildrenArrayKey:function(e,t){if(!g(void 0,e))return"components";switch(t){case s.VIEW_MODES.MOBILE:return"`mobileComponents";case s.VIEW_MODES.DESKTOP:return"masterPage"===e.id?"children":"components"}},isRenderedOnSite:function(e,t){return e.siteAPI.isComponentRenderedOnSite(t.id)},isContainsCompWithType:function(t,n,o){o=e.isArray(o)?o:[o];const i=t.pointers.components.getChildrenRecursively(n);for(let n,r=0;r<i.length;r++)if(n=p(t,i[r]),e.includes(o,n))return!0;return!1},isExist:function(e,t){return e.dal.isExist(t)},isPageComponent:g}}.apply(t,o))||(e.exports=i)},function(e,t){e.exports=r},function(e,t,n){var o,i;o=[n(0),n(1),n(34),n(14),n(62),n(3),n(36),n(22),n(6)],void 0===(i=function(e,t,n,o,i,r,a,s,c){"use strict";const p="isHiddenByModes",l="wysiwyg.viewer.components.SiteRegionContainer",u={SHOW_ON_SOME_PAGES:{mobileConversionConfig:"copyOverrides"},POPOVER:{mobileConversionConfig:"copyOverrides"},HOVER:{mobileConversionConfig:"chooseMobileMode"}};function d(t,n){if(e.isEmpty(n))return null;const o=t.pointers.componentStructure.getModesDefinitions(n);return t.dal.full.get(o)}function g(n,o){const i=d(n,o);return function(n,o,i){const a=e.find(o,{type:t.siteConstants.COMP_MODES_TYPES.HOVER});if(a){const t=n.pointers.full.components.getDesktopPointer(i),s=r.getPropertyItemPointer(n,t);let c;if(s){const{mobileDisplayedModeId:t}=n.dal.get(s);c=t&&e.find(o,{modeId:t})}return c||a}}(n,i,o)||function(n,o){return e(o).filter(t=>"copyOverrides"===e.get(u,[t.type,"mobileConversionConfig"])).find({type:t.siteConstants.COMP_MODES_TYPES.POPOVER})}(0,i)}function f(t,n,o){if(!o)return null;const i=d(t,n);return e.filter(i,{type:o})}function m(e,t){return I(t.id)}function y(n,o,i,r,a,s){if(c=r,!e.includes(e.values(t.siteConstants.COMP_MODES_TYPES),c))throw new Error("added component mode is invalid");var c;!function(e,t){const n=e.pointers.componentStructure.getModes(t),o=e.pointers.componentStructure.getModesDefinitions(t),i=e.pointers.componentStructure.getModesOverrides(t);e.dal.full.isExist(n)?(e.dal.full.isExist(i)||e.dal.full.set(i,[]),e.dal.full.isExist(o)||e.dal.full.set(o,[])):e.dal.full.set(n,{definitions:[],overrides:[]})}(n,i);const p=E(i.id,r,a,o,s),l=function(n,o,i){const r=n.pointers.componentStructure.getModesDefinitions(o),a=n.dal.full.get(r);switch(i.type){case t.siteConstants.COMP_MODES_TYPES.DEFAULT:case t.siteConstants.COMP_MODES_TYPES.HOVER:return function(n,o,i){const r=e.find(n,{type:t.siteConstants.COMP_MODES_TYPES.DEFAULT}),a=e.find(n,{type:t.siteConstants.COMP_MODES_TYPES.HOVER}),s=o.type===t.siteConstants.COMP_MODES_TYPES.DEFAULT,c=o.type===t.siteConstants.COMP_MODES_TYPES.HOVER;if(s&&r||c&&a||r&&a)return n;if(s)return n.concat(o,E(i,t.siteConstants.COMP_MODES_TYPES.HOVER));if(c)return n.concat(o,E(i,t.siteConstants.COMP_MODES_TYPES.DEFAULT));return n}(a,i,o.id);case t.siteConstants.COMP_MODES_TYPES.SCROLL:return function(n,o,i){if(e.isUndefined(o.settings.scrollPos))throw new Error("scroll mode must have a scroll pos");let r=[];const a=e.filter(n,{type:t.siteConstants.COMP_MODES_TYPES.SCROLL});e.find(a,"settings.scrollPos",0)||0===o.settings.scrollPos||(r=[E(i,t.siteConstants.COMP_MODES_TYPES.SCROLL,{scrollPos:0})]);if(!e.find(a,["settings.scrollPos",o.settings.scrollPos]))return r.concat(o,n);return r.concat(n)}(a,i,o.id);case t.siteConstants.COMP_MODES_TYPES.WIDTH:return function(n,o,i){if(e.isUndefined(o.settings.width))throw new Error("width mode must have a width pos");let r=[];const a=e.filter(n,{type:t.siteConstants.COMP_MODES_TYPES.WIDTH});e.find(a,"settings.width",0)||0===o.settings.width||(r=[E(i,t.siteConstants.COMP_MODES_TYPES.WIDTH,{width:0})]);if(!e.find(a,["settings.width",o.settings.width]))return r.concat(o,n);return r.concat(n)}(a,i,o.id);case t.siteConstants.COMP_MODES_TYPES.APPLICATIVE:return function(e,t){return[t].concat(e)}(a,i);case t.siteConstants.COMP_MODES_TYPES.SHOW_ON_SOME_PAGES:return function(t,n,o,i){if(!t.pointers.components.isMasterPage(n))throw new Error("SOSP mode can be added only to masterPage");if(e.isUndefined(i.settings.pagesGroupId))throw new Error("SOSP mode must have a pagesGroupId");return[i].concat(o)}(n,o,a,i)}}(n,i,p),u=n.pointers.componentStructure.getModesDefinitions(i);n.dal.full.set(u,l),p.type===t.siteConstants.COMP_MODES_TYPES.SHOW_ON_SOME_PAGES&&n.siteAPI.updateActiveSOSPModes()}function E(e,t,n,o,i){return{modeId:o||I(e.id),type:t,label:i||null,settings:n||null}}function I(e){const n=`${e?`${e}-`:""}mode`;return t.guidUtils.getUniqueId(n,"-")}function S(e,n){if(!n)return null;const o=e.siteAPI.getActiveModes(),i=e.pointers.components.getPageOfComponent(n)||e.pointers.full.components.getPageOfComponent(n),r=d(e,n);return t.modesUtils.getActiveComponentModeIds(o[i.id],r)}function h(e,t,n){e.siteAPI.deactivateMode(t,n)}function P(e,t){const n=e.pointers.componentStructure.getModesOverrides(t);return e.dal.full.isExist(n)&&e.dal.full.get(n)}function A(e,t){a.removeComponentsBehaviorsWithFilter(e,t,{action:"modeOut"}),a.removeComponentsBehaviorsWithFilter(e,t,{action:"modeIn"})}function T(t,n){let o=t.pointers.full.components.getParent(n),i=S(t,o);for(;o&&e.isEmpty(i);)i=(o=t.pointers.components.getParent(o))?S(t,o):null;return o}function v(t,n,o){if(e.isEmpty(o)||!n)return;const i=t.pointers.componentStructure.getModes(n),r=t.dal.full.get(i)||{};var a,s;r.isHiddenByModes=!0,r.overrides=function(t,n){t=t||[];let o=e.find(t,function(e){return O(e.modeIds,n)});o||(o={modeIds:n},t.push(o));return o.isHiddenByModes=!1,t}(r.overrides,o),r.overrides=(a=r.overrides,s=o,e.filter(a,function(e){return O(e.modeIds,s)})),t.dal.full.set(i,r)}function C(e,n){const r=i.getSospModeByPagesGroup(e,n);return r?r.modeId:function(e,n){const i=o.getViewMode(e),r=e.pointers.components.getMasterPage(i),a=m(0,r),s={pagesGroupId:`#${n.id}`};return y(e,a,r,t.siteConstants.COMP_MODES_TYPES.SHOW_ON_SOME_PAGES,s,function(e,t){return`SOSP-${e.dal.get(t).groupName}`}(e,n)),a}(e,n)}function _(e,t,o){if(!e.dal.isExist(o))throw new Error("componentModes: pagesGroup not exist");if(!function(e,t){return n.getComponentType(e,t)===l&&e.pointers.components.isInMasterPage(t)}(e,t))throw new Error("componentModes: cant show component only on some pages")}function O(t,n){return t.length===n.length&&e.intersection(t,n).length===t.length}function D(e,t){const n=T(e,t);return n?S(e,n):{}}function w(t,n){const o=function(t,n){const o=S(t,n);return e.isEmpty(o)?D(t,n):o}(t,n),i=P(t,n),r=e.findIndex(i,function(t){return e.every(t.modeIds,function(e){return o[e]})});if(r>=0){const e=t.pointers.componentStructure.getModesOverrides(n);return t.pointers.getInnerPointer(e,r)}return null}function M(t,n,o){if(!n)throw new Error("missing component pointer");o&&!e.isArray(o)&&(o=[o]);const i=P(t,n),r=e.find(i,function(t){return e.isEqual(e.sortBy(t.modeIds),e.sortBy(o))});if(r&&!e.isUndefined(r[p]))return!r[p];const a=t.dal.full.get(t.pointers.componentStructure.getModes(n));return!(a&&!e.isUndefined(a[p]))||!a[p]}function b(e,t){return e.dal.isExist(t)}function R(t,n,o,i){const a=r.getDesignItemByModes(t,n,o),s=t.pointers.components.getPageOfComponent(n).id,c=function(t,n){return t.dataChangeBehaviors&&(t.dataChangeBehaviors=e.reject(t.dataChangeBehaviors,function(t){return e.includes(n,t.part)}),e.set(t,"background.mediaTransforms",{scale:1})),t}(a,i);r.addSerializedDesignItemToPage(t,s,c,c.id)}return{addModeDefinition:y,getComponentModeById:function(t,n,o){const i=d(t,n);return i&&o?e.find(i,{modeId:o}):null},getModeTypes:function(){return e.cloneDeep(t.siteConstants.COMP_MODES_TYPES)},getComponentModes:d,getComponentModesByType:f,removeComponentMode:function(t,n,o){S(t,n)[o]&&h(t,n,o);const i=s.getType(t,n);c.executeHook(c.HOOKS.REMOVE_COMP_MODE.BEFORE,i,[t,n,o]);const r=t.pointers.componentStructure.getModesDefinitions(n),a=t.dal.full.get(r),p=e.reject(a,{modeId:o});t.dal.full.set(r,p)},getComponentActiveModeIds:S,resetAllActiveModes:function(e){e.siteAPI.resetAllActiveModes()},activateComponentMode:function(e,t,n){e.siteAPI.activateMode(t,n)},deactivateCompMode:h,createUniqueModeId:I,showComponentOnlyOnPagesGroup:function(e,t,n){_(e,t,n),v(e,t,[C(e,n)])},overrides:{getAllOverrides:P,removeAllOverrides:function(e,t){const n=e.pointers.componentStructure.getModesOverrides(t);e.dal.full.isExist(n)&&e.dal.full.set(n,[])},getOverridePointerByActiveModes:w,applyCurrentToAllModes:function(t,n){const o=t.pointers.componentStructure.getModes(n),i=t.dal.full.get(o),r=w(t,n);if(r){const o=e.omit(t.dal.full.get(r),["isHiddenByModes","modeIds"]);t.dal.full.merge(n,o)}A(t,n),i&&t.dal.full.set(o,e.assign(i,{isHiddenByModes:!1,overrides:[]}))},updateComponentOverrides:function(e,t,n){const o=e.pointers.componentStructure.getModesOverrides(t);e.dal.full.isExist(o)&&e.dal.full.set(o,n)},showComponentOnlyInModesCombination:v},getFirstAncestorActiveModes:D,getFirstAncestorWithActiveModes:T,isComponentDisplayedByDefault:function(n,o){const i=T(n,o);if(i){const r=e.head(f(n,i,t.siteConstants.COMP_MODES_TYPES.DEFAULT));return!!r&&M(n,o,[r.modeId])}return!0},isComponentDisplayedInModes:M,isComponentCurrentlyDisplayed:b,shouldDeleteComponentFromFullJson:function(n,o){if(!b(n,o)&&n.dal.full.isExist(o))return!0;const i=T(n,o);if(!i)return!0;const r=e(S(n,i)).keys().head();return!t.modesUtils.isCompVisibleAfterRemovalFromMode(n.pointers,n.dal.full,o,i,r)},getModeToAddId:m,getComponentModesAvailableInView:function(e,t){return e.pointers.components.isMobile(t)?[g(e,t)]:d(e,t)},getCompMobileMode:g,removeDesignBehaviorsFromAllModes:function(t,n,o){const i=d(t,n);e.forEach(i,function(e){R(t,n,[e.modeId],o)})},getAllCompDesignItems:function(t,n){const o=t.pointers.componentStructure.getModes(n),i=t.pointers.components.getPageOfComponent(n),a=t.pointers.getInnerPointer(n,"designQuery"),s=t.dal.full.get(a).replace("#",""),c=r.getDesignItemById(t,s,i.id);if(!t.dal.full.isExist(o))return[c];let p=[];const l=t.dal.full.get(o),u=l.overrides,d=l.definitions||[],g=e.filter(u,"designQuery");return g.length!==d.length&&p.push(c),p=p.concat(e.map(g,function(e){return r.getDesignItemByModes(t,n,e.modeIds)}))},getMobileActiveModesMap:function(n,o){const i=n.pointers.components.getPage(o,t.constants.VIEW_MODES.DESKTOP),r=e.filter(d(n,i),function(t){return"copyOverrides"===e.get(u,[t.type,"mobileConversionConfig"])}),a=e.map(n.pointers.components.getChildrenRecursively(i),e.partial(g,n));return e(a).concat(r).map("modeId").compact().uniq().map(function(e){return[e,!0]}).fromPairs().value()},removeSingleModeBehaviors:A,metaData:u,getModesIdsAndParentNeededToShowComp:function(t,n){let o,i;if(!t.dal.isExist(n)&&t.dal.full.isExist(n)){let r=t.pointers.componentStructure.getModes(n),a=t.pointers.full.components.getParent(n);for(t.dal.full.isExist(r)&&(o=t.dal.full.get(r),i=n);!o&&a;)t.dal.full.isExist(a)&&(r=t.pointers.componentStructure.getModes(a),t.dal.full.isExist(r)&&(o=t.dal.full.get(r),i=a)),o||(a=t.pointers.full.components.getParent(a));return{modeIdsToActivate:function(t){return e.get(e.find(t.overrides,{isHiddenByModes:!1}),"modeIds")}(o),parentWithModesDef:function(t,n){let o=t.pointers.componentStructure.getModes(n),i=t.dal.full.get(o),r=i&&i.definitions&&!e.isEmpty(i.definitions);if(r)return n;let a=t.pointers.full.components.getParent(n);for(;!r&&a;)o=t.pointers.componentStructure.getModes(a),(r=(i=t.dal.full.get(o))&&i.definitions&&!e.isEmpty(i.definitions))||(a=t.pointers.full.components.getParent(a));return a}(t,i)}}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1)],void 0===(i=function(e,t){"use strict";const n=t.loggingUtils.logger;let o=function(){const e=window.parent.location.search.replace(/^\??/,""),n=t.urlUtils.parseUrlParams(e).editorSessionId;return o=function(){return n},n};function i(e){return e.siteAPI.getEditorSessionId()||o()}function r(e){return e.siteAPI.isMobileView()?"mobile":"desktop"}function a(t){const n=e.tail(arguments);return n[0]=e.defaults({},n[0],{src:38,endpoint:"editor",sampleRatio:0}),n[1]=e.defaults({},n[1],{esi:i(t),editor_working_mode:r(t)}),t.siteAPI.reportBI.apply(t.siteAPI,n)}return{event:a,error:function(t){const n=e.toArray(arguments);return e.defaults(n[1],{endpoint:"trg",evid:10}),e.defaults(n[2],{dsOrigin:t.config.origin}),a.apply(this,n)},register:function(){return n.register.apply(n,e.tail(arguments))}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(40),n(236)],void 0===(i=function(e,t,n,o){"use strict";const{urlUtils:i}=o;function r(e){return n.getProperty(e,n.PROPERTY_NAMES.SITE_ID)}function a(e){return n.getProperty(e,n.PROPERTY_NAMES.ORIGINAL_TEMPLATE_ID)}function s(e){const n=e.pointers.general.getUrlFormat();return e.dal.get(n)||t.siteConstants.URL_FORMATS.HASH_BANG}function c(e,t){return s(e)===t}return{getUserInfo:function(e){return n.getProperty(e,n.PROPERTY_NAMES.USER_INFO)},isHttpsEnabled:function(e){return!!n.getProperty(e,n.PROPERTY_NAMES.IS_HTTPS_ENABLED)},getPublicUrl:function(e){return n.getProperty(e,n.PROPERTY_NAMES.PUBLIC_URL)},setPublicUrl:function(e,t){n.setProperty(e,n.PROPERTY_NAMES.PUBLIC_URL,t)},getSiteId:r,getMetaSiteId:function(e){return n.getProperty(e,n.PROPERTY_NAMES.META_SITE_ID)},getSiteOriginalTemplateId:a,getLanguage:function(e){return n.getProperty(e,n.PROPERTY_NAMES.LANGUAGE_CODE)||"en"},getCurrency:function(e){return n.getProperty(e,n.PROPERTY_NAMES.CURRENCY)},getTimeZone:function(e){return n.getProperty(e,n.PROPERTY_NAMES.TIME_ZONE)},getLocale:function(e){return n.getProperty(e,n.PROPERTY_NAMES.LOCALE)},getGeo:function(e){return n.getProperty(e,n.PROPERTY_NAMES.GEO)},isFirstSave:function(e){return n.getProperty(e,n.PROPERTY_NAMES.NEVER_SAVED)||!1},isTemplate:function(e){return r(e)===a(e)},getDocumentType:function(e){return n.getProperty(e,n.PROPERTY_NAMES.DOCUMENT_TYPE)},isSitePublished:function(e){const t=n.getProperty(e,n.PROPERTY_NAMES.IS_PUBLISHED);return null===t||t},getUrlFormat:s,isUsingUrlFormat:c,isUsingSlashUrlFormat:function(e){return c(e,t.siteConstants.URL_FORMATS.SLASH)},getPossibleUrlFormats:function(){return e.clone(t.siteConstants.URL_FORMATS)},pendingApps:function(e){return n.getProperty(e,n.PROPERTY_NAMES.PENDING_APPS)},isSiteFromOnBoarding:function(t){const o=t.siteAPI.getClientSpecMap(),i=e.find(o,{type:"onboarding"}),r=!0===e.get(i,"inUse",!1),a=n.getProperty(t,n.PROPERTY_NAMES.USE_ONBOARDING);return r&&(e.isUndefined(a)||a)},setUseOnBoarding:function(e,t){n.setProperty(e,n.PROPERTY_NAMES.USE_ONBOARDING,t)},getUserPermissions:function(e){return n.getProperty(e,n.PROPERTY_NAMES.PERMISSIONS)},isOwner:function(e){return n.getProperty(e,n.PROPERTY_NAMES.IS_OWNER)},getSiteToken:function(e){return n.getProperty(e,n.PROPERTY_NAMES.SITE_TOKEN)},getMediaSiteUploadToken:function(e){return n.getProperty(e,n.PROPERTY_NAMES.MEDIA_SITE_UPLOAD_TOKEN)},getMediaUserUploadToken:function(e){return n.getProperty(e,n.PROPERTY_NAMES.MEDIA_USER_UPLOAD_TOKEN)},getUserId:function(e){return n.getProperty(e,n.PROPERTY_NAMES.USER_ID)},getCurrentRevisionPublicUrl:function(e){const t=n.getProperty(e,n.PROPERTY_NAMES.PUBLIC_URL),o=n.getProperty(e,n.PROPERTY_NAMES.SITE_REVISION);return i.setUrlParams(t,{siteRevision:o})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(1),n(3)],void 0===(i=function(e,t){"use strict";const n="wysiwyg.viewer.components.PopupContainer";function o(e,t){const o=e.pointers.components.getChildren(t);if(o.length>1)throw new Error(`More than one child of the popup page was found. A popup page must have only single direct child of type ${n}`);if(o.length<1)throw new Error("No direct child of the popup page was found");const i=o[0],r=e.dal.get(e.pointers.getInnerPointer(i,"componentType"));if(r!==n)throw new Error(`Direct child of the popup is of type ${r}. Expected type: ${n}`);return i}return{getPopupContainer:o,isPopupContainer:function(t){return t===e.constants.POPUP.POPUP_CONTAINER.COMPONENT_TYPE},isPopupFullWidth:function(e,n){const i=o(e,n);return"fullWidth"===t.getPropertiesItem(e,i).alignmentType},isPopup:function(e,t){if("masterPage"===t)return!1;const n=e.pointers.data.getDataItemFromMaster(t);return e.dal.get(e.pointers.getInnerPointer(n,"isPopup"))}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{TYPE:{TPA_SECTION:"TPASection",TPA_MULTI_SECTION:"TPAMultiSection",TPA_WIDGET:"TPAWidget",TPA_GLUED_WIDGET:"TPAGluedWidget"},DATA_TYPE:{TPA_SECTION:"TPA",TPA_MULTI_SECTION:"TPAMultiSection",TPA_WIDGET:"TPAWidget"},COMP_TYPES:{TPA_SECTION:"wysiwyg.viewer.components.tpapps.TPASection",TPA_MULTI_SECTION:"wysiwyg.viewer.components.tpapps.TPAMultiSection",TPA_WIDGET:"wysiwyg.viewer.components.tpapps.TPAWidget",TPA_GLUED_WIDGET:"wysiwyg.viewer.components.tpapps.TPAGluedWidget"},TPA_COMP_TYPES:{TPA_SECTION:"tpa.viewer.components.tpapps.TPASection",TPA_MULTI_SECTION:"tpa.viewer.components.tpapps.TPAMultiSection",TPA_WIDGET:"tpa.viewer.components.tpapps.TPAWidget",TPA_GLUED_WIDGET:"tpa.viewer.components.tpapps.TPAGluedWidget"},SKINS:{TPA_SECTION:"wysiwyg.viewer.skins.TPASectionSkin",TPA_WIDGET:"wysiwyg.viewer.skins.TPAWidgetSkin"},APP_MARKET:{EDITOR_BASE_URL:"http://editor.wix.com/app-market-editor",DOMAIN:"http://editor.wix.com/"},STYLE:{TPA_WIDGET:"tpaw0",TPA_GLUED_WIDGET:"tpagw0",TPA_SECTION:"tpas0"},CYCLE:{MONTHLY:"monthly",YEARLY:"yearly",ONE_TIME:"oneTime"},APP_DEF_ID:{CHAT:"14517e1a-3ff0-af98-408e-2bd6953c36a2"}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(0),n(5),n(17),n(3),n(4),n(15),n(71),n(72),n(28),n(2),n(35),n(31),n(98)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l,u,d){"use strict";const g=function(t,n,o){const i=e.filter(t,e=>(function(e,t){return e.pendingAction===l.APP_ACTION_TYPES.REMOVE||r.isAppAutoRevoked(e)&&E(e,t)&&!S(e)&&!a.isPending(void 0,e)})(e,n));return o&&e.isBoolean(o.excludeHybrid)&&o.excludeHybrid?e.filter(i,function(e){return r.isHybridAppAndEditorPartNotDismissed(e)}):i},f=function(t){return e.get(t,"appFields.platform.editorScriptUrl")&&!e.get(t,"appFields.platform.viewerScriptUrl")&&e.isEmpty(t.widgets)},m=function(t,n){return e.filter(t,function(e){return I(e,n)||function(e){return e.notProvisioned&&f(e)}(e)})},y=function(t,n,o){return r.hasEditorPlatformPart(t)&&(function({appDefinitionId:t},n){return e.some(n,{appDefinitionId:t})}(t,o)||function(e,t){let n=!1;return e.forEach(e=>e.getIn(["data","document_data"]).forEach(e=>{const o=e.get("appId"),i=e.get("applicationId"),r=e.get("appDefId");n=n||`${o}`===`${t.applicationId}`||`${i}`===`${t.applicationId}`||`${i}`===`${t.appDefinitionId}`||`${r}`===`${t.appDefinitionId}`})),n}(n,t))},E=function(t,n){return r.isEditorOrHybridApp(t)&&r.isAppPermissionsIsGranted(t)&&!e.includes(e.invokeMap(n,"toString"),t.applicationId.toString())&&!f(t)},I=function(t,n){return r.isEditorOrHybridApp(t)&&r.isAppPermissionsIsRevoked(t)&&e.includes(e.invokeMap(n,"toString"),t.applicationId.toString())},S=function(t){return e.isBoolean(t.preInstalled)&&t.preInstalled},h=function(t,n){const o=t.pointers.page.getPageData(n),i=t.dal.get(o),a=e(i).filter(function(e){return u.isTpaByDataType(e.type)}).map("applicationId").uniq().value(),s=r.getAppsData(t);return e(s).pick(a).values().value()},P=function(t,o,i){const r=n.getPageIdList(t,!0,!0);let a;const s=e.find(r,function(n){const r=C(t,n);return a=e.find(r,function(e){return e.applicationId.toString()===o.toString()&&i(e)}),!e.isUndefined(a)});return s?{pageId:s,compId:a.id}:null},A=function(t,o){o=o||-1;const i=n.getPageIdList(t,!0,!0);return e.some(i,function(e){return T(t,e,o)})},T=function(t,n,o){const i=t.pointers.page.getPageData(n),r=t.dal.get(i);return e.some(r,function(t){return e.get(t,"applicationId","").toString()===o.toString()})},v=(t=[],n,o)=>{let i=[];return t.forEach(t=>{i=i.concat((t=>{const n=t.get("data");if(!n)return null;const o=n.get("document_data").filter(e=>u.isTpaByDataType(e.get("type"))).toJS();return e(o).map("applicationId").uniq().value()})(t))}),e.union(i,function(t,n,o){return e.reduce(t,function(e,t,i){return y(t,o,n)&&e.push(i),e},[])}(n,o,t))},C=function(t,o){const r=n.getPage(t,o),a=i.getTpaChildren(t,r);return e.map(a,function(n){return e.assign(i.data.get(t,n),{id:n.id,pageId:o})})},_=function(e){if(!e||!e.size)return!1;let t=!1;const n=e.getIn(["data","document_data"]);return n&&n.forEach(e=>{t=t||u.isTpaByDataType(e.get("type"))}),t};return{getInstalledAppsOnPage:h,getAllTpaCompsOnPage:C,isMainSectionInstalled:function(t,o){const i=n.getPageIdList(t,!0);return e.some(i,function(n){const i=C(t,n);return e.some(i,function(e){return e.applicationId.toString()===o.toString()&&e.type===c.DATA_TYPE.TPA_SECTION})})},getWidgetsByAppId:function(t,o){let i=[];const r=n.getPageIdList(t,!0,!0);return e.forEach(r,function(n){const r=C(t,n);i=e.union(i,e.filter(r,function(e){return e.applicationId.toString()===o.toString()&&e.type===c.DATA_TYPE.TPA_WIDGET}))}),e.isEmpty(i)?null:i},getAllAppCompsByAppId:function(t,o){let i=[];e.isArray(o)||(o=[o]),o=e(o).compact().invokeMap("toString").value();const r=n.getPageIdList(t,!0,!0);return e.forEach(r,function(n){const r=C(t,n);i=e.union(i,e.filter(r,function(t){return t&&t.applicationId&&e.includes(o,t.applicationId.toString())}))}),e.isEmpty(i)?null:i},isMultiSectionInstalled:function(t,o){let i=[];o=o||-1;const r=n.getPageIdList(t,!0);return e.forEach(r,function(n){const r=C(t,n);i=e.union(i,e.filter(r,function(e){return e&&e.applicationId&&e.applicationId.toString()===o.toString()&&e.type===c.DATA_TYPE.TPA_SECTION}))}),e.size(i)>1},getHiddenSections:function(t,o){let i=[];const r=n.getPageIdList(t,!0);return e.forEach(r,function(n){const r=C(t,n);i=e.union(i,e.filter(r,function(e){return e.applicationId.toString()===o.toString()&&e.type===c.DATA_TYPE.TPA_MULTI_SECTION}))}),e.isEmpty(i)?null:i},getFirstAppCompPageId:function(t,n,o){const i=r.getAppDataByAppDefinitionId(t,n),a=e.get(i,"applicationId",null);let s=a&&function(e,t){return P(e,t,function(e){return e.type===c.DATA_TYPE.TPA_SECTION})}(t,a);return!s&&o&&(s=function(t,n){const o=e.find(n.widgets,{default:!0});return o?P(t,n.applicationId,function(e){return e.widgetId===o.widgetId}):null}(t,i)),s=a&&(s||P(t,a,function(){return!0}))},isApplicationIdExists:A,isAppInstalledBy:function(e,t,n){const o=r.getAppDataByAppDefinitionId(e,t);if(o){const t=A(e,o.applicationId);return n?t&&!o.demoMode:t}return!1},isAppInstalledOnPage:function(e,t,n,o){const i=r.getAppDataByAppDefinitionId(e,n);if(i){const n=T(e,t,i.applicationId);return o?n&&!i.demoMode:n}return!1},getDeletedAppsIds:o=>{const i=r.getAppsData(o);if(t.isOpen("ds_publicMethodInit")){const t=function(t){const o=n.getPageIdList(t,!0,!0);return e.reduce(o,(n,o)=>{const i=t.pointers.page.getPageData(o),r=t.dal.get(i),a=e(r).map(t=>e.get(t,"applicationId","").toString()).compact().value();return n=n.concat(a)},[])}(o);return e(i).filter(n=>!e.includes(t,n.applicationId.toString())&&r.isEditorOrHybridApp(n)).map("applicationId").value()}return e(i).filter(e=>!A(o,e.applicationId)&&r.isEditorOrHybridApp(e)).map("applicationId").value()},getAppsDefIdToProvisionOnSiteLoad:function(t){const n=r.getAppsData(t);return e(n).filter(function(e){return e.demoMode&&(A(t,e.applicationId)||d.isPlatformAppInstalled(t,e.appDefinitionId))}).map("appDefinitionId").value()},getAppsToGrantAndRevoke:function(e,t,n,o){const i=v(t,e,o);return{revoke:g(e,i,n),grant:m(e,i)}},getAllAppIdsInstalledOnPages:v,areTpaCompsWereUnInstalled:function(t,n,o,i){if(function(e){let t=!1;return e&&e.forEach(e=>{t=t||_(e)}),t}(o))return!0;const a=v(t)||[],s=v(n)||[],l=a.length===s.length&&!e.isEqual(a,s);return a.length>s.length||l||((t,n,o,i)=>{if(t.get(p.MASTER_PAGE_ID)){const t=e.find(i,{appDefinitionId:c.APP_DEF_ID.CHAT});return t&&r.isAppPermissionsIsGranted(t)&&!e.includes(n,t.appDefinitionId)&&!e.includes(o,t.appDefinitionId)}return!1})(n,a,s,i)},getAppsToGrantPermissions:m,getAppPages:function(t,o){const i=n.getPageIdList(t,!1,!1);return e(i).map(function(o){return e.merge(n.data.get(t,o),{pageId:o})}).filter({tpaApplicationId:parseInt(o,10)}).value()},getPagesByApplicationIds:function(t,o){const i=n.getPagesDataItems(t);return e.filter(i,function(t){return e.includes(o,t.tpaApplicationId)})},isAppComponentInstalled:function(t,o){const i=n.getPageIdList(t,!0,!0);return e.some(i,function(n){const i=t.pointers.page.getPageData(n),r=t.dal.get(i);return e.some(r,{widgetId:o})})},isSectionInstalledByTpaPageId:function(t,o,i){const r=n.getPagesDataItems(t);return e.some(r,{tpaApplicationId:o,tpaPageId:i})},isPlatformOnlyAppReinstalled:function(t,n,o){const i=e.filter(n,function(n){return!!r.hasEditorPlatformPart(n)&&!0===e.get(n.permissions,"revoked")&&y(n,t,o)});return!e.isEmpty(i)},isPlatformOnlyAppUninstalled:function(t,n,o){const i=e.filter(n,function(n){return!!r.hasEditorPlatformPart(n)&&!1===e.get(n.permissions,"revoked")&&!y(n,t,o)});return!e.isEmpty(i)},getInstalledDependentAppsData:function(t,o){const i=r.getAppData(t,o),a=e.get(i,"appDefinitionId"),s=r.getDependentApps(t,a);if(!e.isEmpty(s)){const o=function(t){const o=n.getPageIdList(t,!0,!0),i=e.reduce(o,function(n,o){const i=e.map(h(t,o),"applicationId");return e.union(n,i)},[]);return e.uniq(i)}(t);return e.reduce(s,function(n,i){const a=r.getAppDataByAppDefinitionId(t,i);return function(t,n){return r.isAppAutoRevoked(n)?e.includes(t,e.get(n,"applicationId")):r.isAppActive(n)}(o,a)&&n.push(a),n},[])}return[]}}}.apply(t,o))||(e.exports=i)},function(e,t){e.exports=a},function(e,t,n){var o,i;o=[n(0),n(30),n(1),n(2),n(26),n(28),n(3)],void 0===(i=function(e,t,n,o,i,r,a){"use strict";return{isSiteSaved:function(e){return!i.isFirstSave(e)},isTpaByCompType:function(t){return e.includes(r.COMP_TYPES,t)||e.includes(r.TPA_COMP_TYPES,t)},isTpaByAppType:n.coreTpaUtils.isTpaByAppType,isTpaByDataType:function(t){return e.includes(r.DATA_TYPE,t)},sendBIEvent:function(e,n,o){const i=e.pointers.components.getViewMode(e.siteAPI.getFocusedRootId()),r=e.pointers.components.getPage(e.siteAPI.getFocusedRootId(),i),s=e.pointers.components.getComponent(n.compId,r),c=a.getDataItem(e,s);t.common.bi.sendBIEvent(n,o,c,e.siteAPI.getClientSpecMap(),e.siteAPI.reportBI.bind(e.siteAPI))}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(172),n(6),n(2),n(33),n(449),n(450),n(180),n(98),n(455),n(182),n(15),n(64),n(96),n(456),n(457),n(35),n(185),n(5)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l,u,d,g,f,m,y,E,I){"use strict";function S(t,n){const o=u.getLargestApplicationId(t),r=g.generateAppFlowsLargestAppId(o),a={type:"Application",displayName:n.appDefinitionId,appDefinitionId:n.appDefinitionId,applicationId:r,editorArtifact:n.editorArtifact,appFields:{platform:{editorScriptUrl:e.get(n,"appFields.platform.editorScriptUrl")}}};return e.get(n,"appFields.platform.viewerScriptUrl")&&e.set(a,"appFields.platform.viewerScriptUrl",n.appFields.platform.viewerScriptUrl),i.registerAppData(t,a),a}function h(t){const n=i.getAppsData(t);return e.filter(n,_)}function P(t,n,o,i){i&&e.set(o,"eventPayload.historySnapshotId",t.runtimeConfig.nextHistorySnapshotId),a.triggerEvent(n,o)}function A(t,n,o,i){const r=n.id,a=t.pointers.platform.getPagesPlatformApplicationPointer(o),s=t.dal.full.get(a)||{};delete s[r],i&&e.set(s,r,!0),e.isEmpty(s)&&"14cc59bc-f0b7-15b8-e1c7-89ce41d0e0c9"===o?t.dal.full.isExist(a)&&t.dal.full.remove(a):t.dal.full.set(a,s)}function T(t,o,r,s,c){const p=e.get(s,"reportProgress");p&&p({step:"clientSpecMap"}),function(e,{appDefinitionId:t,version:n}){const o=u.getAppDataByAppDefinitionId(e,t);return o&&o.version===n}(t,c)||(c.pendingAction=y.APP_ACTION_TYPES.UPDATE,i.registerAppData(t,c)),a.notifyAppUpdated(c.applicationId,s,e=>{const i=c.version,a=c.appDefinitionId;v(e,t,a,i).then(()=>{n.executeHook(n.HOOKS.PLATFORM.APP_UPDATED,"",[t,c]),o(c)},()=>{n.executeHook(n.HOOKS.PLATFORM.APP_UPDATED,"",[t,c]),r(c)})})}const v=(t,n,o,i)=>e.get(t,"success")?r.installCollections(n,o,i):Promise.reject();function C(o,r,s,c,p){const l=e.get(p,"appDefinitionId"),d=u.getAppDataByAppDefinitionId(o,l);u.isAppActive(d)||(p.notProvisioned=!0,i.registerAppData(o,p));p.firstInstall=!0,p.origin=e.get(c,"origin");const g=o.dal.get(o.pointers.general.getServiceTopology()),f=t.specMapUtils.resolveEditorScriptUrl(p,{clientSpec:p,serviceTopology:g});a.addApp(o,f,function(t){const a=e.assign(f,t||{}),c=e.get(p,"version");v(a,o,l,c).then(()=>{n.executeHook(n.HOOKS.PLATFORM.APP_PROVISIONED,"",[o]),r(a)},()=>{i.registerAppData(o,e.defaults({pendingAction:y.APP_ACTION_TYPES.REMOVE},p)),n.executeHook(n.HOOKS.PLATFORM.APP_PROVISIONED,"",[o]),s(e.defaults({success:!1},a))})})}function _(t){return e.get(t,"appFields.platform.editorScriptUrl")&&u.isAppActive(t)}return{init:function(o,i,r,s){const p=a.isInitiated();!function(e){const t=e.pointers.platform.getPlatformPointer(),n=e.pointers.platform.getPagesPlatformApplicationsPointer();e.dal.full.set(t,{appState:{},appManifest:{},appPublicApiName:{}}),e.dal.full.isExist(n)||e.dal.full.set(n,{})}(o),a.init(o,i,r),function(n,o){const i=n.dal.get(n.pointers.general.getServiceTopology()),r=e(u.getAppsData(n)).filter(_).map(e=>t.specMapUtils.resolveEditorScriptUrl(e,{clientSpec:e,serviceTopology:i})).map(t=>(t.origin=e.get(o,"origin"),t.firstInstall=!1,t)).value();if(r.length){if(I.isOpen("platformPrefetchEditorScripts")){const t=r.map(e=>({id:e.applicationId,url:e.appFields.platform.editorScriptUrl}));s=t,e.forEach(s,function(e){const t=`prefetch-editor-${e.id}`;if(!window.document.getElementById(t)){const n=window.document.createElement("link");n.setAttribute("rel","prefetch"),n.setAttribute("href",e.url),n.setAttribute("id",t),window.document.head.appendChild(n)}})}a.addApps(n,r)}var s}(o,s),o.siteAPI.registerToNotifyApplicationRequestFromViewerWorker((t,n)=>{const i=e.get(c.getAppDataByAppDefId(o,t),"applicationId");P(o,i,n)}),p||(n.registerHook(n.HOOKS.REMOVE.AFTER,f.getOnDeleteHook(P)),n.registerHook(n.HOOKS.METADATA.DUPLICATABLE,f.isDuplicatable),n.registerHook(n.HOOKS.METADATA.CAN_REPARENT,f.canReparent),n.registerHook(n.HOOKS.METADATA.ROTATABLE,f.isRotatable),n.registerHook(n.HOOKS.METADATA.FIXED_POSITION,f.canBeFixedPosition),n.registerHook(n.HOOKS.METADATA.RESIZABLE_SIDES,f.isResizableSides),n.registerHook(n.HOOKS.METADATA.LAYOUT_LIMITS,f.layoutLimitsHook),n.registerHook(n.HOOKS.METADATA.CONTAINABLE,f.isContainable),function(e){n.registerHook(n.HOOKS.PLATFORM.APP_UPDATED,m.removeGhostStructureForApp),n.registerHook(n.HOOKS.SAVE.SITE_SAVED,t=>{t&&m.notifyOnFirstSaved(e,h(e),P)})}(o)),(I.isOpen("sv_livePreview")||I.isOpen("sv_livePreview_forAppBuilder"))&&(E.init(o),E.autoRun(o))},setManifest:c.setManifest,registerToManifestAdded:c.registerToManifestAdded,initApp:function(t,n){let o=u.getAppDataByAppDefinitionId(t,n.appDefinitionId);o||(o=S(t,n)),a.isInitiated()&&a.addApp(t,o);const i=function(t){function n(e){return`http://localhost:${e.port}/${e.path}`}function o(n){const o=t.siteAPI.getCurrentUrl(),i=e.get(o,["query",n]);return e(i||"").split(",").invokeMap("split",":").fromPairs().value()}const i=o("editorPlatformAppSources"),r=o("viewerPlatformAppSources"),a=i.id;if(a)return{appDefinitionId:a,appFields:{platform:{viewerScriptUrl:n(r),editorScriptUrl:n(i)}}}}(t);if(i){const e=S(t,i);a.addApp(t,e)}},provision:function(t,n,o){return new Promise(function(i,r){a.isInitiated()?function(t,n,o,i,r){const a=u.getAppDataByAppDefinitionId(t,n);u.isAppActive(a)?C(t,i,r,o,a):d.preSaveAddApp(t,n,e.partial(C,t,i,r,o),r,e.get(o,"appVersion"))}(t,n,o,i,r):r()})},update:function(t,n,o,i){return new Promise(function(r,s){a.isInitiated()?function(t,n,o,i,r,a){const s=u.getAppData(t,n);s?o!==s.version?d.preSaveAddApp(t,s.appDefinitionId,e.partial(T,t,r,a,i),a,o):T(t,r,a,i,s):a("Application with the given applicationId is not installed. Please provision before updating")}(t,n,o,i,r,s):s(new Error("workerService is not initiated"))})},remove:function(t,n){return a.notifyRemoveApp(n).then(o=>{if(!e.get(o,"success"))throw new Error(`Failed to remove applicationId ${n}`);{const o=u.getAppData(t,n);i.registerAppData(t,e.defaults({pendingAction:y.APP_ACTION_TYPES.REMOVE},o))}})},migrate:function(e,t,n){const o=c.getAppDataByAppDefId(e,t);return o?a.notifyMigrate(o.applicationId,n):Promise.reject(new Error(`Migration failed: Unknown appDefinitionId: ${t}`))},notifyApplication:P,getAPIForSDK:function(e,t){return s.getAPIForSDK(t)},getInstalledAppsData:function(e){return[c.getAppDataByAppDefId(e,y.APPS.DATA_BINDING.appDefId)]},pageHasPlatformApp:function(e,t,n){const o=e.pointers.platform.getPagesPlatformApplicationPointer(n);return!!(e.dal.full.get(o)||{})[t]},updatePagePlatformApp:A,removePageFromPlatformApps:function(t,n){const o=t.pointers.platform.getPagesPlatformApplicationsPointer(),i=t.dal.full.get(o);e.forEach(i,function(e,o){A(t,n,o,!1)})},getAppManifest:c.getAppManifest,getAppDataByAppDefId:c.getAppDataByAppDefId,getAppDataByApplicationId:c.getAppDataByApplicationId,getAppsContainer:a.getAppsContainer,getInstalledEditorApps:h,notifyAppsOnCustomEvent:function(e,{eventType:t,eventPayload:n}){return p.notifyAppsOnCustomEvent(e,t,n,P)},registerAppToCustomEvents:(e,t,n)=>p.registerAppToEvents(t,n),registerToPublicApiSet:c.registerToPublicApiSet,isPlatformAppInstalled:c.isPlatformAppInstalled,getPagesDataFromAppManifest:function(t,n,o,i,r){const a=c.getAppManifest(t,n),s=r?l.getState(t,r):"default",p=!!e.get(a,["pages",o,s]),u=e.get(a,["pages",o,p?s:"default"]),d=!!e.get(u,["defaultValues"]),g=d?e.get(u,"defaultValues"):u,f=d?e.get(u,"overrides"):e.get(a,["pages",o,"overrides"]);return e.isEmpty(f)?g:e.reduce(f,(t,n)=>(e.isMatch(i,n.condition)&&(e.isArray(n.override)?t=n.override:e.assign(t,n.override)),t),g)},registerToAppsCompleted:function(e,t){a.registerToAppsCompleted(t)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(13)],void 0===(i=function(e,t){"use strict";function n(e){return t.getProperty(e,t.PROPERTY_NAMES.CLIENT_SPEC_MAP)||{}}return{registerAppData:function(e,o){const i=n(e);i[o.applicationId]=o,t.setProperty(e,t.PROPERTY_NAMES.CLIENT_SPEC_MAP,i)},getAppData:function(e,t){return n(e)[t]||{}},getAppDataByAppDefinitionId:function(t,o){const i=n(t);return e.find(i,{appDefinitionId:o})},getAppsData:n,filterAppsDataByType:function(t,o){const i=n(t);return e.filter(i,{type:o})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";const e={masterPage:"wysiwyg.viewer.components.WSiteStructure"};let t,n;return{YES:"yes",NO:"no",DONT_CARE:"don't care",getComponentType:function(o,i){if(i){const r=e[i.id];if(r)return r;if(i===t)return n;const a=o.pointers.getInnerPointer(i,"componentType"),s=o.dal.full.get(a)||o.dal.get(a);if(s||o.dal.full.isExist(i))return t=i,n=s,s}throw new Error(`non existing component pointer: ${function(e){if(!e)return"(null)";let t=`type: ${e.type} id: ${e.id}`;return"innerPath"in e&&(t+=` inner: ${e.innerPath}`),t}(i)}`)}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{Intents:{PLATFORM_WORKER:"PLATFORM_WORKER"},AppIds:{EDITOR:"editor"},MessageTypes:{WORKER_ALIVE:"workerAlive",SDK_READY:"sdkReady",SET_MANIFEST:"setManifest",TRIGGER_EVENT:"triggerEvent",ADD_APPS:"addApps",NOTIFY_APP_UPDATED:"notifyAppUpdated",VIEWER_INFO_CHANGED:"viewerInfoChanged",ADD_APP_COMPLETED:"addAppCompleted",APP_UPDATE_COMPLETED:"appUpdateCompleted",REMOVE_APP:"notifyRemoveApp",REMOVE_APP_COMPLETED:"notifyRemoveAppCompleted",MIGRATE:"notifyMigrate",MIGRATE_COMPLETED:"notifyMigrateCompleted",GET_INSTALLED_APPS:"getInstalledApps",SET_APP_PUBLIC_API:"setAppPublicAPI",GET_IS_PLATFORM_APP_INSTALLED:"getIsPlatformAppInstalled",ADD_ALL_APPS_COMPLETED:"addAllAppsCompleted"},EVENTS:{COMPONENT_DELETED:"componentDeleted"},Controller:{DEFAULT_STATE:"default"},Page:{DEFAULT_STATE:"default"},APPS:{DATA_BINDING:{appDefId:"dataBinding"},DYNAMIC_PAGES:{appDefId:"wix-code"},SANTA_MEMBERS:{appDefId:"14cc59bc-f0b7-15b8-e1c7-89ce41d0e0c9"},WIX_CODE:{appDefId:"675bbcef-18d8-41f5-800e-131ec9e08762"}},APP_ACTION_TYPES:{REMOVE:"REMOVE",UPDATE:"UPDATE"},CONTROLLER_TYPES:{APP_CONTROLLER:"platform.components.AppController",APP_WIDGET:"platform.components.AppWidget"}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(0),n(372),n(373),n(374),n(375),n(22),n(2),n(3),n(1)],void 0===(i=function(e,t,n,o,i,r,a,s,c){"use strict";const p=["sourceId","type","name"],l=["targetId","type","name","part","viewMode"],u=["action","targetId","name","duration","delay","params","playOnce","type","viewMode"];function d(){return e.sortBy(e.keys(n.getSchema()))}function g(i,r,a){let s=o;if(r){const n=e.last(r.split(".")),o=t.getSchema()[n]||t.getSchema().AllComponents;s=e.isEmpty(o)?[]:e.filter(s,function(t){return e(t.groups).difference(o).isEmpty()})}return a&&(s=e.filter(s,function(t){return e(n.getSchema()[a].groups).difference(t.groups).isEmpty()})),e(s).map("name").sortBy().value()}function f(e,t){if(c.displayedOnlyStructureUtil.isDisplayedComponent(t.id)){const n=c.displayedOnlyStructureUtil.getOriginalId(t.id),o=e.pointers.components.getPageOfComponent(t);return e.pointers.full.components.getComponent(n,o)}return t}function m(t,n){const o=P(t,n);return e.isEmpty(o)?null:o}function y(t,n){return e.get(n,"type")===a.VIEW_MODES.MOBILE&&t.dal.isExist(E(n))}function E(t){return e.defaults({type:a.VIEW_MODES.DESKTOP},t)}function I(t){return"animation"===e.get(t,"type","animation")}function S(t,n){return e.isEqual(e.pick(t,l),e.pick(n,l))}function h(t,n){return o=t.action,i=n.action,e.isEqual(e.pick(o,p),e.pick(i,p))&&S(t.behavior,n.behavior);var o,i}function P(e,t){const n=f(e,t),o=s.getBehaviorsItem(e,n);return o?JSON.parse(o):[]}function A(t,n,o){const i=JSON.stringify(o);e.isEmpty(o)?s.removeBehaviorsItem(t,n):s.updateBehaviorsItem(t,n,i)}function T(e,t){const n=e.pointers.components.getMasterPage(t),o=e.pointers.components.getComponent(a.COMP_IDS.PAGE_GROUP,n),i=s.getPropertyItemPointer(e,o);return e.pointers.getInnerPointer(i,"transition")}function v(){return e.sortBy(e.map(i,"legacyName"))}function C(e,t,n,o){const i=e.pointers.components;return e.siteAPI.previewAnimation(t.id,i.getPageOfComponent(t).id,n,o)}function _(e,t,n){e.siteAPI.stopPreviewAnimation(t,n)}return{getActionNames:d,getActionDefinition:function(t,o){if(e.has(n.getSchema(),o))return{type:"comp",name:o}},getBehaviorDefinition:function(t,n){return e.cloneDeep(e.find(o,{name:n}))},getBehaviorNames:g,isBehaviorable:function(t,n,o){const i=r.getType(t,n);return!e.isEmpty(g(0,i,o))},getComponentBehaviors:m,setComponentBehavior:function t(n,o,i,s){s&&(i.action=s);const c=function(t,n,o){const i={type:"ok",message:""},r=g(0,o);if(e.includes(r,n.name))if(e.isPlainObject(n))if(e.isEmpty(n))i.type="error",i.message+="Behavior can not be empty\n";else{const t=d();e.includes(t,n.action)||(i.type="error",i.message+=`Action of type ${n.action} does not exist\n`);const o=g(0,null,n.action);e.includes(o,n.name)||(i.type="error",i.message+=`Behavior of type ${n.name} is not allowed on action ${n.action}`),I(n)&&e.isNaN(Number(n.duration))&&e.isNaN(Number(n.params.duration))&&(i.type="error",i.message+="Animation duration must be a number\n"),I(n)&&e.isNaN(Number(n.delay))&&e.isNaN(Number(n.params.delay))&&(i.type="error",i.message+="Animation delay must be a number\n"),!n.viewMode||e.isString(n.viewMode)&&e.includes(a.VIEW_MODES,n.viewMode)||(i.type="error",i.message+="Behavior viewMode must be undefined or a string: 'DESKTOP', 'MOBILE' or 'BOTH' \n"),n.params&&!e.isPlainObject(n.params)&&(i.type="error",i.message+="Animation params property are optional, but if they exist params must be an object\n"),n.playOnce&&!e.isBoolean(n.playOnce)&&(i.type="error",i.message+="Animation playOnce property is optional, but if is exists playOnce must be a boolean\n");const r=e.difference(e.uniq(e.keys(n).concat(u)),u);e.isEmpty(r)||(i.type="error",i.message+=`The keys [${r}] are not allowed values of a Behavior`)}else i.type="error",i.message+="Each behavior should be an object\n";else i.type="error",i.message+=`Behavior of type ${n.name} is not allowed on component of type ${o}`;return i}(0,i,r.getType(n,o));if("error"===c.type)throw new Error(c.message);"screenIn"===i.action&&e.set(i,["params","doubleDelayFixed"],!0),y(n,o)&&t(n,E(o),i,s);let p=m(n,o)||[];const l=e.partial(S,i);A(n,o,(p=e.reject(p,l)).concat(i))},removeComponentSingleBehavior:function t(n,o,i,r){y(n,o)&&t(n,E(o),i,r);let a=m(n,o),s={action:r};e.isString(i)?s.name=i:e.isObject(i)&&(s=e.assign(s,i)),A(n,o,a=a?e.reject(a,s):[])},removeComponentBehaviors:function(e,t){A(e,t,[])},removeComponentsBehaviorsWithFilter:function t(n,o,i){y(n,o)&&t(n,E(o),i);let r=m(n,o);A(n,o,r=r?e.reject(r,i):[])},updateBehavior:function(t,n,o,i,r){const a=f(t,n),s=P(t,a),c={action:e.defaults({sourceId:a.id},o),behavior:e.defaults({targetId:i.id},r)},p=e.partial(h,c);A(t,a,e.reject(s,p).concat(c))},removeBehavior:function(t,n,o,i,r){const a=f(t,n),s=P(t,a),c={action:e.defaults({sourceId:a.id},o),behavior:e.defaults({targetId:i.id},r)},p=e.partial(h,c),l=e.reject(s,p);l.length!==s.length&&A(t,a,l)},getBehaviors:P,hasBehavior:function(t,n,o,i,r){const a=f(t,n),s=P(t,a),c={action:e(a&&{sourceId:a.id}).defaults(o).pick(p).value(),behavior:e(i&&{targetId:i.id}).defaults(r).pick(l).value()};return e.some(s,c)},getPageTransitionsNames:v,getPagesTransition:function(e){const t=T(e,a.VIEW_MODES.DESKTOP);return e.dal.get(t)},setPagesTransition:function(t,n){if(!e.includes(v(),n))throw new Error(`No such transition ${n}`);const o=T(t,a.VIEW_MODES.DESKTOP);t.dal.set(o,n)},executeAction:function(e,t){e.siteAPI.executeAction(t)},deprecatedPreviewAnimation:function(e,t,n,o,i){return C(e,t,n,i)},deprecatedStopPreviewAnimation:function(e,t,n){_(e,n)},previewAnimation:C,previewTransition:function(t,n,o,i,r){const a=t.pointers.components,s=e.isArray(n)?n:[n],c=e.isArray(o)?o:[o],p=s.length>0?s[0]:c[0];return t.siteAPI.previewTransition(e.map(s,"id"),e.map(c,"id"),a.getPageOfComponent(p).id,i,r)},stopPreviewAnimation:_,executeAnimationsInPage:function(e){e.siteAPI.reloadPageAnimations()},stopAndClearAllAnimations:function(e){e.siteAPI.stopAndClearAllAnimations()}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(23),n(1),n(399),n(112),n(2)],void 0===(i=function(e,t,n,o,i,r){"use strict";return{runMobileConversionOnPage(e,t){o.mobileConversion({ps:e}).runMobileConversionOnPage(t)},runMobileConversionOnAllPages(t,n){const i=e.get(n,"heuristicStrategy");return"minimal"===i?o.mobileConversion({ps:t}).syncMobileSite():o.mobileConversion({ps:t,heuristicStrategy:i}).runMobileConversionOnAllPages()},prepareForConversion(t,i){let r=t.dal.get(t.pointers.general.getPagesData(),!0);const a=o.mobileConversion({ps:t});return i&&(r=e.pick(r,i)),e.mapValues(r,(e,t)=>{const o=e.structure.DESKTOP,i=n.mobileUtils.buildDeepStructure(o[t],o);return a.prepareConversion(i)})},applyConversion(n,i){const r=e.mapValues(i,t.conversionUtils.getChildren);o.mobileConversion({ps:n}).applyConvertedComponentsMap(r)},execConversion(t,n,i){const r={ps:t,heuristicStrategy:i},a=o.mobileConversion(r);e.forEach(n,e=>a.executeConversion(e))},runMobileMergeOnPage(e,t,n,i){o.mobileConversion({ps:e}).runMobileMergeOnPage(t,n,i)},addMobileOnlyComponent(e,i,a){const s=e.pointers.page.getComponentsMapPointer("masterPage",r.VIEW_MODES.MOBILE),c=e.dal.get(s,!0),p=n.mobileUtils.buildDeepStructure(c.masterPage,c);p.mobileComponents=p.children;const l=o.mobileConversion({ps:e});l.prepareConversion(p),t.mobileOnlyComponents.addComponent(p,i),l.applyConvertedComponentsToPage(t.conversionUtils.getChildren(p),p.id,a)},syncMobileSite(e){o.mobileConversion({ps:e}).syncMobileSite()},runPartialConversionAllPages(e,t=!0){e.config.disableMobileConversion?o.mobileConversion({ps:e}).syncMobileSite():o.mobileConversion({ps:e}).runMobileMergeOnAllPages(t)},inspect:(e,t)=>o.mobileConversion({ps:e}).inspect(t),getComponentsOrder:(e,t)=>o.mobileConversion({ps:e}).getComponentsOrder(t),shouldCreateMobilePreset:i.shouldCreateMobilePreset,createMobilePreset:i.createMobilePreset}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(33),n(43),n(20)],void 0===(i=function(e,t,n,o){"use strict";return{getExistingWixCodeAppFromPS:function(n){return e.head(t.filterAppsDataByType(n,o.WIX_CODE_SPEC_TYPE))},getExistingWixCodeAppFromSnapshot:function(t){const i=n.extractFromSnapshot(t,["rendererModel","clientSpecMap"],!0);return e.find(i,{type:o.WIX_CODE_SPEC_TYPE})}}}.apply(t,o))||(e.exports=i)},function(e,t){e.exports=s},function(e,t,n){var o,i;o=[n(0),n(146),n(1)],void 0===(i=function(e,t,n){"use strict";const o=t;return{getRevertibleMetaDataInfo:function(){return e.filter(o,{revertible:!0})},getNonRevertibleMetaDataInfo:function(){return e.filter(o,{revertible:!1})},getProperty:function(e,t){const o=e.pointers.metadata.getSiteMetaDataPointer(t);return o?e.dal.get(o):(n.log.error("SiteMetaData getProperty was called with an invalid metadata property"),null)},setProperty:function(e,t,o){const i=e.pointers.metadata.getSiteMetaDataPointer(t);i?e.dal.set(i,o):n.log.error("SiteMetaData setProperty was called with an invalid metadata property")},PROPERTY_NAMES:e.mapValues(o,function(e,t){return t})}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(86)],void 0===(i=function(e,t,n){"use strict";const o=["MAIN_MENU","CUSTOM_MAIN_MENU","CUSTOM_MENUS","masterPage"];return{isHorizontallyDocked:t.layoutUtils.isHorizontallyDocked,isVerticallyDocked:t.layoutUtils.isVerticallyDocked,getBoundingY:t.boundingLayout.getBoundingY,getBoundingX:t.boundingLayout.getBoundingX,getBoundingHeight:t.boundingLayout.getBoundingHeight,getBoundingWidth:t.boundingLayout.getBoundingWidth,getBoundingLayout:n.getBoundingLayout,getLayoutFromBoundingLayout:function(e,n,o){return t.boundingLayout.getLayoutFromBoundingLayout(n,o)},canMoveDataItemToAnotherPage:(n,i)=>{switch(i){case t.constants.DATA_TYPES.data:return(({id:t})=>!e.includes(o,t))(n);case t.constants.DATA_TYPES.theme:return(({styleType:e})=>"system"!==e)(n)}return!0},ensureWithinLimits:function(t,n,o){if((n=e.isUndefined(n)?t:n)>(o=e.isUndefined(o)?t:o))throw new Error("min limit is greater than max limit");return t<n?n:t>o?o:t},getChildrenToPreserveProportionsByType:function(t,n,o,i){return e.reject(o,function(o){const r=n.getComponentType(t,o.component);return e.includes(i,r)})},getComponentLayout:n.getComponentLayout,getPositionAndSize:n.getPositionAndSize}}.apply(t,o))||(e.exports=i)},function(e,t){e.exports=c},function(e,t,n){var o,i;o=[n(0),n(1),n(70)],void 0===(i=function(e,t,n){"use strict";function o(o){return new Promise(function(i,r){o.success=i,o.error=function(e,t){const i=n.build({errorType:t,xhr:e});i.request=o,r(i)},o.data&&!e.isString(o.data)&&(o.data=JSON.stringify(o.data)),t.ajaxLibrary.ajax(o)})}return{sendRequest:function(e,t,n){const i={type:t,url:e,dataType:"json",contentType:"application/json"};return n&&(i.data=JSON.stringify(n)),o(i)},sendRequestObj:o,extractFromSnapshot:function(e,t,n=!1){let o=e.getIn(t);return n&&(o=o.toJS()),o},requestTypes:{POST:"POST",GET:"GET",PUT:"PUT",DELETE:"DELETE"}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(45),n(55),n(38),n(43),n(20)],void 0===(i=function(e,t,n,o,i,r){"use strict";const a=e=>({getBaseUrl(){const t=e.pointers.general.getServiceTopology();return e.dal.get(e.pointers.getInnerPointer(t,"wixCodeMonitoringHubUrl"))},getAppId:()=>n.getGridAppId(e),getMetaSiteId(){const t=e.pointers.general.getMetaSiteId();return e.dal.get(t)},getInstanceId(){const t=o.getExistingWixCodeAppFromPS(e);return t?t.instanceId:""}}),s=e=>({getBaseUrl:()=>e.getIn(["serviceTopology","wixCodeMonitoringHubUrl"]),getAppId:()=>i.extractFromSnapshot(e,r.paths.GRID_APP_ID),getMetaSiteId:()=>i.extractFromSnapshot(e,["rendererModel","metaSiteId"]),getInstanceId(){const t=o.getExistingWixCodeAppFromSnapshot(e);return t?t.instanceId:""}});function c(n,o){const i=function(t,n){const o={appId:t.getAppId()||"",params:{metaSiteId:t.getMetaSiteId(),instanceId:t.getInstanceId()}};return e.merge({},o,n)}(n,o),r=n.getBaseUrl();return t.log.trace(i,r)}return{levels:t.log.levels,trace:function(e,t){return c(a(e),t)},traceWithSnapshot:function(e,t){return c(s(e),t)}}}.apply(t,o))||(e.exports=i)},function(e,t){e.exports=p},function(e,t,n){var o,i;o=[n(0),n(21),n(204)],void 0===(i=function(e,t,n){"use strict";const o={String:1,"wix:Date":2,"wix:RichText":3,"String|AsPrice":4,"wix:Image":5,"wix:Video":6,"String|AsButton":7},i=new RegExp("(.*)_\\d+$");function r(t){t&&t.fields&&(t.fields=e.sortBy(t.fields,function(t){return"title"===t.name?Number.MIN_VALUE:o[function(t){const n=t.metadata&&t.metadata.showAsHint;return e.compact([t.type,n]).join("|")}(t)]||Number.MAX_VALUE}))}function a(n){const o=n.dal.getByPath(t.getBaseTypesPath());return e.forEach(o,r),o}function s(n,o){const r=i.exec(o),a=r?r[1]:o;return`${a}_${function(t,n){const o=new RegExp(`${t}_(\\d+)$`);return e(n).map(function(t){const n=o.exec(t);return n?e.parseInt(n[1]):null}).concat(0).max()+1}(a,n.dal.getKeysByPath(t.getBaseTypesPath()))}`}return{getType:function(e,n){const o=e.dal.getByPath(t.getTypePath(n));return r(o),o},getAllTypes:a,createType:function(o,i){i=i||{};const r={};return r.name=s(o,i.name||"type"),r.displayName=function(t,o){const i=e.map(a(t),"displayName");let r=o;for(;e.includes(i,r);)r=n.incNumberSuffix(r);return r}(o,i.displayName||r.name),r.version=0,r.baseTypes=i.baseTypes||[],r.fields=i.fields||[],o.dal.full.setByPath(t.getTypePath(r.name),r),function(e,n){e.dal.full.setByPath(t.getBaseItemsPath(n),{})}(o,r.name),r.name}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(232),n(0),n(1)],void 0===(i=function(e,t,n){"use strict";const o=n.loggingUtils.logger;return t.forEach(e,function(e,t){e.errorName=t}),o.register("documentServices","error",e),e}.apply(t,o))||(e.exports=i)},function(e){e.exports={SITE_GAPS_MAP:{eventId:356,params:["above_header","above_page","above_footer"]},MESH_MIGRATION:{eventId:410,params:["status","reasonid","pages_count"]},MESH_MIGRATION_PRESAVE:{eventId:424,params:["status","reasonid","pages_count"]},MESH_MIGRATION_WIZARD:{eventId:426,params:["status","reasonid","pages_count"]},AUTO_SAVE_DIFFS_RESTORED:{eventId:623,params:[]},FULL_DOCUMENT_SAVE_ATTEMPTED_AFTER_PARTIAL_FAILURE:{eventId:632,params:["endpoint"]},DATA_ITEM_REFS_SAVE_DATAFIXER:{src:38,eventId:659,params:{dataType:"dataType",dataItemType:"dataItemType"}},PLATFORM_API_CALL:{endpoint:"platform",src:79,evid:24,params:["app_name","module","function","arguments","pageId"]},SECTION_LAYOUT_MIGRATION_REPARENT:{endpoint:"editor",src:38,evid:753,params:["component_id","z_index_changed","new_container_id"]},SECTION_LAYOUT_MIGRATION_CLOSE_GAP:{endpoint:"editor",src:38,evid:754,params:["gap_size","gap_type","is_closed"]},SECTION_LAYOUT_MIGRATION_RUN:{endpoint:"editor",src:38,evid:757,params:[]},SOAP_ORDER_FIXER:{endpoint:"editor",src:38,evid:842,params:["is_changed","soap_order_before","soap_order_after","components_attached_to_header"]},EDITOR_PLATFORM_APPS_LOADED:{endpoint:"platform",src:79,evid:25,params:["app_list","number_of_apps"]},MOVE_STYLE_TO_PAGES_MIGRATION:{endpoint:"document",src:40,evid:101,params:["mp_styles_before","mp_styles_after","page_styles_after","errorReason","duration","esi","dsOrigin"]},REMOVE_BADLY_DUPLICATED_PAGES:{endpoint:"document",src:40,evid:104,params:["numberOfInvalidPages","errorReason","duration","esi","dsOrigin"]},PREVIEW_SITE_READY:{endpoint:"document",eventId:103,src:40,params:["dsOrigin","esi"]},DOCUMENT_SERVICES_LOADED:{endpoint:"document",eventId:102,src:40,params:["dsOrigin","esi"]},INPUT_WRONG_PLACEHOLDER:{eventId:535,src:42,params:["comp_id"]}}},function(e,t,n){var o,i;o=[n(0),n(14),n(2),n(6),n(1),n(5)],void 0===(i=function(e,t,n,o,i,r){"use strict";function a(e,t,n){const o=e.pointers.general.getRenderFlag(t);e.dal.set(o,n)}function s(e,t){const n=e.pointers.general.getRenderFlag(t);return e.dal.get(n)}function c(e,t,n){!function(e){if("boolean"!=typeof e)throw new Error(`param ${e} is not valid. Should be boolean`)}(n),n?e.siteAPI.enableAction(t):e.siteAPI.disableAction(t)}function p(e){e.siteAPI.resetRuntimeData()}return{isMobileView:t.isMobileView,getViewMode:t.getViewMode,setViewMode:function(i,r){const a=e.values(n.VIEW_MODES);if(!e.includes(a,r))throw new Error(`view mode not valid. valid viewModes are: ${a}`);if(t.getViewMode(i)!==r){const e=r===n.VIEW_MODES.MOBILE;e&&o.executeHook(o.HOOKS.SWITCH_VIEW_MODE.MOBILE),p(i),i.siteAPI.setMobileView(e),o.executeHook(o.HOOKS.SWITCH_VIEW_MODE.AFTER)}},runtime:{reset:p},setComponentVisibility:function(e,t,n){const o=s(e,"componentVisibility")||{};o[t]=n,a(e,"componentVisibility",o)},setComponentViewMode:function(e,t){o.executeHook(o.HOOKS.CHANGE_COMPONENT_VIEW_MODE.BEFORE,"componentViewMode",[e,t]),a(e,"componentViewMode",t)},enablePlaying:function(e,t){a(e,"isPlayingAllowed",t)},enablePageProtection:function(e,t){a(e,"isPageProtectionEnabled",t)},enableZoom:function(e,t){a(e,"isZoomAllowed",t)},enableTransFormScaleOnSite:function(e,t){a(e,"siteTransformScale",t)},getSiteTransformScale(e){const t=e.pointers.general.getRenderFlag("siteTransformScale");return e.dal.get(t)},enableSocialInteraction:function(e,t){a(e,"isSocialInteractionAllowed",t)},enableExternalNavigation:function(e,t){a(e,"isExternalNavigationAllowed",t)},enableBackToTopButton:function(e,t){a(e,"isBackToTopButtonAllowed",t)},enableWixAds:function(e,t){a(e,"isWixAdsAllowed",t)},enableSlideShowGalleryClick:function(e,t){a(e,"isSlideShowGalleryClickAllowed",t)},enableShouldUpdateJsonFromMeasureMap:function(e,t){a(e,"shouldUpdateJsonFromMeasureMap",t)},enableTinyMenuOpening:function(e,t){a(e,"isTinyMenuOpenAllowed",t)},enableResetGalleryToOriginalState:function(e,t){a(e,"shouldResetGalleryToOriginalState",t)},enableResetComponent:function(e,t){a(e,"shouldResetComponent",t)},allowSiteMembersDialogsOpening:function(e,t){a(e,"isSiteMembersDialogsOpenAllowed",t)},resetBehaviorsRegistration:function(e,t){t&&e.siteAPI.resetBehaviorsRegistration()},enableAction:c,enablePageTransitions:function(e,t){c(e,"pageTransition",t)},enableComponentTransitions:function(e,t){a(e,"isComponentTransitionAllowed",t)},enableRenderTPAsIframe:function(e,t){a(e,"shouldRenderTPAsIframe",t)},enableStubifyComponents:function(e,t){a(e,"shouldStubifyComponents",t)},enableFetchDynamicPageInnerRoutes:function(e,t){a(e,"shouldFetchDynamicPageInnerRoutes",t)},enableBgVideoAutoplay:function(e,t,n){t?e.siteAPI.bgVideo.enableVideoPlayback(n):e.siteAPI.bgVideo.disableVideoPlayback(n)},enableRenderFixedPositionContainers:function(e,t){a(e,"renderFixedPositionContainers",t)},setOnboardingViewportMode:function(e,t){a(e,"onboardingViewportMode",t)},enableRenderFixedPositionBackgrounds:function(e,t){a(e,"renderFixedPositionBackgrounds",t)},setExtraSiteHeight:function(e,t){a(e,"extraSiteHeight",t)},allowSiteOverflow:function(e,t){a(e,"allowSiteOverflow",t)},allowShowingFixedComponents:function(e,t){a(e,"allowShowingFixedComponents",t)},showHiddenComponents:function(e,t){a(e,"showHiddenComponents",t)},isHiddenComponentsEnabled:function(e){return s(e,"showHiddenComponents")},isFetchDynamicPageInnerRoutesEnabled:function(e){return s(e,"shouldFetchDynamicPageInnerRoutes")},isShowingFixedComponentsEnabled:function(e){return s(e,"allowShowingFixedComponents")},ignoreComponentsHiddenProperty:function(e,t){a(e,"ignoreComponentsHiddenProperty",t)},ignoreComponentsCollapsedProperty:function(e,t){a(e,"ignoreComponentsCollapsedProperty",t)},setComponentPreviewState:function(e,t,n){const o=s(e,"componentPreviewStates")||{};o[t]=n,a(e,"componentPreviewStates",o)},getComponentPreviewState:function(e){return s(e,"componentPreviewStates")},checkComponentsHiddenProperty:function(e,t){const n=s(e,"ignoreComponentsHiddenProperty")||[];return i.objectUtils.isDifferent(t,n)},checkComponentsCollapsedProperty:function(e,t){const n=s(e,"ignoreComponentsCollapsedProperty")||[];return i.objectUtils.isDifferent(t,n)},showControllers:function(e,t){a(e,"showControllers",t)},isControllersVisibilityEnabled:function(e){return s(e,"showControllers")},allowWixCodeInitialization:function(e,t){a(e,"initWixCode",t)},isContactFormMigrationMode:function(){return r.isOpen("sv_contactFormFinalMigrationEditor")},setShouldKeepChildrenInPlace:function(e,t){a(e,"enforceShouldKeepChildrenInPlace",t)},setPreserveCompLayoutOnReparent:function(e,t){a(e,"preserveCompLayoutOnReparent",t)},updateAnimationsViewMode:function(e,t){const{animations:n}=e.siteDataAPI.siteData;n.updateViewMode(t)}}}.apply(t,o))||(e.exports=i)},function(e,t){e.exports=l},function(e,t,n){var o,i;o=[n(0),n(3),n(35),n(34),n(6),n(84)],void 0===(i=function(e,t,n,o,i,r){"use strict";const a="platform.components.AppController",s="platform.components.AppWidget";function c(e,t){const n=o.getComponentType(e,t);if(n!==a&&n!==s)throw new Error("controllerRef component type is invalid - should be an AppController or AppWidget")}function p(e,n){return c(e,n),t.getDataItem(e,n)}function l(e,t){const n=p(e,t);return n.settings?JSON.parse(n.settings):{}}function u(e,n,o){c(e,n),t.updateDataItem(e,n,o)}function d(e,t,n){let o;try{o=JSON.stringify(n)}catch(e){throw new Error("Invalid settings item - should be JSON stringifiable")}u(e,t,{settings:o})}function g(e,t){const o=e.pointers.platform.getAppStatePointer();return e.dal.get(e.pointers.getInnerPointer(o,t))||n.Controller.DEFAULT_STATE}function f(t,o,i,r){const a=g(t,o),s=t.pointers.platform.getControllerStageDataPointer(r,i,a),c=t.dal.get(s);if(a===n.Controller.DEFAULT_STATE)return c;const p=t.pointers.platform.getControllerStageDataPointer(r,i,n.Controller.DEFAULT_STATE),l=t.dal.get(p);return e.defaults({},c,l)}function m(e,t){if(!t)return;const n=p(e,t),o=n.applicationId,i=n.controllerType;return f(e,t.id,i,o)}return{setSettings:d,getSettings:l,setSettingsIn:function(t,n,o,i){const r=l(t,n);e.set(r,o,i),d(t,n,r)},getSettingsIn:function(t,n,o){const i=l(t,n);return e.get(i,o)},getName:function(t,n){return e.get(p(t,n),"name")},setName:function(e,t,n){u(e,t,{name:n})},setState:function(t,n){const o=t.pointers.platform.getAppStatePointer();e.forEach(n,function(n,i){e.forEach(n,function(e){t.dal.full.set(t.pointers.getInnerPointer(o,e.id),i)})}),i.executeHook(i.HOOKS.PLATFORM.AFTER_CONTROLLERS_SET_STATE,"controller",[n])},getState:(e,t)=>g(e,t.id),getControllerStageDataByControllerRef:m,getConnectedComponentStageData:function(t,n){const o=r.getPrimaryConnection(t,n);if(!o)return;const i=m(t,o.controllerRef),a=e.get(i,["connections",o.role]),s=e.get(i,["connections","*"]);return e.defaults(a,s)},getControllerStageData:f}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(5)],void 0===(i=function(){"use strict";return{disableable:!0}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(16)],void 0===(i=function(e,t){"use strict";const{schemasService:n}=t.services;return t=>!!n.getDefinitionByPredicate(e.conforms({styles:n=>e.has(n,t)}))}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(6),n(1),n(24),n(92),n(2)],void 0===(i=function(e,t,n,o,i,r){"use strict";const a=!0;function s(e){const t=e.pointers.general.getCommittedMobilePages();e.dal.set(t,null)}function c(t,n){const o=e.keys(n);return e.pickBy(t,(t,n)=>e.includes(o,n))}function p(t){const n=t.pointers.page.getNonDeletedPagesPointers(a);return i.hasMobileStructure(t)?e.filter(n,e=>t.dal.wasValueChangedSinceLastSnapshot(r.SNAPSHOT_TAGS.MOBILE_MERGE,e)):n}function l(t,i){const r=t.pointers.page.getPagePointer(i),a=o.getMobileActiveModesMap(t,i),s=e.set({},i,a);return n.fullToDisplayedJson.getDisplayedJson(t.dal.full.get(r),s,i).structure}return{initialize:function(e){t.unregisterHooks([t.HOOKS.PUBLISH.BEFORE]),t.registerHook(t.HOOKS.PUBLISH.BEFORE,()=>s(e)),e.dal.full.immutable.getLastSnapshotByTagName(r.SNAPSHOT_TAGS.MOBILE_MERGE)||e.dal.takeSnapshot(r.SNAPSHOT_TAGS.MOBILE_MERGE)},getAggregatedPages:function(t){const o=function(t){const n=p(t);return e.transform(n,(n,o)=>{const i=o.id,r=l(t,i);e.set(n,i,r)},{})}(t);if(e.isEmpty(o))return null;const i=t.pointers.general.getCommittedMobilePages(),r=t.dal.get(i)||{};return e.forOwn(o,(t,o)=>{if(!r[o]){const i=n.objectUtils.cloneDeep(t);e.set(i,i.components?"components":"children",t.mobileComponents||[]),r[o]=i}}),t.dal.set(i,r),{desktop:o,mobile:c(r,o)}},getChangedPagesPointers:p,getPage:l,commitResults:function(e){s(e),e.dal.takeSnapshot(r.SNAPSHOT_TAGS.MOBILE_MERGE)},getCommittedMobileComponent:function(t,o,i){if(!o||!i)return null;const r=t.pointers.general.getCommittedMobilePages(),a=t.dal.get(r),s=e.get(a,o);return e.isEmpty(s)?t.dal.full.get(i):n.dataUtils.findCompInStructure(s,!1,e=>e.id===i.id)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(6)],void 0===(i=function(e){"use strict";return{setWixCodeModel:function(t,{gridAppId:n}){const o=t.pointers.wixCode.getGridAppId();t.dal.set(o,n),e.executeHook(e.HOOKS.AUTOSAVE.ACTION)},getGridAppId:function(e){const t=e.pointers.wixCode.getGridAppId();return e.dal.get(t)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1)],void 0===(i=function(e,t){"use strict";let n=!1,o=Promise.resolve();function i(){n=!1}function r(e){return n=!0,e()}function a(e){const t=n?o.then(()=>r(e)):r(e);return o=t.then(i,i),t}function s(e){this.name="PrimaryTaskError",this.message="Document save has failed",this.reason={document:e},this.stack=(new Error).stack}function c(e){this.name="SecondarySaveError",this.message="One or more Secondary save tasks have failed",this.reason=e,this.stack=(new Error).stack}function p(e,t,n){const o=new Promise(function(o,i){const r=e.args().concat([o,i,t,n]);e.execute.apply(null,r)});return e.onTaskFailure&&o.catch(e.onTaskFailure),e.onTaskSuccess?o.then(e.onTaskSuccess):o}function l(t,n){const o=e.transform(t,function(e,t){var o,i;e[t.name]=(o=p(t,n),i=t.name,new Promise(function(e){return o.then(e).catch(function(t){e({error:!0,name:i,result:t})})}))},{});return Promise.all(e.values(o)).then(function(t){const n={};if(t.filter(function(e){return e&&e.error}).forEach(function(e){n[e.name]=e.result}),0!==e.keys(n).length)throw new c(n);return o})}function u(t,n,o,i){this.name=n,this.execute=o,this.onTaskSuccess=function(o){if(o&&o.historyAlteringChanges){const r=function(e,t,n){const o=t+n[0],i=this.currentState;e.takeSnapshot(o);const r=e.full.immutable.getLastSnapshotByTagName(o);return e.removeLastSnapshot(o),i.equals(r)}.call(this,t,n,i);!function(t,n,o,i){e.forEach(i,function(e){const i=o+e;t.duplicateLastSnapshot(i,n)})}(t,o.historyAlteringChanges,n,i),r&&o.changes.push(...o.historyAlteringChanges),o=e.omit(o,"historyAlteringChanges")}return g(t,e.get(o,"changes")),o&&o.result}.bind(this)}function d(t,n,o,i){u.call(this,t,n,i,o),this.lastSavedState=t.full.immutable.getLastSnapshotByTagName(n+o[0])||t.full.immutable.getInitialSnapshot(),e.forEach(o,function(e){t.takeSnapshot(n+e)}),this.currentState=t.full.immutable.getLastSnapshotByTagName(n+o[0]),this.args=function(){return[this.lastSavedState,this.currentState]};const r=function(i){e.forEach(o,function(e){t.removeLastSnapshot(n+e)}),i&&!e.isEmpty(i.changes)&&(e.forEach(o,function(e){t.duplicateLastSnapshot(n+e,i.changes)}),g(t,i.changes))};this.onTaskFailure=r,this.cancel=r}function g(t,n){e.forEach(n,({path:n,value:o})=>{e.isUndefined(o)?t.full.removeByPathInHostModel(n):t.full.setByPath(n,o)})}function f(n,o,i,r,a,u,d){const g=p(o,u,d).catch(function(t){throw e.invokeMap(i,"cancel"),new s(t)}).then(t=>(function(t,n){e.forOwn(n,function(e){e.currentState&&(e.currentState=e.currentState.withMutations(function(e){return e.set("documentServicesModel",t.full.immutable.getByPath(["documentServicesModel"])).set("rendererModel",t.full.immutable.getByPath(["rendererModel"]))}))})}(n,i),l(i,u).then(()=>t)));return g.then(function(e){r&&(e?r(e):r())}).catch(function(e){if(!e instanceof s&&!e instanceof c)throw e;t.log.error("Save has failed - please see the failure details below:",e),a&&a(e.reason)}),g}function m(t,n){let o=t.getSnapshotTags(n);return o&&e.isArray(o)&&!e.isEmpty(o)||(o=[""]),o}function y(t,n,o,i,r,s,c,p){return a(()=>{let a=o.primaryTask.getTaskName(),l=m(o.primaryTask,t);const u=new n(i,a,l,o.primaryTask[t]),d=e.map(o.secondaryTasks,function(e){return a=e.getTaskName(),l=m(e,t),new n(i,e.getTaskName(),e.getSnapshotTags(t),e[t])});return f(i,u,d,r,s,c,p)})}s.prototype=Object.create(Error.prototype),c.prototype=Object.create(Error.prototype);return{runPartialSaveTasks:y.bind(null,"partialSave",d),runFullSaveTasks:y.bind(null,"fullSave",d),runFirstSaveTasks:y.bind(null,"firstSave",d),runSaveAsTemplate:y.bind(null,"saveAsTemplate",d),runPublishTasks:y.bind(null,"publish",function(e,t,n,o){u.call(this,e,t,o,n);const i=e.full.immutable.getLastSnapshotByTagName(t+n[0])||e.full.immutable.getInitialSnapshot();this.currentState=function(e,t){const n=e.getByPath(["rendererModel"]);return t.mergeIn(["rendererModel"],{metaSiteId:n.metaSiteId,siteInfo:{siteId:n.siteInfo.siteId}})}(e,i),this.args=function(){return[this.currentState]}}),runAutosaveTasks:y.bind(null,"autosave",function(e,t,n,o){d.call(this,e,t,n,o),this.onTaskSuccess=function(t){t&&this.currentState.getIn(["documentServicesModel","version"])===e.full.getByPath(["documentServicesModel","version"])&&g(e,t.changes)}.bind(this)}),runFunctionInSaveQueue:a,shouldSaveBeforePublish:({primaryTask:e},t)=>{const n=((e,t,n)=>e.full.immutable.getLastSnapshotByTagName(t.getTaskName()+m(t,n)[0])||e.full.immutable.getInitialSnapshot())(t,e,"partialSave"),o=t.full.immutable.getCurrentSnapshot();return e.shouldRun&&e.shouldRun(n,o,"partialSave")}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(48),n(0),n(1)],void 0===(i=function(e,t,n){"use strict";return n.loggingUtils.logger.register("documentServices","event",e),e}.apply(t,o))||(e.exports=i)},function(e,t){e.exports=u},function(e,t,n){var o,i;o=[n(1)],void 0===(i=function(e){"use strict";function t(t){return e.guidUtils.getUniqueId(t,"-")}function n(){return t("dataItem")}function o(){return t("propItem")}return{generateNewId:function(e){switch(e){case"data":return n();case"props":case"properties":return o();case"design":return n();case"behaviors":return t("behavior");case"connections":return t("connection");case"style":case"mobileHints":case"layout":return t(e);default:return null}},generateNewDataItemId:n,generateNewPropertiesItemId:o,generateNewDesignId:function(){return t("design")}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";function t(e){const t=e.pointers.routers.getRoutersConfigMapPointer();return e.dal.get(t)}function n(n,o){const i=t(n);return e.findKey(i,{prefix:o})}function o(e,t){const n=e.pointers.routers.getRouterPointer(t);return e.dal.get(n)}return{get:{all:t,byApp:function(n,o){return e.filter(t(n),{appDefinitionId:o})},byRef:function(e,t){const o=e.dal.get(t);return o&&o.config&&(o.config=JSON.parse(o.config),o.id=n(e,o.prefix)),o||null},byId:o,byPrefix:function(e,t){const o=n(e,t);return o&&e.pointers.routers.getRouterPointer(o)},byPage:function(n,o){const i=e.get(n.dal.get(o),"id"),r=t(n),a=e.findKey(r,function(t){return t.pages&&e.includes(e.values(t.pages),i)});return a&&n.pointers.routers.getRouterPointer(a)}},getRouterDataForPageIfExist:function(n,i){i=e.startsWith(i,"#")?i.substr(1):i;const r=t(n),a=e.findKey(r,function(t){return t.pages&&e.includes(e.values(t.pages),i)});return a?e.assign(o(n,a),{routerId:a}):null}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(19)],void 0===(i=function(e,t,n){"use strict";const o={},i=(e,t)=>e.pointers.data.getDataItemFromMaster(t),r=(e,t)=>e.pointers.data.getDataItemFromMaster(t);function a(e){return(n.getPageData(e,t.siteConstants.MASTER_PAGE_ID)||{}).appStudioData}function s(t){const n=a(t)||{};return e.map(n.widgets,function(e){const n=i(t,e.id);return{pointer:n,name:t.dal.get(n).name}})}function c(t,n){const o=s(t);return n=`#${n}`,e.find(o,function(e){const o=t.dal.get(e.pointer);return o&&o.rootCompId===n})}return{isWidgetPage:function(t,i){return!!n.doesPageExist(t,i)&&(e.isUndefined(o[i])&&(o[i]=Boolean(c(t,i))),o[i])},getWidgetPointerByWidgetId:i,findWidgetByPageId:c,getAllWidgets:s,getAppStudioData:a,getAppStudioMetaData:function(t){const n=a(t);return n?e.pick(n,["name","description"]):void 0},getAllSerializedWidgets:function(t){return e.map(s(t),function(n){return e.pick(t.dal.get(n.pointer),"name","widgetApi","rootCompId")})},getAllCustomDefinitions:function(t){const n=a(t)||{};return e.map(n.customDefinitions,function(n){const o=r(t,n.id),i=n.structure,a=e.head(e.keys(i));return{pointer:o,name:a,title:i[a].title,type:i[a].$ref||i[a].type}})},getAllSerializedCustomDefinitions:function(t){const n=a(t)||{};return e.map(n.customDefinitions,"structure")},getSerializedCustomDefinition:function(t,n){return e.get(t.dal.get(n),"structure")}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(14)],void 0===(i=function(e,t,n){"use strict";const o={};function i(t,n){return e.every(n.modeIds,e=>!!t[e])}function r(e,t,n){const o=e.componentStructure.getModesDefinitions(n);return t.get(o)}function a(n,o,a,s){const c=t.objectUtils.cloneDeep(a);let p=function(t,n,o){let i={};for(;null!==o;){const a=r(t,n,o),s=e.map(a,"modeId");i=e.merge(i,e.zipObject(s,s)),o=t.components.getParent(o)}return i}(n,o,s),l=[c];for(;!e.isEmpty(l);){const t=l.pop(),n=e.get(t,"modes.definitions"),o=e.map(n,"modeId");p=e.merge(p,e.zipObject(o,o));const r=e.get(t,"modes.overrides");if(r){const n=e.filter(r,e.partial(i,p));e.set(t,"modes.overrides",n),e.isEmpty(n)&&delete t.modes.isHiddenByModes}l=l.concat(t.components||[])}return c}function s(o){const i=function(t){const o=n.getViewMode(t),i=t.pointers.components.getMasterPage(o),r=t.pointers.componentStructure.getModes(i);return r?e.get(t.dal.get(r),"definitions",[]):[]}(o);return e.filter(i,{type:t.siteConstants.COMP_MODES_TYPES.SHOW_ON_SOME_PAGES})}function c(){return{isHiddenByModes:!1,definitions:[],overrides:[]}}function p(t,n,o,i,r){if(!i)return null;let a=r?i:t.full.components.getParent(i);for(;a;){if(!e.isEmpty(d(t,n,o,a)))return a;a=t.components.getParent(a)}return null}function l(t,n,o,i,r){const a=p(t,n,o,i,r);return a?e.head(d(t,n,o,a)):null}function u(e,t){const n={isHiddenByModes:!1,definitions:[],overrides:[]};return n.isHiddenByModes=!0,n.overrides.push({modeIds:e,isHiddenByModes:!1,layout:t}),n}function d(n,i,r,a){const s=n.components.getPageOfComponent(a);if(s){const c=function(t,n,o){const i=t.general.getActiveModes(),r=n.get(i);return o&&r[o]?e.omitBy(r[o],e=>!e):{}}(n,r,s.id),p=n.componentStructure.getModesDefinitions(a),l=e.reject(i.get(p),e=>o[e.type]);return e.keys(t.modesUtils.getActiveComponentModeIds(c,l))}return[]}return o[t.siteConstants.COMP_MODES_TYPES.SHOW_ON_SOME_PAGES]=!0,{adjustModesToNewContainer:function(t,n,o,i,r){r=a(t,n,r,i);const s=l(t,n,o,i)||e.head(d(t,n,o,i));if(s){const t=u([s],r.layout);if(r.modes){r.modes.isHiddenByModes=!0,r.modes.overrides=r.modes.overrides||[];const n=e.find(r.modes.overrides,t=>e.isEqual(t.modeIds,[s]));n?n.isHiddenByModes=!1:r.modes.overrides.push(t.overrides[0])}else r.modes=t}return r},createEmptyModesObject:c,getFirstAncestorModeToGenerateOverrides:l,createModesObjectForCompAddedInMode:u,getComponentModesToGenerateOverrides:d,getSospModeByPagesGroup:function(t,n){if(!t.dal.isExist(n))return;const o=s(t);return e.find(o,["settings.pagesGroupId",`#${n.id}`])},getFirstAncestorWithModesToGenerateOverrides:p,getSOSPModes:s}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(10)],void 0===(i=function(e,t){"use strict";let n={},o={},i={},r={},a={},s={},c={},p={},l={};const u={},d=[],g=[],f=function(t){return!e.isUndefined(l[t])};return{supportedEvents:["COMPONENT_DELETED","EDIT_MODE_CHANGE","SITE_PUBLISHED","SETTINGS_UPDATED","WINDOW_PLACEMENT_CHANGED","THEME_CHANGE","DEVICE_TYPE_CHANGED","STYLE_PARAMS_CHANGE","SITE_SAVED","ON_MESSAGE_RESPONSE","PUBLIC_DATA_CHANGED"],unRegisterHandlers:function(u,d){n=e.omit(n,d),o=e.omit(o,d),i=e.omit(i,d),r=e.omit(r,d),a=e.omit(a,d),s=e.omit(s,d),p=e.omit(p,d),l=e.omit(l,d),e.isUndefined(c[d])||(t.events.onChange.removeListener(u,c[d]),c=e.omit(c,d))},registerEditModeChangeHandler:function(e,t){n[e]=t},registerSettingsUpdatedHandler:function(e,t){i[e]=t},registerWindowPlacementChangedHandler:function(e,t){r[e]=t},registerSitePublishedHandler:function(e,t){a[e]=t},registerDeviceTypeChangeHandler:function(e,t){s[e]=t},registerSiteSavedHandler:function(e,t){p[e]=t},registerCompLoaded:function(t){e.forEach(g,function(e){t({compPointer:e})}),d.push(t)},callCompLoaded:function(t){g.push(t),e.forEach(d,function(e){e({compPointer:t})})},editModeChange:function(t){e.forEach(n,function(e){e(t)})},sitePublished:function(){e.forEach(a,function(e){e()})},siteSaved:function(){e.forEach(p,function(e){e()})},deviceTypeChange:function(t){e.forEach(s,function(e){e(t)})},triggerOnWindowPlacementChanged:function(e){const t=e.data.placement,n=e.compId,o=r[n];o&&o(t)},registerThemeChangeHandler:function(n,o,i){if(e.isUndefined(c[o])){const e=t.events.onChange.addListener(n,i);c[o]=e}},callSettingsUpdateCallback:function(e,t){const n=i[e];n&&n(t)},registerDeleteCompHandler:function(e,t){l[e]=t},executeDeleteHandler:function(e){f(e)&&(l[e](),delete l[e])},isDeleteHandlerExists:f,registerPublicDataChangedHandler:function(e,t,n){u[t]||(u[t]={}),u[t][e]=n},callPublicDataChangedCallback:function(t,n,o){const i=u[n],r=e.get(i,t);r&&r(o)},callPublicDataChangedCallbackForAllAppRegisteredComps:function(t,n){const o=u[t];e.forEach(o,function(e){e(n)})},registerEditorEventHandler:function(e,t){o[e]=t},triggerEditorEvent:function(t){e.forEach(o,function(e){e(t)})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(184),n(15),n(13),n(31),n(71),n(29),n(96),n(35)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p){"use strict";const l=e.template("<%= provisionServerBaseUrl %>/editor/pre-save-add-apps/template/<%= metaSiteId %>?"),u=e.template("<%= provisionServerBaseUrl %>/editor/pre-save-add-app/<%= metaSiteId %>?appDefId=<%= appDefinitionId %>"),d=e.template("<%= provisionServerBaseUrl %>/editor/settle/<%= metaSiteId %>?context=<%= context %>&editorSessionId=<%= editorSessionId %>"),g=e.template("<%= provisionServerBaseUrl %>/editor/provision-from-source-template/<%= metaSiteId %>?appDefId=<%= appDefinitionId %>&sourceTemplateId=<%= sourceTemplateId %>"),f="save",m="load",y="firstSave",E=function(t,n,o){const i=n.payload;e.forEach(i,function(e){L(t,e),o&&o(e)})},I=function(e,t,o,a,s){if(r.isSiteSaved(e)){const r=i.getProperty(e,i.PROPERTY_NAMES.META_SITE_ID),c=i.getProperty(e,i.PROPERTY_NAMES.SITE_REVISION),p=F(e,u,t,r),l=new n(p).addAcceptJson().addAppVersionAndSiteRevision(s,String(c)).build();U(e,l,"GET",{},o,a)}else{h(e,[t],function(t){t&&t.success?E(e,t,o):a(t)},a)}},S=function(e,t,o,r,a){const s=i.getProperty(e,i.PROPERTY_NAMES.META_SITE_ID),c=e.pointers.general.getServiceTopology(),p=e.dal.get(e.pointers.getInnerPointer(c,"appStoreUrl")),l=g({provisionServerBaseUrl:p,metaSiteId:s,appDefinitionId:t,sourceTemplateId:o}),u=new n(l).addAcceptJson().build();U(e,u,"POST",{},r,a)},h=function(e,t,o,r){const a=i.getProperty(e,i.PROPERTY_NAMES.META_SITE_ID),s=e.pointers.general.getServiceTopology(),c=e.dal.get(e.pointers.getInnerPointer(s,"appStoreUrl")),p=l({provisionServerBaseUrl:c,metaSiteId:a}),u=new n(p).addAcceptJson().build();U(void 0,u,"POST",{guids:t},o,r)},P=function(e,t){return e.filter((e,n)=>!!t.get(n))},A=t=>{const n=t.get("pagesData"),i=o.filterApps(t.getIn(["rendererModel","clientSpecMap"]).toJS()),r=e.invoke(t.getIn(["routers","configMap"]),"toJS");return x(i,n,r)},T=(e,t,n,o,i)=>{const r=D(e,n);U(null,r,"POST",t,o,i)},v=(t,n)=>{const i=n.get("pagesData"),r=n.getIn(["rendererModel","clientSpecMap"]).toJS(),a=t.get("pagesData"),c=_(a,i),p=O(a,i),l=P(a,c),u=P(i,c),d=s.areTpaCompsWereUnInstalled(l,c,p,r),g=e.invoke(n.getIn(["routers","configMap"]),"toJS"),f=s.isPlatformOnlyAppUninstalled(u,r,g),m=d||(t=>e.some(t,{shouldTriggerFullSave:!0}))(r)||f,y=o.filterApps(r);return m?x(y,i,g):C(c,y,g)},C=(t,n,i)=>{const r=s.getAllAppIdsInstalledOnPages(t,n,i),c=e.concat(e.filter(n,"notProvisioned"),a.getAppsToAdd(),s.getAppsToGrantPermissions(n,r)),p=((t,n)=>e(t).filter(t=>e.includes(n,e.toString(t.applicationId))||o.isDemoAppAfterProvision(t)||o.hasEditorPlatformPart(t)).map(({appDefinitionId:t,applicationId:n,instanceId:o,version:i})=>e.omitBy({type:"add",appDefId:t,applicationId:e.toString(n),instanceId:o,appVersion:i},e.isUndefined)).value())(c,r),l=R(),u=w(n,c);return e.concat(p,l,u)},_=function(e,t){return t.filter((t,n)=>(function(e,t,n){const o=t.get("structure");return!e&&o||!o.equals(e.getIn([n,"structure"]))})(e,t,n))},O=function(e,t){return e.filter((e,n)=>!t.getIn([n,"structure"]))},D=function(e,t){const o=e.getIn(["serviceTopology","appStoreUrl"]),i=e.getIn(["rendererModel","metaSiteId"]),r=e.getIn(["documentServicesModel","editorSessionId"]),a=k(o,d,i,r,t);return new n(a).addAcceptJson().build()},w=(t,n=[],o=[])=>e(t).filter(({pendingAction:t,applicationId:i})=>t===p.APP_ACTION_TYPES.UPDATE&&!e.some(n,{applicationId:i})&&!e.some(o,{applicationId:i})).map(t=>({type:"update",appDefId:t.appDefinitionId,applicationId:e.toString(t.applicationId),instanceId:t.instanceId,appVersion:t.version})).value(),M=(t,n)=>e(t).reject(({applicationId:t})=>e.some(n,{applicationId:t})).map(({appDefinitionId:t,applicationId:n,instanceId:o,version:i})=>e.omitBy({type:"add",appDefId:t,applicationId:e.toString(n),instanceId:o,appVersion:i},e.isUndefined)).value(),b=t=>e.map(t,({applicationId:t})=>({type:"remove",applicationId:e.toString(t)})),R=()=>e.map(a.getAppsToDismiss(),e=>({type:"dismiss",appDefId:e})),N=(t,n,o,i)=>{const r=e.invoke(t.getIn(["routers","configMap"]),"toJS"),{grant:a,revoke:c}=s.getAppsToGrantAndRevoke(o,n,{excludeHybrid:!0},r),p=M(a,c),l=b(c),u=R(),d=w(o,a,c),g=t.getIn(["documentServicesModel","revision"]),f={actions:e.concat(p,l,u,d),siteRevision:g};e.isEmpty(f.actions)||T(t,f,m,i)},x=(t,n,o)=>{const i=s.getAppsToGrantAndRevoke(t,n,{},o),r=e.concat(e.filter(t,"notProvisioned"),a.getAppsToAdd(),i.grant),c=i.revoke,p=M(r,c),l=b(c),u=R(),d=w(t,r,c);return e.concat(p,l,u,d)},L=function(t,n){if(e.includes([void 0,-1],n.applicationId))n.applicationId=B(t),n.notProvisioned=!0;else{const e=o.getAppDataByAppDefinitionId(t,n.appDefinitionId),i=e&&e.demoMode&&!n.demoMode;a.isPremiumPendingApp(t,n.applicationId)?a.add(n):!i&&e||(n.notProvisioned=!0)}t.setOperationsQueue.executeAfterCurrentOperationDone(function(){r.isTpaByAppType(n.type)&&c.cacheAppMarketDataAfterProvision(t,n)})},B=function(e){const t=o.getLargestApplicationId(e);return c.generateAppFlowsLargestAppId(t)},F=function(e,t,n,o){const i=e.pointers.general.getServiceTopology();return t({provisionServerBaseUrl:e.dal.get(e.pointers.getInnerPointer(i,"appStoreUrl")),metaSiteId:o,appDefinitionId:n})},k=function(e,t,n,o,i){return t({provisionServerBaseUrl:e,metaSiteId:n,editorSessionId:o,context:i})},U=function(n,o,i,r,a,s){const c={type:i,url:o,dataType:"json",contentType:"application/json",success(e){n?function(e,t,n){const o=n.payload;L(e,o),t(o)}(n,a,e):a(e)},error:s};r&&!e.isEmpty(r)&&(c.data=JSON.stringify(r)),t.ajaxLibrary.ajax(c)};return{preSaveAddApp:I,settleOnSave:function(t,n,o,i){const r={actions:v(t,n),siteRevision:n.getIn(["documentServicesModel","revision"])};e.isEmpty(r.actions)?o():T(n,r,f,o,i)},settleOnFirstSave:function(e,t,n,o){const i={actions:A(t),siteRevision:t.getIn(["documentServicesModel","revision"])};T(t,i,y,n,o)},getSettleActionsForFullSave:A,getSettleActionsForSave:v,settleOnLoad:function(e){e.dal.takeSnapshot("tpa-settle-on-load");const t=e.dal.full.immutable.getLastSnapshotByTagName("tpa-settle-on-load");e.dal.removeLastSnapshot("tpa-settle-on-load");const n=t.get("pagesData"),i=o.filterApps(t.getIn(["rendererModel","clientSpecMap"]).toJS());N(t,n,i,function(t){t&&t.success&&o.setAppsData(e,t.payload.clientSpecMap)})},preSaveAddAppsOnLoad:function(t){const n=s.getAppsDefIdToProvisionOnSiteLoad(t);e.isEmpty(n)||(r.isSiteSaved(t)?function(t,n){const i=function(e){e&&(e.shouldTriggerFullSave=!0,o.registerAppData(t,e))},r=function(){};e.forEach(n,function(e){I(t,e,i,r)})}(t,n):function(t,n){h(t,n,function(n){n&&n.success&&(E(t,n),e.forEach(n.payload,function(e){o.registerAppData(t,e)}))},function(){})}(t,n))},provisionAppFromSourceTemplate:function(e,t,n,o,i){r.isSiteSaved(e)?S(e,t,n,o,i):i({success:!1})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(21),n(204),n(46),n(78),n(106),n(79),n(615)],void 0===(i=function(e,t,n,o,i,r,a,s,c){"use strict";const p="List does not exist",l="Data selector does not exist",u="Type does not exist",d="List views do not exist",g="View is not valid",f="New List";function m(e){throw new Error(e)}function y(e,t){return e.dal.getByPath(n.getPartPath(t))}function E(t,n){const o=y(t,n)||m(p),i=h(t,n);if(!i)throw new Error(l);if("ManualSelectedList"!==i.type)throw new Error("Only manual lists are supported");return e(r.getAllItemsOfType(t,o.type)).pick(i.itemIds).values().value()}function I(e,t){const n=y(e,t)||m(p);return i.getType(e,n.type)}function S(e,t){const n=y(e,t)||m(p);return s.getAllViewsByName(e,n.viewName)}function h(e,t){const n=y(e,t)||m(p);return a.getSelector(e,n.dataSelector)}function P(e){return e.dal.getByPath(n.getBasePartsPath())}function A(t,n){const i=e.map(P(t),"displayName");let r=n;for(;e.includes(i,r);)r=o.incNumberSuffix(r);return r}function T(t,n,o){const i=y(t,n)||m(p),r=S(t,n),a=e.findKey(r,function(t){return t.forType===i.type&&(o?t.format===o:e.isEmpty(t.format))});return[a,r[a]]}function v(e,t){const n=e.pointers.wixapps.getPackageCounterData("appbuilder");e.dal.isExist(n)||e.dal.set(n,{});const o=y(e,t),i=e.pointers.wixapps.getCounterData("appbuilder",o.type),r=e.dal.get(i)||0;e.dal.set(i,r+1)}return{markDataAsUpdated:v,getListDef:y,getDisplayName:function(e,t){return y(e,t).displayName},getItems:E,getHiddenItems:function(t,n){const o=y(t,n)||m(p),i=E(t,n),a=r.getAllItemsOfType(t,o.type);return e(a).omit(e.map(i,"_iid")).values().value()},getType:I,getViews:S,getSelector:h,setManualSelector:function(e,t,n){const o=y(e,t)||m(p);a.setManualSelector(e,o.dataSelector,n)},getAllLists:P,createList:function(o,r){if(!i.getType(o,r.type))throw new Error(u);if(!a.getSelector(o,r.dataSelector))throw new Error(l);if(e.isEmpty(s.getAllViewsByName(o,r.viewName)))throw new Error(d);const p={displayName:A(o,r.displayName||f),dataSelector:r.dataSelector,type:r.type,viewName:r.viewName,version:c.LIST_VERSION},g=`list_${t.guidUtils.getUniqueId()}`;return o.dal.full.setByPath(n.getPartPath(g),p),g},getTypeName:function(e,t){return I(e,t).name},rename:function(e,t,o){const i=y(e,t);i.displayName=o,e.dal.full.setByPath(n.getPartPath(t),i)},getVersion:function(e,t){return y(e,t).version||"1.0"},replaceItemView:function(t,n,o){e.isEmpty(o)&&m(g);const i=e.head(T(t,n,o.format));s.replaceView(t,i,o),v(t,n)},getItemView:function(t,n,o){return e.last(T(t,n,o))}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(3),n(60),n(82)],void 0===(i=function(e,t,n,o,i){"use strict";function r(e){return e.replace("#","")}function a(t,n){return e.every(n,function(n,o){const i=t[o];return e.isObject(i)?e.isEqual(n,`#${i.id}`):e.isEqual(n,i)})}function s(e,t){const n=c(e,t),o=e.pointers.getInnerPointer(n,"link");return e.dal.get(o)}function c(e,t){return t=r(t),e.pointers.data.getDataItem(t,"masterPage")}function p(t,n,o,i){const r=i.items.map(e.partial(p,t,n,o)),a=t.pointers.multilingualTranslations.translationDataItem("masterPage",n,i.id),s=t.dal.full.get(a);if(s&&(s.items=r,t.dal.fullJsonDal.set(a,s),o)){const e=t.pointers.data.getDataItem(i.id,"masterPage");t.dal.displayedJsonUpdater.Displayed.onSet(e,s)}return`#${e.get(s,"id")||i.id}`}return{getIndexOfItemInParent:function(e,t,n){const o=c(e,t),i=e.dal.get(e.pointers.getInnerPointer(o,"items")).indexOf(`#${n}`);if(i<0)throw new Error(`Cannot find item #${n} at parent #${t}`);return i},getItemIdAndParent:function e(t,n){let o,i;const s=t.items;for(let c=0;c<s.length;c++){if((o=s[c]).link&&a(o.link,n))return{parentId:t.id?r(t.id):null,itemId:o.id?r(o.id):null};if(i=e(o,n))return i}return null},getLinkItemByMenuItemId:function(e,t){const n=s(e,t);if(!n)return null;const o=c(e,n);return e.dal.get(o)},getLinkIdByMenuItemId:s,getParentItemId:function e(t,n){const o=t.items;let i,r;for(i=0;i<o.length;i++){if((r=o[i]).id===n)return t.id;const a=e(r,n);if(a)return a}return null},getSiteMenu:function(e){const i={getDataByQuery:(t,o)=>n.getDataItemById(e,t,o),getRouters:()=>o.get.all(e)};return t.menuUtils.getSiteMenuWithoutRenderedLinks(i,!0)},sanitizeHash:r,validateParent:function(t,n,o,i){if(n=n?r(n):"CUSTOM_MAIN_MENU",(o=o&&r(o))&&o===n)throw new Error(`menu item ${o} cannot be a parent for itself`);const a=c(t,n);if(!t.dal.isExist(a))throw new Error(`Parent "${n}" does not exist`);const s=t.dal.get(t.pointers.getInnerPointer(a,"type"));if("BasicMenuItem"!==s&&"CustomMenu"!==s)throw new Error(`Parent of type "${s}" is not a legal parent. Please provide parent of types "BasicMenuItem" or "CustomMenu" only`);if(function(t,n,o){if(function(e,t){const n=e.pointers.getInnerPointer(e.pointers.data.getDataItem(t,"masterPage"),"type");return"CustomMenu"===e.dal.get(n)}(t,n))return!1;o=o||"CUSTOM_MAIN_MENU";const i=t.dal.get(c(t,o));return!e.includes(i.items,`#${n}`)}(t,n,i))throw new Error("Cannot add/move items into a sub item");if(o){const r=c(t,o),a=t.pointers.getInnerPointer(r,"items"),s=t.dal.get(a);if(s&&s.length>0&&!e.includes(["CUSTOM_MAIN_MENU",i],n))throw new Error(`Cannot move item with sub items (#${o}) to anything other than  #CUSTOM_MAIN_MENU`)}},getMenuDataItemPointer:c,getPageMenuItemPointer:function(e,t){let n;const o=e.pointers.data.getDataItemsWithPredicate({type:"PageLink",pageId:`#${t}`});for(let t=0;o.length;t++)if(n=e.pointers.data.getDataItemWithPredicate({type:"BasicMenuItem",link:`#${o[t].id}`}))return n},updateTranslatedMenuItems:function(e,t){if(i.multilingual.isEnabled(e)){const n=i.current.get(e);i.getFull(e).forEach(o=>{const i=o.code===n;p(e,o.code,i,t)})}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(5),n(1),n(2),n(22),n(41)],void 0===(i=function(e,t,n,o,i,r){"use strict";function a(e,t){const n=e.pointers.components.getPageOfComponent(t).id,i=e.dal.get(t),r=e.pointers.components.getViewMode(t)===o.VIEW_MODES.MOBILE;e.siteAPI.createChildrenAnchors(i,n,{forceMobileStructure:r})}function s(e,t){const n=e.pointers.general.getCompsToUpdateAnchors();e.dal.isExist(n)?e.dal.push(n,t):e.dal.set(n,[t])}return{updateAnchors:function(e,t,n){t&&s(e,t),n&&s(e,n)},updateAnchorsForCompChildren:a,getMinDragHandleY:function(t,n,o){const i=t.pointers.components.getSiblings(n),a=n.id;let s,c;return o=o||[],e.reduce(i,function(n,i){if(e.includes(o,i.id))return n;const p=r.getComponentLayout(t,i);return(s=e.find(p.anchors,{targetComponent:a,type:"BOTTOM_TOP"}))?Math.max(n,r.getBoundingY(p)+r.getBoundingHeight(p)):(c=e.find(p.anchors,{targetComponent:a,type:"TOP_TOP"}))?Math.max(n,r.getBoundingY(p)):n},0)},getMinAnchorLockDistance:function(){return o.ANCHORS.LOCK_THRESHOLD},updateAnchorsForMultipleComps:function(t){const o=t.pointers.general.getCompsToUpdateAnchors(),r=t.dal.get(o)||[];e(r).concat(function(t,o){return e.transform(o,function(e,o){if(!n.displayedOnlyStructureUtil.isDisplayedComponent(o.id)){const n=t.pointers.full.components.getParent(o);n&&e.push(n)}},[])}(t,r)).map(function(e){return n.displayedOnlyStructureUtil.isDisplayedComponent(e.id)?function(e,t){return i.getAncestorByPredicate(e,t,function(e){return!n.displayedOnlyStructureUtil.isDisplayedComponent(e.id)})}(t,e):e}).uniqBy("id").compact().filter(function(e){const n=t.pointers.components.getPageOfComponent(e);return!!n&&t.siteAPI.isComponentRenderedOnSite(n.id)}).forEach(e.partial(a,t)),t.dal.set(o,[])}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(3),n(4),n(10),n(95)],void 0===(i=function(e,t,n,o,i,r){"use strict";const a=t.constants;function s(t){!function(e){e.text=e.text.slice(0,r.QUICK_ACTION_ITEM_MAX_LENGTH)}(t),function(t){if(!e.includes(r.actionTypesMap,t.itemType))throw new Error(`"${t.itemType}" is an unsupported action`)}(t),"custom"===t.itemType?function(t){const n=e.find(r.quickActionIconsData,{hash:t.icon,isFree:!0});if(e.isUndefined(n))throw new Error(`"${t.icon}" is not a predefined free icon and cannot be used for custom action bar item`);e.assign(t,{color:n.color})}(t):function(t){const n=r.quickActionIconsData[t.itemType];e.assign(t,{icon:n.hash,color:n.color})}(t)}function c(e){return e.pointers.components.getPage("masterPage",a.VIEW_MODES.MOBILE)}function p(e){return e.pointers.components.getComponent("QUICK_ACTION_BAR",c(e))}function l(t){const n=p(t);return!e.isNull(n)&&o.isExist(t,n)}function u(t,i){s(i);const a=e.merge(e.clone(r.defaultSerializedQuickActionBarItem),{data:e.assign(n.createDataItemByType(t,"QuickActionBarItem"),e.pick(i,["link","itemType","text","icon"])),style:e.set({},"style.properties",e.pick(i,["color"]))}),c=p(t),l=o.getComponentToAddRef(t,c,null);o.add(t,l,c,a)}function d(t){if(!l(t))return[];const n=function(t){const n=t.pointers.components.getChildren(p(t));return e.map(n,function(n){const r=o.data.get(t,n),a=t.dal.get(n).styleId,s=i.styles.get(t,a);return e.assign({pointer:n},e.pick(r,["text","icon","link","itemType"]),e.pick(s.style.properties,["color"]))})}(t),r=function(t){const n=e(t.siteDataAPI.siteData.getClientSpecMap()).reject(function(t){return e.get(t,["permissions","revoked"],!1)}).map("appDefinitionId").value();return e(a.SUPPORTED_DYNAMIC_ACTIONS).map(function(t){return e.assign({},t,{isDynamic:!0})}).filter(function(t){return e.includes(n,t.appId)}).value()}(t);return e.concat(n,r)}return{getQuickActionBarPointer:p,hasQuickActionBar:l,addAction:u,addQuickActionBar:function(t,i,a){const s=l(t),p=e(d(t)).reject("isDynamic").isEmpty();if(!s||p){if(!s){const a=e.merge(e.clone(i||r.defaultSerializedFAB),{props:n.createPropertiesItemByType(t,"QuickActionBarProperties")}),s=c(t),p=o.getComponentToAddRef(t,s,null,"QUICK_ACTION_BAR");o.add(t,p,s,a)}e.forEach(a,e.partial(u,t,e))}},removeQuickActionBar:function(e){l(e)&&o.deleteComponent(e,p(e))},getActions:d,clearActions:function(t){if(!l(t))return;const n=t.pointers.components.getChildren(p(t));e.forEach(n,e=>o.deleteComponent(t,e))},getAllTypes:function(){return r.actionTypesMap},validateActionItemData:s,getIconsMap:function(){return r.quickActionIconsData}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(43),n(20),n(33),n(15),n(38),n(96),n(44),n(45),n(55),n(119),n(175)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l,u){"use strict";const d="/appStore/wix-code/",g="save",f="wixCodeNotProvisioned";function m(e,t){const r=i.getLargestApplicationId(e),s={type:n.WIX_CODE_SPEC_TYPE,appDefinitionId:t.appDefinitionId,instance:t.dsi,instanceId:t.instanceId,applicationId:a.generateAppFlowsLargestAppId(r)};return s[f]=!0,o.registerAppData(e,s),s}function y(e,t){return p.setWixCodeModel(e,{gridAppId:t.gridAppId}),t}function E(e){const t=e.pointers.general.getMetaSiteId();return e.dal.get(t)}function I(e){return t.extractFromSnapshot(e,["rendererModel","clientSpecMap"],!0)}function S(e){return function(e){return!!r.getExistingWixCodeAppFromPS(e)}(e)&&function(e){return!!p.getGridAppId(e)}(e)}return{provision:function(t){const n=s.trace(t,{action:"createApp"}),o=r.getExistingWixCodeAppFromPS(t);return S(t)?(n({message:"wix code is already provisioned"}),Promise.resolve(o)):function(t,n){const o={baseUrl:l.getBaseUrlFromPS(t),metasiteId:E(t),signedInstance:n?n.instance:null};return l.create(o).then(e.partial(y,t)).then(e=>(u.setAppWriteable(t),e)).then(n?e.constant(n):e.partial(m,t))}(t,o).then(function(e){return n({message:e}),e}).catch(function(e){return n({message:e,level:s.levels.ERROR}),Promise.reject(e)})},isProvisioned:S,save:function(o,i,r){const a=function(e){return t.extractFromSnapshot(e,["serviceTopology","appStoreUrl"])+d}(o)+g,s=function(e){return t.extractFromSnapshot(e,["rendererModel","metaSiteId"])}(o),c=e(o).thru(I).filter(f).map(function(e){return{applicationId:e.applicationId.toString(),instanceId:e.instanceId,signedInstance:e.instance,gridAppId:t.extractFromSnapshot(o,n.paths.GRID_APP_ID)}}).value();if(c.length>0){const n={metaSiteId:s,codeAppSpec:c[0]};t.sendRequest(a,t.requestTypes.POST,n).then(function(t){i(function(t){if(!t.success)return t;const n={};return n[t.payload.applicationId]=t.payload,e.assign({},t,{payload:{clientSpecMap:n}})}(t))}).catch(function(e){r(e)})}else i()},ensureAppIsWriteable:u.ensureAppIsWriteable,handleAppIsReadOnlyServerError:u.handleAppIsReadOnlyServerError}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";const e={ABORT:"abort",TIMEOUT:"timeout",PARSE:"parseerror"};const t=({errorType:t,xhr:n})=>t===e.ABORT?function(){const e=new Error("Request aborted by browser");return e.name="RequestAbortError",e}():t===e.TIMEOUT?function(){const e=new Error("Request timed out");return e.name="RequestTimeoutError",e}():function(e){const t=`Status: ${e.status}`,n=`Response Text: ${e.responseText}`;return new Error(["Server Error",t,n].join("\n"))}(n);return{build:function({errorType:e,xhr:n}){const o=t({errorType:e,xhr:n});return o.xhr=n,o},errorTypes:e,safeGetErrorCode:function(e){try{return JSON.parse(e.xhr.responseText).errorCode}catch(e){return null}},safeGetStatusCode:function(e){try{return e.xhr.status}catch(e){return null}}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(0),n(15),n(13)],void 0===(i=function(e,t,n){"use strict";let o=[],i=[],r=[];const a=function(n){const o=t.getAppsData(n);return e.filter(o,function(e){return l(n,e)&&s(e)&&c(e)})},s=function(t){return e.has(t,"appDefId")?!e.includes(o,t.appDefId):!e.includes(o,t.appDefinitionId)},c=function(t){return e.has(t,"appDefId")?!e.some(i,{appDefinitionId:t.appDefId}):!e.some(i,{appDefinitionId:t.appDefinitionId})},p=e=>e.requiresEditorComponent&&t.isHybridAppFromAppData(e),l=function(n,o){return n&&o?o.requiresEditorComponent&&t.isHybridApp(n,o.applicationId):!(!e.isUndefined(n)||!o)&&p(o)};return{getPendingApps:a,getPendingAppsFromSiteMetaData:function(t){const o=(n.getProperty(t,n.PROPERTY_NAMES.PENDING_APPS)||[]).slice(0).concat(r),i=e.uniqBy(o,"appDefId");return e.filter(i,function(e){return s(e)&&c(e)})},getPendingAppsCount:function(t){const n=a(t);return e.size(n)},getPremiumPendingApps:function(o){const i=t.getAppsData(o),r=e.map(i,"appDefinitionId"),a=n.getProperty(o,n.PROPERTY_NAMES.PENDING_APPS)||[],s=e.filter(a,t=>e.has(t,"appDefId")&&e.has(t,"vendorProductId"));return e.filter(s,t=>!e.includes(r,t.appDefId))},isPending:l,isPendingAppData:p,dismiss:function(t,n){e.some(i,{appDefinitionId:n})||(e.includes(o,n)||o.push(n),r=e.reject(r,{appDefId:n}))},add:function(t){i.push(t),e.includes(o,t.appDefinitionId)&&(o=e.without(o,t.appDefinitionId))},addPendingDashboardApp:function(t,n){if(e.isEmpty(n))return;const i={appDefId:n};r.push(i),o=e.without(o,n)},getAppsToDismiss:function(){return o},getAppsToAdd:function(){return i},isPremiumPendingApp:function(t,o){const i=n.getProperty(t,n.PROPERTY_NAMES.PENDING_APPS)||[];return e.some(i,t=>e.has(t,"appDefId")&&"Premium"===t.reason&&t.applicationId===o)},onSave:function(){o=[],i=[]}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";const t={},n={};return{registerOnAppDeleted:function(n,o){e.isUndefined(t[n])&&(t[n]=[]),t[n].push(o)},registerOnAppInstalled:function(t,o){e.isUndefined(n[t])&&(n[t]=[]),n[t].push(o)},invokeDeleteAppCallbacks:function(n){t[n]&&e.forEach(t[n],function(e){e()})},invokeAddAppCallbacks:function(t){n[t]&&e.forEach(n[t],function(e){e()})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(3),n(84),n(4),n(6),n(7)],void 0===(i=function(e,t,n,o,i,r){"use strict";const a="platform.components.AppController",s="platform.components.AppWidget",c="*";return{connect:function(i,p,l,u,d,g){const f=o.getType(i,l);if(f===s){if(!r.isDescendantOfComp(i,p,l))throw new Error("cannot connect to app widget from the outside");!1!==g&&(g=!0)}else{if(f!==a)throw new Error("controllerRef component type is invalid - should be a controller or current context");g=g||!1}if(g&&((m=o.getType(i,p))===a||m===s))throw new Error("cannot connect to another controller with a primary connection");var m;if(u===c)throw new Error("invalid connection role - cannot be *");const y={type:"ConnectionItem",controllerRef:l,role:u,isPrimary:g};d&&(y.config=d);const E=n.getConnections(i,p),I=e.reject(E,{controllerRef:l,role:u});if(y.isPrimary&&e.some(I,{isPrimary:!0}))throw new Error("Primary connection is already connected to the component");t.updateConnectionsItem(i,p,I.concat(y))},disconnect:function(o,r,a,s){const c=n.getConnections(o,r),p={controllerRef:a};s&&(p.role=s);const l=e.reject(c,p);e.isEmpty(l)?t.removeConnectionsItem(o,r):t.updateConnectionsItem(o,r,l),i.executeHook(i.HOOKS.CONNECTION.AFTER_DISCONNECT,"connection",[o,r,a,s])},get:n.getConnections,getPlatformAppConnections:n.getPlatformAppConnections,getPrimaryConnection:n.getPrimaryConnection,getConnectedComponents:function(e,t){const o=e.pointers.full.components.getPageOfComponent(t);if(!o)return[];const i=e.pointers.full.components.isMasterPage(o)?null:o.id;return r.getAllComponentsFromFull(e,i,function(o){return n.isCompConnectedToController(e,o,t)})},getControllerConnections:function(t,o){const i=t.pointers.full.components.getPageOfComponent(o);if(!i)return[];const a=t.pointers.full.components.isMasterPage(i)?null:i.id,s=r.getAllComponentsFromFull(t,a);return e.flatMap(s,function(i){return e(n.getConnections(t,i)).reject({type:"WixCodeConnectionItem"}).filter(["controllerRef.id",o.id]).map(function(e){return{componentRef:i,connection:{config:e.config,controllerRef:e.controllerRef,role:e.role,isPrimary:e.isPrimary}}}).value()})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(3),n(26),n(17),n(12)],void 0===(i=function(e,t,n,o,i){"use strict";function r(e,n,o){const i=[e,n,o],r={methodName:"components.data.update",singleComp:t.shouldUpdateDataWithSingleComp(e,n)};e.setOperationsQueue.runSetOperation(t.updateDataItem,i,r)}function a(e,n,o){const i=t.getDataItem(e,n);i&&i.urlFormat!==o&&(i.urlFormat=o,r(e,n,i))}return{updateUrlFormatIfNeeded:a,upgradeUrl:function(s,c,p,l){const u=n.getPossibleUrlFormats(),d=o.getSocialUrl(s,u.HASH_BANG,l&&l.forceMainPage);n.isHttpsEnabled(s)&&function(e,n){const o=t.getDataItem(e,n);o&&(o.isHttpsEnabled=!0,r(e,n,o))}(s,c),n.isUsingUrlFormat(s,u.HASH_BANG)?a(s,c,u.HASH_BANG):p&&e.get(i.socialAPI,p)(d,function(e){a(s,c,e?u.HASH_BANG:u.SLASH)})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(5),n(45),n(6),n(69),n(124),n(127),n(123),n(55),n(463),n(125),n(100),n(99),n(187),n(128),n(70),n(126),n(32),n(2),n(20),n(44),n(189),n(38),n(43)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l,u,d,g,f,m,y,E,I,S,h,P,A,T,v){"use strict";const C=g.getCodeAppInfoFromPS;function _(e,t){if(u.isPageFile(t)){const n=u.getFileName(t).replace(".js",""),o=e.pointers.components.getPage(n,S.VIEW_MODES.DESKTOP);o&&I.updatePagePlatformApp(e,o,h.WIX_CODE_APP_ID,!0)}}function O(e,t){return x(e,u.getParentFolderPath(t),!0)}function D(e,t){const n=O(e,t);s.addChild(e,n.location,t)}function w(e,t){const n=O(e,t);s.removeChild(e,n.location,t)}function M(e){return"WD_COLLECTION_DELETED"===e.code}function b(t,n){if(!u.isFile(n))return Promise.reject(new d.ArgumentError("fileDescriptor","filesAPI.readFile",n.location));const o=P.trace(t,{action:"DSFS.readFile",message:{file:n.location}});if(s.isFileReadable(t,n.location))return o({message:"read file from cache"}),Promise.resolve(s.readFile(t,n.location));const i=s.getSourceFilePath(t,n.location),r=a.getVirtualDescriptor(i,!1),c=m.isSchemaFile(n.location);return(c?A.get(C(t),m.getSchemaIdFromFilePath(n.location)).then(e=>JSON.stringify(e)):a.readFile(C(t),r)).catch(function(o){return(c?function(e){return"WD_SCHEMA_DOES_NOT_EXIST"===e.code}(o)||M(o):function(t){return 404===e.get(t,"xhr.status")}(o))&&s.isFileExists(t,n.location)?null:Promise.reject(o)}).then(function(e){return s.loadFileContent(t,n.location,e),s.updateDuplicates(t,n.location,e),o({message:"read file from server"}),s.readFile(t,n.location)},function(e){const t=M(e)?P.levels.INFO:P.levels.ERROR,n=M(e)?e.message:e;throw o({message:n,level:t}),e})}function R(t,n){const o=P.trace(t,{action:"DSFS.getChildren",message:{parent:n.location}});return function(){if(s.areChildrenLoaded(t,n.location))return Promise.resolve({didExistInCache:!0});return(m.isSchemaFile(n.location)?A.list(C(t)).then(n=>{const o=`${E.SCHEMAS}/`;function i(e){return`${o+e.id}.json`}e(n).tap(function(n){e.forEach(n,e=>{s.loadFileContent(t,i(e),JSON.stringify(e))})}).groupBy(function(e){return e.namespace?`${o+e.namespace}/`:o}).mapValues(function(n){return e.map(n,e=>x(t,i(e),!1))}).tap(function(n){const i=e(n).keys().without(o).value(),r=e.map(i,e=>x(t,e,!0)),a=e.get(n,o,[]);n[o]=r.concat(a)}).forEach(function(e,n){s.loadChildren(t,n,e)})}):a.getChildren(C(t),n).then(e=>{s.loadChildren(t,n.location,e)})).then(()=>({didExistInCache:!1}))}().then(function(e){return{children:s.getChildren(t,n.location),didExistInCache:e.didExistInCache}}).then(function(t){const n=t.didExistInCache?"read from cache":"read from server";return o({message:{message:n,first10Children:e.take(t.children,10)}}),t.children},function(e){throw o({message:e,level:P.levels.ERROR}),e})}function N(){return a.getRoots()}function x(e,t,n){return a.getVirtualDescriptor(t,n)}function L(e){if(!n.isOpen("sv_moveWixCodeToViewerApp"))return;const t=e.pointers.wixCode.getWixCodeModel(),i=e.dal.get(t),r=T.getExistingWixCodeAppFromPS(e),a=e.siteAPI.getAllRenderedRootIds().filter(t=>I.pageHasPlatformApp(e,t,h.WIX_CODE_APP_ID));return Promise.all(a.map(t=>{const n=`${t}.js`,a=o.wixCodeUserScriptsService.getUserCodeUrl(n,t,i,r,e.siteDataAPI.siteData);return v.sendRequestObj({url:a,type:"GET"}).catch(()=>{})}))}function B(e,{origin:t="MISSING"}={}){const n=P.trace(e,{action:"DSFS.flush",params:{flushOrigin:t}});return new Promise((t,i)=>{e.setOperationsQueue.flushQueueAndExecute(function(){const c=s.getChanges(e);if(s.isChangesEmpty(c))return n({message:"no changes"}),void t();r.ensureAppIsWriteable(e),l.save(e).then(o,a).then(t,i).then(()=>L(e))})});function o(e){return i.executeHook(i.HOOKS.WIX_CODE.FLUSH),n(),e}function a(t){throw function(t){const n=y.safeGetStatusCode(t),o=y.safeGetErrorCode(t);400===n&&10009===o&&r.handleAppIsReadOnlyServerError(e)}(t),n({message:t,level:P.levels.ERROR}),t}}const F=e=>{!function(e){s.deleteFolder(e,E.SCHEMAS)}(e),H(e).forEach(e=>{e()})};function k(e,t){const n=H(e),o=n.indexOf(t);-1!==o&&n.splice(o,1)}const U=new t.SiteDataPrivates;function H(e){const{siteDataAPI:{siteData:t}}=e;return U.has(t)||U.set(t,[]),U.get(t)}const V={ROUTERS_PAGE:"ROUTERS_PAGE",ROUTERS_ROUTES:"ROUTERS_ROUTES",MOVE_FILE:"MOVE_FILE",DELETE_ITEM:"DELETE_ITEM"};return{copyFile:function(e,t,n,o){if(!u.isFile(t))return Promise.reject(new d.ArgumentError("fileDescriptor","filesAPI.copyFile",t.location));if(!u.isFolder(n))return Promise.reject(new d.ArgumentError("targetFolderDescriptor","filesAPI.copyFile",n.location));const i=n.location+o,c=a.getVirtualDescriptor(i,!1);if(_(e,c),s.isFileExists(e,t.location)){const n=s.readFile(e,t.location);s.writeFile(e,i,n)}else s.markFileForDuplication(e,t.location,i);return D(e,c),r.ensureAppIsWriteable(e)},writeFile:function(e,t,n){const o=n||"";if(t.location===`${E.SCHEMAS}/$commands/invalidateCache`)return F(e),Promise.resolve();if(!u.isFile(t))return Promise.reject(new d.ArgumentError("fileDescriptor","filesAPI.writeFile",t.location));const i=m.isSchemaFile(t.location);if(i&&!m.isValidContent(o))return Promise.reject(new Error("Invalid file content"));const a=O(e,t);if(!function(e,t){if(u.isSystemFolder(t))return!0;if(s.isChildrenExists(e,t.location))return!0;const n=O(e,t);return!!s.hasKnownChild(e,n.location,t)}(e,a)){if(!i)return Promise.reject(new Error(`cannot write to unknown folder: ${a.location}`));D(e,a)}_(e,t);const c=s.isFileExists(e,t.location);return s.writeFile(e,t.location,o),D(e,t),Promise.all([(()=>!c&&f.isUndoableFile(t.location)?b(e,t):Promise.resolve())(),r.ensureAppIsWriteable(e)]).then(function(){return t})},readFile:b,move:function(t,n,o,i){if(!u.isFile(n))return Promise.reject(new d.ArgumentError("fileDescriptor","filesAPI.moveFile",n.location));if(!u.isInsideFolder(o,n))return Promise.reject(new d.FileSystemError("Cannot move files between folders"));if(u.isPageFile(n))return Promise.reject(new d.FileSystemError("Cannot move page files"));const p=P.trace(t,{action:"DSFS.moveFile",message:{file:n.location,newName:i}});return c.notifyItemModified(t,n),r.ensureAppIsWriteable(t).then(e.partial(B,t,{origin:V.MOVE_FILE})).then(function(){return a.move(C(t),n,o,i)}).then(function(e){return s.moveFile(t,n.location,e.location),D(t,e),w(t,n),p({message:{newFile:e.location}}),e},function(e){throw p({message:e,level:P.levels.ERROR}),e})},deleteItem:function(t,n){if(u.isPageFile(n))return Promise.reject(new d.FileSystemError("Cannot delete page files"));if(u.isSystemFolder(n))return Promise.reject(new d.FileSystemError("Cannot delete system folders"));const o=P.trace(t,{action:"DSFS.deleteItem",message:{item:n.location}});return c.notifyItemModified(t,n),s.markPathAsDeleted(t,n.location,n.directory),r.ensureAppIsWriteable(t).then(e.partial(B,t,{origin:V.DELETE_ITEM})).then(function(e){if(u.isFolder(n)?s.deleteFolder(t,n.location):s.deleteFile(t,n.location),w(t,n),m.isSchemaFile(n.location)){const e=O(t,n),o=s.getChildren(t,e.location);void 0!==o&&0===o.length&&(s.deleteFolder(t,e.location),w(t,e))}return o({message:e}),e},function(e){throw s.clearDeletedPath(t,n.location),o({message:e,level:P.levels.ERROR}),e})},createFolder:function(e,t,n){const o=P.trace(e,{action:"DSFS.createFolder",message:{name:t,parent:n.location}});return r.ensureAppIsWriteable(e).then(function(){return a.createFolder(C(e),t,n)}).then(function(t){return D(e,t),o({message:{newFolder:t.location}}),t},function(e){throw o({message:e,level:P.levels.ERROR}),e})},getChildren:R,findByExtension:function(t,n,o){const i=P.trace(t,{action:"DSFS.findByExtension",message:{parent:n.location,extension:o}});return a.findByExtension(C(t),n,o).then(function(t){return i({message:{first10Results:e.take(t,10)}}),t},function(e){throw i({message:e,level:P.levels.ERROR}),e})},flush:B,loadAllFilesFromGrid:function t(n,o=e.values(N())){return Promise.all(o.map(e=>e.directory?R(n,e).then(e=>t(n,e)):b(n,e).then(t=>({path:e.location,content:t})))).then(t=>e.flatten(t))},prefetchUserCode:L,getRoots:N,getViewerInfo:function(e){return{gridAppId:p.getGridAppId(e)}},getVirtualDescriptor:x,handleSchemaInvalidationActions:function(){i.registerHook(i.HOOKS.ADD_TPA.AFTER,F),i.registerHook(i.HOOKS.PLATFORM.APP_PROVISIONED,F),i.registerHook(i.HOOKS.PLATFORM.APP_UPDATED,F)},subscribeToSchemasInvalidation:function(t,n){return H(t).push(n),e.once(e.partial(k,t,n))},FLUSH_ORIGINS:V}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(481),n(482),n(13)],void 0===(i=function(e,t,n){"use strict";return{save:e,build:t,seo:n.seo.ERRORS,social:{facebook:n.social.facebook.ERRORS},favicon:n.favicon.ERRORS,siteName:n.siteName.ERRORS}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(30),n(4),n(11),n(17),n(161),n(197),n(488),n(103),n(102),n(138),n(29),n(15),n(97),n(104),n(64),n(134),n(489),n(71),n(28),n(490),n(31),n(63),n(72),n(174),n(173),n(137),n(200),n(198),n(201),n(136)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l,u,d,g,f,m,y,E,I,S,h,P,A,T,v,C,_,O,D,w,M,b){"use strict";let R=!1;const N=function(e,t){return g.isPremiumApp(e,t)},x=function(e,t,n){return g.getWidgetDataFromTPAPageId(e,t,n)},L=function(e,t,n){T.registerThemeChangeHandler(e,t,n)},B=function(e,t){return g.getAppData(e,t)},F=function(e,t,n){return d.isAppInstalledBy(e,t,n)},k=function(e,t,n,o){return d.isAppInstalledOnPage(e,t,n,o)},U=function(t,n){const i=e(H(t,n)).map(function(e){return o.data.get(t,e)}).filter(function(e){return g.isPremiumApp(t,e.applicationId)}).map(function(e){return g.getAppData(t,e.applicationId)}).value();return e.uniqBy(i,"applicationId")},H=function(t,n){n=e.isArray(n)?n:[n];let i=[];return e.forEach(n,function(e){const n=o.getType(t,e);A.isTpaByCompType(n)&&i.push(e),i=i.concat(o.getTpaChildren(t,e))}),i},V=function(e,t){return g.isAppPermissionsIsRevoked(t)},W=function(t){const n=r.getPageIdList(t,!1,!1),o=e(n).map(function(e){return r.data.get(t,e)}).filter("tpaApplicationId").reject("pageUriSEO").value();e.forEach(o,function(n){const o=g.getAppData(t,n.tpaApplicationId),i=x(t,o.appDefinitionId,n.tpaPageId);if(i){const o=p.getPageUriSEO(t,e.get(i,"appPage.name"));r.data.set(t,n.id,{pageUriSEO:o})}})},G=function(e){R=e};const Y={initialize:function(e,o){t.loggingUtils.performance.start(t.loggingUtils.performanceMetrics.TPA.INITIALIZE),o&&o.runStylesGC&&O.runGarbageCollection(e);const i=e.dal.get(e.pointers.general.getClientSpecMap());a.setMeasuringForType("wysiwyg.viewer.components.tpapps.TPAGluedWidget",n.gluedWidgetMeasuringUtils.getGluedWidgetMeasurements.bind(null,i)),D.init(e),M.settpads(Y),G(!0),y.settleOnLoad(e),y.preSaveAddAppsOnLoad(e),W(e),f.getSectionsTranslatedPageTitles(e).then(function(e){E.init(e)}),t.loggingUtils.performance.finish(t.loggingUtils.performanceMetrics.TPA.INITIALIZE)},isTpaByCompType:function(e,t){return A.isTpaByCompType(t)},addApp:s.addAppWrapper,getCompToAddWithOptionalCustomIdRef:function(t,n,i){return o.getComponentToAddRef(t,n,i,e.get(i,"optionalCustomId"))},onProvisionSucceeded:function(e,t,n,o){g.registerAppData(e,t);const i=d.getAllAppCompsByAppId(e,n);s.refreshApp(e,i),o&&o()},isPageMarkedAsHideFromMenu:function(e,t,o){const i=B(e,t);return n.common.utils.isPageMarkedAsHideFromMenu(i,o)},isContainerContainsPremiumTpa:function(t,n){const o=U(t,n);return!e.isEmpty(o)},getPremiumTpaChildren:U,getTpaPointersRecursive:H,getPremiumTpaChildrenOnPage:function(t,n,o,i){const r=U(t,n);return i?e.reject(r,function(e){if(!o||o!==e.applicationId)return g.hasSections(t,e)}):r},closePopupsAndModal:function(e){e.siteAPI.removeAllPopups(),e.siteAPI.removeModal()},addSystemApp:e.partial(s.addAppWrapper,h.TYPE.TPA_WIDGET),provisionSystemApp:function(t,n,o,i){const r=g.getAppDataByAppDefinitionId(t,o);if(r&&!V(t,r)){const a=e.get(i,"widgetId"),c=r.widgets[a];if(!(l.isGlued(c)?k(t,"masterPage",o):F(t,o)))return s.provisionWidget(t,n,o,{widgetId:a}),void S.add(r)}t.setOperationsQueue.asyncPreDataManipulationComplete({dontAdd:!0})},addOriginCompIdToWidgetsOnPage:function(t,n){!function t(n){e.forEach(n.components,function(e){e.componentType===h.COMP_TYPES.TPA_WIDGET&&(e.originCompId=e.id),t(e)})}(n)},widget:{add:e.partial(s.addAppWrapper,h.TYPE.TPA_WIDGET),provisionWidget:s.provisionWidget,delete:l.deleteWidget,notifyBeforeDelete:l.notifyBeforeWidgetDelete,getPagesToBeDeleted:l.getPagesToBeRemovedWithWidget,duplicate:function(e,t,n){l.duplicateWidget(e,t,n)}},section:{add:s.addSection,provisionSection:s.provisionSection,addMultiSection:s.addMultiSection,provisionMultiSection:s.provisionMultiSection,addSubSection:s.addSubSection,delete:u.actualDeleteSection,notifyBeforeDelete:u.notifyDeleteSection,alreadyInstalled:function(e,t){return u.alreadyInstalled(e,t)},isSectionInstalledByTpaPageId:d.isSectionInstalledByTpaPageId,getPageData:function(e,t){const n=r.data.get(e,t),o=n.tpaApplicationId>0;let i;return o&&(i=g.getAppData(e,n.tpaApplicationId)),{title:n.title,hasSection:o,appData:i}},getSectionRefByPageId:function(e,t){return s.getSectionRefByPageId(e,t)}},app:{provisionApp:c.provisionApp,add:c.addApp,getData:B,getDataByAppDefId:function(e,t){return g.getAppDataByAppDefinitionId(e,t)},isHybrid:function(e,t){return g.isHybridApp(e,t)},isDashboardAppOnly:function(e,t){const n=t&&B(e,t);return g.isDashboardAppOnly(n)},isPremium:N,hasPremiumOffering:function(e,t){return g.hasPremiumOffering(e,t)},isPremiumByAppDefinitionId:function(e,t){const n=g.getAppDataByAppDefinitionId(e,t);return!!n&&N(e,n.applicationId)},isLastAppComp:function(e,t){const n=d.getAllAppCompsByAppId(e,t);return n&&1===n.length},isInstalled:F,getWidgetDataFromTPAPageId:x,getWidgetDataFromTPAWidgetId:function(e,t,n){return g.getWidgetDataFromTPAWidgetId(e,t,n)},registerOnInstalled:function(e,t,n){v.registerOnAppInstalled(t,n)},registerOnDeleted:function(e,t,n){v.registerOnAppDeleted(t,n)},getRenderedReactCompsByApplicationId:d.getAllAppCompsByAppId,getAllCompsByApplicationId:d.getAllAppCompsByAppId,hasSections:g.hasSections,getDefaultLayout:s.getDefaultLayout,url:{getSettingsUrl:P.getSettingsUrl,getSettingsModalUrl:P.getSettingsModalUrl},getExtensionsWidgets:function(e,t){return g.getExtensionsWidgets(e,t)},getInstalledDependentAppsData:d.getInstalledDependentAppsData,getFirstAppCompPageId:function(e,t,n){return d.getFirstAppCompPageId(e,t,n)},refreshApp:function(e,t,n){s.refreshApp(e,t,n)},isMultiSectionInstalled:function(e,t){return d.isMultiSectionInstalled(e,t)},getSections:function(t,n){const o=d.getAllAppCompsByAppId(t,n);return e.filter(o,function(e){return e.type===h.DATA_TYPE.TPA_SECTION||e.type===h.DATA_TYPE.TPA_MULTI_SECTION})},isAppProvisionedOnServer:g.isAppProvisionedOnServer,isPermissionsRevoked:V,getMainSectionWidgetDataFromApplicationId:g.getMainSectionWidgetDataFromApplicationId,getMainSectionWidgetData:g.getMainSectionWidgetData,getSectionsToAutoInstallWidgetData:g.getAppSectionsToInstall,hasMainSection:g.hasMainSection,isSuperAppByCompId:(e,t)=>g.isSuperAppByCompId(e,t),hasEditorPlatformPart:function(e,t){return g.hasEditorPlatformPart(t)},delete:function(e,t,n,o,i){b.actualDeleteApps(e,t,n).then(o,()=>{i({error:"error when deleting app"})})},notifyBeforeApplicationDelete:function(e,t){const n=b.notifyAppsToDelete(e,t,!0);e.setOperationsQueue.asyncPreDataManipulationComplete(n)}},change:{editMode:function(e,t){T.editModeChange(t)},siteSaved:function(){T.siteSaved()},sitePublished:function(){T.sitePublished()},deviceType:function(e,t){T.deviceTypeChange(t)},register:{editorEventHandler:function(e,t,n){T.registerEditorEventHandler(t,n)},compLoadedHandler:function(e,t){T.registerCompLoaded(t)},deleteCompHandler:function(e,t,n){T.registerDeleteCompHandler(t,n)},editModeChangeHandler:function(e,t,n){T.registerEditModeChangeHandler(t,n)},deviceTypeChangeHandler:function(e,t,n){T.registerDeviceTypeChangeHandler(t,n)},themeChangeHandler:L,windowPlacementChangedHandler:function(e,t,n){T.registerWindowPlacementChangedHandler(t,n)},settingsUpdatedHandler:function(e,t,n){T.registerSettingsUpdatedHandler(t,n)},registerPublicDataChangedHandler:function(e,t,n,o){T.registerPublicDataChangedHandler(t,n,o)},sitePublishedHandler:function(e,t,n){T.registerSitePublishedHandler(t,n)},siteSavedHandler:function(e,t,n){T.registerSiteSavedHandler(t,n)}},trigger:{editorEvent:function(e,t){T.triggerEditorEvent(t)},windowPlacement:function(e,t){T.triggerOnWindowPlacementChanged(t)},settingsUpdated:function(e,t,n,o){s.settingsUpdated(e,t,n,o)}}},getComponentDefinition:function(e,t){return I.getComponentDefinition(t)},getSettingsModalParams:function(e,t,n){return P.getSettingsModalParams(e,t,n)},pending:{add:S.addPendingDashboardApp,dismiss:S.dismiss,getPendingApps:S.getPendingAppsFromSiteMetaData},getPendingApps:S.getPendingApps,getPremiumPendingApps:S.getPremiumPendingApps,appMarket:{getData:f.getAppMarketData,getDataForPage:f.getAppMarketDataForPage,getDataAsync:f.getAppMarketDataAsync,getUrl:f.getAppMarketUrl,getInfoUrl:f.getAppMarketInfoUrl,getAppReviewsUrl:f.getAppReviewsUrl,getPermissionsUrl:f.getAppMarketPermissionsUrl,getRelatedApps:f.getRelatedApps,getPackages:f.getPackages},billing:{getPremiumApps:f.getPremiumApps,getSiteUpgradeUrl:_.getSiteUpgradeUrl,getAppUpgradeUrl:_.getAppUpgradeUrl},style:{setParamOldSDK:function(e,t,n){L(e,n,function(t){s.postBackThemeData(e,n,t)})},setStyleParam:w.setStyleParam,mapWixParamsToCssValues:w.mapWixParamsToCssValues,get:function(e,t){return w.getStyleDataToPassIntoApp(e,t)},postBackThemeData:s.postBackThemeData,getNameToFontsKeyMap:function(){return n.common.styleUtils.getNameToFontsKeyMap()},getTpaColorsToSiteColors:w.getTpaColorsToSiteColors},provision:{provisionAppDemoSave:s.provisionAppDemoSave,refreshAppSpecMap:m.refreshSpecMap},constants:h,bi:{errors:C,sendBIEvent:function(e,t,n){A.sendBIEvent(e,t,n)}},comp:{resize:function(t,n,r,a,s){if(i.isHorizontallyStretchedToScreen(t,n))s({onError:"component is already set to full width"});else{let c=o.layout.get(t,n);i.updateCompLayout(t,n,e.defaults({width:r,height:a},{width:c.width,height:c.height})),t.siteAPI.forceUpdate(),s({width:(c=o.layout.get(t,n)).width,height:c.height})}},setExternalId:function(e,t,n,o,i){s.setExternalId(e,t,n,o,i)},getExternalId:function(e,t){return s.getExternalId(e,t)},postMessageBackToApp:s.postMessageBackToApp,isInstalled:d.isAppComponentInstalled,add:c.addComponent,provisionComp:c.provisionComp},data:{set:O.set,app:{get:O.getAppValue,getMulti:O.getAppValues},comp:{get:O.getComponentValue,getMulti:O.getComponentValues},getPublicData:O.getPublicData,remove:O.remove,SCOPE:O.SCOPE,get:O.get,getMulti:O.getMulti},__privates:{fixEcomIfNeeded:function(t,n){const o=g.getAppsData(t),i="1380b703-ce81-ff05-f115-39571d94dfcd",r=e.find(o,{appDefinitionId:i});if(r&&d.isAppInstalledBy(t,i)){const o=t.pointers.data.getDataItemsWithPredicate({tpaApplicationId:r.applicationId},"masterPage").map(t.dal.get),a=g.getAppSections(void 0,r),c=e(a).map("appPage").map("id").value(),l=e.map(o,"tpaPageId"),u=g.getMainSectionWidgetData(void 0,r).appPage.id;let d,f;const m=e.some(o,function(t){return e.startsWith(t.tpaPageId,u)});if(m){f=e.reject(c,function(t){return e.startsWith(t,u)});const t=e.reject(l,function(t){return e.startsWith(t,u)});d=e.intersection(f,t)}m?e.isEqual(d,f)||p.addHiddenPages(t,r):e.isEqual(d,f)&&0!==e.size(o)||s.provisionSection(t,n,i)}},areDocumentServicesHandlersReady:function(){return R},fixProGallery:function(t){const n=g.getAppsData(t),o=e.find(n,{appDefinitionId:"14271d6f-ba62-d045-549b-ab972ae1f70e"});o&&d.isAppInstalledBy(t,"14271d6f-ba62-d045-549b-ab972ae1f70e")&&(t.pointers.data.getDataItemWithPredicate({tpaApplicationId:o.applicationId},"masterPage")||p.addHiddenPages(t,o))}}};return Y}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(139),n(495),n(21),n(496),n(46),n(106)],void 0===(i=function(e,t,n,o,i,r,a,s){"use strict";const c="Type does not exist",p="Item does not match schema",l="Item does not exist",u="Deleted item does not exist",d={DRAFT:"Draft",SAVED:"Saved",PUBLISHED:"Published",MODIFIED:"Modified"};function g(e){throw new Error(e)}function f(t,n){if(!e.isObject(t))return t;return(e.isArray(t)?e.map:e.mapValues)(t,function(t){return e.isObject(t)?n(t):t})}function m(t,n){let o=t;return e.has(t,"links")&&((o=e.clone(t)).links=f(t.links,n)),e.forEach(o,function(t,i){e.has(t,"links")&&(o[i]=e.clone(t),o[i].links=f(t.links,n))}),o}function y(t,n){return m(n,e.partial(o.convertWixappsDataToWLink,t))}function E(e){return m(e,o.convertWLinkToWixappsData)}function I(t,n,o){const i=a.getType(t,n)||g(c),r=e.map(e.filter(i.fields,S),"name"),s=e.keys(o);return 0===e.difference(s,r).length}function S(t){return e.isUndefined(t.computed)||!t.computed}function h(e,t,n){return e.dal.getByPath(i.getItemPath(t,n))}function P(t,o){return e.mapValues(o,function(e){return"wix:Image"===e._type?n.resolveImageData(e,t):e})}return{STATES:d,createItem:function(n,o,s){const l=t.guidUtils.getUniqueId(),u=function(e,t,n){return{_iid:e,_type:t,_createdAt:n,_updatedAt:n,_state:d.DRAFT}}(l,o,r.getCurrentTime(n));let f=e.omit(e.cloneDeep(s)||{},e.keys(u).concat("_permissions"));if(!I(n,o,f=E(f)))throw new Error(p);return f=e.assign(function(t,n){const o={},i=a.getType(t,n)||g(c);return e.forEach(i.fields,function(t){e.isUndefined(t.defaultValue)||(o[t.name]=e.clone(t.defaultValue))}),o}(n,o),f,u),n.dal.full.setByPath(i.getItemPath(o,f._iid),f),l},updateItem:function(t,n,o,a){if(!I(t,n,a))throw new Error(p);a=E(a);const s=h(t,n,o)||g(l);e.forOwn(a,function(t,n){s[n]=e.isString(t)?t:e.defaults(t,s[n])}),s._updatedAt=r.getCurrentTime(t),s._state===d.PUBLISHED&&(s._state=d.MODIFIED),t.dal.full.setByPath(i.getItemPath(n,o),s)},deleteItem:function(e,t,n){h(e,t,n)||g(l),e.dal.full.removeByPath(i.getItemPath(t,n)),s.deleteItemFromAllManualDataSelectors(e,n)},restoreItem:function(e,t,n){const o=e.dal.getByPath(i.getDeletedItemPath(t,n))||g(u);delete o._deletedAt,e.dal.full.removeByPath(i.getDeletedItemPath(t,n)),e.dal.full.setByPath(i.getItemPath(t,n),o)},setAllItemsOfType:function(e,t,n){e.dal.full.setByPath(i.getBaseItemsPath(t),n)},getAllItemsOfType:function(t,n){const o=t.dal.get(t.pointers.general.getServiceTopology()),r=t.dal.getByPath(i.getBaseItemsPath(n))||{};return e(r).mapValues(e.partial(P,o)).mapValues(e.partial(y,t)).value()}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(21),n(46),n(39)],void 0===(i=function(e,t,n,o,i){"use strict";const r="Type does not exist",a="Cannot created multiple views with the same type, name & format",s="View does not exist",c="Must provide a view definition",p="Array";function l(e){throw new Error(e)}function u(t,i,a){if(i.forType!==p&&!o.getType(t,i.forType))throw new Error(r);const s=e.cloneDeep(i);g(s,i.name,a),s.name=a;const c=d(s.forType,s.name,s.format);return t.dal.full.setByPath(n.getViewPath(c),s),c}function d(e,t,n){return i.viewsUtils.getViewId(e,t,n)}function g(t,n,o){e.forEach(t,function(i,r){e.isObject(i)?g(i,n,o):i===n&&(t[r]=o)})}function f(t,o){const r=t.dal.getKeysByPath(n.getBaseViewsPath());return e.filter(r,function(e){return i.viewsUtils.getViewNameFromId(e)===o})}function m(e,t){return e.dal.getByPath(n.getViewPath(t))}return{getAllViewsByName:function(t,o){const i=f(t,o),r=e.map(i,function(e){return t.dal.getByPath(n.getViewPath(e))});return e.zipObject(i,r)},createView:function(e,n){return u(e,n,`${n.name||"viewDef"}_${t.guidUtils.getUniqueId()}`)},createViewsWithSameName:function(n,o){const i=`${o[e.keys(o)[0]].name||"viewDef"}_${t.guidUtils.getUniqueId()}`;return function(t,n){const o=e.map(t,function(e){return d(e.forType,n,e.format)});if(e.uniq(o).length<o.length)throw new Error(a)}(o,i),e.map(o,function(e){return u(n,e,i)})},getViewById:m,getView:function(e,t,n,o){return m(e,d(t,n,o))},deleteAllViewsByName:function(t,o){const i=f(t,o);e.forEach(i,function(e){t.dal.full.removeByPath(n.getViewPath(e))})},replaceView:function(e,t,o){o||l(c);const i=m(e,t)||l(s);g(o,o.name,i.name),o.forType=i.forType,e.dal.full.setByPath(n.getViewPath(t),o)},setValueInView:function(e,t,o,i,r,a){const s=d(t,o,a),c=n.getViewPath(s);e.dal.full.setByPath(c.concat(i),r)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(16)],void 0===(i=function(e,t){"use strict";const{schemasService:n}=t.services;const o=(t,o,i,r)=>{const a=function t(o,i,r){if(!o)return null;if(o.$ref)return t(n.getSchema(r,o.$ref),i,r);if(o.properties)return o.properties[i];if(o.allOf){const n=e.find(o.allOf,e=>t(e,i,r));return n&&t(n,i,r)}}(o,i,t);return!a||e.isString(a)?a&&a===r||!1:("list"===r&&(r="array"),e.includes(a.pseudoType,r)||e.includes(a.type,r)||a.type===r)};return{isOfType:function(e,t,i,r){const a=n.getSchema(e,t);return o(e,a,i,r)},executeForDataItemRefs:function(t,i,r){const a=n.getSchema(t,i.type);a&&e.forOwn(i,function(n,i){return o(t,a,i,"ref")?r(n):o(t,a,i,"refList")?e.map(n,e=>r(e)):void 0})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(244),n(60)],void 0===(i=function(e,t){"use strict";let n,o;function i(e){return e.siteAPI.getMainPageId()}function r(e,t,n,o){return e.siteAPI.getPageUrl(t,n,o)}return{getHomepageId:i,isMasterPage:function(e,t){return"masterPage"===t},isHomepage:function(e,t){return t===i(e)},registerPageDataChangedCallback:function(e){n=e},executePageDataChangedCallback:function(e,t,o,i=!1){n(e,t,o,i)},registerPageAddedCallback:function(e){o=e},executePageAddedCallback:function(e,t,n){o(e,t,n)},convertPageNameToUrl:function(t,n){return e(n,{custom:{_:"-"},symbols:!1})||"blank"},getCurrentUrl:function(e,t,n){return r(e,{pageId:e.siteAPI.getCurrentUrlPageId()},t,n)},getMainPageUrl:function(e,t,n){return r(e,{pageId:i(e)},t,n)},getPageUrl:r,isDynamicPage:function(e,n){return!!t.get.byPage(e,e.pointers.data.getDataItemFromMaster(n))}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(245)],void 0===(i=function(e,t,n){"use strict";const{languageStatus:o}=n,i=e.property("languageCode");function r(t,n){return e(t).map(i).includes(i(n))}function a(e){return t.multilingual.getCurrentLanguageCode(e)}function s(n,o){y(n,{languageCode:o})&&t.multilingual.setCurrentLanguage(e.pick(n,["siteAPI","siteDataAPI","pointers","dal"]))(o)}function c(n,o){const r=n.dal.get(n.pointers.page.getAllPagesPointer());e.forEach(r,function(r,a){const s={[i(o)]:e.cloneDeep(t.multilingual.EMPTY_TRANSLATION_DATA)},c=n.pointers.page.getPageTranslations(a,n.siteAPI.isExperimentOpen.bind(n.siteAPI)),p=n.dal.fullJsonDal.get(c),l=e.assign(s,p);n.dal.fullJsonDal.set(c,l)})}function p(t){return!e.isEmpty(u(t))}function l(t,n,c){const p=d(t);if(r(p,n)){const r=e.assign({},n,{status:c});if(g(t,p.map(e=>i(e)===i(n)?r:e)),c===o.DELETED&&a(t)===n.languageCode){s(t,u(t).languageCode)}}}function u({dal:e,pointers:t}){return e.get(t.multilingual.originalLanguage())}function d({dal:e,pointers:t}){return e.get(t.multilingual.translationLanguages())}function g({dal:e,pointers:t},n){return e.set(t.multilingual.translationLanguages(),n)}function f({dal:t,pointers:n}){return e.reject(d({dal:t,pointers:n}),{status:o.DELETED})}function m(t){return e.concat(u(t),f(t))}function y(e,t){return r(m(e),t)}function E(e,t){const n=e.pointers.components.getPageOfComponent(t);return e.dal.fullJsonDal.get(n).id}function I(t,n,o,i){e.forEach(d(t),({languageCode:r})=>{const a=t.pointers.multilingualTranslations.translationDataItem(n,r,o);if(t.dal.fullJsonDal.isExist(a)){const n=t.dal.fullJsonDal.get(a),o=e.isFunction(i)?i(n):e.merge(n,i);t.dal.fullJsonDal.set(a,o)}})}return{multilingual:{isEnabled:p},current:{get:a,set:s},original:{get:u,set:function(e,t){if(!y(e,t)){const n=i(u(e));t.status=o.ACTIVE;const{dal:r,pointers:c}=e;r.set(c.multilingual.originalLanguage(),t),a(e)===n&&s(e,i(t))}}},public:{get:function(t,n){return r(function(t){return e.filter(m(t),{status:o.ACTIVE})}(t),n)}},status:{set:l},get:f,getFull:d,add:function(e,t){y(e,t)||(g(e,d(e).concat(t)),c(e,t))},remove:function(t,n){const r=d(t),a={languageCode:i(n)};if(e.find(r,a)){const n=e.reject(r,a),i=e.filter(n,{status:o.ACTIVE});e.isEmpty(i)&&l(t,u(t),o.ACTIVE);const{dal:s,pointers:c}=t;s.set(c.multilingual.translationLanguages(),n)}},init:function(t,{originalLanguage:n,translationLanguages:o}){t.dal.set(t.pointers.multilingual.originalLanguage(),n),t.dal.set(t.pointers.multilingual.translationLanguages(),o),function(t){const n=t.dal.get(t.pointers.page.getAllPagesPointer());e.forEach(n,function(n,o){const i=t.pointers.page.getPageTranslations(o,t.siteAPI.isExperimentOpen.bind(t.siteAPI)),r=t.dal.fullJsonDal.get(i);e.isUndefined(r)&&t.dal.fullJsonDal.set(i,{})})}(t),e.forEach(o,e.partial(c,t)),s(t,i(n)||null)},copyTranslationData:function(t,n,o,i){t.siteDataAPI.getActionQueue().runImmediately(()=>{const r=E(t,n);e.forEach(o,(n,o)=>{e.forEach(n,(n,a)=>{if(!i[a])return;const s=e.cloneDeep(n);s.id=i[a];const c=t.pointers.multilingualTranslations.translationDataItem(r,o,s.id);t.dal.fullJsonDal.set(c,s)})}),t.siteDataAPI.createDisplayedPages()})},patchPageTranslations:function(e,t,n){I(e,"masterPage",t,n)},patchDataItemTranslations:function(e,t,n,o){I(e,t,n,o)},copyDataItemTranslations:function(t,n,o,i,r){e.forEach(d(t),({languageCode:a})=>{const s=t.pointers.multilingualTranslations.translationDataItem(n,a,o);if(t.dal.fullJsonDal.isExist(s)){const n=t.dal.fullJsonDal.get(s),o=e.assign({},e.cloneDeep(n),r),c=t.pointers.multilingualTranslations.translationDataItem(i,a,o.id);t.dal.fullJsonDal.set(c,o)}})},isCurrentLanguageSecondary:function(e){return p(e)&&u(e).languageCode!==a(e)},component:{getTranslations:function(t,n){const o=E(t,n),i=t.pointers.page.getPageTranslations(o,t.siteAPI.isExperimentOpen.bind(t.siteAPI)),r=t.dal.fullJsonDal.get(i),a=e.concat(n,t.pointers.components.getChildrenRecursively(n));return e.reduce(r,(n,i,r)=>(e.forEach(a,i=>{const a=function(t,n){const o=t.pointers.getInnerPointer(n,"dataQuery"),i=t.dal.fullJsonDal.get(o);return e.isUndefined(i)?null:i.replace("#","")}(t,i);if(!e.isNull(a)){const i=t.pointers.multilingualTranslations.translationDataItem(o,r,a);if(t.dal.fullJsonDal.isExist(i)){const o=t.dal.fullJsonDal.get(i);e.merge(n,{[r]:{[a]:o}})}}}),n),{})}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(148),n(149),n(371)],void 0===(i=function(e,t,n,o,i){"use strict";const r=(e,t,n)=>e.pointers.getInnerPointer(t,n);function a(e,t,n,o){const i=e.pointers.full.components.getChildrenContainer(t),a=r(e,i,n),s=r(e,i,o),c=e.dal.full.get(a),p=e.dal.full.get(s);e.dal.transaction(()=>{e.dal.full.set(a,p)}),e.dal.full.set(s,c)}const s=(e,t,n,o)=>i.shouldUseMasterPageArrangement(e,n)?i.findValidIndexForChild(e,t,n,o):o;function c(t,r){const a=t.pointers.components.getParent(r);if(i.shouldUseMasterPageArrangement(t,a))return i.getNextCompIndexInDisplayedJson(t,r);const s=t.pointers.components.getChildren(a),c=e.findIndex(s,{id:r.id});return n.findNext(s,e=>o.canSwapComponents(t,r,e),c)}function p(t,r){const a=t.pointers.components.getParent(r);if(i.shouldUseMasterPageArrangement(t,a))return i.getPrevCompIndexInDisplayedJson(t,r);const s=t.pointers.components.getChildren(a),c=e.findIndex(s,{id:r.id});return n.findPrev(s,e=>o.canSwapComponents(t,r,e),c)}const l=e=>(t,n)=>!!o.isCompArrangeable(t,n)&&e(t,n)>-1,u=l(p),d=l(c);return{getNewIndex:s,getNewIndexForNewComp:(e,t,n)=>i.shouldUseMasterPageArrangement(e,n)?i.findValidIndexForNewChild(e,t,n):null,moveToIndex:function(t,n,i){if(!function(t,n,i){if(!o.isCompArrangeable(t,n))return!1;const r=t.pointers.components.getParent(n),a=t.pointers.components.getChildren(r);return e.isFinite(i)&&i>=0&&i<a.length}(t,n,i))throw new Error("index is out of children's bounds, cannot move to index");const r=t.pointers.full.components.getParent(n),a=t.pointers.full.components.getChildrenContainer(r),c=t.pointers.full.components.getChildren(r);if(e.findIndex(c,{id:n.id})===i)return;const p=s(t,n,r,i),l=t.dal.full.get(n);t.dal.full.remove(n),t.dal.full.push(a,l,n,p)},moveBackward:function(n,o){if(!u(n,o))throw new Error("component is the bottom one, cannot move backward");const r=n.pointers.components.getParent(o);if(i.shouldUseMasterPageArrangement(n,r)&&i.isMasterPageSection(n,o))return i.moveMasterPageSectionBackward(n,o);const s=function(e,t){const n=e.pointers.components.getParent(t),o=p(e,t);return e.pointers.components.getChildren(n)[o]}(n,o),c=n.pointers.full.components.getChildren(r);a(n,r,e.findIndex(c,{id:t.displayedOnlyStructureUtil.getOriginalId(o.id)}),e.findIndex(c,{id:t.displayedOnlyStructureUtil.getOriginalId(s.id)}))},moveForward:function(n,o){if(!d(n,o))throw new Error("component is the top one, cannot move forward");const r=n.pointers.components.getParent(o);if(i.shouldUseMasterPageArrangement(n,r)&&i.isMasterPageSection(n,o))return i.moveMasterPageSectionForward(n,o);const s=function(e,t){const n=e.pointers.components.getParent(t),o=c(e,t);return e.pointers.components.getChildren(n)[o]}(n,o),p=n.pointers.full.components.getChildren(r);a(n,r,e.findIndex(p,{id:t.displayedOnlyStructureUtil.getOriginalId(o.id)}),e.findIndex(p,{id:t.displayedOnlyStructureUtil.getOriginalId(s.id)}))},canMoveForward:d,canMoveBackward:u,moveToFront:function(e,t){if(!d(e,t))throw new Error("component is the top one, cannot move to front");const n=e.pointers.full.components.getParent(t);if(i.shouldUseMasterPageArrangement(e,n))return i.moveMasterPageChildToFront(e,t);const o=e.dal.full.get(t);e.dal.full.remove(t);const r=e.pointers.full.components.getChildrenContainer(n);e.dal.full.push(r,o,t)},moveToBack:function(n,o){if(!u(n,o))throw new Error("component is the bottom one, cannot move to back");const r=n.pointers.full.components.getParent(o);if(i.shouldUseMasterPageArrangement(n,r))return i.moveMasterPageChildToBack(n,o);const a=n.pointers.full.components.getChildrenContainer(r),s=n.dal.full.get(a),c=e.findIndex(s,{id:t.displayedOnlyStructureUtil.getOriginalId(o.id)}),p=s.splice(c,1)[0];s.unshift(p),n.dal.full.set(a,s)},fixIndexForMasterPageChild:(n,o)=>{const r=n.pointers.full.components.getParent(o);if(!i.shouldUseMasterPageArrangement(n,r))return;const a=((n,o)=>{const i=n.pointers.full.components.getParent(o),r=n.pointers.full.components.getChildren(i);return e.findIndex(r,{id:t.displayedOnlyStructureUtil.getOriginalId(o.id)})})(n,o),c=n.pointers.full.components.getChildrenContainer(r),p=s(n,o,r,a);if(a===p)return;const l=n.dal.full.get(o);n.dal.full.remove(o),n.dal.full.push(c,l,o,p)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(3)],void 0===(i=function(e,t){"use strict";function n(e,n){return t.getConnectionsItem(e,n)||[]}function o(t,o){return e.reject(n(t,o),{type:"WixCodeConnectionItem"})}return{getConnections:n,getPlatformAppConnections:o,isCompConnectedToController:function(t,o,i){return e.some(n(t,o),{controllerRef:i})},getPrimaryConnection:function(t,n){return e.find(o(t,n),{isPrimary:!0})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(14),n(41)],void 0===(i=function(e,t,n){"use strict";const o={};return{createInitialGapMap:function(e){const i=e.siteAPI.getSiteId();return o[i]||(o[i]=function(e){const o=t.getViewMode(e),i=e.pointers.components.getHeader(o),r=e.pointers.components.getFooter(o),a=e.pointers.components.getPagesContainer(o),s=n.getComponentLayout(e,i),c=n.getComponentLayout(e,a),p=n.getComponentLayout(e,r),l=s.y+s.height,u=c.y+c.height;return{aboveHeader:s.y,abovePagesContainer:c.y-l,aboveFooter:p.y-u}}(e)),o[i]},getInitialGapMap:function(e){return o[e.siteAPI.getSiteId()]}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1)],void 0===(i=function(e,t){"use strict";function n(e,n){return t.boundingLayout.getBoundingLayout(n)}function o(t){return e.includes(["vw","pct"],t)}function i(t,n,i){const r=e.keys(t);if(e.includes(r,"px"))t.px+=n;else{const a=e.find(r,o);t[a]+=n/i*100,t[a]=parseFloat(t[a].toFixed(2))}}function r(t,n,o){this.ps=t,this.compPointer=n;const i=a(t,n);this.newPositionAndSize=e.assign({},i,o),this.positionAndSizeDiff=function(t,n){return e.mapValues(t,function(t,o){return e.isFinite(n[o])?n[o]-t:0})}(i,o),this.compLayout=t.dal.get(t.pointers.getInnerPointer(n,"layout"))}function a(n,o,i){const r=i||n.dal.get(n.pointers.getInnerPointer(o,"layout"));if(!r.docked)return e.pick(r,["x","y","width","height"]);const a=function(e,t){const n=e.pointers.components.getParent(t),o=e.siteAPI.getSiteMeasureMap();return{width:o.width[n.id],height:o.height[n.id]}}(n,o),s=n.siteAPI.getScreenSize(),c=n.siteAPI.getSiteMeasureMap(),p=n.pointers.components.getPageOfComponent(o),l=t.layoutUtils.getRootWidth(c,p.id,n.siteAPI.getSiteWidth()),u=n.siteAPI.getSiteX(),d=t.layoutUtils.getRootLeft(c,p.id,u);return t.positionAndSize.getPositionAndSize(r,a,s,l,d)}return r.prototype.value=function(){return this.compLayout},r.prototype.updateVerticalLayout=function(){if(0===this.positionAndSizeDiff.y&&0===this.positionAndSizeDiff.height)return this;if(t.layoutUtils.isVerticallyDocked(this.compLayout)&&!t.layoutUtils.isVerticallyStretchedToScreen(this.compLayout)){const e=function(e,t,n){if(n.fixedPosition)return e.siteAPI.getSiteMeasureMap().clientHeight;const o=e.pointers.components.getParent(t);return e.siteAPI.getSiteMeasureMap().height[o.id]}(this.ps,this.compPointer,this.compLayout);!function(e,t,n){const o=e.docked;if(o.top&&t.y&&i(o.top,t.y,n),o.bottom){const e=-1*(t.y+t.height);e&&i(o.bottom,e,n)}if(o.vCenter){const e=t.height/2+t.y;e&&i(o.vCenter,e,n)}o.top&&o.bottom||(e.height+=t.height)}(this.compLayout,this.positionAndSizeDiff,e)}else this.compLayout.y+=this.positionAndSizeDiff.y,this.compLayout.height+=this.positionAndSizeDiff.height;return this},r.prototype.updateHorizontalLayout=function(){if(0===this.positionAndSizeDiff.x&&0===this.positionAndSizeDiff.width)return this;if(t.layoutUtils.isHorizontallyDocked(this.compLayout)){const e=function(e,n,o){if(o.fixedPosition||t.dockUtils.isHorizontalDockToScreen(o))return e.siteAPI.getSiteMeasureMap().clientWidth;const i=e.pointers.components.getParent(n);return e.siteAPI.getSiteMeasureMap().width[i.id]}(this.ps,this.compPointer,this.compLayout);!function(e,t,n){const o=e.docked;if(o.left&&t.x&&i(o.left,t.x,n),o.right){const e=-1*(t.x+t.width);e&&i(o.right,e,n)}if(o.hCenter){const e=t.width/2+t.x;e&&i(o.hCenter,e,n)}o.left&&o.right||(e.width+=t.width)}(this.compLayout,this.positionAndSizeDiff,e)}else this.compLayout.x+=this.positionAndSizeDiff.x,this.compLayout.width+=this.positionAndSizeDiff.width;return this},r.prototype.keepAspectRatioIfNeeded=function(){return t.layoutUtils.isAspectRatioOn(this.compLayout)&&(this.compLayout.aspectRatio=t.layoutUtils.calcAspectRatio(this.newPositionAndSize.width,this.newPositionAndSize.height)),this},{applyPositionAndSizeOnCurrentLayoutSchema:function(e,t,n){return function(e,t,n){return new r(e,t,n)}(e,t,n).updateVerticalLayout().updateHorizontalLayout().value()},getBoundingLayout:n,getComponentLayout:function(t,o){const i=t.dal.get(t.pointers.getInnerPointer(o,"layout"));return i?(i.docked&&(e.assign(i,a(t,o)),delete i.docked),e.merge(i,{bounding:n(0,i)})):null},getPositionAndSize:a}}.apply(t,o))||(e.exports=i)},function(e,t){e.exports=d},function(e,t,n){var o,i;o=[n(0),n(14)],void 0===(i=function(e,t){"use strict";const n={SINGLE_POST:"7326bfbb-4b10-4a8e-84c1-73f776051e10",FEED:"79f391eb-7dfc-4adf-be6e-64434c4838d9"};function o(t,n,o){const i=e(n).thru(t.pointers.data.getDataItem).thru(t.dal.get).value();return i&&"AppPage"===i.type&&"AppPage"===i.appPageType&&i.appPageId===o}return{isSinglePost:function(e,t){return o(e,t,n.SINGLE_POST)},isFeed:function(e,t){return o(e,t,n.FEED)},isBlogPage:function(e,n){const o=t.getViewMode(e),i=e.pointers.components.getPage(n,o),r=e.pointers.getInnerPointer(i,"componentType");return"wixapps.integration.components.AppPage"===e.dal.get(r)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return function(e,t){const n=e.isMobileView();return{x:n?t.x:0,width:n?e.getSiteWidth():e.getSiteMeasureMap().clientWidth}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(22)],void 0===(i=function(e){"use strict";const t="wysiwyg.viewer.components.Group";function n(n,o){return e.getType(n,o)===t}return{isGroup:n,isGroupedComponent:function(t,o){return n(t,e.getContainer(t,o))},getGroupComponentType:function(){return t}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(3),n(8),n(2),n(16)],void 0===(i=function(e,t,n,o,i){"use strict";const r=i.services.schemasService;function a(e,t){return e.pointers.full.components.getDesktopPointer(t)}function s(e,t){return!n.public.isMobileOnly(e,t)}return{getComponentDataSchemasByType:function(n,o){if(n&&o){const i=r.getDefinition(o);if(!i)throw new Error(`component type: ${o} is unsupported`);const a=i.dataTypes||[];return e.map(a,e=>t.getDataSchemaByType(n,e))}return null},getComponentPropertiesByType:function(e,n){if(e&&n){const o=r.getDefinition(n);if(!o)throw new Error(`component type: ${n} is unsupported`);const i=o.propertyType;if(i)return t.getPropertiesSchemaByType(e,i)}return null},resetMobileComponentProperties:function(e,n){if(!e||!n||!s(e,n))return;const o=a(e,n),i=t.getPropertiesItem(e,o);t.deletePropertiesItem(e,n),t.updatePropertiesItem(e,n,i)},splitMobileComponentProperties:function(e,n){if(!e||!n||!s(e,n))return;const i=a(e,n),r=t.getPropertiesItem(e,i),c=e.dal.get(e.pointers.getInnerPointer(i,"propertyQuery")).replace("#",""),p=o.DOM_ID_PREFIX.MOBILE+c;t.setPropertiesItem(e,n,r,p),e.dal.set(e.pointers.getInnerPointer(n,"propertyQuery"),p)},isMobileComponentPropertiesSplit:function(o,i){if(n.public.isMobileOnly(o,i))return!0;const r=a(o,i),s=t.getPropertyItemPointer(o,i),c=t.getPropertyItemPointer(o,r),p=s&&s.id,l=c&&c.id;return!e.isEqual(p,l)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(23),n(1),n(8),n(2),n(24)],void 0===(i=function(e,t,n,o,i,r){"use strict";const a=(e,t,n)=>!!o.public.getMobileConversionConfigByName(e,n,"desktopOnly",t);return{getHiddenAndShownComponents:function(s,c){const p=s.pointers.components.getPage(c,i.VIEW_MODES.MOBILE),l=r.getMobileActiveModesMap(s,c),u=e.set({},c,l),d=n.fullToDisplayedJson.getDisplayedJson(s.dal.full.get(p),u,c).structure;if(!d.mobileComponents)return;const g=n.dataUtils.getAllCompsInStructure(d,!1,e.negate(a.bind(null,s,c))),f=n.dataUtils.getAllCompsInStructure(d,!0,e.negate(function(t,n,i){const r=t.pointers.full.components.getComponent(i.id,n);return e.get(o.public.isMobileOnly(t,r),"mobileOnly",!1)}.bind(null,s,p)));return{hiddenComponents:t.structuresComparer.getComponentIdsAddedToDesktopStructure(g,f),shownComponents:e.intersection(e.keys(f),e.keys(g))}},hasMobileStructure:function(t){const n=t.pointers.components.getMasterPage(i.VIEW_MODES.MOBILE);return!e.isEmpty(t.pointers.components.getChildren(n))}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(92),n(2),n(3),n(8),n(25),n(47),n(1),n(5),n(113)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p){"use strict";const l=(e,t,o,i=n.VIEW_MODES.DESKTOP)=>e.pointers.full.components.getComponent(t,e.pointers.components.getPage(o,i)),u=(e,t)=>i.public.isHiddenable(e,t),d=(t,n)=>e.get(o.getMobileHintsItem(t,n),"hidden",!1),g=t=>e.map(t.pointers.page.getNonDeletedPagesPointers(!0),"id");function f(t,i,r,a={},s){if(!r||p.isMobileOnlyComponent(t,r.id))return;s=s||t.pointers.full.components.getPageOfComponent(r).id;const c=!i.hidden||u(t,r),g=d(t,r)!==i.hidden;if(c&&g&&o.updateMobileHintsItem(t,r,i),a.updateChildren){!function(t,n,o,i,r){const a=t.pointers.full.components.getChildren(o);e.forEach(a,e=>{const o=l(t,e.id,r);f(t,n,o,i,r)})}(t,i,a.childrenSourceView===n.VIEW_MODES.MOBILE?l(t,r.id,s,n.VIEW_MODES.MOBILE):r,a,s)}}const m=(e,t,n,o)=>{const i=l(e,t,n);((e,t)=>e.dal.displayedJsonDal.isExist(t))(e,i)&&f(e,{hidden:o},i)};function y(o,i){const s=t.getHiddenAndShownComponents(o,i);s&&(!function(t,o,i){if(o!==n.MASTER_PAGE_ID)return;const s=["SITE_FOOTER","PAGES_CONTAINER","SITE_PAGES","SITE_HEADER"],c=e.remove(i.hiddenComponents,t=>e.includes(s,t));if(!e.isEmpty(c)){i.shownComponents.push(...c);const e=(new Error).stack;r.error(t,a.MOBILE_STRUCTURE_MANDATORY_ELEMENT_MISSING,{missingComponents:c.toString(),stack:e})}}(o,i,s),e.forEach(s.hiddenComponents,e=>m(o,e,i,!0)),e.forEach(s.shownComponents,e=>m(o,e,i,!1)))}function E(e,t){const o=e.pointers.components.getPage(t,n.VIEW_MODES.DESKTOP),i=e.pointers.getInnerPointer(o,"mobileHintsQuery");return!!e.dal.get(i)}function I(n){if(!t.hasMobileStructure(n))return;const o=function(e){if(c.isOpen("sv_patchDataDisablesMobileHintsInit")){const t=e.pointers.general.getAutoSaveInnerPointer("changesApplied")||!1;return t&&e.dal.get(t)}return!1}(n),i=g(n);e.forEach(i,e=>{const t=E(n,e);o&&t||(y(n,e),S(n,e))})}function S(e,t){if(E(e,t))return;const i=e.pointers.components.getPage(t,n.VIEW_MODES.DESKTOP);o.updateMobileHintsItem(e,i,{hidden:!1})}return{initialize:function(e){I(e)},updateProperty:f,updateHiddenComponentsOnPage:y,updateHiddenComponents:function(n,o){t.hasMobileStructure(n)&&(o=o||g(n),e.forEach(o,e=>y(n,e)))},markPageAsInitialized:S,testAPI:{initializeMobileHints:I}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(5)],void 0===(i=function(e,t){"use strict";const n={conversionType:"FULL",heuristicStrategy:"default"},o={default:{detectSemanticGroups:!0,fixMasterPageStructureOrder:!1},appbuilder:{keepEmptyTextComponents:!0,keepNotRecommendedMobileComponents:!0,keepOccludedAndEmptyBackgrounds:!0,keepOutOfScreenComponents:!0,keepInvisibleComponents:!0},onboarding:{detectSemanticGroups:!1},accessibility:{keepNotRecommendedMobileComponents:!0,detectSemanticGroups:!1,analyzeOnly:!0}},i={FULL:{},MERGE_ALL_PAGES:{keepEmptyTextComponents:!1,keepNotRecommendedMobileComponents:!1,keepOccludedAndEmptyBackgrounds:!0,keepOutOfScreenComponents:!0,fixMasterPageStructureOrder:!1},MERGE_UNHIDE:{keepEmptyTextComponents:!0,keepNotRecommendedMobileComponents:!0,keepOccludedAndEmptyBackgrounds:!0,keepOutOfScreenComponents:!0,keepInvisibleComponents:!0,fixMasterPageStructureOrder:!1},MERGE_PRESET:{keepEmptyTextComponents:!0,keepNotRecommendedMobileComponents:!0,keepOccludedAndEmptyBackgrounds:!0,keepOutOfScreenComponents:!0,fixMasterPageStructureOrder:!1},MERGE_DISPLAY_MODE:{keepEmptyTextComponents:!1,keepNotRecommendedMobileComponents:!0,keepOccludedAndEmptyBackgrounds:!0,keepOutOfScreenComponents:!0,fixMasterPageStructureOrder:!1}};return{getConversionSettings:function(r){return r=e.defaults({},r,n),e.assign({applySemanticRules:!0,useOverlapRules:t.isOpen("sv_mobileOverlapRules"),reparentMobileSOAP:t.isOpen("sv_reparentMobileSOAP")},i[r.conversionType],o[r.heuristicStrategy])}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";const t={"3dots":{hash:"286a3b718f2e46d1bdceaea477f567db",color:"#C63A84",isFree:!0},"3dotsvertical":{hash:"5b8499dddc884b0c87c906f2945f7962",color:"#C63A84",isFree:!0},address:{hash:"51ecb8e1148b45ba827df5c5134801af",color:"#00B594"},album:{hash:"d709a69b4a714cebb65fc287d0630e75",color:"#733CA6"},arrowdown:{hash:"094cf2e688d74039954477cf851901a3",color:"#2AA3A9",isFree:!0},arrowup:{hash:"1f4ff05481fd413a96841c299ffc48f5",color:"#2AA3A9",isFree:!0},blog:{hash:"637cdaa62e924d7aad59381e66330fc5",color:"#60BC57",isFree:!0},booking:{hash:"a94c8289b0ea431c980dce3b6aa9d0a6",color:"#8754B5",isFree:!0},briefcase:{hash:"30310f1c574449d4bcf29c2549b61270",color:"#09262A",isFree:!0},chat:{hash:"55ef598f51c14f36ba4f0690cf28626f",color:"#2D41A9"},clock:{hash:"bed5fd23d3814f0bb299fd79f204fe55",color:"#1F3655",isFree:!0},clothes:{hash:"e46817a53c534c49b882f6ee07be5094",color:"#EA7A58",isFree:!0},contactform:{hash:"f0ca657289864c5b9edef58b618e6e5f",color:"#4D599B"},creditcard:{hash:"08268d30cd6044fba10cdbd0d8773b8e",color:"#8B572A",isFree:!0},currency:{hash:"b4542c951dd74a99a9e1b03b70faa8ea",color:"#606C18",isFree:!0},ecom:{hash:"c229237b026740dfb16cdb09ec871e71",color:"#03BEFD",isFree:!0},email:{hash:"e4dde6644597420b93af3ca1ccfa9683",color:"#BE1867"},events:{hash:"4285df5e7be04a75814382611597fba0",color:"#EC125A"},facebook:{hash:"a855d9a5d94e444a9ef9f8f8f9192a5a",color:"#3C5A99"},flickr:{hash:"e27433a598ef44c1ba46e7f00ac0a7a1",color:"#000000"},google_plus:{hash:"0a6ab2eef3f14015ada0a0ab109afbcc",color:"#3B3B3B"},heart:{hash:"1330065097db4eb9aab7c9ac4a1f9b86",color:"#FF001F",isFree:!0},home:{hash:"6e90c5e2acf844ceaa63078cf649d7d3",color:"#3D0045",isFree:!0},hotel:{hash:"9af8517dcdf0402191aca1d28b4c45a6",color:"#0ACDCD",isFree:!0},icecream:{hash:"7ab1cea0e9384ab9a0b5d8bc5d6033e6",color:"#FF87B0",isFree:!0},instegram:{hash:"b6218b8d6b2549ad8a560dc75771a395",color:"#000000"},linkedin:{hash:"149a816584cd44b997f3023a42716113",color:"#1670BB"},restaurant:{hash:"bf24cfb7a774404bbc82477c34ce816e",color:"#E05050",isFree:!0},phone:{hash:"4387e0ae8fd6412e9a988f77faa4f379",color:"#63C956"},whatsapp:{hash:"a3c153_f546f836e5ca40dcb6a1bc44a1f3bdd7",color:"#21D366"},pinterest:{hash:"01c31f7f2d44432498ca45e05a3cf675",color:"#E33F44"},present:{hash:"e81a40c1ebba4666aec6e813e8ada603",color:"#FA6B6B",isFree:!0},progallery:{hash:"fd308926fe3e4a769b1f7ffbc228b502",color:"#733CA6"},register:{hash:"ba87eb144d914cfc89f2e3db904ddcf7",color:"#0058FF",isFree:!0},sale_free:{hash:"4c04d52e5f684c2a9c6c665046753ece",color:"#FF8447",isFree:!0},sale_vert:{hash:"f699000a2fef45348e20e216dae95f90",color:"#FFA300"},search:{hash:"32d9ddb6733d49b58eca7e21b503b619",color:"#6274C0",isFree:!0},shoppingcart:{hash:"0bc9ff91b06245b29e06f4010f61ab7e",color:"#EC00FF",isFree:!0},social:{hash:"ad394788d7224e189a13755a84d648e8",color:"#008751",isFree:!0},star:{hash:"a5e038d3c1dd478187aa016a17f210b1",color:"#FFCB00",isFree:!0},subscribe:{hash:"27c43b9381384a21ae01d8efcc0fbc12",color:"#3899EC"},ticket:{hash:"b8c5b2babffd4f3a819207a8da2bd94d",color:"#AD7C26",isFree:!0},twitter:{hash:"96ecb8929029472c90c7e72980d0c77c",color:"#68C1ED"},vk:{hash:"931c3651bada4183b7aa2c9b80016dc1",color:"#4E7DA0"},vimeo:{hash:"14a099fdcd514554a289f702afb73a6b",color:"#1AB7EA"},yelp:{hash:"2e61070007304317aadc1b49816ea07c",color:"#CD0F23"},line:{hash:"a3c153_16c2d22de67d4d2aacbd96274922a9f9",color:"#00B900"},youtube:{hash:"f58d5df33a944ddba14878977dd6dab0",color:"#E14D3B"},about:{hash:"3b550d5040dc4dddbb30939e36b37822",color:"#876969",isFree:!0},add:{hash:"e91cd3dc01e8493c81901aecf2c63ae7",color:"#A49595",isFree:!0},cloud:{hash:"8f9ad7995fdf40b28874170d6f3ea525",color:"#5CACB8",isFree:!0},crown:{hash:"fcb89d73f7a340abac9d96bd69e634b2",color:"#0D1F60",isFree:!0},dribbble:{hash:"c9d243a60f654aba9438199a22d986b1",color:"#F1538F"},earth:{hash:"ad5375b24d2d4687a09fb42d7ca2f1ca",color:"#0024AA",isFree:!0},flag:{hash:"b8a15fd471c745b390660fc4fa036383",color:"#578A80",isFree:!0},gallery:{hash:"f931ccee8c3c41be85194d887c683aa9",color:"#B58ED6",isFree:!0},hamburgermenu:{hash:"5bc41ee34c744e3983a0e1f4a1ac825e",color:"#C63A84",isFree:!0},hot:{hash:"c2082a19ca4d46c0956146df4471b16b",color:"#E55600",isFree:!0},hotsale:{hash:"f699000a2fef45348e20e216dae95f90",color:"#FFA300",isFree:!0},lightning:{hash:"2bcf8eda9a204136a3d92616774f87bd",color:"#1E1F45",isFree:!0},link:{hash:"d5ddf13e300448b6b0bacf1c7752e009",color:"#3E505E",isFree:!0},music:{hash:"5b1be2530dba4e5993b3b224b38e4cba",color:"#A6B941",isFree:!0},new:{hash:"21f18c501e8e422990c89b7df6018197",color:"#AB47FF",isFree:!0},page:{hash:"634183d69e7b4929a231d5afb5eadaf6",color:"#636478",isFree:!0},rocket:{hash:"7d307c038ead47c598cf2353384e2d0e",color:"#575174",isFree:!0},signup_free:{hash:"84d93d95e9ec4a779e5463f51cf311b5",color:"#52D3D4",isFree:!0},signup_cont:{hash:"84d93d95e9ec4a779e5463f51cf311b5",color:"#52D3D4"},smile:{hash:"84cbddf7e33e46438d7beb465ce9914d",color:"#11D5B8",isFree:!0},speaker:{hash:"f8c7e50b75174c0aa4ddb6dd149b6b3e",color:"#B94156",isFree:!0},unfilled_add:{hash:"a3c153_9b5e1fa2854744bdaa3586cb90fd6419",color:"#6D7281",isFree:!0},unfilled_arrow_down:{hash:"a3c153_9e42cf512dd54d1b9fa41dd70bd19f1a",color:"#2AA3A9",isFree:!0},unfilled_arrow_up:{hash:"a3c153_4789a225e2f34881b5a245b24203efc9",color:"#2AA3A9",isFree:!0},unfilled_bell:{hash:"a3c153_f2a3ded771934490bcb15efa2a80c8b4",color:"#B94156",isFree:!0},unfilled_bookmark:{hash:"a3c153_810dda02e2f64b61908d7732fed93eaa",color:"#6D7281",isFree:!0},unfilled_briefcase:{hash:"a3c153_ec320dbe0e364d61883b435faa123f37",color:"#09262A",isFree:!0},unfilled_calendar:{hash:"a3c153_d00a2d250e9641d5a135a5aec3d431bc",color:"#EC125A",isFree:!0},unfilled_card:{hash:"a3c153_a89bc965f07d4d849a3f3dac0366a3bb",color:"#8B572A",isFree:!0},unfilled_cart:{hash:"a3c153_caa8ad94822349459ef91c26601c1446",color:"#F032FE",isFree:!0},unfilled_chat:{hash:"a3c153_3da968185b5e4467935fe3f4cc665d5e",color:"#5D7589",isFree:!0},unfilled_clock:{hash:"a3c153_e6629475d92c4922accdf64a027d7243",color:"#1F3655",isFree:!0},unfilled_clothes:{hash:"a3c153_9377b39d11774616a204c6e8a1312889",color:"#EA7A58",isFree:!0},unfilled_cloud:{hash:"a3c153_d034117ea8084b769faed9e0c894b30a",color:"#5CACB8",isFree:!0},unfilled_connect:{hash:"a3c153_331c25fb55724ff89989cc3249ce2f44",color:"#FF7E04",isFree:!0},unfilled_drop:{hash:"a3c153_12475476a9f1435fa4f458aad8c402ba",color:"#90B1AD",isFree:!0},unfilled_export:{hash:"a3c153_e24a3c1cc4394a9ba70a9c235d9780a3",color:"#1E1E1E",isFree:!0},unfilled_eye:{hash:"a3c153_732a2c7442184ea784859accd60b1e54",color:"#156A56",isFree:!0},unfilled_flag:{hash:"a3c153_51903dd14f3c433392d04e92abacc5d0",color:"#6B988F",isFree:!0},unfilled_gallery:{hash:"a3c153_0f6bd0f150b04ef387d7e2d0486d312d",color:"#B58ED6",isFree:!0},unfilled_gift:{hash:"a3c153_0ed0bd58fda04443a7613bdb82f64af6",color:"#FA6B6B",isFree:!0},unfilled_globe:{hash:"a3c153_79007e14b0ef438189c4622abc4f4e71",color:"#1537B1",isFree:!0},unfilled_hamburger_menu:{hash:"a3c153_42ed9a9bd59f4806b6e9e37aabfaa15c",color:"#C63A84",isFree:!0},unfilled_heart:{hash:"a3c153_6216ac66ccfd45c3842655b36c3196d7",color:"#FF001F",isFree:!0},unfilled_home:{hash:"a3c153_31a71486208748488e4d42c04a7d6c5b",color:"#434343",isFree:!0},unfilled_hotel:{hash:"a3c153_5be577bbaeda4692aef6d37bd28da4b0",color:"#0ACDCD",isFree:!0},unfilled_info:{hash:"a3c153_59eb82c4c74740f1935eae19ce57b300",color:"#876969",isFree:!0},unfilled_lightning:{hash:"a3c153_355b00aaccac4053bd0f7e7bfac178d6",color:"#1E1F45",isFree:!0},unfilled_link:{hash:"a3c153_5500ce40c7ed47ef9680168a2b725dab",color:"#4B5C69",isFree:!0},unfilled_location:{hash:"a3c153_6f289816887a448282efeafbfea84ad3",color:"#0AB899",isFree:!0},unfilled_lock:{hash:"a3c153_f36d1a885eee4f64aa1b8d7011ee3c11",color:"#3D3782",isFree:!0},unfilled_magnet:{hash:"a3c153_afeb9034968544eeb58bd808cd588c7d",color:"#D60A0A",isFree:!0},unfilled_mail:{hash:"a3c153_542bcab5df8342cb921af8ac1d643b07",color:"#BE1867",isFree:!0},unfilled_note:{hash:"a3c153_af634f2e37c04525be769f4beef56bb4",color:"#A6B941",isFree:!0},unfilled_page:{hash:"a3c153_9423e66e180141b495a414cd1ff63b32",color:"#9B9B9B",isFree:!0},unfilled_pencil:{hash:"a3c153_fe7cd9ee7eb846fb9ef482f6eab6fe95",color:"#7E4E21",isFree:!0},unfilled_phone:{hash:"a3c153_0b0df77f73c34859bc19858649996944",color:"#79D36D",isFree:!0},unfilled_plane:{hash:"a3c153_47d57c626d804dc9982267beddc65b78",color:"#AAA9CC",isFree:!0},unfilled_plus:{hash:"a3c153_5006278ca03a4aefb6fe6400198e8419",color:"#A49595",isFree:!0},unfilled_print:{hash:"a3c153_50a90bcaee43484895c77ed8c0c78ea6",color:"#DBA4FF",isFree:!0},unfilled_profile:{hash:"a3c153_4c07fa587c7a461aae161d002d3083e9",color:"#0058FF",isFree:!0},unfilled_rocket:{hash:"a3c153_ba013d86a9664a22bd40da3232aa07de",color:"#575174",isFree:!0},unfilled_sale:{hash:"a3c153_d8b99e24fd624844972f4d8d2ccbe861",color:"#FFBE44",isFree:!0},unfilled_search:{hash:"a3c153_3b93314a71a942b7b6e68614a5c10893",color:"#7C8BCB",isFree:!0},unfilled_settings:{hash:"a3c153_e60220e49bfb461faea34786b027b92b",color:"#515151",isFree:!0},unfilled_share:{hash:"a3c153_63ffb654a97b4f6ba942a41ff34f83f9",color:"#098C57",isFree:!0},unfilled_shop:{hash:"a3c153_3c433bdab70b4cbf813f83eb33ec9b22",color:"#03BEFD",isFree:!0},unfilled_smile:{hash:"a3c153_ff07d3ae7c554d5fae506fb19246659a",color:"#11D5B8",isFree:!0},unfilled_star:{hash:"a3c153_89b3cad0aee74d24ad5dd542729c711e",color:"#FFCB00",isFree:!0},unfilled_talk:{hash:"a3c153_d665c30487e94b2b8476b979c485593b",color:"#4EA5EF",isFree:!0},unfilled_ticket:{hash:"a3c153_d418a7315e2b4e12aa7ef7d9c6520dba",color:"#AD7C26",isFree:!0},unfilled_time:{hash:"a3c153_6a0f5967056c49178e6b969ec25e38fa",color:"#BF6262",isFree:!0},unfilled_truck:{hash:"a3c153_388dbf14b0824411ab19a0cfb7c91238",color:"#7DA991",isFree:!0}},n={type:"Container",componentType:"wysiwyg.viewer.components.QuickActionBar",components:[],layout:{fixedPosition:!0},style:{type:"TopLevelStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{"alpha-controlButtonBG":"1","alpha-controlButtonFG":"1","alpha-controlButtonBorderColor":"1","alpha-actionsBorderColor":"1","boxShadowToggleOn-actionsSHD":"false","boxShadowToggleOn-controlButtonSHD":"false",controlButtonBG:"#008afc",controlButtonFG:"#ffffff",controlButtonBorderSize:"0",controlButtonBorderColor:"#ffffff",actionsBorderSize:"0",actionsBorderColor:"#ffffff",colorScheme:"brand inv",controlButtonSHD:"0px 1px 4px 0px rgba(0,0,0,0.6)",actionsSHD:"0px 1px 4px 0px rgba(0,0,0,0.6)"},propertiesSource:{controlButtonBG:"value",controlButtonFG:"value",controlButtonBorderSize:"value",controlButtonBorderColor:"value",actionsBorderSize:"value",actionsBorderColor:"value",colorScheme:"value",controlButtonSHD:"value",actionsSHD:"value"},groups:{}},componentClassName:"wysiwyg.viewer.components.QuickActionBar",styleType:"custom"}};return{quickActionIconsData:t,actionTypesMap:["phone","email","contactform","chat","address","facebook","whatsapp","twitter","instegram","pinterest","linkedin","youtube","google_plus","yelp","line","vimeo","vk","flickr","subscribe","album","progallery","custom"],socialLinkTexts:{facebook:"Facebook",twitter:"Twitter",pinterest:"Pinterest",google_plus:"Google+",tumblr:"Tumblr",linkedin:"Linkedin",youtube:"Youtube",vimeo:"Vimeo",flickr:"Flickr",instegram:"instagram"},defaultSerializedMAB:e.defaultsDeep({},{skin:"wysiwyg.viewer.skins.quickActionBar.anchoredSkin",style:{skin:"wysiwyg.viewer.skins.quickActionBar.anchoredSkin",style:e.set({},"properties",{colorScheme:"brand",actionsSHD:"0px 0px 20px 0px rgba(0,0,0,0.1)","boxShadowToggleOn-actionsSHD":"true"})}},n),defaultSerializedFAB:e.defaultsDeep({},{skin:"wysiwyg.viewer.skins.quickActionBar.floatingSkin",style:{skin:"wysiwyg.viewer.skins.quickActionBar.floatingSkin",style:e.set({},"properties",{colorScheme:"brand inv",controlButtonBG:"#008afc","alpha-controlButtonBG":"1",controlButtonSHD:"0px 2px 8px 0px rgba(0,0,0,0.3)",actionsSHD:"0px 2px 8px 0px rgba(0,0,0,0.3)","boxShadowToggleOn-actionsSHD":"true","boxShadowToggleOn-controlButtonSHD":"true"})}},n),defaultSerializedQuickActionBarItem:{type:"Component",componentType:"wysiwyg.viewer.components.QuickActionBarItem",layout:{},style:{type:"TopLevelStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{color:"#000000"},propertiesSource:{color:"value"},groups:{}},componentClassName:"wysiwyg.viewer.components.QuickActionBarItem",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.quickActionBarItem"}},defaultQuickActionItems:[{itemType:"phone",link:{type:"PhoneLink",phoneNumber:""},text:"Phone",icon:t.phone.hash},{itemType:"email",link:{type:"EmailLink",recipient:"",subject:""},text:"Email",icon:t.email.hash},{itemType:"facebook",link:{type:"ExternalLink",url:"",target:"_blank"},text:"Facebook",icon:t.facebook.hash}],QUICK_ACTION_ITEM_MAX_LENGTH:40}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(97),n(174)],void 0===(i=function(e,t,n){"use strict";return{cacheAppMarketDataAfterProvision:function(e,o){t.getAppMarketDataAsync(e,o.appDefinitionId).catch(function(){e.siteAPI.reportBI(n.FAIL_TO_GET_APP_MARKET_DATA)})},generateAppFlowsLargestAppId:function(t){return e.max([t,999])+e.random(1,999)+e.random(1,99)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(12),n(13),n(28),n(425),n(29),n(434),n(1),n(173)],void 0===(i=function(e,t,n,o,i,r,a,s,c){"use strict";const p=e.template("<%= appMarketEditorAPIUrl %><%= appDefinitionId %>/priced-app?metaSiteId=<%= metaSiteId %>&lang=<%= lang %>"),l=e.template("<%= appMarketEditorAPIUrl %>?market=related_apps&fields=appDefinitionId,slug,name,appIcon,colorSvgIcon,weights,categories,by,relatedAppsTeaser,hasSection,widgets.defaultWidth,widgets.defaultHeight"),u=e.template("<%= appMarketEditorAPIUrl %>?id=<%= appDefinitionIds %>"),d=e.template("<%= appMarketEditorAPIUrl %>page-apps?fields=widgets.title,widgets.widgetId,appDefinitionId&lang=<%= lang %>"),g=e.template("<%= premiumBaseUrl %>?appInstanceId=<%= instanceId %>&appDefinitionId=<%= appDefinitionId %>&paymentCycle=<%= cycle %>&vendorProductId=<%= vendorProductId %>"),f=function(e){const t=e.pointers.general.getServiceTopology(),n=e.pointers.getInnerPointer(t,"appMarketEditorApiUrl");return`${e.dal.get(n)}/`};function m(e,t,o){const i=n.getProperty(e,n.PROPERTY_NAMES.META_SITE_ID),r=n.getProperty(e,n.PROPERTY_NAMES.LANGUAGE_CODE)||"en";let a=p({appMarketEditorAPIUrl:f(e),appDefinitionId:t,metaSiteId:i,lang:r});return o&&(a+=`&currency=${o}`),a}const y=function(n,o,i,r,c){s.loggingUtils.fedopsLogger.interactionStarted(s.loggingUtils.fedopsLogger.INTERACTIONS.APP_MARKET_SERVICE.CALL_SERVER),a.lock(o),s.ajaxLibrary.ajax({type:"GET",url:m(n,o,e.get(i,"currency")),success(t){if(function(t){return!e.get(t,"currency")}(i))t=a.set(o,t);else{const n=a.get(o);n&&(t=e.merge({},n,t))}a.unlock(o),r&&r(t),s.loggingUtils.fedopsLogger.interactionEnded(s.loggingUtils.fedopsLogger.INTERACTIONS.APP_MARKET_SERVICE.CALL_SERVER)},error(e,n,i){t.integrations.ravenUtils.captureError(new Error(`Error with calling server: Type: ${n}, Error: ${i}`),{tags:{appMarketCallServer:!0,appDefinitionId:o}}),a.unlock(o);const s=`app market response error for appDefinitionId: ${o}`;r?r({error:s,errorType:n,errorMessage:i}):c&&c({error:s,errorType:n,errorMessage:i})}})},E=function(t,n,o){return new Promise(function(i,r){if(e.isUndefined(n))r({error:"appDefinitionId was not given"});else{const s=a.get(n);s&&S(s)&&!e.get(o,"currency")?i(s):y(t,n,o,i,r)}})},I=function(e,t,n){const o=a.get(t);return h(t)&&y(e,t,n),o},S=function(e){return e&&e.price},h=function(t){const n=a.get(t);return 1!==a.isLocked(t)&&(e.isUndefined(n)||!S(n))},P=function(t,o){const r=t.pointers.general.getServiceTopology(),a=t.pointers.getInnerPointer(r,"appMarketEditorNewUrl");let s=t.dal.get(a);s=e.replace(s,"wix-app-market","one-app-market");const c=new i(s),p=n.getProperty(t,n.PROPERTY_NAMES.LANGUAGE_CODE)||"en",l=n.getProperty(t,n.PROPERTY_NAMES.META_SITE_ID),u=n.getProperty(t,n.PROPERTY_NAMES.SITE_ID);return c.addOriginParam(o.origin).addModalParams(o.modalName,o.appName,o.tab).addDevAppParam(o.appDefinitionId).addLangParam(p).addAppMarketTests(o.tests).addCompIdParam("MarketPanel").addMetaSiteIdParam(l).addSiteIdParam(u).addTagsParam(o.query).addOpenAppParam(o.openAppDefId).addAppMarketParams(o.appMarketParams).addNewWixStores("true").addCategoryParam(o.categorySlug).addBiReferralInfoParam(o.openMarketOrigin).addBiReferralInfoCategoryParam(o.referralInfoCategory).addBiSectionParam(o.section).addAddingMethodParam(o.addingMethod).addStateParam(o.state).build()},A=function(t){return e.isArray(t)||(t=[t]),t};return{getAppMarketDataAsync:E,getAppMarketData:I,getAppMarketDataForPage:function(t,n,o,i){if(e.isUndefined(n))i&&i({error:"pageId was not given"});else{const c=function(t,n){const o=r.getInstalledAppsOnPage(t,n),i=e.map(o,"appDefinitionId"),s=a.keys();return e.remove(i,function(t){return!e.includes(s,t)})}(t,n);if(e.isEmpty(c))return;const p=function(e,t){const n=f(e);return u({appMarketEditorAPIUrl:n,appDefinitionIds:t.toString()})}(t,c);s.ajaxLibrary.ajax({type:"GET",url:p,success(t){e.forEach(t,function(e){a.set(e.appDefinitionId,e)}),o&&o(t)},error(){o?o({error:`app market response error for appDefinitionIds: ${c.toString()}`}):i&&i({error:`app market response error for appDefinitionIds: ${c.toString()}`})}})}},getAppMarketUrl:P,getAppMarketInfoUrl:function(e,t,n){return t.appName=n,t.modalName="app-modal",P(e,t)},getAppReviewsUrl:function(e,t,n){return t.appName=n,t.modalName="app-modal",t.tab="reviews",P(e,t)},getAppMarketPermissionsUrl:function(e,t){return t.modalName="permissions-modal",P(e,t)},getPackages:function(t,n,i,r){return new Promise(function(a,s){E(t,n,r).then(function(t){if(t.error)s(t);else{const r=t.purchaseStartUrl,s=e.pick(t.price,"currencyCode","currencySymbol"),c=e.map(t.packages,function(t){const a=e.assign(e.cloneDeep(t),s);return e.forEach(o.CYCLE,function(t){!function(t,n,i,r,a){t.hasOwnProperty(a)&&(t[a].hasOwnProperty("price")?t[a].url=g({premiumBaseUrl:n,instanceId:i,appDefinitionId:r,cycle:e.findKey(o.CYCLE,function(e){return e===a}),vendorProductId:t.id}):delete t[a])}(a,r,i,n,t)}),a});a(c)}}).catch(function(e){s(e)})})},getPremiumApps:function(t,n,o,i){c.getPremiumApps(t,n,function(n){!function(t,n,o){e.forEach(n.tpaPackages,function(e){a.get(e.appDefinitionId)?a.set(e.appDefinitionId,{upgradedToYearly:c.isYearly(e)}):y(t,e.appDefinitionId,{},function(){a.set(e.appDefinitionId,{upgradedToYearly:c.isYearly(e)})})}),e.isFunction(o)&&o(n.tpaPackages)}(t,n,o)},i)},getRelatedApps:function(e,t,n){const o=function(e){const t=f(e);return l({appMarketEditorAPIUrl:t})}(e);s.ajaxLibrary.ajax({type:"GET",url:o,data:{},dataType:"json",contentType:"application/json",success(e){t(A(e))},error:n})},getSectionsTranslatedPageTitles:function(e){return new Promise(function(t,o){const i=function(e){const t=f(e),o=n.getProperty(e,n.PROPERTY_NAMES.LANGUAGE_CODE)||"en";return d({appMarketEditorAPIUrl:t,lang:o})}(e);s.ajaxLibrary.ajax({type:"GET",url:i,success(e){t(e)},error:o})})},requestAppMarketDataToBeCached:I}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(172),n(33),n(15),n(433)],void 0===(i=function(e,t,n,o,i){"use strict";const r=[],a=[];function s(e,n){const o=e.dal.get(e.pointers.general.getServiceTopology());return t.specMapUtils.resolveEditorScriptUrl(n,{clientSpec:n,serviceTopology:o})}function c(e,t){return s(e,o.getAppDataByAppDefinitionId(e,t))}function p(e,t){const n=e.pointers.platform.getAppManifestPointer(t);return e.dal.get(n)}return{registerToManifestAdded:function(t,o){r.push(o);const i=function(t){const o=n.filterAppsDataByType(t,"Application");return e.compact(e.map(o,function(e){return p(t,e.appDefinitionId)}))}(t);e.isEmpty(i)||i.forEach(function(e){o(e)})},setManifest:function(t,n,o){const i=t.pointers.platform.getAppManifestPointer(n),a=c(t,n);t.dal.set(i,o),e.forEach(r,function(e){e(o,a)})},getAppManifest:p,getAppDataByAppDefId:c,getAppDataByApplicationId:function(e,t){return s(e,o.getAppData(e,t))},setAppPublicAPI:function(t,n,o){const i=t.pointers.platform.appPublicApiNamePointer(n);t.dal.set(i,o),e.forEach(a,e=>e({apiName:o}))},registerToPublicApiSet:function(t,o){a.push(o);const i=function(t){const o=n.filterAppsDataByType(t,"Application");return e.compact(e.map(o,function(e){return function(e,t){const n=e.pointers.platform.appPublicApiNamePointer(t);return e.dal.get(n)}(t,e.appDefinitionId)}))}(t);e.isEmpty(i)||i.forEach(e=>o({apiName:e}))},isPlatformAppInstalled:function(e,t){const n=e.pointers.platform.getPagesPlatformApplicationsPointer(),o=e.dal.get(n),r=c(e,t);return i.isPlatformAppInstalled(o,r)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(55),n(38),n(100)],void 0===(i=function(e,t,n){"use strict";function o(e,t,o,i){if(!o)throw new n.ArgumentError(e,t,o,i)}function i({baseUrl:e,appId:t,signedInstance:n,instanceId:i}){return o("baseUrl","createCodeAppInfo",e,"string"),o("appId","createCodeAppInfo",t,"string"),o("signedInstance","createCodeAppInfo",n,"string"),o("instanceId","createCodeAppInfo",i,"string"),{baseUrl:e,signedInstance:n,instanceId:i,appId:t}}return{createCodeAppInfo:i,getCodeAppInfoFromPS:function(n){const o=t.getExistingWixCodeAppFromPS(n),r=e.getGridAppId(n);return i({baseUrl:n.dal.get(n.pointers.general.getServiceTopology()).wixCodeIdeServerUrl,appId:r,signedInstance:o.instance,instanceId:o.instanceId})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";function e(e,t,n,o){const i=o?` Expecting ${o}.`:"";this.name="ArgumentError",this.message=`Illegal Argument '${e}' in ${t}. '${n}' is invalid.${i}`,this.stack=(new Error).stack}function t(e){this.name="FileSystemError",this.message=e,this.stack=(new Error).stack}function n(){this.name="WixCodeNotWriteableError",this.message="Wix Code App is not writeable",this.stack=(new Error).stack}return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,{ArgumentError:e,FileSystemError:t,WixCodeNotWriteableError:n}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(190),n(491)],void 0===(i=function(e,t){"use strict";return e(t)}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(5),n(4),n(11),n(7),n(72),n(29),n(15),n(103),n(135),n(487),n(136),n(137),n(14)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l,u,d,g){"use strict";const f=function(t){return e.has(t,"gluedOptions")&&!e.isNull(t.gluedOptions)},m=function(e,t,n){e.callback&&e.callback({comp:t,success:n})},y=function(t,o,i,r){const a=r.applicationId,s=r.appDefinitionId,u=i.widgetId||h(t,r),g=e.get(r,`widgets.${u}`),m=e.get(g,"tpaWidgetId");let y=i.styleId||i.style;m&&e.get(i,"componentOptions.widget.tpaWidgetId")===m&&(i.pageId=i.componentOptions.widget.wixPageId||i.pageId,i.showOnAllPages=i.componentOptions.widget.allPages||i.showOnAllPages,y=i.componentOptions.styleId||y);let S,P,A=i.pageId||t.siteAPI.getFocusedRootId();if(!u||!A||!g)throw new Error("invalid params");if(i.componentDefinition)S=i.componentDefinition;else{const n={width:g.defaultWidth,height:g.defaultHeight};i.layout&&e.defaults(i.layout,n),P={width:g.defaultWidth||0,height:g.defaultHeight||0,defaultPosition:g.defaultPosition||e.get(i,"layout.defaultPosition")||{}},(g.defaultShowOnAllPages||i.showOnAllPages||f(g)||"header"===P.defaultPosition.region||"footer"===P.defaultPosition.region)&&(A="masterPage"),S=f(g)?p.getGluedWidgetStructure(a,s,g,P,y):p.getWidgetStructure(a,s,g.widgetId,l.getCompLayoutFrom(t,P,i.layout),y)}const T=i.containerRef||E(t,A,i,P);o||(o=n.getComponentToAddRef(t,T)),p.convertStyleIdToStyleDef(t,S),n.add(t,o,T,S),I(t,o,g,i),c.setPrefetchPageBehaviorIfNeeded(t,o,r),e.isString(i.presetId)&&!e.isEmpty(i.presetId)&&d.set(t,o,"presetId",i.presetId,d.SCOPE.COMPONENT)},E=function(t,n,o,r){const a=t.pointers.components.getPage(n,g.getViewMode(t));let s=a;return o.parentContainerRef&&t.pointers.isSamePointer(t.pointers.components.getPageOfComponent(o.parentContainerRef),a)&&(s=o.parentContainerRef),"header"===e.get(r,"defaultPosition.region")&&(s=i.getSiteHeader(t)),s},I=function(e,t,n,i){const r=n.canBeStretched&&n.shouldBeStretchedByDefault&&!i.dontStretch,a=!1===i.dontStretch;(r||a)&&o.setDock(e,t,{left:{vw:0},right:{vw:0}})},S=function(t,n,o){const i=s.widgetsToAutoAddToSite(t,n);e.forEach(i,function(e){e.default||y(t,void 0,{widgetId:e.widgetId,componentOptions:o},n)})},h=function(t,n){const o=e.filter(n.widgets,function(t){return e.isNil(t.appPage)||e.isUndefined(t.appPage)}),i=e.find(o,{default:!0});return e.get(i,"widgetId")||o&&!e.isEmpty(o)&&o[0].widgetId||null};return{isGlued:f,addWidgetAfterProvision:function(t,n,o,i,p,l){o=o||{};let u=!0;e.isBoolean(e.get(o,"invokeAddAppCallbacks"))&&(u=e.get(o,"invokeAddAppCallbacks"));const d=!a.isApplicationIdExists(t,i.applicationId);if(d){if(s.hasSections(t,i)){if(s.hasMainSection(t,i))return void(e.isFunction(l)&&l());c.addHiddenPages(t,i,o.componentOptions)}S(t,i,o.componentOptions)}y(t,n,o,i),d&&u&&r.invokeAddAppCallbacks(i.appDefinitionId),t.setOperationsQueue.isRunningSetOperation()?t.setOperationsQueue.executeAfterCurrentOperationDone(function(){d?c.addPlatformAppIfNeeded(t,i).then(e.partial(m,o,n,!0)).catch(e.partial(m,o,n,!1)):m(o,n,!0)}):m(o,n,!0),p&&p(t)},duplicateWidget:function(e,t,o){o=o||e.siteAPI.getFocusedRootId(e);const i=e.pointers.components.getPage(o,g.getViewMode(e));if(!i)throw new Error("no such component");const r=n.getComponentToDuplicateRef(e,t,i);n.duplicate(e,r,t,i)},notifyBeforeWidgetDelete:function(e,t){const o=n.data.get(e,t).applicationId;u.notifyWidgetAboutToDelete(e,t,o,e.setOperationsQueue.asyncPreDataManipulationComplete.bind(e.setOperationsQueue))},deleteWidget:function(e,t){const o=n.data.get(e,t).applicationId,i=u.deleteTpaCompleteCallback.bind(null,e,[o]);u.deleteWidget.apply(c,[e,t,o,i])},getPagesToBeRemovedWithWidget:function(t,o){const i=n.data.get(t,o),r=e.get(i,"applicationId"),s=a.getWidgetsByAppId(t,r);if(u.isLastInstalledMainWidget(s,t,r,o)){const n=e.union([r],e.map(a.getInstalledDependentAppsData(t,r),"applicationId"));return a.getPagesByApplicationIds(t,n)}return[]},invokeWidgetCallback:m}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(17),n(19),n(4),n(11),n(36),n(14),n(15),n(29),n(134),n(135),n(28),n(32)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l,u,d,g){"use strict";const f=function(e,t){return o.getValidPageUriSEO(e,"",t.replace(/[^A-Za-z0-9-]/g,"-").toLowerCase()||"blank")},m=function(t,n){t&&e.get(n,"componentOptions.page.pageId")===t&&(n.title=n.componentOptions.page.title||n.title,n.requireLogin=e.isUndefined(n.componentOptions.page.requireLogin)?n.requireLogin:n.componentOptions.page.requireLogin,n.styleId=n.componentOptions.styleId||n.styleId,n.layout=n.componentOptions.layout||n.layout,n.isHidden=e.isUndefined(n.componentOptions.page.isHidden)?n.isHidden:n.componentOptions.page.isHidden)},y=function(o,i,r,a,s){s=s||{},m(r.appPage.id,s);const c=s.title||l.getTitle(a.appDefinitionId,r.widgetId)||r.appPage.name,p=`${d.TYPE.TPA_MULTI_SECTION}_${t.guidUtils.getUniqueId()}`;e.assign(r,{applicationId:a.applicationId});const g=f(o,s.title||r.appPage.name);r.name=c;const y=u.getSubSectionStructure(o,r,p,g,s.requireLogin,s.isHidden);return i=i||n.getPageIdToAdd(o,c,y),E(o,i,p,a.applicationId,a.appDefinitionId,r,y,r.widgetId,d.COMP_TYPES.TPA_MULTI_SECTION,d.DATA_TYPE.TPA_MULTI_SECTION,s),p},E=function(t,o,r,a,s,c,p,l,g,f,m){m=m||{};const y=t.pointers.components.getViewMode(o),E=t.pointers.components.getUnattached(r,y),I={componentType:g,type:"Component",id:E.id,style:m.styleId||d.STYLE.TPA_SECTION,skin:d.SKINS.TPA_SECTION,layout:(S=m.layout,{x:(S=S||{}).x||0,y:S.y||0,width:S.width||980,height:S.height||500}),data:{appDefinitionId:s,type:f,applicationId:`${a}`,metaData:{isPreset:!0,schemaVersion:"1.0",isHidden:!1},widgetId:l}};var S;if(e.get(c,"appPage.fullPage")||e.get(c,"componentFields.fullPageDesktopOnly")){const t={top:{px:0},right:{px:0},bottom:{px:0},left:{px:0}};e.assign(I.layout,{fixedPosition:!0,docked:t})}else c.canBeStretched&&c.shouldBeStretchedByDefault&&e.assign(I.layout,{docked:{left:{vw:0},right:{vw:0}}});n.add(t,o,c.name,p),u.convertStyleIdToStyleDef(t,I),i.add(t,E,o,I)},I=function(t,n){const o=a.getBehaviors(t,n),i=e.find(o,{behavior:{name:"prefetchPages"}});i&&a.removeComponentSingleBehavior(t,n,i,i.action.name)};return{addSubSection:y,addHiddenPages:function(t,n,o){const i=c.getAppSectionsToInstall(t,n.applicationId);e.forEach(i,function(e){e.appPage.hidden&&e.appPage.id&&y(t,null,e,n,{componentOptions:o})})},addPageAndSection:E,getPageUriSEO:f,setPrefetchPageBehaviorIfNeeded:function(t,n,o){const i=c.getSectionsWidgetIdsToPreFetch(o);if(e.isEmpty(i))return;const r=p.getHiddenSections(t,o.applicationId);if(e.isEmpty(r))return;const l=e(r).filter(function(t){return e.includes(i,t.widgetId)}).map("pageId").value();if(e.size(l)>0){const o=t.pointers.components.getPage(e.head(l),s.getViewMode(t)),i=a.getBehaviorDefinition(t,"prefetchPages"),r=a.getActionDefinition(t,"screenIn");i.params.prefetchFilters.id=l,I(t,n),a.updateBehavior(t,n,r,o,i)}},addPlatformAppIfNeeded:function(e,t,n){return new Promise(function(o,i){c.hasEditorPlatformPart(t)?g.provision(e,t.appDefinitionId,n).then(o,i):o()})},addSectionComponentOptionsIfNeeded:m}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(184),n(15),n(199),n(64),n(13),n(31),n(96)],void 0===(i=function(e,t,n,o,i,r,a,s,c){"use strict";const p=e.template("<%= provisionServerBaseUrl %>/appStore/demo/pre-save-provision/<%= metaSiteId %>/<%= applicationId %>"),l=e.template("<%= provisionServerBaseUrl %>/appStore/pre-save-provision/<%= appDefinitionId %>"),u=e.template("<%= provisionServerBaseUrl %>/appStore/post-save-complete-provision?metaSiteId=<%= metaSiteId %>&editorSessionId=<%= editorSessionId %>"),d=e.template("<%= provisionServerBaseUrl %>/appStore/provision/<%= appDefinitionId %>"),g=e.template("<%= provisionServerBaseUrl %>/appStore/spec/<%= metaSiteId %>/<%= applicationId %>"),f=e.template("<%= provisionServerBaseUrl %>/appStore/disable/<%= metaSiteId %>/<%= appDefinitionId %>"),m=e.template("<%= provisionServerBaseUrl %>/appStore/restore/<%= metaSiteId %>/<%= appDefinitionId %>"),y=function(e,t,n,o,i){return t({provisionServerBaseUrl:E(e),appDefinitionId:n,applicationId:o,metaSiteId:i})},E=function(e){const t=e.pointers.general.getServiceTopology();return e.dal.get(e.pointers.getInnerPointer(t,"appStoreUrl"))},I=function(e,t,o,i){const r=y(e,d,t),a=S(e),s=new n(r).addMetaSiteId(a).addAcceptJson().build();h(e,s,"POST",{},o,i)},S=function(e){return a.getProperty(e,a.PROPERTY_NAMES.META_SITE_ID)},h=function(n,i,r,a,p,l){t.ajaxLibrary.ajax({type:r||"GET",url:i,data:JSON.stringify(a),dataType:"json",contentType:"application/json",success(t){n?function(t,n,i){const r=i.payload;if(e.includes([void 0,-1],r.applicationId))r.applicationId=o.getLargestApplicationId(t)+1,r.notProvisioned=!0;else{const e=o.getAppDataByAppDefinitionId(t,r.appDefinitionId);!s.isSiteSaved(t)&&e&&e.demoMode&&!r.demoMode&&(r.notProvisioned=!0)}o.registerAppData(t,r),t.setOperationsQueue.executeAfterCurrentOperationDone(function(){s.isTpaByAppType(r.type)&&c.cacheAppMarketDataAfterProvision(t,r)}),n(r)}(n,p,t):p(t)},error:l})};return{restoreWixappOnServer:(e,t,n,o)=>{const i=E(e),r=m({appDefinitionId:t,metaSiteId:S(e),provisionServerBaseUrl:i});h(null,r,"POST",{},n,o)},disableWixappOnServer:function(e,t,n,o){const i=E(e),r=f({appDefinitionId:t,metaSiteId:S(e),provisionServerBaseUrl:i});h(null,r,"POST",{},n,o)},provisionAppAfterSave:I,provisionAppBeforeSave:function(e,t,o,i){const r=y(e,l,t),a=new n(r).addAcceptJson().build();h(e,a,"POST",{},o,i)},provisionAppDemoAfterSave:function(e,t,n,o){I(e,t,n,o)},provisionAppDemoBeforeSave:function(e,t,o,i){const r=S(e),a=y(e,p,null,t,r),s=new n(a).addAcceptJson().build();h(e,s,"POST",{},o,i)},completeProvisionAppsAfterSave:function(t,o,i,r,a,c){const p=u({provisionServerBaseUrl:t,metaSiteId:o,editorSessionId:i}),l=new n(p).addAcceptJson().build();let d=e.filter(r,"notProvisioned");d=e.filter(d,function(e){return!s.isTpaByAppType(e.type)});const g=e.map(d,function(e){return{appDefinitionId:e.appDefinitionId,applicationId:e.applicationId.toString(),instanceId:e.instanceId}});e.isEmpty(g)?a():h(void 0,l,"POST",{apps:g,metaSiteId:o},a,c)},refreshSpecMap:function(e,t,o,i,r){const a=y(e,g,null,t,o),s=new n(a).addAcceptJson().build();h(e,s,"GET",void 0,i,r)},provisionAppFromSourceTemplate:function(e,t,n,o,i){r.provisionAppFromSourceTemplate(e,t,n,o,i)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(203),n(492),n(21),n(493),n(500)],void 0===(i=function(e,t,n,o,i,r){"use strict";const a=t.fromJS({parts:null}),s=t.fromJS({dataSelectors:null}),c=t.fromJS({views:null}),p=t.fromJS({types:null}),l={items:e=>g(e,o.getBaseItemsPath()),parts:e=>a.update("parts",g.bind(null,e,o.getBasePartsPath())),dataSelectors(e){return s.update("dataSelectors",g.bind(this,e,o.getBaseDataSelectorsPath()))},views(e){return c.update("views",g.bind(this,e,o.getBaseViewsPath()))},types(e){return p.update("types",g.bind(this,e,o.getBaseTypesPath()))}},u=["_state"];function d(t,n){return e.assign(n,{_timestamp:t._updatedAt})}function g(e,n){return e.getIn(n,t.fromJS({}))}function f(t,o,i,r,a){const s=e.map(i,function(e,t,o,i,r){const a=l[r](e),s=l[r](t);return n.getItemsDiff(a,s,o,i)}.bind(null,t,o,r,a));return{created:e(s).map("created").flattenDeep().value(),updated:e(s).map("updated").flattenDeep().value(),deleted:e(s).map("deleted").flattenDeep().value()}}function m(t){return e.every(l,function(e){return e(t).every(function(e){return e&&e.isEmpty()})})}function y(e,t,n,o,a){if(t===e||m(t)&&m(e))return void n();const s=function(e,t){return{dataItems:f(e,t,["items"],u,d),repo:E(e,t)}}(e,t);i.saveRepoAndItems(r.getAppInstance(t),s.repo,s.dataItems,a).then(n).catch(o)}function E(t,n){const o=f(t,n,["types","parts","dataSelectors","views"]);if(!e.some(o,function(e){return e.length>0}))return null;const i=e.transform(["dataSelectors","views","types"],function(t,o){const i=l[o](n).toJS();t[o]=e(i).map(e.values).flattenDeep().value()},{}),r=l.parts(n).toJS();return e.assign(i,r)}return{partialSave(e,t,n,o,i){y(e,t,n,o,i)},fullSave(e,t,n,o,i){y(e,t,n,o,i)},firstSave(e,t,n,o,i){const a=r.getAppInstanceId(e),s=r.getAppInstanceId(t);a&&a===s?o({errorCode:1970,errorDescription:"application instance id is the template id",changes:null}):y(e,t,n,o,i)},saveAsTemplate(e,t,n){n()},autosave(e,t,n,o,i){y(e,t,n,o,i)},publish(e,t,n,o){m(e)?t():i.publish(r.getAppInstance(e),o).then(t).catch(n)},getTaskName:()=>"appbuilder",getSnapshotTags:()=>["primary"]}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(21),n(46)],void 0===(i=function(e,t,n,o){"use strict";const i="Type does not exist",r="Selector does not exist",a={"IB.ManualSelectedList":"ManualSelectedList"};function s(e){throw new Error(e)}function c(e,t){return e.dal.getByPath(n.getDataSelectorPath(t))}function p(t,o,i){if(!function(t){return e.isArray(t)&&e.every(t,function(t){return e.isString(t)})}(i))throw new Error("itemsId must be an array of strings.");const a=c(t,o)||s(r);a.itemIds=function(t,o,i){const r=t.dal.getByPath(n.getBaseItemsPath(o))||{};return e.intersection(i,e.map(r,"_iid"))}(t,a.forType,i),a.logicalTypeName="IB.ManualSelectedList",t.dal.full.setByPath(n.getDataSelectorPath(o),a)}return{getSelector:function(t,n){const o=c(t,n);if(o){const t=e.omit(o,["dataProviderId","forType","logicalTypeName"]);return t.type=a[o.logicalTypeName],t}},setManualSelector:p,createSelector:function(e,r){o.getType(e,r)||s(i);const a={id:`dataSelector_${t.guidUtils.getUniqueId()}`,forType:r};return e.dal.full.setByPath(n.getDataSelectorPath(a.id),a),a.id},deleteItemFromAllManualDataSelectors:function(t,o){const i=t.dal.getByPath(n.getBaseDataSelectorsPath());e(i).filter({logicalTypeName:"IB.ManualSelectedList"}).forEach(function(n){const i=e.reject(n.itemIds,function(e){return e===o});i.length!==n.itemIds.length&&p(t,n.id,i)})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";const t={"wysiwyg.viewer.components.BoxSlideShow":"wysiwyg.viewer.components.BoxSlideShowSlide","wysiwyg.viewer.components.StripContainerSlideShow":"wysiwyg.viewer.components.StripContainerSlideShowSlide","wysiwyg.viewer.components.StateBox":"wysiwyg.viewer.components.StateBoxState","wysiwyg.viewer.components.StateStrip":"wysiwyg.viewer.components.StateStripState"},n=e.values(t),o=t=>e.includes(n,t);return{isSlideShowComponent:n=>e.has(t,n),getSlidesFromChildrenByStructure:t=>e.filter(t,({componentType:e})=>o(e)),getShownOnAllSlidesFromChildrenByStructure:t=>e.reject(t,({componentType:e})=>o(e)),isSlideComponent:o,getMatchingChildSlideType(e){const n=t[e];if(!n)throw new Error("invalid comp type, not a slideshow component");return n}}}.apply(t,o))||(e.exports=i)},function(e,t){e.exports=g},function(e,t,n){var o,i;o=[n(0),n(1),n(14),n(24)],void 0===(i=function(e,t,n,o){"use strict";function i(e){const i=e.pointers.components.getMasterPage(n.getViewMode(e));return o.getComponentModesByType(e,i,t.siteConstants.COMP_MODES_TYPES.SHOW_ON_SOME_PAGES)}function r(t,n,i){const r=o.overrides.getAllOverrides(t,n);return e.some(r,function(t){return!e(t.modeIds).intersection(i).isEmpty()})}function a(t,n){if(!t.pointers.components.isInMasterPage(n))return null;const o=i(t);if(e.isEmpty(o))return null;const a=e.map(o,"modeId");let s=n;for(;!r(t,s,a);)if(!(s=t.pointers.components.getParent(s)))return null;return s}return{getSOSPModes:i,removeSOSPMode:function(e,t){const i=e.pointers.components.getMasterPage(n.getViewMode(e));o.removeComponentMode(e,i,t)},getShowOnSomePagesRoot:a,getComponentPagesGroupId:function(t,r){const s=a(t,r),c=s?function(t,r){const a=t.pointers.components.getMasterPage(n.getViewMode(t)),s=e.map(i(t),"modeId"),c=o.overrides.getAllOverrides(t,r),p=e.find(c,function(t){return!e(t.modeIds).intersection(s).isEmpty()});return o.getComponentModeById(t,a,p.modeIds[0])}(t,s):null;return p=c,e.get(p,["settings","pagesGroupId"],"").replace("#","");var p}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";return{setScrollAndScale:function(t,n,o,i,r,a){const s=t.siteAPI.getSiteAnimationsService(),c=s.sequence(),p=e.isUndefined(a)?"50%":a.toString();return c.add(s.animate("BaseNone","#SITE_ROOT",0,0,{transformOrigin:`${p} 0`}),0).add(s.animate("BaseScale","#SITE_ROOT",r,0,{to:{scale:i},clearProps:1===i?"transform, transform-origin":""}),0).add(s.animate("BaseScroll",window,r,0,{x:n,y:o}),0),c.get()},animateScroll:function(t,n,o,i=0,r=e.noop){const a=t.siteAPI.getSiteAnimationsService(),s=a.sequence();return s.add(a.animate("BaseScroll",window,i,0,{x:n,y:o,callbacks:{onComplete:r}}),0),s.get()},setScroll:function(e,t,n){if(e.siteAPI.isPopupOpened()){const e=window.document.getElementById("POPUPS_ROOT");e.scrollLeft=t,e.scrollTop=n}else window.scrollTo(t,n)},getScroll:function(t){if(t.siteAPI.isPopupOpened()){const t=window.document.getElementById("POPUPS_ROOT");return{x:e.get(t,"scrollLeft",0),y:e.get(t,"scrollTop",0)}}return{x:e.isFinite(window.pageXOffset)?window.pageXOffset:window.scrollX,y:e.isFinite(window.pageYOffset)?window.pageYOffset:window.scrollY}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(23),n(3),n(8),n(16),n(6),n(2)],void 0===(i=function(e,t,n,o,i,r,a){"use strict";const s="data";const c=[{error:"Cannot unhide desktop only component",isValid:(t,n,i,r)=>!1!==e.get(i,"hidden")||!o.public.getMobileConversionConfigByName(t,t.dal.get(n),"desktopOnly",r)},{error:"Cannot hide not hiddenable component",isValid:(t,n,i)=>!e.get(i,"hidden",!1)||o.public.isHiddenable(t,n)}],p=[{error:"Unhidden container with children number less than allowed",isValid(t,i,r){const a=o.public.getMinimalChildrenNumber(t,i);if(0===a||e.get(r,"hidden",!1))return!0;const s=function(t,o){const i=t.pointers.components.getChildren(o);return e.reject(i,function(o){return e.get(n.getMobileHintsItem(t,o),"hidden",!1)})}(t,i);return e.size(s)>=a}},{error:"Unhidden structuralItem component with hidden parent",isValid(t,i,r,a){if(!o.public.getMobileConversionConfigByName(t,t.dal.get(i),"structuralItem",a)||e.get(r,"hidden",!1))return!0;const s=t.pointers.components.getParent(i);return!e.get(n.getMobileHintsItem(t,s),"hidden",!1)}}];function l(t,o,i){const r=i||e.get(t.pointers.full.components.getPageOfComponent(o)||t.pointers.components.getPageOfComponent(o),"id",""),a=n.getMobileHintsItem(t,o);!function(t,n,o,i){const r=e.union(c,p);g(t,n,o,i,r)}(t,o,a,r),u(a)}function u(e){e&&i.services.dataValidators.validateDataBySchema(e,s)}function d(e,t,n,o){g(e,t,n,o,c)}function g(t,n,o,i,r){e.forEach(r,function(e){if(!e.isValid(t,n,o,i))throw new Error(e.error)})}return{validateComponentMobileHints:l,validateMobileHintsBySchema:u,validateMobileHintsOnPages:function(t,n){const o={};if(e.forEach(n,function(n){const i=function(t,n){const o=[],i=t.pointers.components.getPage(n,a.VIEW_MODES.DESKTOP);if(!i)return[];const r=t.pointers.components.getChildrenRecursivelyRightLeftRootIncludingRoot(i);return e.forEach(r,function(e){try{l(t,e,n)}catch(n){o.push({componentId:e.id,componentType:t.dal.get(t.pointers.getInnerPointer(e,"componentType")),error:n.message||n.toString()})}}),o}(t,n);e.isEmpty(i)||e.set(o,n,i)}),!e.isEmpty(o))throw{message:"invalid mobileHints are found",error:o}},initialize:function(){r.unregisterHooks([r.HOOKS.MOBILE_HINTS.UPDATE_BEFORE]),r.registerHook(r.HOOKS.MOBILE_HINTS.UPDATE_BEFORE,d)},testAPI:{beforeUpdateValidators:c,finalStructureValidators:p}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(8),n(54),n(403)],void 0===(i=function(e,t,n,o){"use strict";function i(t,n,o){if(!o.mobileHintsQuery)return!1;const i=t.pointers.data.getMobileHintsItem(o.mobileHintsQuery,n);return!(!i||!t.dal.full.isExist(i))&&e.get(t.dal.full.get(i),"hidden",!1)}return{initialize:o.initialize,createMobilePreset:o.createDuplicateMobilePreset,applyPresetsToConversionData:o.applyPresetsToConversionData,shouldCreateMobilePreset:function(o,r){const a=e.get(o.pointers.full.components.getPageOfComponent(r),"id"),s=o.dal.full.get(r);if(!s||i(o,a,s))return!1;if(!1===t.public.getMobileConversionConfigByName(o,s,"createMobilePresets",a))return!1;const c=o.pointers.components.getMobilePointer(r),p=n.getCommittedMobileComponent(o,a,c);return!!p&&!function t(n,o,i){const r=e.reject(n.components||[],e=>i(e))||[],a=e.xor(e.map(r,"id"),e.map(o.components||[],"id"));return!e.isEmpty(a)||e.some(r,n=>{const r=e.find(o.components,{id:n.id});return!r||t(n,r,i)})}(s,p,i.bind(null,o,a))}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(23)],void 0===(i=function(e,t){"use strict";const n=["MENU_AS_CONTAINER"],o=["wysiwyg.viewer.components.MenuContainer"];function i(e,n){const o=t.conversionUtils.getComponentByIdFromStructure("SITE_HEADER",e);if(o)return t.conversionUtils.extractComponentsFromStructureByType(o,n)}function r(n,o){const r=function(n,o){const i=e.cloneDeep(o);return i.components=[],t.conversionUtils.addComponentsTo(n,[i]),i}(n,e.find(t.conversionUtils.getChildren(o),{id:"MENU_AS_CONTAINER"})),a=i(n,["wysiwyg.viewer.components.LoginSocialBar","wysiwyg.viewer.components.LanguageSelector"]);e.isEmpty(a)||t.conversionUtils.addComponentsTo(r,a)}function a(e,n){t.conversionUtils.getComponentByIdFromStructure("MENU_AS_CONTAINER",n)&&(!function(e){const n=i(e,["wysiwyg.viewer.components.MenuContainer"]);t.conversionUtils.addComponentsTo(e,n)}(n),r(e,n))}function s(e,n){const o=t.conversionUtils.getComponentByIdFromStructure("MENU_AS_CONTAINER",e);o&&(t.conversionUtils.removeChildrenFrom(e,[o]),function(e){const n=t.conversionUtils.extractComponentsFromStructureByType(e,["wysiwyg.viewer.components.MenuContainer"]),o=t.conversionUtils.getComponentByIdFromStructure("SITE_HEADER",e);t.conversionUtils.addComponentsTo(o,n)}(n))}return{isMobileOnlyComponentToBeMockedInDesktop:function(t){return e.includes(o,e.get(t,"componentType"))},isMobileOnlyComponent:function(o,i){return t.mobileOnlyComponents.isMobileOnlyComponentId(i)||function(t){return e.includes(n,t)}(i)},handleComponentsBeforeMobileAlgo:function(e,t){a(e,t)},handleComponentsAfterMobileAlgo:function(e,t){s(e,t)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(4),n(8),n(420)],void 0===(i=function(e,t,n,o){"use strict";const i={"wysiwyg.viewer.components.BoxSlideShow":o,"wysiwyg.viewer.components.StateBox":o,"wysiwyg.viewer.components.StateStrip":o,"wysiwyg.viewer.components.StripContainerSlideShow":o};function r(e,t,o){if(!e||!e.dal.isExist(t)||!function(e,t){return i[n.getComponentType(e,t)]}(e,t))throw new Error("invalid args");const r=n.getComponentType(e,t);return i[r][o].call(this,e,t,r)}function a(e,t,n,o){if(!e||!e.dal.isExist(t)||!i[n])throw new Error("invalid args");return i[n][o].call(this,e,t,n)}function s(e,t,n){return a(e,t,n,"canBeMasterChild")}return{getMasterChildren:function(e,t){return r(e,t,"getMasterChildren")},getNonMasterChildren:function(e,t){return r(e,t,"getNonMasterChildren")},isMasterChild:function(e,t,n){return a(e,t,n,"isMasterChild")},toggleMasterChild:function(e,t,n){if(!s(e,t,n))throw new Error("component can't be shown on all states");return a(e,t,n,"toggleMasterChild")},canBeMasterChild:s,getParentCompWithOverflowHidden:function(o,r){const s=function(o,r){if(o.pointers.components.isPage(r))return null;let a=t.getContainer(o,r);for(;a;){const r=n.getComponentType(o,a);if(e.includes(e.keys(i),r))return r;a=t.getContainer(o,a)}return null}(o,r);return!!s&&a(o,r,s,"getParentCompWithOverflowHidden")}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(13),n(16)],void 0===(i=function(e,t,n){"use strict";return{setSiteMetaData:function(o,i){const r=e.omit(i,["preloader","contactInfo","quickActions"])||{},a=e.clone(e.get(i,"preloader"))||{},s=e.clone(e.get(i,"contactInfo"))||{},c=e.clone(e.get(i,"quickActions"))||{},p=n.services.dataValidators;p.validateItem(r,"data",{schemaName:"MobileMetaData"}),p.validateItem(a,"data",{schemaName:"Preloader"}),p.validateItem(s,"data",{schemaName:"ContactInfo"}),p.validateItem(c,"data",{schemaName:"QuickActions"}),i=e.assign(r,{preloader:a},{contactInfo:s},{quickActions:c}),t.setProperty(o,t.PROPERTY_NAMES.SITE_META_DATA,i)},getSiteMetaData:function(e){return t.getProperty(e,t.PROPERTY_NAMES.SITE_META_DATA)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(109),n(62),n(59),n(3)],void 0===(i=function(e,t,n,o,i,r){"use strict";const a=t.constants.DATA_TYPES,s="PAGES_GROUP_COLLECTION",c="PagesGroupCollection",p="PagesGroupData";function l(t){const n=t.pointers.data.getDataItem(s,"masterPage");if(!n)return[];const o=t.pointers.getInnerPointer(n,"groups"),i=t.dal.full.get(o);return e.map(i,function(e,t){return e.pointers.data.getDataItem(t.replace("#",""),"masterPage")}.bind(null,t))}function u(t){return e.map(l(t),y.bind(null,t))}function d(t,n,o){const i=u(t);if(function(t,n){return e.some(t,t=>e.some(n,n=>e.includes(t.pages,n)))}(e.reject(i,{id:n}),o))throw new Error("pagesGroup: page already exists in another pagesGroup")}function g(t,i){t.dal.isExist(i)&&(!function(e,t){const i=o.getSospModeByPagesGroup(e,t);i&&n.removeSOSPMode(e,i.modeId)}(t,i),function(t,n){const o=t.pointers.data.getDataItemFromMaster(s),i=t.pointers.getInnerPointer(o,"groups"),r=t.dal.get(i),a=e.pull(r,`#${n.id}`);t.dal.set(i,a)}(t,i),r.removeDataItemRecursively(t,i))}function f(t,n){const o=e.find(u(t),n);return o?t.pointers.data.getDataItem(o.id,"masterPage"):null}function m(e,t){return f(e,{id:t})}function y(e,t){return t?e.dal.get(t):null}return{createPagesGroup:function(t,n,o){const i=function(t,n){const o=r.createDataItemByType(t,p);return e.defaults(n,o)}(t,o);!function(t,n,o){const i=u(t);if(e.isEmpty(n.groupName))throw new Error("pagesGroup: groupName is required");if(e.some(i,["groupName",n.groupName]))throw new Error("pagesGroup: groupName must be unique");if(e.has(n,"appId")&&e.some(i,["appId",n.appId]))throw new Error("pagesGroup: appId must be unique");d(t,o,n.pages)}(t,i,n),r.addSerializedDataItemToPage(t,"masterPage",i,n),function(e){return Boolean(r.getDataItemById(e,s))}(t)||function(e){const t=r.createDataItemByType(e,c);r.addSerializedDataItemToPage(e,"masterPage",t,s)}(t),function(e,t){const n=e.pointers.data.getDataItemFromMaster(s),o=e.pointers.getInnerPointer(n,"groups");e.dal.push(o,`#${t}`)}(t,n)},removePagesGroup:g,getNewPagesGroupId:function(){return i.generateNewId(a.data)},getAll:l,getPagesGroupById:m,getPagesGroupByGroupName:function(e,t){return f(e,{groupName:t})},getPagesGroupByAppId:function(e,t){return f(e,{appId:t})},getPagesGroupByPageId:function(t,n){const o=`#${n}`;return f(t,function(t){return e.includes(t.pages,o)})},getComponentPagesGroup:function(e,t){const o=n.getComponentPagesGroupId(e,t);return o?m(e,o):null},serializePagesGroup:y,addPageToPagesGroup:function(t,n,o){const i=t.pointers.getInnerPointer(n,"pages"),r=t.dal.get(i),a=`#${o}`;r&&!e.includes(r,a)&&(d(t,n.id,[a]),t.dal.push(i,a),t.siteAPI.updateActiveSOSPModes())},removePageFromPagesGroup:function(t,n,o){const i=t.pointers.getInnerPointer(n,"pages"),r=t.dal.get(i),a=`#${o}`;if(e.includes(r,a)){const o=e.without(r,a);e.isEmpty(o)?g(t,n):t.dal.set(i,o),t.siteAPI.updateActiveSOSPModes()}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(170),n(0),n(23),n(37),n(54),n(426),n(427),n(94),n(171),n(431),n(2),n(6),n(1),n(93),n(8),n(4),n(3),n(113)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l,u,d,g,f,m,y,E){"use strict";const I=(e,t,n)=>e.pointers.full.components.getComponent(t,e.pointers.components.getPage(n,l.VIEW_MODES.DESKTOP)),S=(e,t,n)=>e.pointers.components.getComponent(t,e.pointers.components.getPage(n,l.VIEW_MODES.MOBILE)),h=(e,n,o,i)=>t.get(f.public.getMobileConversionConfig(e,e.dal.get(n),o),i),{isMobileOnlyComponent:P}=E;function A(t,n){const o=t.pointers.components.getPage(n,l.VIEW_MODES.MOBILE);e.updatePageProperties(t,o,{minHeight:null})}function T(e,t){const n=e.dal.get(e.pointers.getInnerPointer(t,"componentType"));u.executeHook(u.HOOKS.MOBILE_CONVERSION.BEFORE,n,[e,t])}function v(e){!function(e){const n=i.getChangedPagesPointers(e),o=t.map(e.siteAPI.getAllRenderedRootIds(),t=>e.pointers.page.getPagePointer(t));t.forEach(t.uniqBy(n.concat(o),"id"),t=>T(e,t))}(e),o.runPartialConversionAllPages(e)}function C(e,t){return e.dal.get(e.pointers.getInnerPointer(t,"componentType"))===l.MOBILE_ONLY_COMPONENT_TYPES.BACK_TO_TOP_BUTTON_LEGACY}function _(e,t,n){const o=e.pointers.components.getMasterPage(l.VIEW_MODES.MOBILE),i=m.getComponentToAddRef(e,o,null,l.MOBILE_ONLY_COMPONENTS.BACK_TO_TOP_BUTTON),r=p.getBackToTopButtonDefinition(t,n);m.add(e,i,o,r)}function O(e,n){return t.reduce(n,(n,o,i)=>t.set(n,i,function(e,n,o){const i=t.flatMap(n,function(n){if(P(e,n))return[];const i=e.pointers.components.getPage(o,l.VIEW_MODES.DESKTOP),r=e.pointers.components.getComponent(n,i);return h(e,r,o,"filterChildrenWhenHidden")?t.map(e.pointers.components.getChildrenRecursively(r),"id"):[]});return t.difference(n,i)}(e,o,i)),{})}function D(e,n){const o=e.pointers.components.getPage(n,l.VIEW_MODES.DESKTOP);if(!o)return null;const i=e.pointers.components.getChildrenRecursively(o),r=t(i).filter(n=>t.get(y.getMobileHintsItem(e,n),"hidden")&&t.get(y.getMobileHintsItem(e,n),"displayedCompId",n.id)===n.id).map("id").value();return n!==l.MASTER_PAGE_ID?r:(function(e,t){!w(e,l.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER)&&!w(e,l.MOBILE_ONLY_COMPONENTS.TINY_MENU)&&t.push(l.MOBILE_ONLY_COMPONENTS.TINY_MENU),w(e,l.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER)&&!w(e,l.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER_TOGGLE)&&t.push(l.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER_TOGGLE),w(e,l.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER)&&!w(e,l.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER_EXPANDABLE_MENU)&&t.push(l.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER_EXPANDABLE_MENU)}(e,r),t.compact(r))}function w(e,t){const n=S(e,t,l.MASTER_PAGE_ID);return n&&e.dal.isExist(n)}function M(e,n){const o=n?[n]:t.keys(e.dal.get(e.pointers.page.getAllPagesPointer())),i=t.reduce(o,(n,o)=>t.set(n,o,D(e,o)),{});return n?i[n]:i}return{initialize:function(e){var n,o;n=u.HOOKS.SWITCH_VIEW_MODE.MOBILE,o=t.bind(v,null,e),u.unregisterHooks([n]),u.registerHook(n,o),g.initialize(e)},reLayoutPage:function(e,t){t=t||e.siteAPI.getCurrentUrlPageId(),T(e,e.pointers.page.getPagePointer(t)),A(e,t);const n=i.getPage(e,t);o.runMobileConversionOnPage(e,n),u.executeHook(u.HOOKS.RELAYOUT_MOBILE_PAGE.AFTER,null,[e,t])},enableBackToTopButton:function(e,t){if("boolean"!=typeof t)throw new Error("invalid parameter type");const n=l.MASTER_PAGE_ID,i=S(e,l.MOBILE_ONLY_COMPONENTS.BACK_TO_TOP_BUTTON,n),r=i&&e.dal.isExist(i);t&&!r&&o.addMobileOnlyComponent(e,l.MOBILE_ONLY_COMPONENTS.BACK_TO_TOP_BUTTON),!t&&r&&a.hideMobileComponent(e,i,n,{updateLayout:!1})},toggleBackToTopButton:function(e,t,n){const o=S(e,l.MOBILE_ONLY_COMPONENTS.BACK_TO_TOP_BUTTON,l.MASTER_PAGE_ID),i=e.dal.isExist(o);i&&t&&C(e,o)?(m.deleteComponent(e,o),_(e,!0,n)):!i&&t?_(e,!1,n):i&&!t&&m.deleteComponent(e,o)},isLegacyBackToTopButton:C,setComponentDisplayMode:r.setComponentDisplayMode,getTinyMenuDefaultPosition:n.conversionUtils.getTinyMenuDefaultPosition,hiddenComponents:{get:M,getFiltered:function(e,n){const o=M(e,n),i=O(e,n?t.set({},n,o):o);return n?i[n]:i},hide:function(e,n,o={updateLayout:!0}){if(n=e.pointers.components.getMobilePointer(n),!e.dal.isExist(n))return;const i=e.pointers.components.getPageOfComponent(n).id;A(e,i);const r=I(e,n.id,i),s={hidden:!0};d.displayedOnlyStructureUtil.isDisplayedComponent(n.id)&&t.assign(s,{displayedCompId:n.id}),g.updateProperty(e,s,r,{updateChildren:!0,childrenSourceView:l.VIEW_MODES.MOBILE},i),a.hideMobileComponent(e,n,i,o)},show:function(e,t,r,a){if(!r||!a)throw new Error("function must receive component id and page id");if(P(e,r))return void function(e,t){switch(t){case l.MOBILE_ONLY_COMPONENTS.TINY_MENU:o.addMobileOnlyComponent(e,l.MOBILE_ONLY_COMPONENTS.TINY_MENU,{commitConversionResults:!1});break;case l.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER_TOGGLE:c.toggle.add(e);break;case l.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER_EXPANDABLE_MENU:c.expandableMenu.add(e)}}(e,r);const p=I(e,r,a);g.updateProperty(e,{hidden:!1},p,{updateChildren:!0,childrenSourceView:l.VIEW_MODES.DESKTOP});const u=i.getPage(e,a),d=n.conversionUtils.extractMobilePage(u),f=s.getConversionSettings({conversionType:"MERGE_UNHIDE"});o.runMobileMergeOnPage(e,u,d,f)},set:function(e,o,i){const r=e.dal.full.get(e.pointers.components.getPage(o,l.VIEW_MODES.DESKTOP)),a=t(d.dataUtils.getAllCompsInStructure(r)).reject(n.conversionUtils.isPageComponent).map("id").value();t.forEach(a,n=>{const r=t.includes(i,n),a=I(e,n,o);g.updateProperty(e,{hidden:r},a)})}},isMobileOnlyComponent:P,isMobileOnlyComponentExistOnStructure:w,mobileOnlyComps:l.MOBILE_ONLY_COMPONENTS,implicitFontSize:function(e,t){return d.mobileUtils.convertFontSizeToMobile(t,1)},getMobileComponentToShow:S}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(19)],void 0===(i=function(e,t,n){"use strict";const o=t.imageClientApi;return{getBlankPageStructure:function(t,o){const i={componentType:"mobile.core.components.Page",type:"Page",id:"mainPage",styleId:"p2",skin:"skins.core.InlineSkin",layout:{x:0,y:0,width:980,height:500,anchors:[]},data:{type:"Page",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},title:"Blank",hideTitle:!0,icon:"",descriptionSEO:"",metaKeywordsSEO:"",pageTitleSEO:"",pageUriSEO:"",hidePage:!1,underConstruction:!1,pageBackgrounds:null},components:[]};return i.data=e.assign(i.data,{pageUriSEO:n.getValidPageUriSEO(t,o,"blank"),pageBackgrounds:e.get(n.getPageDataWithoutIds(t,t.siteAPI.getPrimaryPageId()),"pageBackgrounds")}),i},getBlankPopupPageStructure:function(t){const n={componentType:"mobile.core.components.Page",type:"Page",id:"mainPage",styleId:"p2",skin:"skins.core.InlineSkin",layout:{x:0,y:0,width:980,height:500,anchors:[]},data:{type:"Page",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},title:"Blank",hideTitle:!0,icon:"",descriptionSEO:"",metaKeywordsSEO:"",pageTitleSEO:"",pageUriSEO:"",hidePage:!1,underConstruction:!1,pageBackgrounds:null},components:[]};n.data=e.assign({},n.data,{pageBackgrounds:{desktop:{custom:!0,ref:{type:"BackgroundMedia",color:"{color_11}",alignType:"top",fittingType:"fill",scrollType:"fixed"},isPreset:!1},mobile:{custom:!0,ref:{type:"BackgroundMedia",color:"{color_11}",alignType:"top",fittingType:"fill",scrollType:"fixed"},isPreset:!0}},indexable:!1,isPopup:!0});const o={popup:{closeOnOverlayClick:!0}};return n.props=e.defaults({type:"PageProperties",metaData:{schemaVersion:"1.0"},mobile:e.cloneDeep(o),desktop:e.cloneDeep(o)},n.props),n.components=[{type:"Container",components:[],skin:"wysiwyg.viewer.skins.stripContainer.DefaultStripContainer",props:{type:"PopupContainerProperties",metaData:{schemaVersion:"1.0"},horizontalAlignment:"center",verticalAlignment:"center",alignmentType:"nineGrid",horizontalOffset:0,verticalOffset:0},design:{type:"MediaContainerDesignData",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},background:{type:"BackgroundMedia",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},color:"#FFFFFE",colorOpacity:1,alignType:"center",fittingType:"fill",scrollType:"none",colorOverlay:"",colorOverlayOpacity:0}},layout:{width:340,height:276,x:620,y:80,scale:1,rotationInDegrees:0,anchors:[]},componentType:"wysiwyg.viewer.components.PopupContainer",style:{type:"TopLevelStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{"alpha-bg":"1",bg:"rgba(255,255,255,1)"},propertiesSource:{"alpha-bg":"value",bg:"value"},groups:{}},componentClassName:"wysiwyg.viewer.components.PopupContainer",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.stripContainer.DefaultStripContainer",id:"style-ili7m0pe"}}],n},getBlankBackground:function(){return{desktop:{custom:!0,ref:{type:"BackgroundMedia",color:"{color_11}",alignType:o.alignTypes.CENTER,fittingType:o.fittingTypes.SCALE_TO_FILL,scrollType:"none"},isPreset:!0},mobile:{custom:!0,ref:{type:"BackgroundMedia",color:"{color_11}",alignType:o.alignTypes.CENTER,fittingType:o.fittingTypes.SCALE_TO_FILL,scrollType:"none"},isPreset:!0}}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(43),n(20)],void 0===(i=function(e,t,n){"use strict";const o=e.template("<%= baseUrl %>/api/code/apps?msid=<%= metasiteId %>"),i=e.template("<%= baseUrl %>/api/code/apps/<%= gridAppId %>/clone?msid=<%= metasiteId %>&isFirstSave=<%= isFirstSave %>"),r=e.template("<%= baseUrl %>/api/code/apps/<%= gridAppId %>/save?msid=<%= metasiteId %>"),a=({signedInstance:t})=>e.pickBy({"X-Wix-Si":t}),s=({url:n,data:o,signedInstance:i})=>e.assign({url:n,type:t.requestTypes.POST,contentType:"application/json",data:o,headers:a({signedInstance:i}),timeout:15e3,xhrFields:{withCredentials:!0},crossDomain:!0});function c(e){return e.payload}return{create:({baseUrl:e,metasiteId:n,signedInstance:i})=>{const r=o({baseUrl:e,metasiteId:n}),a=s({url:r,data:{},signedInstance:i});return t.sendRequestObj(a).then(c)},save:({baseUrl:e,gridAppId:n,metasiteId:o,signedInstance:i})=>{const a=r({baseUrl:e,gridAppId:n,metasiteId:o}),c=s({url:a,data:{},signedInstance:i});return t.sendRequestObj(c)},clone:({baseUrl:e,gridAppId:n,metasiteId:o,signedInstance:r,isFirstSave:a})=>{const p=i({baseUrl:e,gridAppId:n,metasiteId:o,isFirstSave:a}),l=s({url:p,data:{},signedInstance:r});return t.sendRequestObj(l).then(c)},getBaseUrlFromPS:function(e){const t=e.pointers.general.getServiceTopology();return e.dal.get(e.pointers.getInnerPointer(t,n.WIX_CODE_SERVICE_URL_KEY))}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(2),n(3),n(4),n(17),n(8),n(73),n(49)],void 0===(i=function(e,t,n,o,i,r,a,s){"use strict";const c=128,p={VALID:"VALID",ALREADY_EXISTS:"ALREADY_EXISTS",TOO_SHORT:"TOO_SHORT",TOO_LONG:"TOO_LONG",INVALID_NAME:"INVALID_NAME"};function l(t,n){return e(n).filter(y.bind(this,t)).keyBy(y.bind(this,t)).value()}function u(e,t){return e.pointers.full.components.getChildrenRecursivelyRightLeftRootIncludingRoot(t)}function d(t,n,o){const i=u(t,o),a=l(t,i),s=e.assign({},a,n),c=e.groupBy(i,function(e){return r.getDefaultNickname(t,e)}),p=e.flatMap(c,function(n,o){const i=function(t,n){const o=new RegExp(`${t}(\\d+)`);return e(n).map(function(t,n){const i=o.exec(n);return i?e.parseInt(i[1]):null}).concat(0).max()+1}(o,s);return function(t,n,o,i){return e(n).filter(e=>P(t,e)).map(function(e){const n=o+i++;return I(t,e,n),e}).value()}(t,n,o,i)});return e.assign(a,l(t,p))}function g(t,n,o){const i=t.pointers.components.getPage("masterPage",o),r=l(t,u(t,i)),a=e.reduce(n,function(n,i){const a=t.pointers.components.getPage(i,o),s=d(t,r,a);return e.assign(n,s)},{});d(t,a,i)}function f(n,o,i){if(e.includes(o,"masterPage"))return m(n,i);i=i||s.getViewMode(n),g(n,o,t.VIEW_MODES.DESKTOP),i!==t.VIEW_MODES.DESKTOP&&(!function(n,o,i){e(o).concat("masterPage").uniq().forEach(function(o){const r=n.pointers.components.getPage(o,i),a=u(n,r),s=n.pointers.components.getPage(o,t.VIEW_MODES.DESKTOP);e(a).filter(e=>P(n,e)).forEach(function(e){const t=n.pointers.components.getComponent(e.id,s);if(t){const o=y(n,t);o&&I(n,e,o)}})})}(n,o,i),g(n,o,i))}function m(t,n){const o=e.map(i.popupPages.getDataList(t),"id");f(t,i.getPageIdList(t).concat(o),n)}function y(e,t){const n=E(a.get(e,t));if(n)return n.role}function E(t){return"WixCodeConnectionItem"===e.get(t,[0,"type"])&&t[0]}function I(e,t,o){if(h(e,t,o)!==p.VALID)throw new Error("The new nickname you provided is invalid");let i=a.get(e,t);const r=E(i);if(r)r.role=o;else{i=[{type:"WixCodeConnectionItem",role:o}].concat(i)}n.updateConnectionsItem(e,t,i)}function S(t,n,o,i){if(!o)return!1;i=i?t.pointers.full.components.getComponent(i.id,n):void 0;const r=function(t,n){const o=n.type;return"masterPage"===n.id?e.map(t.pointers.page.getNonDeletedPagesPointers(!0),function(e){return t.pointers.full.components.getPage(e.id,o)}):[n,t.pointers.full.components.getMasterPage(o)]}(t,n);return e(r).flatMap(t.pointers.full.components.getChildrenRecursivelyRightLeftRootIncludingRoot).reject(e.isEqual.bind(e,i)).map(y.bind(this,t)).includes(o)}function h(t,n,i){if(e.isEmpty(i))return p.TOO_SHORT;if(i.length>c)return p.TOO_LONG;return S(t,o.getPage(t,n),i,n)?p.ALREADY_EXISTS:function(e){return!/^[a-zA-Z0-9]+$/.test(e)}(i)?p.INVALID_NAME:p.VALID}function P(e,t){return!e.pointers.components.isMasterPage(t)&&!y(e,t)}return{generateNicknamesForSite:m,getNickname:y,setNickname:I,removeNickname:function(e,t){let o=a.get(e,t);E(o)&&((o=o.slice(1)).length>0?n.updateConnectionsItem(e,t,o):n.removeConnectionsItem(e,t))},validateNickname:h,generateNicknamesForPages:f,hasComponentWithThatNickname:S,getComponentsInPage:u,VALIDATIONS:p}}.apply(t,o))||(e.exports=i)},function(e,t){e.exports=f},function(e,t,n){var o,i;o=[n(0),n(6),n(461),n(69),n(123),n(44),n(75),n(468),n(469),n(32),n(3),n(20),n(33),n(25),n(48),n(470),n(45),n(183),n(471),n(1),n(50),n(472),n(473),n(154),n(38),n(55),n(26),n(101),n(120)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l,u,d,g,f,m,y,E,I,S,h,P,A,T,v,C,_,O,D){"use strict";const w=S.urlUtils.joinURL;function M(e){a.handleSchemaInvalidationActions(),function(e){p.initApp(e,x(e,"dbsm-viewer-app","dbsm-editor-app","dataBinding"))}(e),function(e){p.initApp(e,x(e,"","wix-code-editor-app","wix-code"))}(e)}function b(e){e.siteAPI.destroyAppsContainer(),e.siteAPI.initApp()}const R=e=>new Promise((t,n)=>{const o=_.isFirstSave(e),i=e.siteAPI.isQaMode();if(o||i)return t();O.save(e,t,n,!1)}),N=e=>t=>(D.generateNicknamesForSite(e),t);function x(t,n,i,r){function a(t){return e(t||"").split(",").invokeMap("split",":").fromPairs().value()}function s(e,t,n){const o=w(e.scriptsDomainUrl,"services",t);return n?w(o,n):e.scriptsLocationMap[t]}if(o.isProvisioned(t)){const o=t.pointers.general.getServiceTopology(),c=t.dal.get(o),p=t.siteAPI.getCurrentUrl(),l=a(e.get(p,["query","viewerPlatformAppSources"]))[r],u=a(e.get(p,["query","editorPlatformAppSources"]))[r],d={appDefinitionId:r};return n&&e.set(d,"appFields.platform.viewerScriptUrl",w(s(c,n,l),"/app.js")),i&&(e.set(d,"appFields.platform.editorScriptUrl",w(s(c,i,u),"/editorAppModule.js")),d.editorArtifact=i),d}}return t.registerHook(t.HOOKS.PLATFORM.APP_PROVISIONED,b),t.registerHook(t.HOOKS.PLATFORM.APP_UPDATED,b),{initializeWixCode:function(t){n.initPaths(t),i.init(t),o.isProvisioned(t)&&(M(t),a.prefetchUserCode(t));const r=t.pointers.wixCode.getIsAppReadOnly();t.dal.set(r,!function(){try{return t.dal.wasValueChangedSinceLastSnapshot("before-autosave-apply",t.pointers.wixCode.getGridAppId())}catch(e){return!1}}()),function(t){const n=e(t).thru(d.getAppsData).filter("platformApp").map("displayName").value();e.isEmpty(n)||g.event(t,f.EDITOR_PLATFORM_APPS_LOADED,{app_list:n,number_of_apps:n.length})}(t)},provision:function(t,n){const i=r.trace(t,{action:"provision"});return n=e.defaults({},n,{onSuccess:e.noop,onError:e.noop}),o.provision(t).then(N(t)).then(function(e){return b(t),M(t),e}).then(function(e){return t.setOperationsQueue.asyncPreDataManipulationComplete(),R(t).then(()=>{i({message:e}),n.onSuccess(e)})}).catch(function(e){t.setOperationsQueue.asyncPreDataManipulationComplete(null,new Error(`Wix Code provision failed: ${e}`)),i({level:y.log.levels.ERROR,message:e}),n.onError(e)})},isProvisioned:o.isProvisioned,getClientSpec:function(t){return e.head(d.filterAppsDataByType(t,u.WIX_CODE_SPEC_TYPE))},generateRemoteModelInterface:function(t,n,o){if(!e(t.pointers.page.getNonDeletedPagesPointers(!1)).map("id").includes(n))throw new Error(`contextId - ${n} is invalid`);const i=t.siteDataAPI.siteData,r=m.modelBuilderDataHelper.getApi(i);return m.modelBuilder.build({runtimeDal:t.siteAPI.getRuntimeDal(),dataAPI:r,contextIds:[n],onUpdateCallback:o,componentsFetcher:(...e)=>h.wixCode.componentsFetcher(t.siteDataAPI,...e),getCompReactClass:I.compFactory.getCompReactClass,performanceLogger:S.loggingUtils.performance,getGhostStructure:()=>i.getGhostStructureData()})[n]},getWidgetRef:function(e,t){const n=e.pointers.components,o=n.getPageOfComponent(t);return o?n.isMasterPage(o)?function(e,t){const n=e.siteAPI.getCurrentUrlPageId(),o=S.constants.VIEW_MODES,i=e.siteAPI.isMobileView()?o.MOBILE:o.DESKTOP;return t.getPage(n,i)}(e,n):o:null},duplicatePageCode:function(e,t,n){o.isProvisioned(e)&&c.duplicatePageCode(e,t,n)},getCompSdkType:function(t,n){const o=t.dal.get(t.pointers.getInnerPointer(n,"componentType")),i=l.getDataItemPointer(t,n),r=i&&t.dal.get(i),a=e.get(T.getWidgetData(t,r),"widgetId")||null,s=P.getWidgetDisplayName(A,a);return s||E.typeUtils.getFullSdkType(o,a)},log:{levels:r.levels,trace:r.trace},fileSystem:a,pages:s,userScripts:{isUserCodeUrl:function(e,t){const n=v.getExistingWixCodeAppFromPS(e),o=e.siteDataAPI.siteData;return y.wixCodeUserScriptsService.isUserCodeUrl(t,n,o)},getSourceMapUrl:function(e,t){const n=C.getGridAppId(e),o=v.getExistingWixCodeAppFromPS(e),i=e.siteDataAPI.siteData;return y.wixCodeUserScriptsService.getSourceMapUrl(t,n,o,i)}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(45)],void 0===(i=function(e,t){"use strict";function n(e){!function(e){e.dal.set(e.pointers.wixCode.getBundleCacheKillerMap(),{})}(e),function(e,t){const n=o(e.dal.get(t));e.dal.set(t,n)}(e,e.pointers.wixCode.getGlobalBundleCacheKiller())}function o(e){const t=Date.now().toString();return t===e?`${t}_1`:t}return{init:function(e){n(e)},getNewCacheKillerValue:o,notifyItemModified:function(e,o){const i=o.location;t.wixCodeUserScriptsService.filePathAffectsBundles(i)&&n(e)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(43),n(125),n(100),n(20)],void 0===(i=function(e,t,n,o,i,r){"use strict";const a="application/json;charset=UTF-8",s="text/plain;charset=UTF-8",c="public",p="backend",l=".schemas",u="/",d=/^\/file\/[^\/]+\/(.+)$/;function g(e,t){return e.match(d)?e:`/file/${t.appId}/${e}`}function f(e){const t=e.match(d);return t?t[1]:e}function m(t){return e.assign({},t,{location:f(t.location)})}function y(t){return e.isString(t)}function E(t){return e.isObject(t)&&t.diff&&e.isArray(t.diff)}function I(e){return e?`?${t.urlUtils.toQueryString(e)}`:""}function S(e){return`${e.baseUrl}/v1`}function h(t,o){return t.headers=e.assign({"X-Wix-Si":o.signedInstance},t.headers),e.assign(t,{xhrFields:{withCredentials:!0},crossDomain:!0}),n.sendRequestObj(t)}function P(e,t,n,o){return e.url=function(e,t,n){return S(e)+g(t,e)+I(n)}(t,n,o),h(e,t)}function A(e,t,n,o){return e.url=function(e,t,n){return`${S(e)}/find${g(t,e)}${I(n)}`}(t,n,o),h(e,t)}function T(t,r,s,c){if(!o.isFolder(s))return Promise.reject(new i.ArgumentError("parentFolder","fileSystemService.doCreateFileOrFolder",s,"folder object"));if(p=r,!(e.isString(p)&&p.length>0))return Promise.reject(new i.ArgumentError("itemName","fileSystemService.doCreateFileOrFolder",r));var p;const l={name:r,localTimeStamp:0,directory:c};return P({type:n.requestTypes.POST,contentType:a,headers:{"X-Create-Options":"no-overwrite"},timeout:15e3,data:JSON.stringify(l)},t,s.location).then(m)}function v(e,t,r,s,c){if(!o.isFileSystemItem(r))return Promise.reject(new i.ArgumentError("fileSystemItem","fileSystemService.doCopyOrMove",r));if(!o.isFolder(s))return Promise.reject(new i.ArgumentError("targetFolder","fileSystemService.doCopyOrMove",s,"folder object"));if(!c){const e=r.location.split(u);c=e.pop()||e.pop()}const p={"X-Create-Options":`no-overwrite,${t}`},l={name:c,location:g(r.location,e)};return P({type:n.requestTypes.POST,contentType:a,headers:p,timeout:15e3,data:JSON.stringify(l)},e,s.location).then(m)}function C(e,t){const n=e.replace(new RegExp(`${u}*$`),"");return{virtual:!0,localTimeStamp:0,eTag:'"virtual"',name:n.split(u).pop(),length:0,directory:Boolean(t),location:n+(t?u:""),attributes:{readOnly:!1}}}return{getRoots:function(){return{schemas:C(l,!0),public:C(c,!0),pages:C(`${c}/${r.PAGES_ROOT}`,!0),backend:C(p,!0)}},createFolder:function(e,t,n){return T(e,t,n,!0)},deleteItem:function(e,t){return o.isFileSystemItem(t)?P({type:n.requestTypes.DELETE,timeout:15e3},e,t.location):Promise.reject(new i.ArgumentError("location","fileSystemService.deleteItem",t))},copy:function(e,t,n,o){return v(e,"copy",t,n,o)},move:function(e,t,n,o){return v(e,"move",t,n,o)},getChildren:function(t,r){return o.isFolder(r)?P({type:n.requestTypes.GET},t,r.location,{depth:1}).then(function(t){return e.map(t.children||[],m)}):Promise.reject(new i.ArgumentError("parentFolder","fileSystemService.getChildren",r,"folder object"))},getMetadata:function(e,t){return o.isFileSystemItem(t)?P({type:n.requestTypes.GET},e,t.location,{parts:"meta"}).then(m):Promise.reject(new i.ArgumentError("fileSystemItem","fileSystemService.getMetadata",t,"file system object"))},readFile:function(e,t){return o.isFileSystemItem(t)?P({type:n.requestTypes.GET},e,t.location):Promise.reject(new i.ArgumentError("filePath","fileSystemService.readFile",t,"file object"))},writeFile:function(e,t,r){return o.isFileSystemItem(t)?y(r)||E(r)?"string"==typeof r?function(e,t,o){if(!y(o))return Promise.reject(new i.ArgumentError("content","fileSystemService.overrideFileContent",o,"string"));const r={"If-Match":t.eTag};return P({type:n.requestTypes.PUT,headers:r,contentType:s,log:!1,data:o},e,t.location).then(m)}(e,t,r):function(e,t,o){if(!E(o))return Promise.reject(new i.ArgumentError("partialChange","fileSystemService.patchFileContent",o,"partial change with diff object"));const r={"X-HTTP-Method-Override":"PATCH","If-Match":t.eTag};return P({type:n.requestTypes.POST,headers:r,contentType:s,log:!1,data:JSON.stringify(o)},e,t.location).then(m)}(e,t,r):Promise.reject(new i.ArgumentError("content","fileSystemService.writeFile",r,"string or partial-change object")):Promise.reject(new i.ArgumentError("filePath","fileSystemService.writeFile",t,"file object"))},getVirtualDescriptor:C,findByExtension:function(t,r,a){if(!o.isFolder(r))return Promise.reject(new i.ArgumentError("parentFolder","fileSystemService.findByExtension",r,"folder object"));if(e.isEmpty(a))return Promise.reject(new i.ArgumentError("extension","fileSystemService.findByExtension",a,"empty extension"));const s={extension:e.startsWith(a,".")?a:`.${a}`};return A({type:n.requestTypes.GET},t,r.location,s).then(function(t){return e.map(t.items||[],m)})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(126)],void 0===(i=function(e,t){"use strict";const n="public/pages";function o(t){return e.isObject(t)&&t.name&&t.location}function i(e){return o(e)&&e.directory}function r(e){return o(e)&&!e.directory}function a(t){return e.last(t.location.split("/"))}function s(t){return r(t)&&3===t.location.split("/").length&&e.startsWith(t.location,n)}return{isFileSystemItem:o,isFolder:i,isFile:r,isInsideFolder:function(e,t){return i(e)&&0===t.location.indexOf(e.location)},getFileName:a,isPagesFolder:function(t){return i(t)&&e.startsWith(t.location,n)},isPageFile:s,isSystemFolder:function(n){return i(n)&&e.includes(e.values(t),n.location.toLowerCase().replace(/\/*$/,""))},getParentFolderPath:function(e){const t=e.location.replace(/\/$/,"").split("/");return t.pop(),t.join("/")},getPageId:function(e){if(s(e))return a(e).replace(".js","")}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{PUBLIC:"public",PAGES:"public/pages",BACKEND:"backend",SCHEMAS:".schemas"}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(0),n(187),n(44),n(20),n(188)],void 0===(i=function(e,t,n,o,i){"use strict";function r(e,t,n){return e.dal.isExist(t)?e.dal.get(t):n}function a(e,t){e.dal.isExist(t)&&e.dal.remove(t)}function s(t,o,i){if(e.isUndefined(i)){n.trace(t,{action:"filesDAL.loadFileContent",message:{filePath:o}})({message:new Error("about to set file content to undefined"),level:n.levels.ERROR})}const r=t.pointers.wixCode.getLoadedFileContent(o);t.dal.isExist(r)||t.dal.set(r,i)}function c(t,n){return e.some([t.pointers.wixCode.getLoadedFileContent(n),t.pointers.wixCode.getModifiedFileContent(n)],t.dal.isExist)}function p(t){return e.orderBy(t,["directory","name"],["desc","asc"])}function l(e,t){const n=e&&e.getIn(t);return n?n.toJS():null}function u(n,o,i){return e.mapValues(o,function(e,r){return t.isUndoableFile(r)?t.assembleUndoableFile(r,n[r],o[r],i[r]):o[r]})}function d(e){if(!e)return null;const n=l(e,o.paths.LOADED_FILE_CONTENTS),i=l(e,o.paths.MODIFIED_FILE_CONTENTS),r=l(e,o.paths.UNDOABLE_MODIFIED_FILE_CONTENTS),a=l(e,o.paths.FILE_PATH_TO_ID_MAP);return u(n,i,t.getUndoableContentByPath(r,a))}function g(t,n){return e.transform(n,function(n,o,i){o!==e.get(t,i)&&n.push({fileId:i,content:o})},[])}function f(t,n){return e.transform(n,function(o,i,r){if(e.get(t,r))return;let a=i;for(;n[a];)a=n[a];o.push({destFileId:r,srcFileId:a})},[])}function m(e,n){const i=d(e),a=function(e){const n=r(e,e.pointers.wixCode.getLoadedFileContentMap(),{}),o=r(e,e.pointers.wixCode.getModifiedFileContentMap(),{}),i=r(e,e.pointers.wixCode.getUndoableModifiedFileContentMap(),{}),a=r(e,e.pointers.wixCode.getFilePathToIdMap(),{});return u(n,o,t.getUndoableContentByPath(i,a))}(n),s=e&&e.getIn(o.paths.DUPLICATED_FILES_INFO)?e.getIn(o.paths.DUPLICATED_FILES_INFO).toJS():{},c=n.dal.get(n.pointers.wixCode.getDuplicatedFilesInfoMap()),p=r(n,n.pointers.wixCode.getDirectoryFlagByDeletedPathMap(),{});return{toSave:g(i,a),toCopy:f(s,c),toDelete:p}}return{writeFile:function(o,i,r){e.isUndefined(r)&&n.trace(o,{action:"filesDAL.writeFile",message:{filePath:i}})({message:new Error("about to set file content to undefined"),level:n.levels.ERROR});const a=o.pointers.wixCode.getModifiedFileContent(i);o.dal.set(a,r),t.isUndoableFile(i)&&t.setUndoableContent(o,i,r)},loadFileContent:s,readFile:function(n,o){if(t.isUndoableFile(o))return function(e,n){const o=r(e,e.pointers.wixCode.getLoadedFileContent(n),null),i=r(e,e.pointers.wixCode.getModifiedFileContent(n),null),a=t.getUndoableContent(e,n);return null===o&&null===i&&null===a?null:t.assembleUndoableFile(n,o,i,a)}(n,o);const i=e.find([n.pointers.wixCode.getModifiedFileContent(o),n.pointers.wixCode.getLoadedFileContent(o)],n.dal.isExist);return i?n.dal.get(i):null},getSourceFilePath:function(e,t){const n=e.pointers.wixCode.getDuplicatedFilesInfoMap(),o=e.dal.get(n);for(;o[t];)t=o[t];return t},markFileForDuplication:function(e,t,n){const o=e.pointers.wixCode.getDuplicatedFilesInfoMap(),i=e.dal.get(o);i[n]=t,e.dal.set(o,i)},updateDuplicates:function t(n,o,i){const r=n.pointers.wixCode.getDuplicatedFilesInfoMap(),a=n.dal.get(r),p=e.transform(a,function(e,t,i){i!==o||c(n,t)?t!==o||c(n,i)||e.push(i):e.push(t)},[]);e.forEach(p,function(e){s(n,e,i)}),e.forEach(p,function(e){t(n,e,i)})},moveFile:function(t,n,o){if(c(t,o))throw new Error(`target file [${o}] already exists`);e.forEach([t.pointers.wixCode.getLoadedFileContent,t.pointers.wixCode.getModifiedFileContent,t.pointers.wixCode.getFilePathId],function(e){!function(e,t,n){e.dal.isExist(t)&&(e.dal.set(n,e.dal.get(t)),e.dal.remove(t))}(t,e(n),e(o))})},deleteFile:function(e,t){a(e,e.pointers.wixCode.getLoadedFileContent(t)),a(e,e.pointers.wixCode.getModifiedFileContent(t)),a(e,e.pointers.wixCode.getFilePathId(t))},deleteFolder:function(t,n){e.forEach([t.pointers.wixCode.getLoadedFileContentMap(),t.pointers.wixCode.getModifiedFileContentMap(),t.pointers.wixCode.getFilePathToIdMap(),t.pointers.wixCode.getAreChildrenLoadedMap(),t.pointers.wixCode.getLoadedChildrenMap()],function(o){const i=t.dal.get(o),r=e(i).keys().filter(function(t){const n=t.replace(/\/*$/,"/");return function(t){return e.startsWith(t,n)}}(n)).value(),a=e.omit(i,r);t.dal.set(o,a)})},isFileReadable:function(n,o){return t.isUndoableFile(o)?n.dal.isExist(n.pointers.wixCode.getLoadedFileContent(o)):e.some([n.pointers.wixCode.getLoadedFileContent(o),n.pointers.wixCode.getModifiedFileContent(o)],n.dal.isExist)},isFileExists:c,addChild:function(t,n,o){const i=t.pointers.wixCode.getLoadedChildren(n),r=t.dal.get(i)||[];if(!e.find(r,{name:o.name,directory:o.directory})){const e=p(function(e,t){return e.concat([t])}(r,o));t.dal.set(i,e)}},removeChild:function(t,n,o){const i=t.pointers.wixCode.getLoadedChildren(n),r=function(t,n){return e.reject(t,{name:n.name,directory:n.directory})}(t.dal.get(i)||[],o);t.dal.set(i,r)},hasKnownChild:function(t,n,o){const i=t.pointers.wixCode.getLoadedChildren(n),r=t.dal.get(i)||[];return!!e.find(r,{name:o.name,directory:o.directory})},isChildrenExists:function(e,t){return e.dal.isExist(e.pointers.wixCode.getLoadedChildren(t))},areChildrenLoaded:function(e,t){return!!e.dal.get(e.pointers.wixCode.getAreChildrenLoaded(t))},getChildren:function(e,t){const n=e.pointers.wixCode.getLoadedChildren(t);return n?e.dal.get(n):null},loadChildren:function(t,n,o){const i=t.pointers.wixCode.getLoadedChildren(n),r=p(function(t,n){return e.unionBy(t,n,"name")}(t.dal.get(i)||[],o));t.dal.set(i,r),t.dal.set(t.pointers.wixCode.getAreChildrenLoaded(n),!0)},getChanges:function(e){const t=i.getTaskName()+i.getSnapshotTags();return m(e.dal.full.immutable.getLastSnapshotByTagName(t),e)},getChangesBetweenSnapshots:function(e,t){const n=d(e),i=d(t),r=e&&e.getIn(o.paths.DUPLICATED_FILES_INFO)?e.getIn(o.paths.DUPLICATED_FILES_INFO).toJS():{},a=t.getIn(o.paths.DUPLICATED_FILES_INFO).toJS(),s=t.getIn(o.paths.DIRECTORY_FLAG_BY_DELETED_PATH).toJS()||{};return{toSave:g(n,i),toCopy:f(r,a),toDelete:s}},getChangesBetweenLastSnapshotAndCurrentStateTakenFromPS:m,isChangesEmpty:function(t){return e.isEmpty(t.toSave)&&e.isEmpty(t.toCopy)&&e.isEmpty(t.toDelete)},markPathAsDeleted:function(t,n,o){const i=t.pointers.wixCode.getDirectoryFlagByDeletedPathMap();t.dal.set(i,e.assign({},t.dal.get(i),{[n]:o}))},clearDeletedPath:function(t,n){const o=t.pointers.wixCode.getDirectoryFlagByDeletedPathMap();t.dal.set(o,e.omit(t.dal.get(o),n))}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(126)],void 0===(i=function(e,t){"use strict";function n(e){return"pagelink"===e.type&&"dataBinding"===e.plugin}function o(t,o){const i=e.keys(o),r=e.assign({},t,o);return e.omitBy(r,function(t,o){return n(t)&&!e.includes(i,o)})}return{assembleSchema:function(t,i,r){const a=JSON.parse(t||"{}"),s=i?JSON.parse(i):a,c=r?JSON.parse(r):a,p=e.pickBy(c.fields,n);return JSON.stringify(e.assign({},s,{fields:o(s.fields,p)}))},isSchemaFile:function(n){return e.startsWith(n,`${t.SCHEMAS}/`)},isSchemasDirectory:function(e){return e===`${t.SCHEMAS}/`},isValidContent:function(t){try{const n=JSON.parse(t);return e.isObject(n)}catch(e){return!1}},getSchemaIdFromFilePath:function(e){const n=`${t.SCHEMAS}/`.length,o=e.length-".json".length;return e.substring(n,o)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(188),n(124),n(45),n(99),n(20),n(128),n(38),n(100),n(127),n(189),n(123),n(44)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l,u,d){"use strict";const g=o.wixCodeUserScriptsService;function f(t,o,f,m){if(!s.getExistingWixCodeAppFromSnapshot(o))return void f();const y=d.traceWithSnapshot(o,{action:"saveCode"});Promise.resolve().then(function(){return function(t,o){const u=p.getChangesBetweenSnapshots(t,o);if(p.isChangesEmpty(u))return Promise.resolve({message:"no changes"});const d=u.toSave.map(({fileId:e})=>e),g={filesToSave:JSON.stringify(d),filesToCopy:JSON.stringify(u.toCopy),filesToDelete:JSON.stringify(u.toDelete)};try{const t=o.getIn(r.paths.IS_APP_READ_ONLY);if(t)throw new c.WixCodeNotWriteableError;const p=function(e){const t=s.getExistingWixCodeAppFromSnapshot(e),n=(a=e,a.getIn(["serviceTopology","wixCodeIdeServerUrl"])),o=e.getIn(r.paths.GRID_APP_ID);var a;return i.createCodeAppInfo({baseUrl:n,appId:o,signedInstance:t.instance,instanceId:t.instanceId})}(o),f=function(t,o){return e.map(o,function(e){return function(e,t,o){if(a.isSchemaFile(t))return l.save(e,a.getSchemaIdFromFilePath(t),JSON.parse(o)).then(e=>e?{modifiedSchemas:e}:e);const i=n.getVirtualDescriptor(t,!1);return n.writeFile(e,i,o)}(t,e.fileId,e.content)})}(p,u.toSave),m=function(t,o){return e.map(o,function(e){return function(e,t,o){const i=n.getVirtualDescriptor(t,!1),r=o.lastIndexOf("/"),a=o.substr(0,r),s=n.getVirtualDescriptor(a,!0),c=o.substr(r+1);return n.copy(e,i,s,c)}(t,e.srcFileId,e.destFileId)})}(p,u.toCopy),y=function(t,o){return e.map(o,(e,o)=>(function(e,t,o){if(!o&&a.isSchemaFile(t))return l.remove(e,a.getSchemaIdFromFilePath(t)).then(e=>e?{modifiedSchemas:e}:e);const i=n.getVirtualDescriptor(t,o);return n.deleteItem(e,i)})(t,o,e))}(p,u.toDelete),E=f.concat(m,y);return Promise.all(E).then(t=>{const n=e(t).filter("modifiedSchemas").flatMap("modifiedSchemas").value();return{message:"changes saved",params:g,savedPaths:d,modifiedSchemas:n,directoryFlagByDeletedPath:u.toDelete}}).catch(function(e){throw{error:e,params:g}})}catch(e){return Promise.reject({error:e,params:g})}}(t,o)}).then(function({message:t,params:n,savedPaths:i,modifiedSchemas:s,directoryFlagByDeletedPath:c}){y({message:t,params:n}),f(function(t,n=[],o,i){const s=function(t,n){if(t){const o=function(t){return e.reduce(t,(e,t,n)=>!t&&a.isSchemaFile(n)?e.concat(a.getSchemaIdFromFilePath(n)):e,[])}(n),i=e.filter(t,t=>!e.includes(o,t.id));return e.reduce(i,(e,t)=>e.concat({path:r.paths.MODIFIED_FILE_CONTENTS.concat(`.schemas/${t.id}.json`),value:JSON.stringify(t)}),[])}}(o,i),c=function(t,n){const o=n.filter(e=>g.filePathAffectsBundles(e));if(e.isEmpty(o))return;if(e.every(o,e=>g.filePathAffectsSingleBundle(e)))return function(e,t=[]){return t.reduce((t,n)=>{const o=g.bundleIdFromFilePath(n),i=g.paths.CACHE_KILLERS_MAP.concat(o),r=e.getIn(i);return t.push({path:i,value:u.getNewCacheKillerValue(r)}),t},[])}(t,o);return function(e){const t=[],n=e.getIn(g.paths.GLOBAL_CACHE_KILLER);return t.push({path:g.paths.GLOBAL_CACHE_KILLER,value:u.getNewCacheKillerValue(n)}),t.push({path:g.paths.CACHE_KILLERS_MAP,value:{}}),t}(t)}(t,n),p=function(t){if(!e.isEmpty(t))return[{path:r.paths.DIRECTORY_FLAG_BY_DELETED_PATH,value:{}}]}(i);if(s||c||p)return{changes:c||[],historyAlteringChanges:(s||[]).concat(p||[])}}(o,i,s,c))},function(t){t&&t.error&&t.params?(y({level:d.levels.ERROR,message:t.error,params:t.params}),m(t.error)):(t=e.isError(t)?t:new Error(t),y({level:d.levels.ERROR,message:t}),m(t))})}return{partialSave:f,fullSave:f,firstSave:f,saveAsTemplate:f,autosave:f,publish(e,t){t()},getTaskName:t.getTaskName,getSnapshotTags:t.getSnapshotTags}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(5),n(191),n(2),n(48)],void 0===(i=function(e,t,n,o,i,r){"use strict";const a="noJsonAnchors",s="desktopSOAPOrder",c="mobileInvalidSOAP",p=[a,s,c],l={[a]:2,[s]:4,[c]:3},u=["wysiwyg.viewer.components.HeaderContainer","wysiwyg.viewer.components.SiteRegionContainer","wysiwyg.viewer.components.PagesContainer","wysiwyg.viewer.components.FooterContainer","platform.components.AppController","wysiwyg.viewer.components.tpapps.TPAGluedWidget","wysiwyg.viewer.components.QuickActionBar","wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton","wysiwyg.viewer.components.BackToTopButton","wysiwyg.viewer.components.MenuContainer"],d={[a]:t=>{const n=t.pointers.page.getNonDeletedPagesPointers(!0),r=e.flatMap(n,({id:e})=>[t.pointers.full.components.getPage(e,i.VIEW_MODES.DESKTOP),t.pointers.full.components.getPage(e,i.VIEW_MODES.MOBILE)]);return e.every(r,e.partial(o,t))},[s]:t=>!n.isOpen("sv_soapReorderFixer")||((t,n)=>{const o=t.pointers.getInnerPointer(g(t),"layoutSettings"),i=t.dal.get(o);return e.get(i,n,!1)})(t,"soapCompsAroundPagesContainer"),[c]:t=>{const n=t.dal.pointers.components.getMasterPage(i.VIEW_MODES.MOBILE),o=t.dal.pointers.components.getChildren(n);return((t,n)=>e.every(n,n=>{const o=t.dal.get(t.pointers.getInnerPointer(n,"componentType"));return e.includes(u,o)}))(t,o)}},g=e=>e.pointers.data.getDataItemFromMaster(t.siteConstants.MASTER_PAGE_ID),f=(t,n)=>{const o=t.dal.get(g(t));t.dal.set(g(t),e.merge({},o,{layoutSettings:{mechanism:n}}))},m=(e,t,n,o,i)=>{const r={status:t,pages_count:n};t||(r.reasonid=i),e.siteAPI.reportBI(o,r)},y=(e,t,n,o)=>{(e=>f(e,"anchors"))(e),((e,t,n,o)=>m(e,!1,t,n,o))(e,t,n,o)},E=n=>(o,i,r)=>{if((t=>{const n=t.pointers.getInnerPointer(g(t),"layoutSettings"),o=t.dal.get(n);return"mesh"===e.get(o,"mechanism")})(o))return void(i&&i());const a=(t=>e.size(t.pointers.page.getNonDeletedPagesPointers(!0)))(o);t.loggingUtils.fedopsLogger.interactionStarted(t.loggingUtils.fedopsLogger.INTERACTIONS.MESH_LAYOUT_READY_DATA_FIXER);const s=(t=>e.findIndex(p,e=>!d[e](t)))(o);-1===s?((e=>f(e,"mesh"))(o),((e,t,n)=>m(e,!0,t,n))(o,a,n),i&&i()):(y(o,a,n,(e=>l[p[e]])(s)),r&&r(`cant use mesh, validation failed, failed on index: ${s}`)),t.loggingUtils.fedopsLogger.interactionEnded(t.loggingUtils.fedopsLogger.INTERACTIONS.MESH_LAYOUT_READY_DATA_FIXER)};return{meshLayoutReadySiteDataFixerAfterMeshWizard:E(r.MESH_MIGRATION_WIZARD),meshLayoutReadySiteDataFixer:E(r.MESH_MIGRATION),meshLayoutReadySiteDataPreSaveFixer:E(r.MESH_MIGRATION_PRESAVE)}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(193),n(194),n(12),n(76),n(57),n(47),n(483),n(195),n(20),n(5),n(6),n(132),n(1),n(196),n(64),n(80)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l,u,d,g,f,m,y){"use strict";const E=g.urlUtils,I=g.loggingUtils.performance,S=g.loggingUtils.performanceMetrics,{getSaveableSnapshot:h,extendSavableSnapshotWithFullSnapshot:P}=c,A={partialSave:"/api/partially_update",fullSave:"/api/new_override_save",validateSite:"/api/validate_site",firstSave:"/api/first_save",saveAsTemplate:"/api/save_as_template/",publish:"/api/publish",publishRC:"/api/publish-rc",autosave:"save_diff"},T={"-12":i.save.SESSION_EXPIRED,"-15":i.save.NOT_LOGGED_IN,"-17":i.save.USER_NOT_AUTHORIZED_FOR_SITE,"-10116":i.save.CONCURRENT_SAVE,"-40003":i.save.SITE_NAME_TAKEN,"-10132":i.save.SAVE_PUBLISH_DISABLED_ON_SERVER,"-10154":i.save.SAVE_PUBLISH_RC_FAILED_ON_SERVER,"-10104"(t){const n=t.payload;return e.isEmpty(n.duplicateComponents)?e.isEmpty(n.dataReferenceMismatches)?e.isEmpty(n.missingContainers)?e.isEmpty(n.appControllerReferenceMismatches)?e.isEmpty(n.connectionListReferenceMismatches)?e.isEmpty(n.styleReferenceMismatches)?e.isEmpty(n.behaviorReferenceMismatches)?e.isEmpty(n.propertyReferenceMismatches)?e.isEmpty(n.designReferenceMismatches)?void 0:i.save.DESIGN_REFERENCE_MISMATCHES:i.save.PROPERTY_REFERENCE_MISMATCHES:i.save.BEHAVIOR_REFERENCE_MISMATHCHES:i.save.STYLE_REFERENCE_MISMATCHES:i.save.CONNECTION_LIST_REFERENCE_MISMATCHES:i.save.APP_CONTROLLER_REFERENCE_MISMATCH:i.save.MISSING_CONTAINERS:i.save.DATA_REFERENCE_MISMATCH:i.save.DUPLICATE_COMPONENTS},"-10145":i.save.CONCURRENT_AUTO_SAVE,"-10148":i.save.SITE_STALE_STATE_FROM_AUTO_SAVE,"-10124":i.save.SITE_DESERIALIZATION_ERROR},v=[i.save.DUPLICATE_COMPONENTS,i.save.DATA_REFERENCE_MISMATCH,i.save.MISSING_CONTAINERS,i.save.APP_CONTROLLER_REFERENCE_MISMATCH,i.save.DESIGN_REFERENCE_MISMATCHES,i.save.BEHAVIOR_REFERENCE_MISMATHCHES,i.save.PROPERTY_REFERENCE_MISMATCHES,i.save.STYLE_REFERENCE_MISMATCHES,i.save.CONNECTION_LIST_REFERENCE_MISMATCHES],C=["component_properties","document_data","theme_data","design_data","behaviors_data","connections_data","mobile_hints"];function _(t){let n=T[t.errorCode];return e.isFunction(n)&&(n=n(t)),n||i.save.UNKNOWN_SERVER_ERROR}function O(t){return e.includes(v,_(t))}function D(t,n){const o=n.getIn(["masterPage","structure"]);if(!t||!o.equals(t.getIn(["masterPage","structure"])))return e.pick(o.toJS(),["children","mobileComponents","type","behaviorQuery","layout","modes","mobileHintsQuery"])}function w(e,t){return"masterPage"===t}function M(e,t){return t.map(e=>e.get("structure")).filterNot(w).filter(function(e,t,n){return!e&&t||!t.equals(e.getIn([n,"structure"]))}.bind(null,e)).toList().toJS()}function b(e,t){return e.keySeq().toSet().subtract(t.keySeq().toSet()).toArray()}function R(e,t){return e?t.filter(function(t,n){return t!==e.get(n)&&!t.equals(e.get(n))}):t}const N=["Page","AppPage"],x=t=>{const n=t.getIn(["masterPage","data","document_data"]),o=n.filter(t=>(t=>e.includes(N,t))(t.get("type"))),i={};return o.forEach((t,o)=>{(function t(n,o,i=[]){if(!o)return i;const r=o.get("type");return o.forEach((o,a)=>{if("pageBackgrounds"===a&&e.forEach(["desktop","mobile"],e=>{const r=o.getIn([e,"ref"]);if(r){const e=r.replace("#",""),o=n.get(e);t(n,o,i),i.push(e)}}),y.isOfType("data",r,a,"ref")){if(o){const e=o.replace("#",""),r=n.get(e);t(n,r,i),i.push(e)}}else y.isOfType("data",r,a,"refList")&&o.forEach(e=>{const o=e.replace("#",""),r=n.get(o);t(n,r,i),i.push(o)})}),i})(n,t).forEach(e=>{i[e]=o})}),i};function L(t,n){const o=e.groupBy(C),i=[],r=t=>{e.includes(i,t)||i.push(t)};return{changedData:e.mapValues(o,function(e,o){return n.flatMap(function(e,n){const i=e.getIn(["data",o]);if(!t)return r(n),i;const a=t.getIn([n,"data",o]);if(i&&!i.equals(a)){const e=R(a,i);return e.size>0&&r(n),e}}).toJS()}),pageIdsWithChangedData:i}}function B(t,n){const o=k(t),i=k(n);if(!e.isEqual(o,i))return i}function F(t,n){const o=U(t),i=U(n);if(!e.isEqual(o,i))return i}function k(t){return e(t.getIn(["rendererModel","siteMetaData"]).toJS()).omit(["adaptiveMobileOn"]).merge({headTags:t.getIn(["documentServicesModel","customHeadTags"])||""}).value()}function U(t){return e.merge({},t.getIn(["documentServicesModel","metaSiteData"]).toJS(),{adaptiveMobileOn:H(t)})}function H(e){return e.getIn(["rendererModel","siteMetaData","adaptiveMobileOn"])}function V(e,t){const n=t.getIn(["rendererModel","pageToHashedPassword"]);if(n){const t=e&&e.getIn(["rendererModel","pageToHashedPassword"]);return t?n.filter((e,n)=>e!==t.get(n)).toJS():n.toJS()}return{}}function W(e,t){const n=t.getIn(["routers"]),o=e&&e.getIn(["routers"]);return!n&&o?{}:n&&!n.equals(o)?n.toJS():void 0}function G(t,n){const o=n.get("pagesPlatformApplications");if(o){const n=t&&t.get("pagesPlatformApplications");if(!e.isEqual(n,o))return o.toJS()}}function Y(e){return e.get("orphanPermanentDataNodes").toJS()}function z(e){return e.getIn(["rendererModel","siteInfo","siteId"])}function K(e){return e.getIn(["documentServicesModel","revision"])}function $(e){return e.getIn(["documentServicesModel","version"])}function q(e,t){const n=p.paths.WIX_CODE_APP_DATA,o=t.getIn(n);if(o&&(!e||!o.equals(e.getIn(n)))){return o.toJS()}}function j(e){return e.isEmpty()}function Q(n,o){n=n||t.Map();const i=[];return{translationDataDelta:o.map((t,o)=>(function(t,n,o){const i=n.get("translations");if(e.isUndefined(i))return;const r=t&&t.get("translations");return e.isUndefined(r)?(function(e){return e.some(function(e){return e.some(function(e){return e.some(function(e){return!e.isEmpty()})})})}(i)&&o(),i.toJS()):i.map(function(e,t){return e.map(function(e){return e.map(function(e,n){const i=R(r.getIn([t,"data",n]),e);return i.size>0&&o(),i}).filterNot(j)}).filterNot(j)}).filterNot(j)})(n.get(o),t,(t=>{e.includes(i,t)||i.push(t)}).bind(null,o))).filterNot(e.isUndefined).reduce((e,t)=>e.mergeDeep(t),t.Map()).toJS(),pageIdsWithChangedTranslation:i}}const X=(t,n,o)=>{const i=n.get("pagesData"),r=t.get("pagesData"),a=L(r,i),c=((t,n)=>{const o=t.pageIdsWithChangedData;if(l.isOpen("extractPageRefsOnSave")){const i=x(n),r=e.keys(t.changedData.document_data);e.forEach(r,e=>{i[e]&&o.push(i[e])})}return e.uniq(o)})(a,i),p={protectedPagesData:V(t,n),dataDelta:a.changedData,dataNodeIdsToDelete:Y(n),deletedPageIds:b(r,i),id:z(n),masterPage:D(r,i),revision:K(n),version:$(n),updatedPages:M(r,i),siteMetaData:B(t,n),metaSiteData:F(t,n),pagesPlatformApplications:G(t,n),wixCodeAppData:q(t,n),routers:W(t,n),initiator:Z(n),pageIdsWithChangedData:c};if(l.isOpen("settleInServer")){const o=m.getSettleActionsForSave(t,n);e.isEmpty(o)||(p.metaSiteActions={actions:o})}const u=Q(r,i),d=u.translationDataDelta;if(!e.isEmpty(d)){const t=e(c).concat(...u.pageIdsWithChangedTranslation).uniq().value();e.assign(p,{translationsDelta:d,pageIdsWithChangedData:t})}return s.fixData(p,t,n,o),e.omitBy(p,t=>e.isNil(t))};function Z(e){let t;return t=J(e,"autoFullSaveFlag")?"auto_save":function(e){const t=e.getIn(["documentServicesModel","publishSaveInitiator"]);return t&&t.toJS?t.toJS():t}(e)?"publish":function(e){const t=e.getIn(["documentServicesModel","silentSaveInitiator"]);return t&&t.toJS?t.toJS():t}(e)?"provision":"manual"}function J(e,t){const n=e.getIn(["documentServicesModel","autoSaveInfo",t]);return n&&n.toJS?n.toJS():n}function ee(n){const o=d.getAutosavePaths();let i=t.fromJS({});return e.forEach(o,function(t){const o=function t(n,o,i){let r={};return i=i||[],1===n.length?r[n[0]]=o.getIn(i.concat(n[0])):(i=i.concat(n.splice(0,1)),r[e.last(i)]=t(n,o,i)),r=e.omitBy(r,e.isUndefined)}(t.split("."),n);i=i.mergeDeep(o)}),i}function te(t){const n=t.get("pagesData"),o={protectedPagesData:V(null,t),dataDelta:L(null,n).changedData,dataNodeIdsToDelete:Y(t),deletedPageIds:[],id:z(t),masterPage:D(null,n),revision:K(t),version:$(t),updatedPages:M(null,n),siteMetaData:k(t),metaSiteData:U(t),pagesPlatformApplications:G(null,t),wixCodeAppData:q(null,t),routers:W(null,t),initiator:Z(t)},i=Q(null,n).translationDataDelta;return e.isEmpty(i)||e.assign(o,{translationsDelta:i}),s.fixData(o,null,t),e.omitBy(o,t=>e.isNil(t))}function ne(t){const n=t.masterPage;return e.find(n.children,{componentType:"wysiwyg.viewer.components.PagesContainer"}).components[0].components=t.updatedPages,e.merge(t.masterPage,{componentProperties:t.dataDelta.component_properties},{themeData:t.dataDelta.theme_data},{mobileHintsQuery:n.mobileHintsQuery})}function oe(e,t){e.wixCodeModel&&t.changes.push({path:p.paths.WIX_CODE_MODEL,value:e.wixCodeModel})}function ie(e,t,n,i,r){o.integrations.ravenUtils.breadcrumb("server request",{data:t,url:e}),f.actions.sendHttpRequest(e,"POST",{dataType:"json",headers:ge(n)},t,i,r)}function re(e){return{errorCode:e.errorCode,errorType:_(e),errorDescription:e.errorDescription}}function ae(t,n,o,i,r){if(r.success){t(function(t,n,o){const i=n.get("rendererModel").toJS(),r=n.get("documentServicesModel").toJS(),a=[{path:["rendererModel","siteInfo","siteId"],value:t.previewModel.siteId},{path:["rendererModel","metaSiteId"],value:t.previewModel.metaSiteModel.metaSiteId},{path:["rendererModel","mediaAuthToken"],value:t.mediaAuthToken},{path:["rendererModel","premiumFeatures"],value:t.previewModel.metaSiteModel.premiumFeatures},{path:["rendererModel","siteInfo","documentType"],value:t.previewModel.metaSiteModel.documentType},{path:["rendererModel","clientSpecMap"],value:e.mergeWith(i.clientSpecMap,t.previewModel.metaSiteModel.clientSpecMap,function(t,n){return n.demoMode&&t&&!t.demoMode?t:e.merge({},t,n)})}],s=[{path:["documentServicesModel","neverSaved"],value:!1},{path:["documentServicesModel","siteName"],value:t.previewModel.metaSiteModel.siteName},{path:["documentServicesModel","metaSiteData"],value:t.metaSiteData},{path:["documentServicesModel","publicUrl"],value:t.publicUrl},{path:["documentServicesModel","usedMetaSiteNames"],value:r.usedMetaSiteNames.push(t.publicUrl.match(/^.*\/([^\/]+)/)[1])&&r.usedMetaSiteNames},{path:["documentServicesModel","version"],value:t.siteHeader.version},{path:["documentServicesModel","revision"],value:t.siteHeader.revision},{path:["documentServicesModel","autoSaveInfo"],value:t.autoSaveInfo},{path:["documentServicesModel","mediaManagerInfo","siteUploadToken"],value:t.mediaSiteUploadToken},{path:["documentServicesModel","permissionsInfo"],value:t.permissionsInfo}],c={changes:a.concat(s).concat({path:["orphanPermanentDataNodes"],value:[]}),historyAlteringChanges:pe(t.deletedItems,n,!0,o)};var p,l;return oe(t,c),l=c,(p=t).devSiteAppDefId&&l.changes.push({path:["devSiteAppDefId"],value:p.devSiteAppDefId}),c}(r.payload,o,i))}else n(re(r))}function se(e,t,n,o,i,a){!a.success&&O(a)?(i.event(r.FULL_DOCUMENT_SAVE_ATTEMPTED_AFTER_PARTIAL_FAILURE,{endpoint:"partial"}),Ie(e,t,n,o,i)):ce(t,n,o,i,a)}function ce(t,n,i,r,s){if(s.success){const o={changes:[{path:["documentServicesModel","revision"],value:s.payload.revision},{path:["documentServicesModel","version"],value:s.payload.version},{path:["orphanPermanentDataNodes"],value:[]}]};if(Boolean(t.getIn(["documentServicesModel","autoSaveInfo","shouldAutoSave"]))&&o.changes.push({path:["documentServicesModel","autoSaveInfo","previousDiffId"],value:void 0}),oe(s.payload,o),l.isOpen("settleInServer")){const n=["rendererModel","clientSpecMap"],i=["rendererModel","siteInfo","documentType"],r=t.getIn(n).toJS(),a=t.getIn(i);s.payload.clientSpecMap&&o.changes.push({path:n,value:"Template"===a?s.payload.clientSpecMap:e.assign({},r,s.payload.clientSpecMap)}),o.changes.push({path:i,value:a})}o.historyAlteringChanges=pe(s.payload.deletedItems,t),n(o)}else{const n=re(s),c=n.errorType,p=t.get("origin");O(s)&&o.integrations.ravenUtils.captureError(new Error(`Save Error: ${c}`),{tags:{errorType:c,saveError:!0},extra:{origin:p,errorCode:e.get(n,"errorCode"),errorDescription:e.get(n,"errorDescription"),duplicateComponentId:e.get(s,"payload.duplicateComponents[0].id")||null}}),r.error(a.SAVE_DOCUMENT_FAILED_ON_SERVER,{serverErrorCode:n.errorCode,errorType:c,origin:p}),i(n)}}function pe(t,n,o,i){const r=[];return o&&(t=function(t,n,o){const i={};return e.forEach(t,function(t,r){e.forEach(t,function(t){const s=function(e,t,n){const o=["data",t,e];return n.map((e,t)=>!!e.getIn(o)&&t).filter(Boolean).keySeq().toArray()}(t,r,n);if(e.isEmpty(s))return void o.error(a.SYNC_DELETED_ITEMS_AFTER_SAVE_FAILED,{errorType:"notFound",itemId:t,pagesIds:null});if(e.size(s)>1)return void o.error(a.SYNC_DELETED_ITEMS_AFTER_SAVE_FAILED,{errorType:"multipleFound",itemId:t,pagesIds:s.toString()});const c=e.head(s),p=e.get(i,[c,r],[]);p.push(t),e.set(i,[c,r],p)})}),i}(t,n.get("pagesData"),i)),e.forEach(t,function(t,n){e.forEach(t,function(t,o){e.forEach(t,function(e){r.push({path:["pagesData",n,"data",o,e],value:void 0})})})}),r}function le(e,t,n){n.success?e({changes:[{path:["rendererModel","siteInfo","documentType"],value:"Template"}]}):t(re(n))}function ue(e,t,n){if(n.success){const t=[{path:["documentServicesModel","isPublished"],value:!0}];n.payload.revision&&t.push({path:["documentServicesModel","revision"],value:n.payload.revision}),n.payload.version&&t.push({path:["documentServicesModel","version"],value:n.payload.version}),e({changes:t,result:{siteRcExists:n.payload.siteRcExists}})}else t(re(n))}function de(e,t){e({errorCode:t.status,errorType:i.save.HTTP_REQUEST_ERROR,errorDescription:t.statusText})}function ge(e){return{"X-Wix-Editor-Version":"new","X-Wix-DS-Origin":e.get("origin"),"X-Editor-Session-Id":e.getIn(["documentServicesModel","editorSessionId"])}}function fe(e){const t=e.getIn(["rendererModel","metaSiteId"]),n=e.getIn(["documentServicesModel","editorSessionId"]);return`?${E.toQueryString({metaSiteId:t,editorSessionId:n,esi:n})}`}function me(e){return e.getIn(["serviceTopology","editorServerRoot"])}const ye=e=>(t,n,...o)=>e(P(h(t),t),P(h(n),n),...o),Ee=ye((e,t,n,o,i)=>{Pe(t,n,o,i,A.fullSave)});function Ie(e,t,n,o,i){Pe(t,n,o,i,A.partialSave)}const Se=ye((t,n,o,i,r)=>{const a=me(n)+A.validateSite,s=X(t,n,r);ie(a+fe(n),s,n,e.curry(he)(t,n,o,i,r),e.curry(de)(i))});function he(e,t,n,o,i,r){r.success?n():o(re(r))}function Pe(t,n,o,i,r){const a=me(t)+r+fe(t),s=te(t);l.isOpen("settleInServer")&&(s.metaSiteActions={actions:m.getSettleActionsForFullSave(t)}),ie(a,s,t,e.curry(ce)(t,n,o,i),e.curry(de)(o))}const Ae=ye((t,n,o,i,r,a)=>{if(e.get(a,"fullPayload"))return Ie(0,n,o,i,r);const s=me(n)+A.partialSave,c=X(t,n,r);ie(s+fe(n),c,n,e.curry(se)(t,n,o,i,r),e.curry(de)(i))});return{partialSave:Ae,fullSave:Ee,validateSite:Se,firstSave(t,n,o,i,r,a={}){const s=me(n)+A.firstSave+fe(n),c=te(n);ie(s,e.assign({},function(e,t){const n={dataNodes:e.dataDelta.document_data,documents:[ne(e)],protectedPagesData:e.protectedPagesData,siteMetaData:e.siteMetaData,metaSiteData:e.metaSiteData,pagesPlatformApplications:e.pagesPlatformApplications,sourceSiteId:e.id,targetName:t.getIn(["documentServicesModel","siteName"]),wixCodeAppData:e.wixCodeAppData,urlFormat:t.getIn(["urlFormatModel","format"]),behaviors:e.dataDelta.behaviors_data,connections:e.dataDelta.connections_data,mobileHints:e.dataDelta.mobile_hints,initiator:e.initiator};return e.routers&&(n.routers=e.routers),n.translations=e.translationsDelta,n.designNodes=e.dataDelta.design_data,n}(c,n),a.extraPayload),n,e.curry(ae)(o,i,n,r),e.curry(de)(i))},saveAsTemplate(t,n,o,i){ie(me(n)+A.saveAsTemplate+z(n)+fe(n),null,n,e.curry(le)(o,i),e.curry(de)(i))},publish(t,n,o,i,r={}){const a=r.publishRC?A.publishRC:A.publish,s=`${me(t)+a}/${z(t)}`+fe(t),c=e.curry(ue)(n,o),p=e.curry(de)(o);u.executeHook(u.HOOKS.PUBLISH.BEFORE),f.actions.sendHttpRequest(s,"POST",{headers:ge(t)},{},c,p)},autosave(t,o,i,r){const a=o.getIn(["serviceTopology","autoSaveUrl"])+A.autosave;const s=J(o,"reportingInfo")||{};g.loggingUtils.fedopsLogger.interactionStarted(g.loggingUtils.fedopsLogger.INTERACTIONS.AUTOSAVE.CALC_DIFF),I.start(S.AUTOSAVE.CALC_DIFF);const c=(p=[t,o],n.apply(n,p.map(ee)).toJS());var p;if(g.loggingUtils.fedopsLogger.interactionEnded(g.loggingUtils.fedopsLogger.INTERACTIONS.AUTOSAVE.CALC_DIFF),I.finish(S.AUTOSAVE.CALC_DIFF,{additionalData:s,report:!0}),e.isEmpty(c))return i();const l=function(e,t){return{siteId:z(e),metaSiteId:e.getIn(["rendererModel","metaSiteId"]),siteVersion:$(e),previousDiffId:e.getIn(["documentServicesModel","autoSaveInfo","previousDiffId"])||null,diffPayload:JSON.stringify(t)}}(o,c);g.loggingUtils.fedopsLogger.interactionStarted(g.loggingUtils.fedopsLogger.INTERACTIONS.AUTOSAVE.SEND_AJAX),I.start(S.AUTOSAVE.SEND_AJAX),f.actions.sendHttpRequest(a,"POST",{dataType:"json"},l,function(t){g.loggingUtils.fedopsLogger.interactionEnded(g.loggingUtils.fedopsLogger.INTERACTIONS.AUTOSAVE.SEND_AJAX),I.finish(S.AUTOSAVE.SEND_AJAX,{report:!0,additionalData:e.assign({},s,{success:t.success.toString()})}),t.success?i({changes:[{path:["documentServicesModel","autoSaveInfo","previousDiffId"],value:t.payload.diffId}]}):r(re(t))},de.bind(null,r))},getChangedPages:function(t,n){const o=n.get("pagesData"),i=t.get("pagesData");return e.map(M(o,i),"id")},getTaskName:()=>"saveDocument",shouldRun:(e,t,n)=>{if("partialSave"===n){const n=((e,t)=>!t.equals(e))(h(e),h(t));return o.integrations.ravenUtils.breadcrumb("shouldRun",{didSnapShotsChangeFromLastSave:n}),n}return!0},getSnapshotTags(e){switch(e){case"partialSave":case"fullSave":case"firstSave":case"saveAsTemplate":return["primary","autosave"];case"autosave":return["autosave"];case"publish":default:return["primary"]}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(13),n(21),n(133),n(20),n(2)],void 0===(i=function(e,t,n,o,i,r){"use strict";let a=["pagesData","wixapps","editorData","committedMobilePages","textRuntimeLayout","deletedPagesMap","orphanPermanentDataNodes","dockedRuntimeLayout","displayedOnlyComponents","mobileStructures","contactforms_metadata","saveInvalidationCount","pagesPlatformApplications","routers","platform","siteAspectsData","wixCode","mobileConversionHeuristicStrategy"];const s=["pagesData"],c={path:n.getApplicationInstanceVersionPath(),optional:!0},p=e.map(["blog","ecommerce","faq","menu"],function(e){return{path:o.getPackageMetaDataPath(e),optional:!0}});let l=["documentServicesModel","rendererModel","serviceTopology","urlFormatModel","runtime","compsToUpdateAnchors","svgShapes","renderFlags","renderRealtimeConfig","rootsRenderedInMobileEditor",c,{path:n.getPackageMetaDataPath(),optional:!0},{path:["origin"],optional:!0},{path:i.paths.NON_UNDOABLE_BASE_PATH,optional:!0},{path:["pagesPlatformApplications","wixCode"],optional:!0},{path:["ghostStructureData"],optional:!0},{path:["devSiteAppDefId"],optional:!0}].concat(p);const u=[{path:["platform","appManifest"],innerDepth:1},{path:["platform","appState"],innerDepth:1},{path:["platform","appPublicApiName"],innerDepth:1}];function d(t){return e.isString(t)?[t]:e.isPlainObject(t)?t.path:t}function g(t){return e.map(t,d)}function f(e){return!!e.optional}return a=a.concat(t.getRevertibleMetaDataInfo()),l=l.concat(t.getNonRevertibleMetaDataInfo()),{getWhiteList:()=>g(a),getNonUndoableInitialDataPaths:()=>u,getNonUndoableList:()=>g(l),getPathsInJsonData(){const t={},n=a.concat(l),o=e.without(n,s);return t[r.JSON_TYPES.DISPLAYED]=e.map(o,e=>({path:d(e),optional:f(e)})),t[r.JSON_TYPES.FULL]=[{path:s,optional:!1}],t},getAutosavePaths:()=>["rendererModel.pageToHashedPassword","rendererModel.passwordProtectedPages","rendererModel.siteMetaData","pagesData","orphanPermanentDataNodes","documentServicesModel.metaSiteData","documentServicesModel.customHeadTags","routers","pagesPlatformApplications","rendererModel.wixCodeModel"],getSavePaths:()=>[["pagesData"],["rendererModel","siteMetaData"],["rendererModel","pageToHashedPassword"],["rendererModel","siteInfo"],["rendererModel","metaSiteId"],["rendererModel","premiumFeatures"],["rendererModel","clientSpecMap"],["rendererModel","wixCodeModel","appData"],["documentServicesModel","siteName"],["documentServicesModel","editorSessionId"],["documentServicesModel","customHeadTags"],["documentServicesModel","metaSiteData"],["orphanPermanentDataNodes"],["routers"],["pagesPlatformApplications"]]}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";function t(e){return["wixapps",e]}return{getPackagePath:t,getPackageDescriptorPath:function(e){return t(e).concat(["descriptor"])},getPackageMetaDataPath:function(n){return e.compact(t(n).concat(["metadata"]))},getBlogTagNamesPath:function(){return["wixapps","blog","tagNames"]},getCategoriesPath:function(n){return e.compact(t(n).concat(["categories","categories"]))},getAppPartDataPath:function(e,n){return t(e).concat([n])},getAppPartExtraDataPath:function(e,n){return t(e).concat([`${n}_extraData`])}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";let t=[];return{init:function(e){t=e},getTitle:function(n,o){const i=e.find(t,{appDefinitionId:n});if(i){const t=e.find(i.widgets,{widgetId:o});return e.get(t,"title","")}return""}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(30),n(28),n(19),n(118),n(15),n(10),n(4)],void 0===(i=function(e,t,n,o,i,r,a,s){"use strict";const c=function(t,n,o,i,r,a,s={},c,l){const u=n.applicationId,d={componentType:"mobile.core.components.Page",type:"Page",styleId:"p2",skin:"skins.core.InlineSkin",layout:{x:0,y:0,width:980,height:500,anchors:[]},data:{type:"Page",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},hideTitle:!0,icon:"",descriptionSEO:"",metaKeywordsSEO:"",pageTitleSEO:"",pageUriSEO:c,hidePage:e.isBoolean(r)?r:void 0,mobileHidePage:null,underConstruction:!1,tpaApplicationId:u,indexable:!e.isBoolean(a)||a,tpaPageId:i,pageBackgrounds:p(t,n),isLandingPage:!!e.isBoolean(s.desktop)&&s.desktop,isMobileLandingPage:!!e.isBoolean(s.mobile)&&s.mobile},components:[]};return l&&(d.data.pageSecurity={requireLogin:!0,dialogLanguage:"en"}),d},p=function(t,n){return e.get(n,"appPage.hideFromMenu")?i.getBlankBackground():e.get(o.getPageDataWithoutIds(t,t.siteAPI.getPrimaryPageId()),"pageBackgrounds")};function l(t){return{desktop:t.appPage.fullPage||e.get(t,"componentFields.fullPageDesktopOnly"),mobile:t.appPage.landingPageInMobile}}return{getSectionStructure:c,getWidgetStructure:function(e,t,o,i,r){return{layout:{width:i&&i.width,height:i&&i.height,x:i&&i.x,y:i&&i.y,anchors:[]},data:{widgetId:o,applicationId:e.toString(),appDefinitionId:t,type:n.DATA_TYPE.TPA_WIDGET,metaData:{isHidden:!1,isPreset:!0,schemaVersion:"1.0"}},type:"Component",skin:n.SKINS.TPA_WIDGET,componentType:n.COMP_TYPES.TPA_WIDGET,style:r||n.STYLE.TPA_WIDGET}},getGluedWidgetStructure:function(e,t,o,i,r){return{layout:{width:i&&i.width||300,height:i&&i.height||200,x:i&&i.x||300,y:i&&i.y||120,anchors:[],fixedPosition:!0},data:{widgetId:o.widgetId,applicationId:e.toString(),appDefinitionId:t,type:n.DATA_TYPE.TPA_WIDGET,metaData:{isHidden:!1,isPreset:!0,schemaVersion:"1.0"}},type:"Component",skin:n.SKINS.TPA_WIDGET,componentType:n.COMP_TYPES.TPA_GLUED_WIDGET,style:r||n.STYLE.TPA_GLUED_WIDGET,props:{placement:o.gluedOptions.placement,verticalMargin:o.gluedOptions.verticalMargin,horizontalMargin:o.gluedOptions.horizontalMargin,type:"TPAGluedProperties",metaData:{schemaVersion:"1.0"}}}},getSubSectionStructure:function(e,t,n,o,i,a){const s=l(t),p=r.computeHidePage(t,a,!0),u=c(e,t,0,t.appPage.id,p,t.appPage.indexable,s,o,i);return u.data.title=t.appPage.name,u},getMultiSectionStructure:function(e,n,o,i,a,s){const p=l(n),u=n.appPage.id+t.common.utils.Constants.MULTI_SECTION_DELIMITER+o,d=r.computeHidePage(n,s,!1);return c(e,n,0,u,d,n.appPage.indexable,p,i,a)},convertStyleIdToStyleDef:function(t,n){const o=n.style;if(e.isString(o)){const i=a.styles.getAllFromAllPages(t)[o];if(!i){const o=s.getDefinition(t,n.componentType);return void(n.style=e(o.styles).keys().head())}"custom"===i.styleType&&(n.style=e.omit(i,["id"]))}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(17),n(4),n(15),n(29),n(28),n(7),n(72),n(32)],void 0===(i=function(e,t,n,o,i,r,a,s,c){"use strict";const p=function(t,n){return e.reduce(n,function(n,o){const a=i.getAllTpaCompsOnPage(t,o),s=e.filter(a,{type:r.DATA_TYPE.TPA_WIDGET});return e.union(n,s)},[])},l=function(t,n,o){const r=p(t,o),a=function(t,n,o){const r=i.getWidgetsByAppId(t,n);return e.reject(r,function(t){return e.includes(o,t.pageId)})}(t,n,o),s=e.union(r,a);return u(t,s)},u=function(n,o){return e.map(o,function(e){const o=t.getPage(n,e.pageId);return{compPointer:n.pointers.components.getComponent(e.id,o),applicationId:e.applicationId}})},d=function(n,o,r){let a=e.map(i.getInstalledDependentAppsData(n,o),"applicationId");r&&(a=e.union([o],a));const s=i.getPagesByApplicationIds(n,a);return e.forEach(a,function(o){const i=e(s).filter({tpaApplicationId:o}).map("id").value();!function(n,o,i){const r=l(n,o,i);e.forEach(r,function(e){f(n,e.compPointer,e.applicationId)}),e.forEach(i,function(e){t.validatePageRemovalInternal(n,e)})}(n,o,i)}),{appsPagesToDelete:s,appIdsToDelete:a}},g=function(t,n,o,i){const r=e.filter(t,{widgetId:y(n,o)});return r&&1===r.length&&r[0].id===i.id},f=function(o,r,a,s){const c=i.getWidgetsByAppId(o,a);g(c,o,a,r)&&(!function(n,o){const r=i.getHiddenSections(n,o);e.forEach(r,function(e){t.validatePageRemovalInternal(n,e.pageId)})}(o,a),m(o,a,c),d(o,a)),n.validateRemovalInternal(o,r,s)},m=function(t,o,i){const r=e.reject(i,{widgetId:y(t,o)});e.forEach(r,function(e){const o=a.getComponentById(t,e.id,e.pageId);n.validateRemovalInternal(t,o)})},y=function(t,n){const i=o.getAppData(t,n);if(i){const t=e.find(i.widgets,{default:!0});return e.get(t,"widgetId")}},E=function(r,{appsPagesToDelete:s,appIdsToDelete:p},u){if(!s){const t=e.map(i.getInstalledDependentAppsData(r,u),"applicationId");s=i.getPagesByApplicationIds(r,t),p=t}const d=[];return e.forEach(p,function(n){const i=e.filter(s,{tpaApplicationId:n});d.push(function(n,i,r){const a=e.map(r,"id"),s=l(n,i,a);return e.forEach(s,function(e){I(n,e.compPointer,e.applicationId)}),e.forEach(a,function(e){t.remove(n,e)}),o.hasEditorPlatformPart(o.getAppData(n,i))?c.remove(n,i):Promise.resolve()}(r,n,i))}),Promise.all(d).then(()=>{const t=i.getWidgetsByAppId(r,u);e.forEach(t,e=>{const t=a.getComponentById(r,e.id,e.pageId);r.dal.isExist(t)&&n.deleteComponent(r,t)})})},I=function(o,r,a){const s=i.getWidgetsByAppId(o,a);g(s,o,a,r)&&(!function(n,o){const r=i.getHiddenSections(n,o);e.forEach(r,function(e){t.remove(n,e.pageId)})}(o,a),S(o,a,s),E(o,{},a)),o.dal.isExist(r)&&n.deleteComponent(o,r)},S=function(t,o,i){const r=e.reject(i,{widgetId:y(t,o)});e.forEach(r,function(e){const o=a.getComponentById(t,e.id,e.pageId);n.deleteComponent(t,o)})};return{notifyAppsToDelete:d,actualDeleteApps:E,notifyWidgetAboutToDelete:f,deleteWidget:I,deleteTpaCompleteCallback:function(t,n){e.forEach(n,function(e){if(!i.isApplicationIdExists(t,e)){const n=o.getAppData(t,e);s.invokeDeleteAppCallbacks(n.appDefinitionId)}})},getWidgetCompsToDeleteMap:u,getWidgetsOnPagesToDelete:p,isLastInstalledMainWidget:g}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(3),n(4),n(29),n(15),n(63)],void 0===(i=function(e,t,n,o,i,r,a){"use strict";const s={APP:"APP",COMPONENT:"COMPONENT"},c=function(e){const t=e.tpaData;return t&&(t.content=t.content?JSON.parse(t.content):{}),t},p=function(e,t,n,o,i,r,a){const c=t?t.id:"tpaData-"+r;t||(t={type:"TPAGlobalData",id:c,content:{}}),t.appDefinitionId=a;const p=h(e,c,t,"masterPage",n,o,1e3);p?(i&&i(p),l(e,s.APP,r,null,p)):m(i,"Your app has exceeded the provided 1000 bytes storage space")},l=function(e,t,n,o,i){t===s.APP?a.callPublicDataChangedCallbackForAllAppRegisteredComps(n,i):a.callPublicDataChangedCallback(o,n,i)},u=function(n,i,a,c,p,u,d){const g=n.pointers.components.getPageOfComponent(c).id,f=o.data.get(n,c,null,!0),y=a?a.id:t.guidUtils.getUniqueId("tpaData-"),E=r.getAppData(n,f.applicationId);let I=400;e.get(E,"isWixTPA")&&(I=2e3),a||(a={type:"TPAData",id:y,content:{}});const S=h(n,y,a,g,p,u,I);S?(f.tpaData=`#${y}`,o.data.update(n,c,f,!0),d&&d(S),l(n,s.COMPONENT,f.applicationId,c.id,S)):m(d,`Your app has exceeded the provided ${I} chars storage space`)},d=function(t,n,o,i){const r=n?e.pick(n.content,t):null;e.isEmpty(r)?m(o,`key ${t} not found in ${i} scope`):o(r)},g=function(t,o,i,r,a,s,c,p){if(I(o,i)){const u=e.pick(o.content,i);o.content=JSON.stringify(e.omit(o.content,i)),n.addSerializedDataItemToPage(t,r,o,o.id),a(u),l(t,s,c,p,u)}else m(a,`key ${i} not found in ${s} scope`)},f=function(t,n,o,i){const r=e.map(t,function(e){return`${e}`});if(!e.isEmpty(n)&&e(n).keys().isEqual(r))o(n);else{const r=e.keys(n),a=e(r).xor(t).intersection(t).value();m(o,`keys ${a} not found in ${i} scope`)}},m=function(e,t){e({error:{message:t}})},y=function(e){return e===s.APP},E=function(t){return!!(e.isBoolean(t)||e.isString(t)||e.isNumber(t)||e.isPlainObject(t))},I=function(t,n){return!!t&&e(t.content).keys().includes(n.toString())},S=function(e,t){const n="tpaData-"+t,o=e.pointers.data.getDataItem(n,"masterPage"),i=e.dal.get(o);return i&&(i.content=i.content?JSON.parse(i.content):{}),i},h=function(t,o,i,r,a,s,c){i.content[a]=s;const p=i.content,l=JSON.stringify(i.content);return function(e,t){try{return!(e.length>t)}catch(e){return!1}}(l,c)?(i.content=l,n.addSerializedDataItemToPage(t,r,i,i.id,!0),e.pick(p,a)):null},P=function(e,t){e.dal.remove(e.pointers.data.getDataItem(t,"masterPage"))};return{set:function(e,t,n,i,r,a){if(!E(i))return void m(a,"Invalid value: value should be of type: string, boolean, number or Json");const s=o.data.get(e,t,null,!0),l=c(s),d=S(e,s.applicationId);y(r)?p(e,d,n,i,a,s.applicationId,s.appDefinitionId):u(e,d,l,t,n,i,a)},getAppValue:function(e,t,n,o){const i=S(e,t);d(n,i,o,s.APP)},getAppValues:function(t,n,o,i){o=e.uniq(o);const r=S(t,n),a=r?e.pick(r.content,o):null;f(o,a,i,s.APP)},getPublicData:function(t,n,i,r){r({APP:e.get(S(t,n),"content"),COMPONENT:e.get(c(o.data.get(t,i,null,!0)),"content")})},get:function(t,n,i,r,a){const s=o.data.get(t,n,null,!0);let p;if(y(r)){const n=S(t,s.applicationId);p=n?e.pick(n.content,i):null}else{const t=c(s);p=t?e.pick(t.content,i):null}e.isEmpty(p)?m(a,`key ${i} not found in ${r} scope`):a(p)},getMulti:function(t,n,i,r,a){const s=o.data.get(t,n,null,!0);let p;if(i=e.uniq(i),y(r)){const n=S(t,s.applicationId);p=n?e.pick(n.content,i):null}else{const t=c(s);p=t?e.pick(t.content,i):null}const l=e.map(i,function(e){return`${e}`});if(!e.isEmpty(p)&&e(p).keys().isEqual(l))a(p);else{const t=e.keys(p),n=e(t).xor(i).intersection(i).value();m(a,`keys ${n} not found in ${r} scope`)}},remove:function(e,t,n,i,r){const a=o.data.get(e,t,null,!0);if(y(i)){const o=S(e,a.applicationId);g(e,o,n,"masterPage",r,i,a.applicationId,t.id)}else{const o=e.pointers.components.getPageOfComponent(t).id,s=c(a);g(e,s,n,o,r,i,a.applicationId,t.id)}},getComponentValue:function(e,t,n,i){const r=o.data.get(e,t,null,!0),a=c(r);d(n,a,i,s.COMPONENT)},getComponentValues:function(t,n,i,r){const a=o.data.get(t,n,null,!0);i=e.uniq(i);const p=c(a),l=p?e.pick(p.content,i):null;f(i,l,r,s.COMPONENT)},runGarbageCollection:function(t){const n=function(t){const n=i.getDeletedAppsIds(t);return e(n).map(function(e){return"tpaData-"+e}).filter(function(e){return function(e,t){const n=e.pointers.data.getDataItem(t,"masterPage");return!!e.dal.isExist(n)}(t,e)}).value()}(t);if(!e.isEmpty(n)){let o=t.dal.get(t.pointers.general.getOrphanPermanentDataNodes());o=o.concat(n),t.dal.set(t.pointers.general.getOrphanPermanentDataNodes(),o),e.forEach(n,P.bind(null,t))}},SCOPE:s}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(17),n(4),n(72),n(29),n(15),n(102),n(103),n(136),n(134),n(135),n(28)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l,u){"use strict";const d=function(e,t,n,o){e.callback&&e.callback({page:t,sectionId:n,success:o})},g=function(t,o,i,s){const c=r.widgetsToAutoAddToSite(t,o);e.forEach(c,function(e){const r=n.getComponentToAddRef(t,i);a.addWidgetAfterProvision(t,r,{widgetId:e.widgetId,componentOptions:s},o)})},f=function(t,n){const o=i.isMultiSectionInstalled(t,e.get(n,"tpaApplicationId")),a=r.isPageMarkedAsAutoAddToSite(t,n);return!(o||!1===a)},m=function(e,t){return!i.isMainSectionInstalled(e,t.applicationId)};return{addSectionAfterProvision:function(t,n,a={},c,f,y){if(!m(t,c))return void y(t,new Error("section already installed"));const E=a.sectionId,I=e.find(c.widgets,{default:!0});s.addSectionComponentOptionsIfNeeded(e.get(I,"appPage.id"),a);const S=function(t,n,o){let i={name:n.appDefinitionName};return e.forEach(n.widgets,function(r){if(r.appPage&&r.appPage.name&&!r.appPage.hidden){i=e.clone(r.appPage);const a=o||r.appPage.name;i.name=o||p.getTitle(n.appDefinitionId,r.widgetId)||i.name,i.pageUriSEO=s.getPageUriSEO(t,a),i=e.merge(i,r)}}),i}(t,c,a.title),h={desktop:S.fullPage||e.get(I,"componentFields.fullPageDesktopOnly"),mobile:S.landingPageInMobile},P=r.computeHidePage(S,a.isHidden,!1),A=l.getSectionStructure(t,c,E,S.id,P,S.indexable,h,S.pageUriSEO,a.requireLogin),T=!i.isApplicationIdExists(t,c.applicationId),v=s.addPageAndSection(t,n,E,c.applicationId,c.appDefinitionId,S,A,S.widgetId||null,u.COMP_TYPES.TPA_SECTION,u.DATA_TYPE.TPA_SECTION,a);s.addHiddenPages(t,c,a.componentOptions),g(t,c,n,a.componentOptions),T&&o.invokeAddAppCallbacks(c.appDefinitionId),s.setPrefetchPageBehaviorIfNeeded(t,v,c),t.setOperationsQueue.executeAfterCurrentOperationDone(function(){s.addPlatformAppIfNeeded(t,c,a).then(e.partial(d,a,n,E,!0)).catch(e.partial(d,a,n,E,!1))})},addMultiSection:function(t,n,o){s.addSectionComponentOptionsIfNeeded(o.widgetData.appPage.id,o);const{widgetData:i,sectionId:r,appDefinitionId:a,applicationId:c,title:g,requireLogin:f,isHidden:m}=o;i.applicationId=c,i.name=g||p.getTitle(a,i.widgetId)||i.appPage.name;const y=s.getPageUriSEO(t,g||e.get(o,"widgetData.appPage.name","")),E=l.getMultiSectionStructure(t,i,r,y,f,m);s.addPageAndSection(t,n,r,c,a,i,E,i.widgetId||null,u.COMP_TYPES.TPA_SECTION,u.DATA_TYPE.TPA_SECTION,o),t.setOperationsQueue.executeAfterCurrentOperationDone(function(){d(o,n,r,!0)})},notifyDeleteSection:function(n,o){const i=t.data.get(n,o),r=i.tpaApplicationId;let a;if(f(n,i))a=c.notifyAppsToDelete(n,r,!0);else{a={appsPagesToDelete:[i],appIdsToDelete:[i.tpaApplicationId]};const r=c.getWidgetCompsToDeleteMap(n,c.getWidgetsOnPagesToDelete(n,[o]));e.forEach(r,function(e){c.notifyWidgetAboutToDelete(n,e.compPointer,e.applicationId)}),t.validatePageRemovalInternal(n,o)}n.setOperationsQueue.asyncPreDataManipulationComplete(a)},actualDeleteSection:function(n,{appsPagesToDelete:o,appIdsToDelete:i},r){const a=t.data.get(n,r),s=a.tpaApplicationId;if(f(n,a))c.actualDeleteApps(n,{appsPagesToDelete:o,appIdsToDelete:i},s);else{const o=c.getWidgetCompsToDeleteMap(n,c.getWidgetsOnPagesToDelete(n,[r]));e.forEach(o,function(e){c.deleteWidget(n,e.compPointer,e.applicationId)}),t.remove(n,r)}c.deleteTpaCompleteCallback(n,i)},alreadyInstalled:function(e,t){return i.isAppInstalledBy(e,t)},invokeSectionCallback:d}}.apply(t,o))||(e.exports=i)},function(e,t){e.exports=m},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";return function(t){return function(n,o,i,r){!function(n,o,i,r){let a=1;const s=function(c){if(!c)return void i();const p=o.getIn(["rendererModel","clientSpecMap"]).toJS();!0===c.success?i({changes:[{path:["rendererModel","clientSpecMap"],value:e.assign({},p,c.payload.clientSpecMap)}]}):!1===c.success&&-40103===c.errorCode&&1===a?(a+=1,t(n,o,s,r)):i()};t(n,o,s,r)}(n,o,i,r)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(12),n(19),n(17),n(210),n(60),n(503),n(122),n(32),n(212)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p){"use strict";function l(t,n){const o=i.getMenu(t),r=function(t,n){let o={isSubPage:!1};return e.forEach(t,function(t){const i=t.items||[];e.forEach(i,function(e){(e.link&&e.link.pageId?e.link.pageId.slice(1):"")===n&&(o={isSubPage:!0,menuItemId:e.id})})}),o}(o,n);r.isSubPage&&i.moveItem(t,r.menuItemId,null,o.length)}function u(t,n){const o=i.getMenu(t),r=function(t,n){let o=[];return e.forEach(t,function(t){const i=e.get(t,"link.pageId");i&&i.slice(1)===n&&(o=t.items)}),o}(o,n);e.forEach(r,function(e,n){i.moveItem(t,e.id,null,o.length+n)})}function d(t,n){const o=function(t){const n=t.pointers.routers.getRoutersConfigMapPointer();return e.map(t.dal.get(n),"prefix")}(t);return e.includes(o,n)}function g(t,o){const i=n.getPagesList(t,!0),r=e.map(i,function(e){return n.getPageUriSEO(t,e)});return e.includes(r,o)}function f(t,n){return e.transform(t,function(e,t){e[t]=n},{})}function m(t,i,a,s){s=e.isArray(s)?s:[s];const c=e.get(t.dal.get(a),"id");n.setPageData(t,c,{hidePage:!0,indexable:!1});const p=t.dal.get(i),d=r.get.byPage(t,a);if(d&&!t.pointers.isSamePointer(i,d))throw new Error("page already exist on another router");if(o.homePage.get(t)===a.id)throw new Error("home page can't become dynamic page");p.pages=d?e(p.pages).omitBy(function(e){return e===c}).assign(f(s,c)).value():e.merge(p.pages||{},e.omitBy(f(s,c),e.isUndefined)),l(t,a.id),u(t,a.id),t.dal.set(i,p)}function y(t,i,r){const a=e.get(t.dal.get(r),"id"),s=t.dal.get(i);if(!(s.pages&&e.includes(e.values(s.pages),a)))throw new Error("the page is not connected to this router");E(t,i,a);const c=n.getPageData(t,a),p=n.getValidPageUriSEO(t,a,c.title);t.siteAPI.getPrimaryPageId()===r.id&&o.navigateTo(t,r.id),n.setPageData(t,a,{pageUriSEO:p,title:c.title,hidePage:!1,indexable:!0})}function E(t,n,o){const i=t.dal.get(n);i.pages=e.omitBy(i.pages,function(e){return o===e}),t.dal.set(n,i)}function I(t){const i=n.getPagesDataItems(t),a=o.homePage.get(t);return e.reduce(i,function(e,n){const i=o.getReference(t,n.id);return function(e,t,n,o){return!("Page"!==t.type||t.tpaApplicationId>0||r.get.byPage(e,o)||n===t.id)}(t,n,a,i)&&e.push({pageRef:i,pageData:n}),e},[])}function S(e,t){return{valid:e,message:t,errorCode:t}}return{add:function(t,n,o){const i=e.clone(o);return i.config?e.isObject(i.config)&&(i.config=JSON.stringify(i.config)):i.config="",function(t,n){if(!n.prefix)throw new Error("Router not valid - Missing prefix.");if(!n.appDefinitionId)throw new Error("Router not valid - Missing appDefinitionId.");if(!e.isNil(n.hide)&&!e.isBoolean(n.hide))throw new Error("Router not valid - hide parameter need to be boolean");if(d(t,n.prefix))throw new Error(`Router not valid - Prefix: ${n.prefix}, already exist`);if(g(t,n.prefix))throw new Error(`Router not valid - Page Uri SEO: ${n.prefix}, already exist.`);if(n.pages)throw new Error("Router not valid - pages should not be on the router object")}(t,i),t.dal.set(n,i),n},remove:function(t,n){const i=r.get.all(t),a=r.get.byRef(t,n),s=e.findKey(i,{prefix:a.prefix});e.forEach(a.pages,function(e){const i=o.getReference(t,e);y(t,n,i)}),delete i[s];const c=t.pointers.routers.getRoutersConfigMapPointer();t.dal.set(c,i)},get:{all:r.get.all,byApp:r.get.byApp,byRef:r.get.byRef,byId:r.get.byId},getRouterRef:{byPrefix:r.get.byPrefix,byPage:r.get.byPage},update:function(t,n,o){const i=t.dal.get(n);if(o.prefix&&o.prefix!==i.prefix){if(d(t,o.prefix))throw new Error(`Router not valid - Prefix: ${o.prefix}, already exist`);if(g(t,o.prefix))throw new Error(`Router not valid - Page Uri SEO: ${o.prefix}, already exist.`);i.prefix=o.prefix}o.config&&(e.isObject(o.config)?i.config=JSON.stringify(o.config):i.config=o.config),e.isBoolean(o.hide)&&o.hide!==i.hide&&(i.hide=o.hide),t.dal.set(n,i)},getRouterDataForPageIfExist:r.getRouterDataForPageIfExist,getPageFromInnerRoute:function(o,i,r,a){const c=o.dal.get(o.pointers.routers.getRoutersConfigMapPointer())[i],p=t.routersBackEndRequests.makeParamObjFromPs(o,c,n);s.fileSystem.flush(o,{origin:s.fileSystem.FLUSH_ORIGINS.ROUTERS_PAGE}).then(function(){t.routersBackEndRequests.getInnerRoutesSiteMap(p,function(t){const n=e.find(t,{url:r});a(n?n.pageName:null)},function(){a()},o.siteDataAPI.siteData)})},getRouterInnerRoutes:function(o,i,r,a){const c=o.dal.get(o.pointers.routers.getRoutersConfigMapPointer())[i],p=t.routersBackEndRequests.makeParamObjFromPs(o,c,n);s.fileSystem.flush(o,{origin:s.fileSystem.FLUSH_ORIGINS.ROUTERS_ROUTES}).then(function(){t.routersBackEndRequests.getInnerRoutesSiteMap(p,function(t){a(e.filter(t,{pageName:r}))},function(){a()},o.siteDataAPI.siteData)})},getCurrentInnerRoute:function(t){const n=t.siteAPI.getPrimaryPageId(),o=r.getRouterDataForPageIfExist(t,n);if(!o)return{isDynamic:!1};const i=t.dal.getByPath(["_currentRootInfos",n]);if(i.routerDefinition){if(!i.pageAdditionalData)return{isDynamic:!0,routerId:o.routerId};const t=i.pageAdditionalData.split("/");return{isDynamic:!0,innerRoute:e.drop(t,1).join("/"),routerId:o.routerId}}return{isDynamic:!1}},isValidPrefix:function(t,o,i){if(!i)return S(!1,p.InvalidPrefixReason.PREFIX_CAN_NOT_BE_EMPTY);const a=e.get(c.getAppDataByApplicationId(t,o),"appDefinitionId"),s=function(e,t){const n=r.get.byPrefix(e,t);if(n)return e.dal.get(n).appDefinitionId}(t,i);if(s)return s===a?S(!0,""):S(!1,p.InvalidPrefixReason.PREFIX_IS_IN_USE_BY_ANOTHER_APPLICATION);if(n.isPageUriSeoTooLong(i))return S(!1,p.InvalidPrefixReason.PREFIX_IS_TOO_LONG);if(n.isDuplicatePageUriSeo(t,null,i))return S(!1,p.InvalidPrefixReason.PREFIX_IS_DUPLICATE_OF_URI_SEO);if(i.match(/[^A-Za-z0-9-]/g))return S(!1,p.InvalidPrefixReason.PREFIX_CONTAINS_INVALID_CHARACTERS);const l=t.pointers.general.getForbiddenPageUriSEOs();return(t.dal.get(l)||{})[i]?S(!1,p.InvalidPrefixReason.PREFIX_IS_FORBIDDEN_WORD):S(!0,"")},pages:{add:function(e,t,n,i,r){return o.add(e,t,i),m(e,n,t,r),t},connect:m,disconnect:y,removePageFromRouter:E,listConnectablePages:I,isConnectablePage:function(t,n){const o=e.matchesProperty("pageData.id",n);return e.some(I(t),o)},getDynamicPagesList:function(t){return e.map(r.get.all(t),({appDefinitionId:o,pages:i,prefix:r,group:a,hide:s=!1}={})=>{const{appDefinitionName:p}=c.getAppDataByAppDefId(t,o)||{};return{appDefinitionId:o,appDefinitionName:p,prefix:r,group:a,pages:e(i).values().uniq().map(e=>n.getPageData(t,e)).value(),hide:s}})},move:function(t,n,o,i){const a=r.get.byPage(t,n);if(!a)throw new Error("cannot move a static page");if(!t.pointers.isSamePointer(o,a))throw new Error("page is not related to the origin router");const s=t.dal.get(o),c=t.dal.get(i);if(s&&c&&s.appDefinitionId!==c.appDefinitionId)throw new Error("cannot move a page that not related to app");if(t.pointers.isSamePointer(o,i))return;const p=(l=s.pages,u=n.id,e.invertBy(l)[u]);var l,u;y(t,o,n),m(t,i,n,p)}},getRouterPointer:function(t){const n=r.get.all(t),o=a.generateRouterId(n);!function(t){const n=r.get.all(t);if(e.isEmpty(n)){const e=t.pointers.routers.getRoutersPointer();t.dal.set(e,{configMap:{}})}}(t);const i=t.pointers.routers.getRoutersConfigMapPointer();return t.pointers.getInnerPointer(i,o),t.pointers.routers.getRouterPointer(o)},getPageToAddPointer:function(e){return o.getPageIdToAdd(e)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(2)],void 0===(i=function(e,t){"use strict";const n=e=>e.pointers.getInnerPointer(e.pointers.data.getDataItemFromMaster("masterPage"),"styleSettings");return{isSiteMigrated:o=>{const i=o.dal.get(n(o));return e.get(i,"stylesPerPage")===t.STYLES.STYLES_PER_PAGE_VER},markSiteAsMigrated:e=>e.dal.set(n(e),{stylesPerPage:t.STYLES.STYLES_PER_PAGE_VER}),resetMigratedSiteFlag:e=>e.dal.set(n(e),{})}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";return{isCompRescaling:(t,n)=>e.isNumber(n.scale)&&n.scale!==t.scale,isCompResizing:function(t,n){return e.isNumber(n.width)&&n.width!==t.width||e.isNumber(n.height)&&n.height!==t.height}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(4),n(11),n(8),n(223),n(2)],void 0===(i=function(e,t,n,o,i,r){"use strict";function a(t){let n,o,i,r,a,s,c,p;return n=i=a=c=Number.MAX_VALUE,o=r=p=s=-Number.MAX_VALUE,e.forEach(t,function(e){n=Math.min(n,e.x),o=Math.max(o,e.x+e.width),i=Math.min(i,e.y),r=Math.max(r,e.y+e.height),c=Math.min(c,e.bounding.x),s=Math.max(s,e.bounding.x+e.bounding.width),a=Math.min(a,e.bounding.y),p=Math.max(p,e.bounding.y+e.bounding.height)}),{bounding:{x:c,y:a,width:s-c,height:p-a},x:c,y:a,width:s-c,height:p-a,rotationInDegrees:0}}function s(n,o,i,r){if(!i)return!1;const a=t.layout.get(o,i).bounding[n];return!e.isUndefined(a)&&(r=r||t.getSiblings(o,i),e.every(r,function(r){if(i.id===r.id)return!0;const s=t.layout.get(o,r).bounding[n];return!!e.isUndefined(s)||a<=s}))}function c(t,o){if(!o||0===o.length)return;return a(e.map(o,function(e){return n.isHorizontallyStretchedToScreen(t,e)?function(e,t){const o=n.getCompLayoutRelativeToScreen(e,t),i=n.getCompLayoutRelativeToScreen(e,e.pointers.components.getPagesContainer(r.VIEW_MODES.DESKTOP));return{x:i.x,width:i.width,y:o.y,height:o.height,bounding:{x:i.x,width:i.width,y:o.y,height:o.height}}}(t,e):n.getCompLayoutRelativeToScreen(t,e)}))}function p(o,i,a,s,c){e.forEach(i,function(i){const p=n.getCompLayoutRelativeToScreen(o,i,!0),l=t.getContainer(o,i),d=n.getCompLayoutRelativeToScreen(o,l,!0),g={};switch(s){case r.COMP_ALIGNMENT_OPTIONS.LEFT:g.x=0;break;case r.COMP_ALIGNMENT_OPTIONS.RIGHT:g.x=a.width-p.bounding.width;break;case r.COMP_ALIGNMENT_OPTIONS.TOP:g.y=0;break;case r.COMP_ALIGNMENT_OPTIONS.BOTTOM:g.y=a.height-p.bounding.height;break;case r.COMP_ALIGNMENT_OPTIONS.CENTER:g.x=.5*(a.width-p.bounding.width);break;case r.COMP_ALIGNMENT_OPTIONS.MIDDLE:g.y=.5*(a.height-p.bounding.height)}c||(void 0!==g.x&&(g.x+=a.x-d.x),void 0!==g.y&&(g.y+=a.y-d.y));const f=e.keys(g);e.forEach(f,function(e){g[e]=u(p,e,g[e])}),n.updateCompLayout(o,i,g)})}function l(e,t,i,r){const a=o.public.resizeOnlyProportionally(e,r),s=n.getProportionStructure(e,r),c={};c[t]=i,a?n.updateAndPreserveProportions(e,c,s,!0):n.updateCompLayout(e,r,c)}function u(e,t,n){return e[t]+n-e.bounding[t]}return{getSnugPositionAndSize:function(t,o){if(!o||0===o.length)return;return function(t){let n,o,i,r;return n=i=Number.MAX_VALUE,o=r=-Number.MAX_VALUE,e.forEach(t,function(e){n=Math.min(n,e.x),o=Math.max(o,e.x+e.width),i=Math.min(i,e.y),r=Math.max(r,e.y+e.height)}),{x:n,y:i,width:o-n,height:r-i}}(e.map(o,function(e){return n.getPositionAndSize(t,e)}))},getSnugLayout:function(n,o){if(!o||0===o.length)return;return a(e.map(o,function(e){return t.layout.get(n,e)}))},getSnugLayoutRelativeToStructure:function(t,o){if(!o||0===o.length)return;return a(e.map(o,function(e){return n.getCompLayoutRelativeToStructure(t,e)}))},getSnugLayoutRelativeToScreen:function(t,o){if(!o||0===o.length)return;return a(e.map(o,function(e){return n.getCompLayoutRelativeToScreen(t,e)}))},getSnugLayoutRelativeToScreenConsideringScroll:function(t,o,i){if(!o||0===o.length)return;return a(e.map(o,function(e){return n.getCompLayoutRelativeToScreenConsideringScroll(t,e,i)}))},isTopMost:e.partial(s,"y"),isLeftMost:e.partial(s,"x"),alignComponentsToOuterLayout:p,sortComponentsByZOrder:function(n,o,i){if(0===o.length)return[];const r=t.getContainer(n,o[0]),a=t.getChildren(n,r),s=function(t,n){return e.some(o,n)&&t.push(n),t};return i?e.reduceRight(a,s,[]):e.reduce(a,s,[])},distribute:function(o,r,s){let c,p;if(i.canDistribute(o,r,s)){const l=i.getFilteredComponentsToApplyAction(o,r,s);let d,g;const f=e.map(l,function(e){const i=t.getContainer(o,e);return{compPointer:e,layoutRelativeToScreen:n.getCompLayoutRelativeToScreen(o,e,!0),compContainerLayoutRelativeToScreen:n.getCompLayoutRelativeToScreen(o,i,!0)}});if("horizontal"===s||"verticalAndHorizontal"===s){c=e.map(f,"layoutRelativeToScreen"),p=a(c);const t=e.sumBy(c,"bounding.width");d=(p.width-t)/(c.length-1);let i=0;g=e.sortBy(f,"layoutRelativeToScreen.bounding.x"),e.forEach(g,function(e){const t=i+(p.x-e.compContainerLayoutRelativeToScreen.x);i+=e.layoutRelativeToScreen.bounding.width+d;const r=u(e.layoutRelativeToScreen,"x",t);n.updateCompLayout(o,e.compPointer,{x:r})})}if("vertical"===s||"verticalAndHorizontal"===s){c=e.map(f,"layoutRelativeToScreen"),p=a(c);const t=e.sumBy(f,"layoutRelativeToScreen.bounding.height");d=(p.height-t)/(c.length-1);let i=0;g=e.sortBy(f,"layoutRelativeToScreen.bounding.y"),e.forEach(g,function(e){const t=i+(p.y-e.compContainerLayoutRelativeToScreen.y);i+=e.layoutRelativeToScreen.bounding.height+d;const r=u(e.layoutRelativeToScreen,"y",t);n.updateCompLayout(o,e.compPointer,{y:r})})}}},matchSize:function(n,o,r){if(i.canMatchSize(n,o,r)){const a=i.getFilteredComponentsToApplyAction(n,o,r),s=e.map(a,function(e){return t.layout.get(n,e)}),c=e.sumBy(s,"width")/s.length,p=e.sumBy(s,"height")/s.length;!c||"width"!==r&&"heightAndWidth"!==r||e.forEach(a,l.bind(this,n,"width",c)),!p||"height"!==r&&"heightAndWidth"!==r||e.forEach(a,l.bind(this,n,"height",p))}},align:function(e,t,n){i.canAlign(e,t,n)&&p(e,i.getFilteredComponentsToApplyAction(e,t,n),c(e,t),n,!1)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1)],void 0===(i=function(e,t){"use strict";const n={};return n[t.blogAppPartNames.FEED]=["MasonryPage","MediaBottomPage","MediaLeftPage","MediaRightPage","MediaTopPage","MediaZigzagPage"],n[t.blogAppPartNames.CUSTOM_FEED]=["Masonry","MediaBottom","MediaLeft","MediaRight","MediaTop","MediaZigzag"],{getBlogPaginationCustomizationsByAppPartName:t=>e.map(n[t],function(e){return{type:"AppPartCustomization",forType:"Array",format:"*",view:e,fieldId:"vars",key:"pageNavigationType",value:"pagination"}})}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{GEO:{path:["rendererModel","geo"],revertible:!1},LANGUAGE_CODE:{path:["rendererModel","languageCode"],revertible:!0},SITE_META_DATA:{path:["rendererModel","siteMetaData"],revertible:!0},SE_INDEXABLE:{path:["documentServicesModel","metaSiteData","indexable"],revertible:!0},SOCIAL_THUMBNAIL:{path:["documentServicesModel","metaSiteData","thumbnail"],revertible:!0},FAVICON:{path:["documentServicesModel","metaSiteData","favicon"],revertible:!0},SUPPRESS_COOKIES:{path:["documentServicesModel","metaSiteData","suppressTrackingCookies"],revertible:!0},META_TAGS:{path:["documentServicesModel","metaSiteData","metaTags"],revertible:!0},EXTERNAL_URI_MAPPINGS:{path:["documentServicesModel","metaSiteData","externalUriMappings"],revertible:!0},USE_ONBOARDING:{path:["documentServicesModel","metaSiteData","useOnboarding"],revertible:!0,optional:!0},ORIGINAL_TEMPLATE_ID:{path:["documentServicesModel","originalTemplateId"],revertible:!1},CUSTOM_HEAD_TAGS:{path:["documentServicesModel","customHeadTags"],revertible:!1},SEO_TITLE:{path:["documentServicesModel","metaSiteData","title"],revertible:!0},SITE_ID:{path:["rendererModel","siteInfo","siteId"],revertible:!0},META_SITE_ID:{path:["rendererModel","metaSiteId"],revertible:!0},USER_ID:{path:["rendererModel","userId"],revertible:!0},EDITOR_SESSION_ID:{path:["documentServicesModel","editorSessionId"],revertible:!1},META_SITE_DATA:{path:["documentServicesModel","metaSiteData"],revertible:!1},USER_INFO:{path:["documentServicesModel","userInfo"],revertible:!1},SITE_NAME:{path:["documentServicesModel","siteName"],revertible:!1},SITE_REVISION:{path:["documentServicesModel","revision"],revertible:!1},SITE_VERSION:{path:["documentServicesModel","version"],revertible:!1},NEVER_SAVED:{path:["documentServicesModel","neverSaved"],revertible:!1},IS_PUBLISHED:{path:["documentServicesModel","isPublished"],revertible:!1},PUBLIC_URL:{path:["documentServicesModel","publicUrl"],revertible:!1},USED_META_SITE_NAMES:{path:["documentServicesModel","usedMetaSiteNames"],revertible:!1},CLIENT_SPEC_MAP:{path:["rendererModel","clientSpecMap"],revertible:!1},APPLICATION_TYPE:{path:["rendererModel","siteInfo","applicationType"],revertible:!1},DOCUMENT_TYPE:{path:["rendererModel","siteInfo","documentType"],revertible:!1},PREMIUM_FEATURES:{path:["rendererModel","premiumFeatures"],revertible:!1},PENDING_APPS:{path:["documentServicesModel","pendingApps"],revertible:!1},PASSWORD_PROTECTED_PAGES:{path:["rendererModel","passwordProtectedPages"],revertible:!1},SESSION_PAGES_TO_HASH_PASSWORD:{path:["rendererModel","pageToHashedPassword"],revertible:!1},PERMISSIONS:{path:["documentServicesModel","permissionsInfo","permissions"],revertible:!1},IS_OWNER:{path:["documentServicesModel","permissionsInfo","isOwner"],revertible:!1},IS_HTTPS_ENABLED:{path:["documentServicesModel","isHttpsEnabled"],revertible:!1},SITE_TOKEN:{path:["documentServicesModel","permissionsInfo","siteToken"],revertible:!1,optional:!0},MEDIA_SITE_UPLOAD_TOKEN:{path:["documentServicesModel","mediaManagerInfo","siteUploadToken"],revertible:!1,optional:!0},MEDIA_USER_UPLOAD_TOKEN:{path:["documentServicesModel","mediaManagerInfo","userUploadToken"],revertible:!1,optional:!0},CURRENT_LANGUAGE_CODE:{path:["multilingual","currentLanguageCode"],revertible:!1,optional:!0},MULTILINGUAL:{path:["rendererModel","sitePropertiesInfo","multilingualInfo"],revertible:!1,optional:!0},IS_MULTILINGUAL:{path:["rendererModel","sitePropertiesInfo","multilingualInfo","isEnabled"],revertible:!1,optional:!0},ORIGINAL_LANGUAGE:{path:["rendererModel","sitePropertiesInfo","multilingualInfo","originalLanguage"],revertible:!1,optional:!0},TRANSLATION_LANGUAGES:{path:["rendererModel","sitePropertiesInfo","multilingualInfo","translationLanguages"],revertible:!1,optional:!0},CURRENCY:{path:["rendererModel","sitePropertiesInfo","currency"],revertible:!1,optional:!0},TIME_ZONE:{path:["rendererModel","sitePropertiesInfo","timeZone"],revertible:!1,optional:!0},LOCALE:{path:["rendererModel","sitePropertiesInfo","locale"],revertible:!1,optional:!0}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(0),n(1),n(40)],void 0===(i=function(e,t,n){"use strict";const o=t.ajaxLibrary,i={SE_ENABLE_INDEX_PARAM_IS_NOT_BOOLEN:"SE_ENABLE_INDEX_PARAM_IS_NOT_BOOLEN",TEXT_IS_NOT_STRING:"TEXT_IS_NOT_STRING",TEXT_TOO_LONG:"TEXT_TOO_LONG",TEXT_INVALID_CHARS:"TEXT_INVALID_CHARS",KEYWORDS_INVALID_CHARS:"KEYWORDS_INVALID_CHARS",METATAGS_INVALID_FORMAT:"METATAGS_INVALID_FORMAT",METATAGS_INVALID_CHARS:"METATAGS_INVALID_CHARS",METATAGS_SERVER_INVALID_CODE:"METATAGS_SERVER_INVALID_CODE",METATAGS_SERVER_INVALID_TAG:"METATAGS_SERVER_INVALID_TAG",REDIRECT_INVALID_CHARS:"REDIRECT_INVALID_CHARS",REDIRECT_URI_MAPPING_IS_NOT_OBJECT:"REDIRECT_URI_MAPPING_IS_NOT_OBJECT",REDIRECT_FROM_URIS_IS_NOT_ARRAY:"REDIRECT_FROM_URIS_IS_NOT_ARRAY",REDIRECT_MAPPING_INVALID_FORMAT:"REDIRECT_MAPPING_INVALID_FORMAT",REDIRECT_MAPPING_URIS_NOT_STRING:"REDIRECT_MAPPING_URIS_NOT_STRING",SERVER_VALIDATION_TIMEOUT:"SERVER_VALIDATION_TIMEOUT"},r={TITLE_MAX_LENGTH:70,DESCRIPTION_MAX_LENGTH:320,KEYWORDS_MAX_LENGTH:250,METATAGS_MAX_LENGTH:2e3,REDIRECT_MAX_LENGTH:149},a={HTML_CHARS:/[<>]/g,KEYWORD_CHARS:/[!#$%^&()+=\]\[}{";:\/><~]/g,META_TAG:/^\s*((((<meta|<link)\s[^>]*>*[\s\n]*)*>)|[\s\n]*(<!--[^<>]*-->)[\s\n]*)*[\s\n]*$/i,URI_CHARS:/[^.,';()%@!?$&*+~a-zA-Z0-9\[\]_:\/\"\n=-]/gi};function s(t,n){if(!e.isString(n))return{success:!1,errorCode:i.TEXT_IS_NOT_STRING};if(n.length>r.TITLE_MAX_LENGTH)return{success:!1,errorCode:i.TEXT_TOO_LONG,validLength:r.TITLE_MAX_LENGTH};const o=m(n);return o&&o.length?{success:!1,errorCode:i.TEXT_INVALID_CHARS,errorContent:o}:{success:!0}}function c(t,n){if(!e.isString(n))return{success:!1,errorCode:i.TEXT_IS_NOT_STRING};if(n.length>r.DESCRIPTION_MAX_LENGTH)return{success:!1,errorCode:i.TEXT_TOO_LONG,validLength:r.DESCRIPTION_MAX_LENGTH};const o=m(n);return o&&o.length?{success:!1,errorCode:i.TEXT_INVALID_CHARS,errorContent:o}:{success:!0}}function p(t,n){if(!e.isString(n))return{success:!1,errorCode:i.TEXT_IS_NOT_STRING};if(n.length>r.KEYWORDS_MAX_LENGTH)return{success:!1,errorCode:i.TEXT_TOO_LONG,validLength:r.KEYWORDS_MAX_LENGTH};const o=(s=n,e.uniq(s.match(a.KEYWORD_CHARS)));var s;return o&&o.length?{success:!1,errorCode:i.KEYWORDS_INVALID_CHARS,errorContent:o}:{success:!0}}function l(t,n,o,s){return e.isString(n)?(e.isEmpty(n)&&o({success:!0}),n.length>r.METATAGS_MAX_LENGTH?(s({success:!1,errorCode:i.TEXT_TOO_LONG,validLength:r.METATAGS_MAX_LENGTH}),!1):(c=n,e.isEmpty(c)||!a.META_TAG.test(c)?(s({success:!1,errorCode:i.METATAGS_INVALID_FORMAT}),!1):!e.includes(n,"")||(s({success:!1,errorCode:i.METATAGS_INVALID_CHARS}),!1))):(s({success:!1,errorCode:i.TEXT_IS_NOT_STRING}),!1);var c}function u(e,t,n,i){l(0,t,n,i)&&function(e,t,n){o.ajax({type:"POST",url:"//editor.wix.com/html/head-tags/validate",contentType:"text/plain; charset=utf-8",data:e,success:d.bind(null,t,n),error:g.bind(null,n)})}(t,n,i)}function d(t,n,o){if(o.success)t({success:!0});else{const t=o.errorCode,r=o.errorDescription;let a,s="";if(0===t)s=i.SERVER_VALIDATION_TIMEOUT;else{const t=r.match(/'(.*)' tags are not allowed/),n=t&&e.size(t)>=1?t[1]:"";switch(n){case"":case"#text":s=i.METATAGS_SERVER_INVALID_CODE;break;default:s=i.METATAGS_SERVER_INVALID_TAG,a=n}}n({success:!1,errorCode:s,errorContent:a})}}function g(e){e({success:!1})}function f(t,n){if(!e.isObject(n))return{success:!1,errorCode:i.REDIRECT_URI_MAPPING_IS_NOT_OBJECT};let o=null;return e.forEach(n,function(t,n){if(!e.isString(n)||!e.isString(t))return void(o=o||{success:!1,errorCode:i.REDIRECT_MAPPING_URIS_NOT_STRING});if(n.length>r.REDIRECT_MAX_LENGTH)return void(o=o||{success:!1,errorCode:i.TEXT_TOO_LONG,validLength:r.REDIRECT_MAX_LENGTH});const s=(c=n,e.uniq(c.match(a.URI_CHARS)));var c;s&&s.length&&(o=o||{success:!1,errorCode:i.REDIRECT_INVALID_CHARS,errorContent:s})}),o||{success:!0}}function m(t){return e.uniq(t.match(a.HTML_CHARS))}function y(t,o,i){const r=n.getProperty(t,n.PROPERTY_NAMES.META_TAGS);let a=e.find(r,{name:o});a||(a=function(e){return{name:e,value:"",isProperty:!1}}(o),r.push(a)),a.value=i,n.setProperty(t,n.PROPERTY_NAMES.META_TAGS,r)}return{ERRORS:i,indexing:{enable:function(t,o){if(!e.isBoolean(o))throw new Error(i.SE_ENABLE_INDEX_PARAM_IS_NOT_BOOLEN);n.setProperty(t,n.PROPERTY_NAMES.SE_INDEXABLE,o)},isEnabled:function(e){return n.getProperty(e,n.PROPERTY_NAMES.SE_INDEXABLE)}},title:{set:function(e,t){const o=s(0,t);if(!o.success)throw new Error(o.errorCode);n.setProperty(e,n.PROPERTY_NAMES.SEO_TITLE,t)},get:function(e){return n.getProperty(e,n.PROPERTY_NAMES.SEO_TITLE)},validate:s},description:{set:function(e,t){const n=c(0,t);if(!n.success)throw new Error(n.errorCode);y(e,"description",t)},get:function(t){const o=n.getProperty(t,n.PROPERTY_NAMES.META_TAGS),i=e.find(o,{name:"description"});return i&&i.value||""},validate:c},keywords:{set:function(e,t){const n=p(0,t);if(!n.success)throw new Error(n.errorCode);y(e,"keywords",t)},get:function(t){const o=n.getProperty(t,n.PROPERTY_NAMES.META_TAGS),i=e.find(o,{name:"keywords"});return i&&i.value||""},validate:p},headTags:{set:function(e,t,o,i){u(0,t,function(){n.setProperty(e,n.PROPERTY_NAMES.CUSTOM_HEAD_TAGS,t),o()},function(e){i(e.errorCode)})},get:function(e){return n.getProperty(e,n.PROPERTY_NAMES.CUSTOM_HEAD_TAGS)},validate:u,clientSideValidation:function(e,t,n,o){return l(0,t,n,o)}},redirectUrls:{update:function(t,o){const i=f(0,o);if(!i.success)throw new Error(i.errorCode);const r=n.getProperty(t,n.PROPERTY_NAMES.EXTERNAL_URI_MAPPINGS),a={};e.forEach(r,function(e){const t=e.fromExternalUri,n=e.toWixUri;a[t]=n});const s=e.mergeWith(a,o,function(t,n){return e.isEmpty(n)?t:n}),c=e.map(s,function(e,t){return{fromExternalUri:t,toWixUri:e}});n.setProperty(t,n.PROPERTY_NAMES.EXTERNAL_URI_MAPPINGS,c)},remove:function(t,o){if(!e.isArray(o))throw new Error(i.REDIRECT_FROM_URIS_IS_NOT_ARRAY);const r=n.getProperty(t,n.PROPERTY_NAMES.EXTERNAL_URI_MAPPINGS),a=e.filter(r,function(t){const n=t.fromExternalUri;return!e.includes(o,n)});return n.setProperty(t,n.PROPERTY_NAMES.EXTERNAL_URI_MAPPINGS,a),!0},get:function(t){const o=n.getProperty(t,n.PROPERTY_NAMES.EXTERNAL_URI_MAPPINGS),i={};return e.forEach(o,function(e){i[e.fromExternalUri]=e.toWixUri}),i},validate:f}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";const t=e=>e[1]-e[0]+1,n=(n,o,i)=>{const r=e.clone(n);return r.splice(i,0,...r.splice(o[0],t(o))),r},o=(e,[t,n])=>e>=t&&e<=n,i=(e,[t])=>e<t,r=([e])=>e,a=([,e])=>e;return{swapGroups:(e,t,n)=>{const o=t[0],i=t[1],r=n[0],a=n[1];return[...e.slice(0,o),...e.slice(r,a+1),...e.slice(i+1,r),...e.slice(o,i+1),...e.slice(a+1)]},moveGroupToIndex:n,moveGroupToEndOfArray:(e,o)=>n(e,o,e.length-t(o)),moveGroupToStartOfArray:(e,t)=>n(e,t,0),findNearestValidIndex:(t,n,s)=>{s=e.isEmpty(s)?[[0,t.length-1]]:s;const c=e.sortBy(s,([e])=>e);let p;for(p=0;p<c.length;p++){const e=c[p];if(o(n,e))return n;if(i(n,e)){if(0===p)return r(e);const t=c[p-1];return a(t)}}return a(e.last(c))},findNext:(t,n,o)=>e.findIndex(t,n,o+1),findPrev:(t,n,o)=>{const i=o-1;return-1===i?i:e.findLastIndex(t,n,i)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(1),n(8)],void 0===(i=function(e,t){"use strict";const n=(e,t)=>{const n=e.pointers.getInnerPointer(t,"layout.fixedPosition");return!!e.dal.get(n)},o=(n,o)=>{if(n.pointers.components.isPage(o))return!1;if(((e,n)=>"platform.components.AppController"===t.getComponentType(e,n))(n,o))return!1;const i=n.pointers.components.getParent(o),r=e.displayedOnlyStructureUtil.isDisplayedComponent(o.id),a=i&&e.displayedOnlyStructureUtil.isDisplayedComponent(i.id);return!(r&&!a)};return{isCompArrangeable:o,canSwapComponents:(e,t,i)=>o(e,i)&&n(e,t)===n(e,i)}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(5),n(246),n(247),n(249),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(267),n(268),n(269),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(283),n(284),n(285),n(286),n(287),n(288),n(289),n(290),n(151),n(291),n(292),n(293),n(294),n(295),n(296),n(297),n(298),n(299),n(300),n(301),n(302),n(304),n(305),n(306),n(307),n(308),n(154),n(309),n(310),n(311),n(312),n(313),n(314),n(315),n(316),n(317),n(318),n(319),n(320),n(321),n(322),n(323),n(324),n(325),n(326),n(327),n(328),n(329),n(330),n(331),n(332),n(333),n(334),n(335),n(336),n(337),n(338),n(339),n(340),n(341),n(342),n(343),n(344),n(345),n(346),n(347),n(348),n(349),n(350),n(351),n(352),n(353),n(354),n(355),n(356),n(357),n(358),n(359),n(360),n(361),n(362),n(363),n(157),n(364),n(365),n(366)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l,u,d,g,f,m,y,E,I,S,h,P,A,T,v,C,_,O,D,w,M,b,R,N,x,L,B,F,k,U,H,V,W,G,Y,z,K,$,q,j,Q,X,Z,J,ee,te,ne,oe,ie,re,ae,se,ce,pe,le,ue,de,ge,fe,me,ye,Ee,Ie,Se,he,Pe,Ae,Te,ve,Ce,_e,Oe,De,we,Me,be,Re,Ne,xe,Le,Be,Fe,ke,Ue,He,Ve,We,Ge,Ye,ze,Ke,$e,qe,je,Qe,Xe,Ze,Je,et,tt,nt,ot,it,rt,at,st,ct,pt,lt,ut,dt,gt,ft,mt){"use strict";return e.defaults({"wysiwyg.viewer.components.HeaderContainer":d,"wysiwyg.viewer.components.EbayItemsBySeller":n,"wysiwyg.viewer.components.FooterContainer":g,"wysiwyg.viewer.components.AdminLoginButton":i,"wysiwyg.viewer.components.LoginButton":E,"wysiwyg.viewer.components.BgImageStrip":r,"wysiwyg.viewer.components.ContactForm":a,"wysiwyg.viewer.components.DynamicContactForm":a,"wysiwyg.common.components.facebooklikebox.viewer.FacebookLikeBox":s,"wysiwyg.viewer.components.WFacebookLike":c,"wysiwyg.viewer.components.FacebookShare":p,"wysiwyg.viewer.components.FiveGridLine":l,"wysiwyg.viewer.components.FlickrBadgeWidget":u,"wysiwyg.common.components.imagebutton.viewer.ImageButton":f,"wysiwyg.viewer.components.ItunesButton":m,"wysiwyg.viewer.components.LinkBar":y,"wysiwyg.viewer.components.LoginSocialBar":I,"wysiwyg.common.components.onlineclock.viewer.OnlineClock":S,"wysiwyg.viewer.components.PageGroup":h,"mobile.core.components.Page":P,"wysiwyg.viewer.components.Group":A,"wysiwyg.viewer.components.FlashComponent":T,"wysiwyg.viewer.components.PagesContainer":v,"wysiwyg.viewer.components.PayPalButton":C,"wysiwyg.common.components.pinitpinwidget.viewer.PinItPinWidget":_,"wysiwyg.viewer.components.PinterestFollow":O,"wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt":D,"wysiwyg.common.components.rssbutton.viewer.RSSButton":w,"wysiwyg.viewer.components.ScreenWidthContainer":M,"wysiwyg.viewer.components.StripContainer":b,"wysiwyg.common.components.singleaudioplayer.viewer.SingleAudioPlayer":R,"wysiwyg.viewer.components.SiteButton":N,"wysiwyg.viewer.components.SiteSegmentContainer":x,"wysiwyg.viewer.components.SiteRegionContainer":L,"wysiwyg.viewer.components.WSiteStructure":B,"wysiwyg.common.components.skypecallbutton.viewer.SkypeCallButton":F,"wysiwyg.viewer.components.SlideShowGallery":k,"tpa.viewer.components.Thumbnails":U,"tpa.viewer.components.Accordion":H,"wysiwyg.viewer.components.HtmlComponent":V,"wysiwyg.viewer.components.GoogleMap":W,"wysiwyg.common.components.spotifyfollow.viewer.SpotifyFollow":G,"wysiwyg.common.components.subscribeform.viewer.SubscribeForm":Y,"wysiwyg.viewer.components.svgshape.SvgShape":z,"wysiwyg.viewer.components.VectorImage":K,"wysiwyg.viewer.components.mobile.TinyMenu":$,"wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton":q,"wysiwyg.viewer.components.BackToTopButton":j,"wysiwyg.viewer.components.VerticalLine":Q,"wysiwyg.viewer.components.VKShareButton":X,"wysiwyg.common.components.weather.viewer.Weather":Z,"wysiwyg.viewer.components.WFacebookComment":J,"wysiwyg.common.components.disquscomments.viewer.DisqusComments":ee,"wysiwyg.viewer.components.WGooglePlusOne":oe,"wysiwyg.viewer.components.WPhoto":ie,"wysiwyg.viewer.components.ClipArt":Le,"wysiwyg.viewer.components.WTwitterFollow":re,"wysiwyg.viewer.components.WTwitterTweet":ae,"wysiwyg.common.components.youtubesubscribebutton.viewer.YouTubeSubscribeButton":se,"wysiwyg.viewer.components.tpapps.TPAWidget":ce,"tpa.viewer.components.tpapps.TPAWidget":ce,"wysiwyg.viewer.components.tpapps.TPASection":le,"wysiwyg.viewer.components.tpapps.TPAGluedWidget":pe,"tpa.viewer.components.tpapps.TPAGluedWidget":pe,"wysiwyg.viewer.components.tpapps.TPAMultiSection":le,"wixapps.integration.components.AppPage":ue,"wixapps.integration.components.AppPart":de,"wixapps.integration.components.AppPart2":ge,"wysiwyg.common.components.anchor.viewer.Anchor":fe,"tpa.viewer.components.StripSlideshow":Ee,"tpa.viewer.components.StripShowcase":Ie,"tpa.viewer.components.Collage":Se,"tpa.viewer.components.Masonry":me,"tpa.viewer.components.Freestyle":ye,"wysiwyg.viewer.components.tpapps.TPA3DCarousel":he,"wysiwyg.viewer.components.Video":Pe,"wysiwyg.viewer.components.MatrixGallery":Ae,"wysiwyg.viewer.components.documentmedia.DocumentMedia":Te,"wysiwyg.common.components.spotifyplayer.viewer.SpotifyPlayer":ve,"wysiwyg.viewer.components.SoundCloudWidget":Ce,"wysiwyg.viewer.components.WRichText":_e,"wysiwyg.common.components.verticalmenu.viewer.VerticalMenu":Oe,"wysiwyg.viewer.components.ExpandableMenu":De,"wysiwyg.viewer.components.menus.DropDownMenu":we,"wysiwyg.viewer.components.SliderGallery":Me,"wysiwyg.viewer.components.PaginatedGridGallery":be,"mobile.core.components.Container":Re,"wysiwyg.viewer.components.PopupContainer":Ne,"wysiwyg.viewer.components.PopupCloseTextButton":N,"wysiwyg.viewer.components.AudioPlayer":xe,"wysiwyg.viewer.components.BoxSlideShowSlide":Be,"wysiwyg.viewer.components.BoxSlideShow":Fe,"wysiwyg.viewer.components.StateBoxState":ke,"wysiwyg.viewer.components.StateBox":Ue,"wysiwyg.viewer.components.StateStripState":He,"wysiwyg.viewer.components.StateStrip":Ve,"wysiwyg.viewer.components.StripContainerSlideShowSlide":We,"wysiwyg.viewer.components.QuickActionBar":Ge,"wysiwyg.viewer.components.QuickActionBarItem":Ye,"wysiwyg.viewer.components.StripContainerSlideShow":ze,"wysiwyg.viewer.components.StripColumnsContainer":Ke,"wysiwyg.common.components.verticalanchorsmenu.viewer.VerticalAnchorsMenu":o,"wysiwyg.viewer.components.inputs.TextInput":$e,"wysiwyg.viewer.components.inputs.TextAreaInput":qe,"wysiwyg.viewer.components.inputs.FileUploader":je,"wysiwyg.viewer.components.inputs.ComboBoxInput":$e,"wysiwyg.viewer.components.inputs.Checkbox":Qe,"wysiwyg.viewer.components.inputs.DatePicker":Xe,"wysiwyg.viewer.components.Column":Ze,"wysiwyg.viewer.components.MediaControls":et,"wysiwyg.viewer.components.MediaOverlayControls":tt,"wysiwyg.viewer.components.MediaPlayer":Je,"platform.components.AppController":nt,"wysiwyg.viewer.components.ImageButtonWithText":ot,"wysiwyg.viewer.components.inputs.RadioButton":$e,"wysiwyg.viewer.components.HoverBox":it,"wysiwyg.viewer.components.Popover":rt,"wysiwyg.viewer.components.inputs.RadioGroup":te,"wysiwyg.viewer.components.Repeater":at,"wysiwyg.viewer.components.MediaContainer":st,"wysiwyg.viewer.components.Grid":ct,"wysiwyg.viewer.components.LanguageSelector":pt,"wysiwyg.viewer.components.FormContainer":lt,"wysiwyg.viewer.components.inputs.CheckboxGroup":ne,"wysiwyg.viewer.components.InlinePopupToggle":dt,"wysiwyg.viewer.components.MenuToggle":gt,"wysiwyg.viewer.components.MenuContainer":ft,"platform.components.AppWidget":ut},t.isOpen("registerComponentsDynamically")?{}:mt)}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(9),n(2),n(152)],void 0===(i=function(e,t,n,o){"use strict";return{mobileConversionConfig:{category:"graphic",isSuitableForProportionGrouping:!0},rotatable:!0,flippable:!0,resizableSides:(e,o)=>t.isMaintainSvgAspectRatio(e,o)?[]:[n.RESIZE_SIDES.TOP,n.RESIZE_SIDES.LEFT,n.RESIZE_SIDES.BOTTOM,n.RESIZE_SIDES.RIGHT],layoutLimits(n,i){const r=t.isMaintainSvgAspectRatio(n,i)?o.getOriginalAspectRatio(n,i):null,a=function(t,n){const i=t.dal.get(t.pointers.getInnerPointer(n,"styleId")),r=t.pointers.components.getPageOfComponent(n).id,a=t.dal.get(t.pointers.data.getThemeItem(i,r)),s=parseInt(e.get(a,["style","properties","strokewidth"],0),10);let c=Math.max(s+1,5),p=Math.max(s+1,5);const l=o.getOriginalAspectRatio(t,n);return l&&(l>1?c=(p=s+1)*l:p=(c=s+1)/l),{minWidth:Math.ceil(c),minHeight:Math.ceil(p)}}(n,i);return{aspectRatio:r,minWidth:a.minWidth,minHeight:a.minHeight,maxHeight:2e3}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(87),n(1)],void 0===(i=function(e,t,n){"use strict";const{requestsUtil:o,svgUtils:i}=t,{SVG_STORES:r,EMPTY_SHAPE:a,svgIdToUrl:s}=i,{svgStringToStoreData:c}=n.svg,p={method:"GET",headers:{"content-type":"text/plain"},mode:"cors"};function l(t,n,o){const i=t.pointers.svgShapes.getSvgShapePointer(n),a=t.pointers.getInnerPointer(i,r.CONTENT),s=t.dal.get(a);return e.isFunction(o)&&o(s),s}return{cacheSvgString:function(e,t){!function(e,t,n){const i=l(e,t);i?n(i):function(e,t,n){o.fetch(function(e,t){const n=e.pointers.general.getServiceTopology(),o=e.pointers.getInnerPointer(n,"mediaRootUrl"),i=e.dal.get(o);return s(i,t,{rendererModel:e.siteDataAPI.siteData.rendererModel})}(e,t),p).then(o=>o.text().then(o=>{!function(e,t,n){const o=e.pointers.svgShapes.getSvgShapePointer(t),i=c(n||a);e.dal.set(o,i)}(e,t,o),n(o)}))}(e,t,n)}(e,t,function(){e.setOperationsQueue.asyncPreDataManipulationComplete()})},getSvgFromCache:l,getSvgInfoFromCache:function(e,t){const n=e.pointers.svgShapes.getSvgShapePointer(t),o=e.pointers.getInnerPointer(n,r.INFO);return e.dal.get(o)},getOriginalAspectRatio:function(t,n){const o=t.dal.get(n),i=t.pointers.components.getPageOfComponent(n),a=t.pointers.data.getDataItem(o.dataQuery.replace("#",""),i.id),s=t.dal.get(a),c=e.get(s,["svgId"]),p=t.pointers.svgShapes.getSvgShapePointer(c),l=t.pointers.getInnerPointer(p,r.BOX_BOUNDARIES),u=t.dal.get(l);return e.isEmpty(u)?0:u.width/u.height}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(3)],void 0===(i=function(e,t){"use strict";const n={"142bb34d-3439-576a-7118-683e690a1e0d":"gallery","14517f3f-ffc5-eced-f592-980aaa0bbb5c":"wixChat"};function o(t,n){if(!e.has(n,"applicationId")||!e.has(n,"widgetId"))return{};const o=t.pointers.general.getClientSpecMap(),i=t.dal.get(o);return e.get(i,[n.applicationId,"widgets",n.widgetId])||{}}return{isRepeatable:!1,getWidgetData:o,nickname(i,r){const a=o(i,t.getDataItem(i,r));let s="";const c=e.get(a,"widgetId");return s=n.hasOwnProperty(c)?n[c]:e.camelCase(a.tpaWidgetId)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(3),n(9)],void 0===(i=function(e,t,n){"use strict";function o(t,n){if(!e.has(n,"applicationId"))return{};const o=t.pointers.general.getClientSpecMap(),i=t.dal.get(o),r=e.get(i,n.applicationId);return e.get(r,["widgets",n.widgetId])}function i(e,t,n){const o=e.dataQuery.replace("#",""),i=t.pointers.data.getDataItem(o,n);return t.dal.get(i)}return{isRepeatable:!1,mobileConversionConfig:{convertFixedPositionToAbsolute:!0,stretchHorizontally(t,n,r){const a=o(t,i(n,t,r));return!0===e.get(a,"shouldBeStretchedByDefaultMobile")},minHeight(t,n,r){const a=o(t,i(n,t,r));return e.get(a,"componentFields.minHeightInMobile")}},removable:!1,duplicatable:!1,containable:!1,canBeFixedPosition:!1,canBeStretched(n,i){const r=o(n,t.getDataItem(n,i));return!0===e.get(r,"canBeStretched")},getWidgetData:o,nickname(i,r){const a=o(i,t.getDataItem(i,r));if(a){const t=e.get(a,"appPage.id");return e.camelCase(t)}return n.getComponentNickname(i,r)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";function t(e,t){return e.siteAPI.getWixappsPackageDescriptor(t)}function n(n,o,i){const r=t(n,o),a=e.get(r,"parts");return e.find(a,{id:i})}return{getDescriptor:t,getPackageName:function(e,t){const n=e.pointers.general.getClientSpecMap(),o=e.pointers.getInnerPointer(n,[t,"packageName"]);return e.dal.get(o)},getAppPartRole:function(t,o,i){const r=n(t,o,i);return e.get(r,"role")},getAppPartDefinition:n}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(21)],void 0===(i=function(e){"use strict";return{wasPartLoadedSuccessfully:function(t,n){const o=t.dal.getByPath(e.getAppPart2MetadataPath(n));return o&&!1===o.loading&&!o.error},wasRepoLoadedSuccessfully:function(t){const n=t.dal.getByPath(e.getAppbuilderMetadataPath());return n&&!1===n.loading&&!n.error}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{layoutLimits:{minWidth:26,minHeight:26}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{MINIMAL_CHILDREN_NUMBER:"minimalChildrenNumber",MAXIMUM_CHILDREN_NUMBER:"maximumChildrenNumber",ANCHORS:"anchors",CONTAINABLE:"containable",CONTAINABLE_BY_STRUCTURE:"containableByStructure",CAN_CONTAIN:"canContain",CAN_CONTAIN_BY_STRUCTURE:"canContainByStructure",CAN_REPARENT:"canReparent",SHOULD_KEEP_CHILDREN_IN_PLACE:"shouldKeepChildrenInPlace",IS_REPEATER:"isRepeater",IS_REPEATABLE:"isRepeatable",IS_CONTAIN_CHECK_RECURSIVE:"isContainCheckRecursive",IS_EXTERNAL:"isExternal",GROUPABLE:"groupable",ENFORCE_CONTAINER_CHILD_LIMITS_BY_WIDTH:"enforceContainerChildLimitsByWidth",ENFORCE_CONTAINER_CHILD_LIMITS_BY_HEIGHT:"enforceContainerChildLimitsByHeight",CONTAINER:"container",MOVE_DIRECTIONS:"moveDirections",RESIZABLE_SIDES:"resizableSides",ROTATABLE:"rotatable",FLIPPABLE:"flippable",FIXED_POSITION:"canBeFixedPosition",MODAL:"modal",MOBILE_ONLY:"mobileOnly",CAN_BE_STRETCHED:"canBeStretched",REMOVABLE:"removable",DUPLICATABLE:"duplicatable",HIDDENABLE:"hiddenable",COLLAPSIBLE:"collapsible",DOCKABLE:"dockable",LAYOUT_LIMITS:"layoutLimits",FULL_WIDTH:"fullWidth",FULL_WIDTH_BY_STRUCTURE:"fullWidthByStructure",STYLE_CAN_BE_APPLIED:"styleCanBeApplied",NICKNAME:"nickname",ALIGNABLE:"alignable",DISABLEABLE:"disableable",RESIZE_ONLY_PROPORTIONALLY:"resizeOnlyProportionally",ENFORCE_RESIZABLE_CORNERS:"enforceResizableCorners",IS_PROPORTIONALLY_RESIZABLE:"isProportionallyResizable",IGNORE_CHILDREN_ON_PROPORTINAL_RESIZE:"ignoreChildrenOnProportionalResize",ENFORCE_MAX_DIM_ON_PROPORTIONAL_RESIZE:"enforceMaxDimensionsOnProportionalResize",USING_LEGACY_APP_PART_SCHEMA:"usingLegacyAppPartSchema",DEFAULT_MOBILE_PROPERTIES:"defaultMobileProperties",VISIBLE:"isVisible",MOBILE_CONVERSION_CONFIG:"mobileConversionConfig",SHOULD_GENERATE_NICKNAME:"shouldGenerateNickname",FORCE_MAINTAIN_IDS_ON_SERIALIZE:"forceMaintainIDsOnSerialize"}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(1)],void 0===(i=function(e){"use strict";return{getStyleIdToAdd:(t,n,o,i,r)=>r||e.guidUtils.getUniqueId("style","-")}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(22),n(161),n(41),n(2),n(376),n(3),n(14),n(110),n(162),n(27),n(18)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l,u){"use strict";const d={"wysiwyg.viewer.components.HeaderContainer":!0,"wysiwyg.viewer.components.FooterContainer":!0,"wysiwyg.viewer.components.mobile.TinyMenu":!0,"wysiwyg.viewer.components.MenuToggle":!0};function g(e,t,n){const o=e.pointers.getInnerPointer(t,["layout",n]);return e.dal.get(o)||0}function f(t,n){return t.pointers.components.isPage(n)?{x:0,y:0}:e.pick(o.getPositionAndSize(t,n),["x","y"])}function m(e,t){return{x:e.x+t.x,y:e.y+t.y}}function y(e,t){const n=e.pointers.getInnerPointer(t,["layout","fixedPosition"]);return e.dal.get(n)}function E(e,n){if(!y(e,n))return!1;const o=e.pointers.general.getRenderFlag("renderFixedPositionContainers");if(e.dal.get(o))return!0;const i=t.getType(e,n);return!d[i]}function I(e,t){if(E(e,t))return function(e,t){const n=f(e,t);return"MOBILE"===s.getViewMode(e)?n:(n.x-=_(e),n)}(e,t);const n=e.pointers.components.getParent(t),o=f(e,t);if(n){return m(o,I(e,n))}if(!e.pointers.components.isInMasterPage(t)){return m(o,function(e,t,n){const o=e.pointers.components.getPagesContainer(t);return{x:g(e,o,"x"),y:l.isPopup(e,n)?0:g(e,o,"y")}}(e,e.pointers.components.getViewMode(t),t.id))}return o}function S(t,n){const i=I(t,n);let r=t.dal.get(t.pointers.getInnerPointer(n,"layout"));const a=o.getPositionAndSize(t,n,r);r=e.defaults(r,a);const s=e.assign(r,i);return s.bounding=o.getBoundingLayout(t,s),s}function h(t,o,i){const r=t.pointers.getInnerPointer(o,"layout"),s=t.dal.get(r),c=t.siteAPI.getScreenSize(),p=t.siteAPI.getSiteMeasureMap(),l=function(e,t){const n=e.pointers.getInnerPointer(t,"layout");return{data:a.getDataItem(e,t),props:a.getPropertiesItem(e,t),layout:e.dal.get(n)}}(t,o);let u=n.getFixedComponentMeasurements(i,l,c,p.siteMarginBottom);var d,g,f,m;return d=u,g=c.width,f=c.height,m=p.siteMarginBottom,u={y:e.isNumber(d.top)?d.top:f-d.height-m,x:e.isNumber(d.left)?d.left:g-d.width},e.assign(s,u)}function P(i,s,c){let l;const d=t.getType(i,s),g=n.getMeasuringByType(d);if(g)l=h(i,s,g);else if(l=S(i,s),!v(i,s)||i.siteAPI.isMobileView()?l.x+=_(i):l.x=A(i,s,c),!c){const t=i.siteAPI.getSiteMeasureMap(),n=e.get(t,["relativeToScreenOverrides",s.id]);n&&e.assign(l,n);const o=r.getPlugin(i,s);if(o){const t=a.getPropertiesItem(i,s),n=u.skin.getComponentSkinExports(i,s);e.assign(l,o(i.siteAPI,l,t,s,n))}}return function(e,t,n){const{x:o,y:i}=p.getTotalScrolls(e,t);n.x-=o,n.y-=i}(i,s,l),l.bounding=o.getBoundingLayout(i,l),l}const A=(t,n,o)=>{if(!n)return 0;const i=t.siteAPI.getSiteMeasureMap(),r=e.get(i,["relativeToScreenOverrides",n.id,"x"]);return e.isNumber(r)?r:f(t,n).x+A(t,t.pointers.components.getParent(n),o)};function T(e,t){return o.isHorizontallyDocked(e.dal.get(e.pointers.getInnerPointer(t,["layout"])))}const v=(e,t)=>!!t&&(T(e,t)&&!E(e,t)||v(e,e.pointers.components.getParent(t)));function C(e,t){let n=t;do{if(!(n=e.pointers.components.getParent(n)))return!1}while(!E(e,n));return!0}function _(e){const t=e.siteAPI.getSiteWidth(),n=e.siteAPI.getSiteMeasureMap();return n.clientWidth>t?.5*(n.clientWidth-t):0}function O(e,t){return E(e,t)||C(e,t)}return{getCompLayoutRelativeToStructure:S,getCompLayoutRelativeToScreen:P,getCompLayoutRelativeToScreenConsideringScroll:function(e,t,n){const o=P(e,t,n);if(!O(e,t)){const t=c.getScroll(e).y;o.y-=t,o.bounding.y-=t}return o},isRenderedInFixedPosition:E,isShowOnFixedPosition:O,isFixedPosition:y,isAncestorRenderedInFixedPosition:C,getClosestAncestorRenderedInFixedPosition:function(e,t){let n=t;do{if(!(n=e.pointers.components.getParent(n)))return!1}while(!E(e,n));return n},isHorizontallyDocked:T,getSiteX:_}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";const t={};return{getFixedComponentMeasurements:function(e,t,n,o){const i=t.layout;let r;return e?{top:(r=e(t,n.width,n.height,o||0)).top,left:r.left,height:i.height,width:i.width}:null},setMeasuringForType:function(n,o){e.isArray(n)||(n=[n]),e.forEach(n,function(e){t[e]=o})},getMeasuringByType:function(e){return t[e]}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{scroll:(e,t,n,o,i)=>e.siteAPI.scroll(t.id,n,o,i),scrollBy:(e,t,n,o,i)=>e.siteAPI.scrollBy(t.id,n,o,i),getTotalScrolls:(e,t)=>e.siteAPI.getTotalScroll(t.id)}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(0),n(19),n(27),n(10),n(164),n(111),n(2),n(8),n(387),n(34),n(1),n(12),n(16)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l,u,d){"use strict";const g=d.services.schemasService,f={COMPONENT_DOES_NOT_EXIST:"component param does not exist",COMPONENT_DOES_NOT_HAVE_TYPE:"component does not have type",INVALID_COMPONENT_STRUCTURE:"invalid component structure",INVALID_CONTAINER_STRUCTURE:"invalid container structure",INVALID_CONTAINER_POINTER:"invalid container pointer",MAXIMUM_CHILDREN_NUMBER_REACHED:"maximum number of child components reached",CANNOT_ADD_COMPONENT_TO_MOBILE_PATH:"cannot add component to mobile path",CANNOT_DELETE_MASTER_PAGE:"cannot delete master page",SITE_MUST_HAVE_AT_LEAST_ONE_PAGE:"site must have at least one page",CANNOT_DELETE_MOBILE_COMPONENT:"cannot delete mobile component",CUSTOM_ID_MUST_BE_STRING:"customId must be a string",COMPONENT_IS_NOT_CONTAINER:"component is not a container",LAYOUT_PARAM_IS_INVALID:"layout param is invalid",LAYOUT_PARAM_IS_NOT_ALLOWED:"layout param is not allowed",LAYOUT_PARAM_MUST_BE_NUMERIC:"layout param must be numeric",LAYOUT_PARAM_MUST_BE_BOOLEAN:"layout param must be boolean",LAYOUT_PARAM_ROTATATION_INVALID_RANGE:"rotationInDegrees must be a valid range (0-360)",LAYOUT_PARAM_CANNOT_BE_NEGATIVE:"layout param cannot be a negative value",CANNOT_DELETE_HEADER_COMPONENT:"cannot delete a header component",CANNOT_DELETE_FOOTER_COMPONENT:"cannot delete a footer component",CANNOT_DELETE_NON_EXISTING_COMPONENT:"cannot delete a non existing component",CANNOT_DELETE_NON_DISPLAYED_COMPONENT:"cannot delete a non displayed component",SKIN_PARAM_MUST_BE_STRING:"skin name param must be a string",CANNOT_SET_BOTH_SKIN_AND_STYLE:"skin cannot be set if style already exists",STYLE_ID_PARAM_MUST_BE_STRING:"style id param must be a string",STYLE_ID_PARAM_DOES_NOT_EXIST:"style id param does not exist and cannot be set",STYLE_ID_PARAM_ALREADY_EXISTS:"style id param already exists and cannot be overridden with custom style",STYLE_PROPERTIES_PARAM_MUST_BE_OBJECT:"style properties param must be an object",COMPONENT_IS_DEPRECATED:"cannot add because component was deprecated",INVALID_COMPONENT_CONNECTION_ROLE:"invalid connection role - cannot be *"},m=["wysiwyg.viewer.components.mobile.TinyMenu","wysiwyg.common.components.backtotopbutton.viewer.BackToTopButton","wysiwyg.viewer.components.BackToTopButton","wysiwyg.viewer.components.mobile.ExitMobileModeButton","wysiwyg.viewer.components.QuickActionBar","wysiwyg.viewer.components.QuickActionBarItem","wysiwyg.viewer.components.MenuToggle","wysiwyg.viewer.components.MenuContainer","wysiwyg.viewer.components.ExpandableMenu"],y=["x","y","width","height","scale","rotationInDegrees","fixedPosition","docked","aspectRatio"];function E(e,t,n){return!(!e.dal.isExist(n)&&!e.dal.full.isExist(n))&&!!s.public.isContainableByStructure(e,t,n)}function I(e,t){let n=null;if(e&&t){const o=e.pointers.getInnerPointer(t,"styleId");n=e.dal.get(o)}return n}function S(e,o){if(function(e){return"masterPage"===e.id}(o))return A(f.CANNOT_DELETE_MASTER_PAGE),{success:!1,error:f.CANNOT_DELETE_MASTER_PAGE};const i=p.getComponentType(e,o),r=e.dal.get(e.pointers.getInnerPointer(o,"type"))||e.dal.full.get(e.pointers.getInnerPointer(o,"type"));return i?function(e){return"Page"===e}(r)?n.isPopup(e,o.id)?{success:!0}:function(e){return 1===t.getNumberOfPages(e)}(e)?(A(f.SITE_MUST_HAVE_AT_LEAST_ONE_PAGE,{componentPointer:o}),{success:!1,error:f.SITE_MUST_HAVE_AT_LEAST_ONE_PAGE}):{success:!0}:function(e){return e&&e===a.COMP_TYPES.HEADER}(i)?(A(f.CANNOT_DELETE_HEADER_COMPONENT,{componentPointer:o,compType:i}),{success:!1,error:f.CANNOT_DELETE_HEADER_COMPONENT}):i===a.COMP_TYPES.FOOTER?(A(f.CANNOT_DELETE_FOOTER_COMPONENT,{componentPointer:o,compType:i}),{success:!1,error:f.CANNOT_DELETE_FOOTER_COMPONENT}):{success:!0}:(A(f.COMPONENT_DOES_NOT_HAVE_TYPE,{componentPointer:o}),{success:!1,error:f.COMPONENT_DOES_NOT_HAVE_TYPE})}function h(t){return function(t){return e.isObject(t)&&t.componentType&&!!g.getDefinition(t.componentType)}(t)&&function(e){return!!e.skin||!!e.style}(t)&&P(t.componentType,t.data)&&function(e){const t=e.componentType,n=e.props;try{return i.validateProperties(t,n),!0}catch(e){return!1}}(t)&&function(e){try{return r.validateMobileHintsBySchema(e.mobileHints),!0}catch(e){return!1}}(t)}function P(t,n){const o=g.getDefinition(t);if(e.isObject(n)&&!n.type)return!1;const i=e.get(n,"type",n||""),r=o.dataTypes||[""];return"RepeatedData"===i?function(t,n){return P(t,n.original)&&e.every(n.overrides,e.partial(P,t))}(t,n):e.includes(r,i)}function A(e,t){u.integrations.ravenUtils.breadcrumb(e,t)}return{validateComponentToSet:function(t,n,o,i,r,a){return e.isUndefined(i)||(s=i,e.isString(s))?function(t){return!!h(t)&&!function(t){return e.some(t,function(e){return!h(e)})}(function(t){let n=[];return t.children&&!e.isEmpty(t.children)?t.children:(t.components&&!e.isEmpty(t.components)&&(n=n.concat(t.components)),t.mobileComponents&&!e.isEmpty(t.mobileComponents)&&(n=n.concat(t.mobileComponents)),n)}(t))}(o)?a||r&&E(t,o,r)?{success:!0}:(A(f.INVALID_CONTAINER_POINTER,{id:o.id,componentType:o.componentType}),{success:!1,error:f.INVALID_CONTAINER_POINTER}):(A(f.INVALID_COMPONENT_STRUCTURE,{id:o.id,componentType:o.componentType}),{success:!1,error:f.INVALID_COMPONENT_STRUCTURE}):(A(f.CUSTOM_ID_MUST_BE_STRING,{id:o.id,componentType:o.componentType}),{success:!1,error:f.CUSTOM_ID_MUST_BE_STRING});var s},validateComponentToAdd:function(t,n,o,i,r){if(c.isComponentDeprecated(o.componentType))return A(c.getDeprecationMessage(o.componentType),{id:o.id,componentType:o.componentType}),{success:!1,error:c.getDeprecationMessage(o.componentType)};if(c.shouldWarnForDeprecation(o.componentType)){if(t.runtimeConfig.shouldThrowOnDeprecation)return A(c.getDeprecationMessage(o.componentType),{id:o.id,componentType:o.componentType}),{success:!1,error:c.getDeprecationMessage(o.componentType)};l.log.warnDeprecation(c.getDeprecationMessage(o.componentType))}return t.pointers.components.isMobile(n)&&!e.includes(m,o.componentType)?(A(f.CANNOT_ADD_COMPONENT_TO_MOBILE_PATH,{id:o.id,componentType:o.componentType}),{success:!1,error:f.CANNOT_ADD_COMPONENT_TO_MOBILE_PATH}):E(t,o,i)&&function(t,n,o){if(!e.isNumber(o))return!0;const i=t.pointers.components.getChildren(n);return!(!e.isFinite(o)||o<0||o>i.length)}(t,i,r)?function(e,t){return s.public.allowedToContainMoreChildren(e,t)}(t,i)?{success:!0}:(A(f.MAXIMUM_CHILDREN_NUMBER_REACHED,{id:o.id,componentType:o.componentType}),{success:!1,error:f.MAXIMUM_CHILDREN_NUMBER_REACHED}):(A(f.INVALID_CONTAINER_POINTER,{id:o.id,componentType:o.componentType}),{success:!1,error:f.INVALID_CONTAINER_POINTER})},validateComponentTypeToDelete:S,validateComponentToDelete:function(e,t){const n=S(e,t);return n.success?function(e,t){return e.dal.isExist(t)?{success:!0}:e.dal.full.isExist(t)?(A(f.CANNOT_DELETE_NON_DISPLAYED_COMPONENT,{componentPointer:t}),{success:!1,error:f.CANNOT_DELETE_NON_DISPLAYED_COMPONENT}):(A(f.CANNOT_DELETE_NON_EXISTING_COMPONENT,{componentPointer:t}),{success:!1,error:f.CANNOT_DELETE_NON_EXISTING_COMPONENT})}(e,t):n},validateComponentExistOnFull:function(e,t){return e.dal.full.isExist(t)?{success:!0}:(A(f.COMPONENT_DOES_NOT_EXIST,{componentPointer:t}),{success:!1,error:f.COMPONENT_DOES_NOT_EXIST})},validateLayoutParam:function(t,n){if(!e.includes(y,t))return A(f.LAYOUT_PARAM_IS_NOT_ALLOWED,{param:t,value:n}),{success:!1,error:f.LAYOUT_PARAM_IS_NOT_ALLOWED};if("fixedPosition"===t&&e.isBoolean(n))return{success:!0};if("docked"===t)return{success:!0};if(!e.isNumber(n))return A(f.LAYOUT_PARAM_MUST_BE_NUMERIC,{param:t,value:n}),{success:!1,error:f.LAYOUT_PARAM_MUST_BE_NUMERIC};const o=e.without(y,"x","y");return e.includes(o,t)&&n<0?(A(f.LAYOUT_PARAM_CANNOT_BE_NEGATIVE,{param:t,value:n}),{success:!1,error:f.LAYOUT_PARAM_CANNOT_BE_NEGATIVE}):"rotationInDegrees"===t&&n>360?(A(f.LAYOUT_PARAM_ROTATATION_INVALID_RANGE,{param:t,value:n}),{success:!1,error:f.LAYOUT_PARAM_ROTATATION_INVALID_RANGE}):{success:!0}},validateSetSkinParams:function(t,n,o){return e.isString(o)?I(t,n)?(A(f.SKIN_PARAM_MUST_BE_STRING,{styleId:I(t,n)}),{success:!1,error:f.CANNOT_SET_BOTH_SKIN_AND_STYLE}):{success:!0}:(A(f.SKIN_PARAM_MUST_BE_STRING,{skinName:o}),{success:!1,error:f.SKIN_PARAM_MUST_BE_STRING})},validateSetStyleIdParams:function(t,n,i=a.MASTER_PAGE_ID){return e.isString(n)?o.styles.get(t,n,i)?{success:!0}:(A(f.STYLE_ID_PARAM_MUST_BE_STRING,{pageId:i,styleId:n}),{success:!1,error:f.STYLE_ID_PARAM_DOES_NOT_EXIST}):(A(f.STYLE_ID_PARAM_MUST_BE_STRING,{styleId:n}),{success:!1,error:f.STYLE_ID_PARAM_MUST_BE_STRING})},validateExistingComponent:function(e,t,n=!1){return(n?e.dal.full.isExist(t):e.dal.isExist(t))?{success:!0}:(A(f.COMPONENT_DOES_NOT_EXIST,{componentPointer:t}),{success:!1,error:f.COMPONENT_DOES_NOT_EXIST})},validateComponentCustomStyleParams:function(t,n,o){function i(t){return!e.isNil(t)}return i(n)&&!e.isString(n)?(A(f.SKIN_PARAM_MUST_BE_STRING,{optionalSkinName:n}),{success:!1,error:f.SKIN_PARAM_MUST_BE_STRING}):!i(o)||e.isObject(o)&&!e.isArray(o)?{success:!0}:(A(f.STYLE_PROPERTIES_PARAM_MUST_BE_OBJECT,{optionalStyleProperties:o}),{success:!1,error:f.STYLE_PROPERTIES_PARAM_MUST_BE_OBJECT})},validateComponentConnection:function(e){return"*"===e.role?(A(f.INVALID_COMPONENT_CONNECTION_ROLE,{role:e.role}),{success:!1,error:f.INVALID_COMPONENT_CONNECTION_ROLE}):{success:!0}},ALLOWED_LAYOUT_PARAMS:y,ERRORS:f}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(3),n(16)],void 0===(i=function(e,t,n,o){"use strict";const{schemasService:i}=o.services;function r(n,r){const a=i.getDefinition(n);if(!a)throw new Error(`${n} has no component definition.`);if(!a.propertyTypes&&!a.propertyType&&!r)return;const s=a.propertyTypes?a.propertyTypes:[a.propertyType||t.constants.BASE_PROPS_SCHEMA_TYPE];if(e.includes(s,"")||e.isString(r)&&e.includes(s,r))return;const c=`${n} must get a compProps of one of the types [${s}]`;if(!r)throw new Error(c);if(!e.includes(s,r.type))throw new Error(`${c} but got ${r.type}`);o.services.dataValidators.validateDataBySchema(r,"props")}return{validateProperties:r,validateCompProps:function(e,t){const o=e.dal.get(e.pointers.getInnerPointer(t,"componentType")),i=n.getPropertyItemPointer(e,t);r(o,i&&e.dal.get(i))}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(8),n(41),n(160),n(396),n(22),n(61),n(84)],void 0===(i=function(e,t,n,o,i,r,a,s,c){"use strict";const p="wysiwyg.viewer.components.Group",l={VERTICAL:"vertical",HORIZONTAL:"horizontal"},u={TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right"};function d(e,t){const n=e.pointers.getInnerPointer(t,"layout");return e.dal.get(n)}function g(t,n){const i=d(t,n),r=o.getPositionAndSize(t,n,i);return o.getBoundingLayout(t,e.merge(r,e.pick(i,["rotationInDegrees"])))}function f(n,o,i,r){const a={dockedToEdge:[],nonDockedToEdge:[]},s=o===l.VERTICAL?t.layoutUtils.isVerticallyStretched:t.layoutUtils.isHorizontallyStretched;return e.forEach(r,function(e){const o=d(n,e),r=g(n,e);s(o)||(t.layoutUtils.isDockedToDirection(o,i)?a.dockedToEdge.push(r):a.nonDockedToEdge.push(r))}),a}function m(t,n,o,i){const r=f(t,l.HORIZONTAL,u.LEFT,i),a=e.map(r.nonDockedToEdge,function(e){return n.width-e.x}),s=e.map(r.dockedToEdge,function(e){return e.x+e.width}),c=e.max(a.concat(s));if(c>n.width)n.x&&(o.x=n.x),o.width=n.width;else if(o.width<c){const e=c-o.width;o.x&&(o.x-=e),o.width+=e}}function y(t,n,o,i){const r=f(t,l.HORIZONTAL,u.RIGHT,i),a=e.map(r.nonDockedToEdge,function(e){return e.x+e.width}),s=e.map(r.dockedToEdge,function(e){return n.width-e.x}),c=e.max(a.concat(s));if(c>n.width)o.width=n.width;else if(o.width<c){const e=c-o.width;o.width+=e}}function E(t,n,o,i){const r=f(t,l.VERTICAL,u.TOP,i),a=e.map(r.nonDockedToEdge,function(e){return n.height-e.y}),s=e.map(r.dockedToEdge,function(e){return e.y+e.height}),c=e.max(a.concat(s));if(c>n.height)n.y&&(o.y=n.y),o.height=n.height;else if(o.height<c){const e=c-o.height;o.y&&(o.y-=e),o.height+=e}}function I(t,n,o,i){const r=f(t,l.VERTICAL,u.BOTTOM,i),a=e.map(r.nonDockedToEdge,function(e){return e.y+e.height}),s=e.map(r.dockedToEdge,function(e){return n.height-e.y}),c=e.max(a.concat(s));if(c>n.height)o.height=n.height;else if(o.height<c){const e=c-o.height;o.height+=e}}function S(e,t){return n.getComponentType(e,t)===p}const h=(e,t)=>({minLeft:e.x-t.x,minTop:e.y-t.y,maxRight:e.x+e.width-t.x,maxBottom:e.y+e.height-t.y});function P(e,t){const n=c.getPrimaryConnection(e,t);return n&&"platform.components.AppWidget"===a.getType(e,n.controllerRef)?n.controllerRef:null}const A=(e,t)=>{let n=e.pointers.full.components.getParent(t);for(;n&&!M(e,n);)n=e.pointers.full.components.getParent(n);return M(e,n)?n:null};function T(e,t,n){"width"===e?t.height=t.width/n:"height"===e&&(t.width=t.height*n)}function v(e,t,n,o,i){const r=n===l.HORIZONTAL?"x":"y",a=n===l.HORIZONTAL?"width":"height",s=e[a];o=Math.min(t[r],o);const c=e[a]!==t[a];if(e[r]<o){if(c){const n=t[a]-e[a]==e[r]-t[r],i=o-e[r];e[a]=n?e[a]-i:e[a]}e[r]=o}e[a]!==s&&i&&T(a,e,i)}function C(e,t,n,o,i,r){const a=n===l.HORIZONTAL?"x":"y",s=n===l.HORIZONTAL?"width":"height",c=e[s],p=o;i=i+(o=Math.max(t[a]+t[s],o))-p;const u=e[a]!==t[a],d=e[s]!==t[s];e[a]+e[s]>o&&(u&&!d?e[a]=o-e[s]:!u&&d?e[s]=o-e[a]:u&&d&&(e[s]=e[s]>i?i:e[s],e[a]=o-e[s])),e[s]!==c&&r&&T(s,e,r)}const _=(e,t,n,o)=>v(e,t,l.HORIZONTAL,n.minLeft,o),O=(e,t,n,o)=>v(e,t,l.VERTICAL,n.minTop,o),D=(e,t,n,o)=>C(e,t,l.HORIZONTAL,n.maxRight,n.maxRight-n.minLeft,o),w=(e,t,n,o)=>C(e,t,l.VERTICAL,n.maxBottom,n.maxBottom-n.minTop,o);const M=(e,t)=>"platform.components.AppWidget"===a.getType(e,t),b=(t,n)=>{const o=a.getPage(t,n),i=s.isWidgetPage(t,o.id),r=t.pointers.components.getChildren(o)[0];return i&&!e.isEqual(r,n)?r:null};function R(t,o,r,a,s){const c=t.pointers.components.getParent(o);if(M(t,o)||M(t,c))return;const p=function(t,o){const i=n.public.isContainer(t,o),r=P(t,o);if(!i||r&&i)return r;if(!A(t,o))return null;const a=t.pointers.full.components.getChildrenRecursively(o);return e(a).map(e=>P(t,e)).find(t=>!e.isNil(t))}(t,o)||b(t,o);if(!p)return;const l=i.getCompLayoutRelativeToScreen(t,p),u=i.getCompLayoutRelativeToScreen(t,c);!function(e,t,n,o){_(e,t,n,o),O(e,t,n,o),D(e,t,n,o),w(e,t,n,o)}(r,a,h(l,u),s?n.public.getLayoutLimits(t,o).aspectRatio:null)}return{addCompMinLayout:function t(i,r,a){const s=n.public.isIgnoreChildrenOnProportionalResize(i,r.component);let c=r.children;e.isArray(s)&&(c=o.getChildrenToPreserveProportionsByType(i,n,c,s)),!0===s||e.isEmpty(c)||e.forEach(c,function(e){t(i,e)});const p=r.component;let l=function(t,i){const r=n.public.getLayoutLimits(t,i),a=o.getComponentLayout(t,i),s=n.public.isHorizontallyResizable(t,i),c=n.public.isVerticallyResizable(t,i),p=n.public.isProportionallyResizable(t,i),l=e.pick(a,["width","height"]);return(p||s||S(t,i))&&(l.width=r.minWidth),(p||c||S(t,i))&&(l.height=r.minHeight),l}(i,p);s||function(t,n,i){const r=o.getComponentLayout(t,n.component);e.forEach(n.children,function(n){const a=o.getBoundingLayout(t,n.minLayout);let s=o.getComponentLayout(t,n.component);if(function(e,t){return e.x<0||e.x+e.width>t.width||e.y<0||e.y+e.height>t.height}(s=o.getBoundingLayout(t,s),r))return i.width=r.width,i.height=r.height,!1;const c=a.width/(1-n.proportions.x),p=a.height/(1-n.proportions.y);i.width=e.max([c,i.width]),i.height=e.max([p,i.height])})}(i,r,l),!!a&&(l=function(e,t,n,i){const r=o.getComponentLayout(e,n);t=function(e,t){const n=function(e){return e.width/e.height}(e),o=t.width/n,i=t.height*n;return o>t.height?t.height=o:t.width=i,t}(r,t);const a=r.height-t.height,s=r.width-t.width;return-1===i.y&&(t.y=r.y+a),-1===i.x&&(t.x=r.x+s),0!==i.x&&0===i.y&&(t.y=r.y+a/2),0!==i.y&&0===i.x&&(t.x=r.x+s/2),t}(i,l,p,a)),l=e.pick(l,["x","y","width","height","rotationInDegrees"]),r.minLayout=l},constrainByChildrenLayout:function(t,n,o,i,r){const a=t.pointers.components.getChildren(n);if(e.isEmpty(a))return;const s=g(t,n),c=e.assign({},s,o);if(c.width>=s.width&&c.height>=s.height)return;const p=c.width<s.width,l=p&&(c.docked&&o.docked.right||c.x>s.x),u=l&&s.width-c.width>c.x-s.x;p&&!i&&(u?(m(t,s,o,a),y(t,s,o,a)):l?m(t,s,o,a):y(t,s,o,a));const d=c.height<s.height,f=d&&(c.docked&&o.docked.bottom||c.y>s.y),S=t.dal.get(t.pointers.general.getRenderFlag("enforceShouldKeepChildrenInPlace")),h=f&&S&&s.height-c.height>c.y-s.y;d&&!r&&(h?(E(t,s,o,a),I(t,s,o,a)):f&&S?E(t,s,o,a):I(t,s,o,a))},constrainByDimensionsLimits:function(t,i,r){const a=d(t,i),s=n.public.getLayoutLimits(t,i,r);if(!e.isUndefined(r.width)&&r.width!==a.width){const t=o.ensureWithinLimits(r.width,s.minWidth,s.maxWidth);e.isUndefined(r.x)||r.x===a.x||(r.x-=t-r.width),r.width=t}if(!e.isUndefined(r.height)&&r.height!==a.height){const t=o.ensureWithinLimits(r.height,s.minHeight,s.maxHeight);e.isUndefined(r.y)||r.y===a.y||(r.y-=t-r.height),r.height=t}},constrainByDockingLimits:function(n){t.dockUtils.isHorizontalDockToScreen(n)&&e.forEach(["left","right"],function(t){const o=n.docked[t];e.has(o,"px")&&(o.px=Math.max(o.px,0)),o.vw=Math.max(o.vw,0)})},constrainProportionalResize:function(t,i,r,a,s){if(a){if(s){const e=n.public.getLayoutLimits(t,i.component),a=o.getComponentLayout(t,i.component);r.width>e.maxWidth?(r.width=e.maxWidth,r.height=r.width/(a.width/a.height)):r.height>e.maxHeight&&(r.height=e.maxHeight,r.width=r.height*(a.width/a.height))}(function(e,t){return e.minLayout.width>t.width||e.minLayout.height>t.height})(i,r)&&e.assign(r,i.minLayout),n.public.resizeOnlyProportionally(t,i.component)&&function(e,t){if(e.height)e.width=e.height*t;else{if(!e.width)throw new Error("maintainCompAspectRatio must get at least height or width values in the layout parameter");e.height=e.width/t}}(r,n.public.getLayoutLimits(t,i.component).aspectRatio)}else r.width=e.max([i.minLayout.width,r.width]),r.height=e.max([i.minLayout.height,r.height])},constrainBySpecificType:function(t,n,o){const i=a.getType(t,n),s=r[i];if(!s)return o;const c=s(t,n,o);e.assign(o,c)},constrainsByContainer:function(e,t,n,o,i){R(e,t,n,o,i)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(8),n(86)],void 0===(i=function(e,t,n,o){"use strict";const i=["x","y","width","height","rotationInDegrees","scale","fixedPosition","anchors","docked","aspectRatio"];function r(t,n,o,i){e(i).pick(t).forEach(function(e,t){if(!n(e))throw new Error(`${t} is not a ${o}`)})}const a=e.partial(r,["x","y","width","height","rotationInDegrees","scale"],function(e){return!isNaN(e)},"number"),s=e.partial(r,["fixedPosition"],function(e){return"boolean"==typeof e},"boolean"),c=e.partial(r,["docked"],e.isPlainObject,"object"),p=e.partial(r,["anchors"],e.isArray,"array");function l(n){n&&(a(n),s(n),c(n),p(n),function(t){const n=e.omit(t,i);if(!e.isEmpty(n))throw new Error(`Properties are not supported in layout:${e.keys(n)}`)}(n)),e.isUndefined(n.rotationInDegrees)||(n.rotationInDegrees=t.math.parseDegrees(n.rotationInDegrees))}function u(t,n){return e.reduce(n,function(o,i,r){return e.isPlainObject(n[r])?o[r]=u(t,n[r]):e.isEqual(n[r],t[r])||(o[r]=i),o},{})}const d=e.template("The following layout changes were ignored for comp {id: <%= id %>, componentType: <%= componentType %>}, due to failure of layout validations: \n<%= layoutChanges %>"),g={WIDTH:"width",HEIGHT:"height",X:"x",Y:"y",ROTATION:"rotationInDegrees",FIXED_POSITION:"fixedPosition"};function f(e,t,n){return`${n} change: ${e[n]} -> ${t[n]}`}function m(o,i,r,a){const s=u(a,r),c=[];e.isUndefined(s.width)||n.public.isHorizontallyResizable(o,i)||(delete r.width,c.push(g.WIDTH)),e.isUndefined(s.height)||n.public.isVerticallyResizable(o,i)||(delete r.height,c.push(g.HEIGHT)),e.isUndefined(s.x)||n.public.isHorizontallyMovable(o,i)||(delete r.x,c.push(g.X)),e.isUndefined(s.y)||n.public.isVerticallyMovable(o,i)||e.isUndefined(s.isFixedPosition)&&(delete r.y,c.push(g.Y)),e.isUndefined(s.rotationInDegrees)||n.public.isRotatable(o,i)||(delete r.rotationInDegrees,c.push(g.ROTATION)),e.isUndefined(s.fixedPosition)||n.public.canBeFixedPosition(o,i)||(delete r.fixedPosition,c.push(g.FIXED_POSITION)),c.length&&function(n,o,i,r,a){const s=e.curry(f)(r,a);t.log.warnVerbose(d({id:o.id,componentType:n.dal.get(n.pointers.getInnerPointer(o,"componentType")),layoutChanges:e(i).map(s).join(", ")}))}(o,i,c,a,s)}return{getValidLayoutToUpdate:function(n,r,a){const s=n.pointers.getInnerPointer(r,"layout"),c=n.dal.get(s),p=e.pick(a,i);!function(e){if(e.docked){if(e.docked.hCenter&&(e.docked.left||e.docked.right))throw new Error("cannot set both hCenter and left OR right");if(e.docked.vCenter&&(e.docked.top||e.docked.bottom))throw new Error("cannot set both vCenter and top OR bottom")}}(a),p.docked&&(p.docked=(d=c.docked,g=a.docked,d?e.merge({},d,g):g)),l(p),m(n,r,p,c);var d,g;const f=u(c,a),y=e.assign({},c,p);return function(e,n,o){n.docked&&(t.layoutUtils.isHorizontallyDocked(e)&&(n.docked.hCenter?(delete e.docked.left,delete e.docked.right):(n.docked.left||n.docked.right)&&delete e.docked.hCenter,e.width=o.width),t.layoutUtils.isVerticallyDocked(e)&&(n.docked.vCenter?(delete e.docked.top,delete e.docked.bottom):(n.docked.top||n.docked.bottom)&&delete e.docked.vCenter,e.height=o.height))}(y,f,o.getPositionAndSize(n,r,y)),function(e){if(t.layoutUtils.isDockToScreen(e)&&e.fixedPosition)throw new Error("Dock to screen component cannot be fixed position")}(y),y},validateLayout:function(e,t){l(e.dal.get(e.pointers.getInnerPointer(t,"layout")))}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(12),n(1),n(415),n(168),n(16)],void 0===(i=function(e,t,n,o,i,r){"use strict";const{INTERACTIONS:a}=n.loggingUtils.fedopsLogger;return{registerComponent:function(e,{componentType:s,componentDefinition:c,hooks:p,metaData:l,dataSchema:u,propertiesSchema:d}){if(n.loggingUtils.fedopsLogger.interactionStarted(a.REGISTER_COMPONENT_TYPE),!s)return void t.integrations.ravenUtils.captureError(new Error("Could not dynamically register a component without componentType"),{tags:{dsComponentRegistration:!0}});l&&(t.integrations.ravenUtils.breadcrumb(`registering metaData for component of type ${s}`),o.registerExternalMetaData(s,l)),p&&(t.integrations.ravenUtils.breadcrumb(`registering hooks for component of type ${s}`),i.registerExternalHooks(s,p));const{schemasService:g}=r.services;g.registerComponentDefinitionAndSchemas(s,{componentDefinition:c,dataSchemas:u,propertiesSchemas:d}),n.loggingUtils.fedopsLogger.interactionEnded(a.REGISTER_COMPONENT_TYPE)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(12),n(5),n(6),n(416),n(417),n(418),n(419),n(421),n(422),n(423),n(424),n(436),n(437),n(438),n(439),n(440),n(441),n(442),n(178),n(443),n(444),n(445),n(446),n(447),n(448),n(460),n(504),n(506),n(213),n(507),n(508),n(509),n(510),n(511),n(512),n(513),n(514),n(515),n(517),n(518),n(519)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l,u,d,g,f,m,y,E,I,S,h,P,A,T,v,C,_,O,D,w,M,b,R,N,x,L,B,F,k,U,H,V){"use strict";!function(){o.registerHook(o.HOOKS.DATA.UPDATE_BEFORE,g.removeMobileCropOverrideIfNeeded,"wysiwyg.viewer.components.WPhoto"),o.registerHook(o.HOOKS.ADD.BEFORE,i,"wysiwyg.common.components.anchor.viewer.Anchor"),o.registerHook(o.HOOKS.SERIALIZE.SET_CUSTOM,c.setLinksCustomData,"wysiwyg.viewer.components.WRichText"),o.registerHook(o.HOOKS.ADD.AFTER,w.afterAdd,"wysiwyg.viewer.components.Repeater"),o.registerHook(o.HOOKS.SERIALIZE.CHILDREN_BEFORE,w.addRepeatedDataItems,"wysiwyg.viewer.components.Repeater"),o.registerHook(o.HOOKS.DATA.UPDATE_BEFORE,w.beforeUpdateRepeaterData,"wysiwyg.viewer.components.Repeater"),o.registerHook(o.HOOKS.DATA.UPDATE_AFTER,w.afterUpdateRepeaterData,"wysiwyg.viewer.components.Repeater"),o.registerHook(o.HOOKS.PROPERTIES.UPDATE_AFTER,w.afterUpdateRepeaterProperties,"wysiwyg.viewer.components.Repeater"),o.registerHook(o.HOOKS.ADD.AFTER,c.duplicateLinksDataItems,"wysiwyg.viewer.components.WRichText"),["wysiwyg.viewer.components.StateBox","wysiwyg.viewer.components.StateStrip","wysiwyg.viewer.components.BoxSlideShow","wysiwyg.viewer.components.StripContainerSlideShow"].forEach(e=>o.registerHook(o.HOOKS.ADD.BEFORE,s.verifySlideShowStructureOnAdd,e)),["wysiwyg.viewer.components.BoxSlideShow","wysiwyg.viewer.components.StateBox"].forEach(e=>o.registerHook(o.HOOKS.COMPONENT.STYLE_UPDATE_AFTER,s.updateSlidesStyle,e)),["wysiwyg.viewer.components.StateBoxState","wysiwyg.viewer.components.StateStripState","wysiwyg.viewer.components.BoxSlideShowSlide","wysiwyg.viewer.components.StripContainerSlideShowSlide"].forEach(e=>o.registerHook(o.HOOKS.REMOVE.BEFORE,s.verifySlideShowStructureOnDelete,e)),o.registerHook(o.HOOKS.ADD.AFTER,v.replaceFullScreenPropertyWithDocking,"wysiwyg.viewer.components.FiveGridLine"),o.registerHook(o.HOOKS.ADD.BEFORE,r.beforeAdd,"wysiwyg.viewer.components.svgshape.SvgShape"),o.registerHook(o.HOOKS.ADD.BEFORE,a.beforeAdd,"wysiwyg.viewer.components.ClipArt"),o.registerHook(o.HOOKS.ADD.AFTER,f.setPlayerIdAfterAddHook,"wysiwyg.viewer.components.MediaOverlayControls"),o.registerHook(o.HOOKS.ADD.AFTER,f.setPlayerIdAfterAddHook,"wysiwyg.viewer.components.MediaControls"),o.registerHook(o.HOOKS.MOBILE_CONVERSION.AFTER,f.layoutChildrenOnMobileConversion),o.registerHook(o.HOOKS.MOBILE_CONVERSION.AFTER,F.copyRootComponentDockedLayout),o.registerHook(o.HOOKS.DESIGN.UPDATE_AFTER,f.layoutPlayerChildren,"wysiwyg.viewer.components.MediaPlayer"),o.registerHook(o.HOOKS.REMOVE.BEFORE,m.handleColumnDeletion,"wysiwyg.viewer.components.Column"),o.registerHook(o.HOOKS.REMOVE.AFTER,m.deleteContainerIfHasNoMoreColumns,"wysiwyg.viewer.components.Column"),o.registerHook(o.HOOKS.ADD_ROOT.BEFORE,m.handleSplitToColumns,"wysiwyg.viewer.components.Column"),o.registerHook(o.HOOKS.PROPERTIES.UPDATE_BEFORE,m.handleFullWidthPropertyChange,"wysiwyg.viewer.components.StripColumnsContainer"),o.registerHook(o.HOOKS.LAYOUT.UPDATE_BEFORE,M.handleHeaderLayoutChange,"wysiwyg.viewer.components.HeaderContainer"),o.registerHook(o.HOOKS.ADD.BEFORE,y,"wysiwyg.viewer.components.StripColumnsContainer"),o.registerHook(o.HOOKS.ADD.BEFORE,E,"wysiwyg.viewer.components.SiteRegionContainer"),o.registerHook(o.HOOKS.ADD.BEFORE,O.beforeAdd,"wysiwyg.common.components.verticalmenu.viewer.VerticalMenu"),o.registerHook(o.HOOKS.ADD.AFTER,I,"wysiwyg.viewer.components.WFacebookLike"),o.registerHook(o.HOOKS.ADD.AFTER,S,"wysiwyg.viewer.components.WFacebookComment"),o.registerHook(o.HOOKS.ADD.AFTER,h,"wysiwyg.common.components.pinterestpinit.viewer.PinterestPinIt"),o.registerHook(o.HOOKS.ADD.AFTER,P,"wysiwyg.viewer.components.VKShareButton"),o.registerHook(o.HOOKS.ADD.AFTER,A,"wysiwyg.viewer.components.FacebookShare"),o.registerHook(o.HOOKS.ADD.BEFORE,u.removeNicknameFromSerializedComponentIfInvalid),o.registerHook(o.HOOKS.ADD.BEFORE,b.updateSerializedConnectionsData),o.registerHook(o.HOOKS.ADD.AFTER,u.generateNicknamesForComponent),o.registerHook(o.HOOKS.ADD.AFTER,C.handleControllerAddition,"platform.components.AppController"),o.registerHook(o.HOOKS.ADD.AFTER,N.handleAppWidgetAddition,"platform.components.AppWidget"),o.registerHook(o.HOOKS.CHANGE_PARENT.BEFORE,u.deleteNicknameFromComponentIfInvalid),o.registerHook(o.HOOKS.CHANGE_PARENT.BEFORE,b.removeInvalidConnections),o.registerHook(o.HOOKS.CHANGE_PARENT.AFTER,u.generateNicknamesForComponent),o.registerHook(o.HOOKS.CHANGE_PARENT.BEFORE,C.handleControllerParentChange,"platform.components.AppController"),o.registerHook(o.HOOKS.CHANGE_PARENT.BEFORE,N.handleAppWidgetParentChange,"platform.components.AppWidget"),o.registerHook(o.HOOKS.MOBILE_CONVERSION.AFTER,u.generateNicknamesForPages),o.registerHook(o.HOOKS.SERIALIZE.SET_CUSTOM,C.handleControllerSerialization,"platform.components.AppController"),o.registerHook(o.HOOKS.SERIALIZE.SET_CUSTOM,N.handleAppWidgetSerialization,"platform.components.AppWidget"),o.registerHook(o.HOOKS.REMOVE.BEFORE,C.handleControllerDeletion,"platform.components.AppController"),o.registerHook(o.HOOKS.REMOVE.BEFORE,N.handleAppWidgetDeletion,"platform.components.AppWidget"),o.registerHook(o.HOOKS.ADD.BEFORE,N.beforeAddHook,"platform.components.AppWidget"),o.registerHook(o.HOOKS.ADD_ROOT.GET_CONTAINER_TO_ADD_TO,T.getContainerToAddTo,"mobile.core.components.Page"),o.registerHook(o.HOOKS.REMOVE.AFTER,T.removeDeadBehaviors,"mobile.core.components.Page"),o.registerHook(o.HOOKS.ADD.AFTER,T.removeBehaviorsFromAddedPage,"mobile.core.components.Page"),o.registerHook(o.HOOKS.DUPLICATE_ROOT.BEFORE,_.addOriginCompIdToWidgetsOnPage,"mobile.core.components.Page"),o.registerHook(o.HOOKS.ADD.AFTER,b.updateSerializedConnectionsDataForPage,"mobile.core.components.Page"),o.registerHook(o.HOOKS.DUPLICATE_ROOT.AFTER,_.fixDuplicatedPageCodeBehaviors,"mobile.core.components.Page"),o.registerHook(o.HOOKS.DUPLICATE_ROOT.AFTER,_.duplicatePageCode,"mobile.core.components.Page"),o.registerHook(o.HOOKS.ADD_PAGE.AFTER,_.initMobileComponents),o.registerHook(o.HOOKS.REMOVE.AFTER,_.removePageFromPlatformApps,"mobile.core.components.Page"),o.registerHook(o.HOOKS.REMOVE.BEFORE,_.beforePageRemoveHook,"mobile.core.components.Page"),o.registerHook(o.HOOKS.RELAYOUT_MOBILE_PAGE.AFTER,D.setMobileMediaSizing),o.registerHook(o.HOOKS.ADD_PAGE.AFTER,D.setMobileMediaSizingByPointer),o.registerHook(o.HOOKS.SITE_BACKGROUND_UPDATE.AFTER,D.setMediaSizingForDevice),R.initContactFromHooks(o),o.registerHook(o.HOOKS.MOBILE_CONVERSION.BEFORE,d.activatePageMobileHoverModes),o.registerHook(o.HOOKS.ADD.AFTER,p.addedGluedWidget,"wysiwyg.viewer.components.tpapps.TPAGluedWidget"),o.registerHook(o.HOOKS.REMOVE.BEFORE,p.willRemoveGluedWidget,"wysiwyg.viewer.components.tpapps.TPAGluedWidget"),o.registerHook(o.HOOKS.DATA.UPDATE_BEFORE,l.enforceIconLimitations,"wysiwyg.viewer.components.QuickActionBarItem"),o.registerHook(o.HOOKS.DATA.UPDATE_AFTER,w.syncRepeaterTemplateDataWithFirstItem),o.registerHook(o.HOOKS.DESIGN.UPDATE_AFTER,w.syncRepeaterTemplateDesignWithFirstItem),o.registerHook(o.HOOKS.REMOVE_COMP_MODE.BEFORE,U.removeOverridesPointingToMode,"wysiwyg.viewer.components.WSiteStructure"),o.registerHook(o.HOOKS.REMOVE.AFTER,x.removeComponentHook),o.registerHook(o.HOOKS.REMOVE.AFTER,L.setMobileComponentAsDead),n.isOpen("registerComponentsDynamically")||(o.registerExternalHook(o.HOOKS.PROPERTIES.UPDATE_BEFORE,V.beforeUpdateProperties),o.registerExternalHook(o.HOOKS.DATA.UPDATE_BEFORE,V.beforeUpdateData),o.registerExternalHook(o.HOOKS.LAYOUT.UPDATE_BEFORE,V.beforeUpdateLayout));o.registerHook(o.HOOKS.DATA.UPDATE_BEFORE,B.beforeUpdateCheckboxData,"wysiwyg.viewer.components.inputs.Checkbox"),o.registerHook(o.HOOKS.DATA.UPDATE_AFTER,B.afterUpdateCheckboxData,"wysiwyg.viewer.components.inputs.Checkbox"),o.registerHook(o.HOOKS.LAYOUT.UPDATE_BEFORE,k.beforeUpdateInputLabelLayout,"wysiwyg.viewer.components.inputs.TextInput"),o.registerHook(o.HOOKS.DATA.UPDATE_BEFORE,k.beforeUpdateInputLabelData,"wysiwyg.viewer.components.inputs.TextInput"),o.registerHook(o.HOOKS.LAYOUT.UPDATE_BEFORE,k.beforeUpdateInputLabelLayout,"wysiwyg.viewer.components.inputs.TextAreaInput"),o.registerHook(o.HOOKS.DATA.UPDATE_BEFORE,k.beforeUpdateInputLabelData,"wysiwyg.viewer.components.inputs.TextAreaInput"),o.registerHook(o.HOOKS.LAYOUT.UPDATE_BEFORE,k.beforeUpdateInputLabelLayout,"wysiwyg.viewer.components.inputs.DatePicker"),o.registerHook(o.HOOKS.DATA.UPDATE_BEFORE,k.beforeUpdateInputLabelData,"wysiwyg.viewer.components.inputs.DatePicker"),o.registerHook(o.HOOKS.LAYOUT.UPDATE_BEFORE,k.beforeUpdateInputLabelLayout,"wysiwyg.viewer.components.inputs.ComboBoxInput"),o.registerHook(o.HOOKS.DATA.UPDATE_BEFORE,k.beforeUpdateInputLabelData,"wysiwyg.viewer.components.inputs.ComboBoxInput"),o.registerHook(o.HOOKS.LAYOUT.UPDATE_BEFORE,k.beforeUpdateInputLabelLayout,"wysiwyg.viewer.components.inputs.FileUploader"),o.registerHook(o.HOOKS.DATA.UPDATE_BEFORE,k.beforeUpdateInputLabelData,"wysiwyg.viewer.components.inputs.FileUploader"),n.isOpen("sv_updatePlaceholder")&&e.forEach(["wysiwyg.viewer.components.inputs.TextInput","wixapps.integration.components.inputs.TextArea","wysiwyg.viewer.components.inputs.TextAreaInput","wysiwyg.viewer.components.inputs.ComboBoxInput","wysiwyg.viewer.components.inputs.DatePicker"],e=>o.registerHook(o.HOOKS.ADD.AFTER,H.afterAddInput,e))}();const W=(e,n,i)=>{const{hookName:r,hook:a}=V.createHookDefinition(e,n);r&&a?o.registerExternalHook(r,a,i):((e,n)=>t.integrations.ravenUtils.captureError(new Error(`Could not register hook "${e}" for component "${n}"`),{tags:{hooksRegistration:!0},extra:{componentType:n,hookName:e}}))(r,i)};return{registerExternalHooks:(t,n)=>{e.forEach(n,(e,n)=>W(n,e,t))}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(3),n(68),n(115)],void 0===(i=function(e,t,n,o){"use strict";function i(n,o){const i=e(t.getDataSchemaByType(n,"QuickActions").configuration.properties).omit("quickActionsMenuEnabled").keys().map(e=>/(\w*)Enabled/.exec(e)[1]).value(),r=e.difference(o,i);if(e.some(r))throw new Error(`[${r}] are unsupported.`)}function r(e,t){if(n.hasQuickActionBar(e))throw new Error(`"${t}" is allowed only for actionBar version 1`)}return{QUICK_ACTIONS_PROPS:{NAVIGATION_MENU:{type:"boolean",id:"navigationMenu"},PHONE:{type:"string",id:"phone"},EMAIL:{type:"string",id:"email"},WHATSAPP:{type:"string",id:"whatsapp"},ADDRESS:{type:"string",id:"address"},SOCIAL_LINKS:{type:"object",id:"socialLinks"}},SOCIAL_LINKS_IDS:["facebook","twitter","pinterest","google_plus","tumblr","blogger","linkedin","youtube","vimeo","flickr"],enable:function(t,i){const r=o.getSiteMetaData(t);r.quickActions.configuration.quickActionsMenuEnabled=i,o.setSiteMetaData(t,r);const a=e(t.siteAPI.getClientSpecMap()).values().find({appDefinitionId:"14517e1a-3ff0-af98-408e-2bd6953c36a2"}),s=!e.isUndefined(a)&&!e.get(a,"permissions.revoked");!i&&s&&n.addQuickActionBar(t),i&&e(n.getActions(t)).reject("isDynamic").isEmpty()&&n.removeQuickActionBar(t)},isEnabled:function(e){return o.getSiteMetaData(e).quickActions.configuration.quickActionsMenuEnabled},colorScheme:{set:function(e,t){r(e,"actionBar.colorScheme.set");const n=o.getSiteMetaData(e);n.quickActions.colorScheme=t,o.setSiteMetaData(e,n)},get:function(e){return o.getSiteMetaData(e).quickActions.colorScheme}},actions:{enable:function(t,n){r(t,"actionBar.actions.enable"),function(t,n){const r=e(n).pickBy(e=>!!e).keys().value();i(t,r);const a=o.getSiteMetaData(t),s=e.filter(r,t=>e.includes(["phone","email","address"],t)&&!a.contactInfo[t]||"socialLinks"===t&&e.isEmpty(a.quickActions.socialLinks));if(e.some(s))throw new Error(`Actions [${s}] has a missing value and thus cannot be enabled`)}(t,n);const a=o.getSiteMetaData(t);e.assign(a.quickActions.configuration,e.transform(n,(e,t,n)=>{e[`${n}Enabled`]=t},{})),o.setSiteMetaData(t,a)},getEnabled:function(t){const n=e.omit(o.getSiteMetaData(t).quickActions.configuration,"quickActionsMenuEnabled");return e.transform(n,(e,t,n)=>{e[/(\w*)Enabled/.exec(n)[1]]=t},{})},update:function(t,n){r(t,"actionBar.actions.update"),i(t,e.keys(n));const a=o.getSiteMetaData(t);e.forEach(n,function(t,n){switch(n){case"phone":case"email":case"address":a.contactInfo[n]=t;break;case"socialLinks":a.quickActions.socialLinks=e(a.quickActions.socialLinks).reject(n=>e.includes(e.keys(t),n.id)).concat(e.map(t,(e,t)=>({id:t,url:e}))).reject(t=>e.isEmpty(t.url)).value()}}),o.setSiteMetaData(t,a)},get:function(n){const i=o.getSiteMetaData(n),r=e.pick(i.contactInfo,["phone","email","address"]),a=t.getDataSchemaByType(n,"SocialLink").id.enum,s=e.transform(a,(e,t)=>{e[t]=""},{}),c=e.transform(i.quickActions.socialLinks,(e,t)=>{e[t.id]=t.url},{});return e.assign(r,{socialLinks:e.assign(s,c)})}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(3)],void 0===(i=function(e,t){"use strict";function n(e,t){return e.pointers.components.getViewMode(t).toLowerCase()}return{getPageProperties:function(o,i){return e.get(t.getPropertiesItem(o,i),n(o,i))},updatePageProperties:function(o,i,r){const a=function(o,i,r){const a=t.getPropertiesItem(o,i)||t.createPropertiesItemByType(o,"PageProperties"),s=n(o,i);let c;if(e.isPlainObject(r)){const t=e.get(a,s,{});c=e.assign(t,r)}else c=r;return e.set(a,s,c),a}(o,i,r);t.updatePropertiesItem(o,i,a)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(23),n(4),n(2),n(36),n(49),n(428),n(429),n(430),n(93),n(37),n(92),n(54),n(94)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l,u,d,g){"use strict";const f=e=>{const t=e.pointers.components.getMasterPage(o.VIEW_MODES.MOBILE);return e.pointers.components.getComponent(o.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER,t)},m=e=>{const t=e.pointers.components.getMasterPage(o.VIEW_MODES.MOBILE),n=e.pointers.components.getComponent(o.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER,t);return e.dal.isExist(n)},y=e=>{const t=e.pointers.components.getMasterPage(o.VIEW_MODES.MOBILE),n=e.pointers.components.getComponent(o.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER_TOGGLE,t);return e.dal.isExist(n)},E=e=>{const t=e.pointers.components.getMasterPage(o.VIEW_MODES.MOBILE),n=e.pointers.components.getComponent(o.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER_EXPANDABLE_MENU,t);return e.dal.isExist(n)},I=(t,i)=>{if(!m(t))throw new Error("cannot add menu container toggle without menu instance");if(y(t))return;const r=t.pointers.components.getHeader(o.VIEW_MODES.MOBILE),a=n.getComponentToAddRef(t,r,null,o.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER_TOGGLE);e.assign(s.layout,i),n.add(t,a,r,s),S(t,f(t),a)},S=(e,t,n)=>i.updateBehavior(e,n,{name:"click",type:"comp"},t,{name:"toggle",type:"comp"}),h=e=>{if(!m(e))throw new Error("cannot add menu container toggle without menu instance");if(E(e))return;const t=f(e),i=n.getComponentToAddRef(e,t,null,o.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER_EXPANDABLE_MENU);n.add(e,i,t,c)},P=(i,r)=>{const s=i.pointers.components.getMasterPage(o.VIEW_MODES.MOBILE),c=i.pointers.components.getComponent(o.COMP_IDS.HEADER,s),f=i.pointers.components.getComponent(o.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER,c);if(i.dal.isExist(f))return;const m=n.getComponentToAddRef(i,c,null,o.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER);n.add(i,m,c,a),h(i),I(i,r),(n=>{const i=n.pointers.components.getMasterPage(o.VIEW_MODES.DESKTOP),r=["wysiwyg.viewer.components.LoginSocialBar","wysiwyg.viewer.components.LanguageSelector"];if(e(u.getHiddenAndShownComponents(n,o.MASTER_PAGE_ID).hiddenComponents).map(e=>n.pointers.components.getComponent(e,i)).filter(t=>{const o=n.dal.get(n.pointers.getInnerPointer(t,"componentType"));return e.includes(r,o)}).forEach(e=>p.updateProperty(n,{hidden:!1},e)).length>0){const e=d.getPage(n,o.MASTER_PAGE_ID),i=t.conversionUtils.extractMobilePage(e),r=g.getConversionSettings({conversionType:"MERGE_UNHIDE"});l.runMobileMergeOnPage(n,e,i,r)}})(i)};return{get:f,isExist:m,upgrade:t=>{if(r.getViewMode(t)!==o.VIEW_MODES.MOBILE)throw Error("can only upgrade to menu container in mobile view");const i=(t=>{const i=t.pointers.components.getHeader(o.VIEW_MODES.MOBILE),r=t.pointers.components.getComponent(o.MOBILE_ONLY_COMPONENTS.TINY_MENU,i),a=t.pointers.getInnerPointer(r,"layout"),s=t.dal.get(a);if(t.dal.isExist(r))return n.deleteComponent(t,r),e.pick(s,["x","y"])})(t);P(t,i)},toggle:{get:e=>{const t=e.pointers.components.getMasterPage(o.VIEW_MODES.MOBILE);return e.pointers.components.getComponent(o.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER_TOGGLE,t)},isExist:y,add:I},expandableMenu:{isExist:E,add:h}}}.apply(t,o))||(e.exports=i)},function(e,t){e.exports=y},function(e,t,n){var o,i;o=[n(0),n(1),n(30),n(13),n(15)],void 0===(i=function(e,t,n,o,i){"use strict";const r=e.template("<%= premiumStateAPIUrl %>?siteGuid=<%= metasiteId %>"),a=function(e){return 6===e.cycle};return{getPremiumApps:function(n,o,i,a){const s=function(e){const t=e.pointers.general.getServiceTopology(),n=e.pointers.getInnerPointer(t,"premiumStateApiUrl");return e.dal.get(n)}(n),c=r({premiumStateAPIUrl:s,metasiteId:o});t.ajaxLibrary.ajax({type:"POST",url:c,data:{},dataType:"json",success(t){e.isFunction(i)&&i(t.payload)},error:a})},extractYearlyPremiumApps:function(t){const n=[],o=t.tpaPackages;return e.isArray(o)?e.forEach(o,function(e){a(e)&&n.push(e.appDefinitionId)}):e.isObject(o)&&a(o)&&n.push(o.appDefinitionId),n},isYearly:a,getSiteUpgradeUrl:function(e,t){const i=`${e.dal.get(e.pointers.general.getServiceTopology()).premiumServerUrl}/wix/api/premiumStart`,r=o.generalInfo.getMetaSiteId(e);return(t=t||{}).siteGuid=r,new n.common.TPABaseUrlBuilder(i).addMultipleQueryParams(t).build()},getAppUpgradeUrl:function(e,t,r,a,s){const c=`${e.dal.get(e.pointers.general.getServiceTopology()).premiumServerUrl}/wix/api/tpaStartPurchase`,p=i.getAppData(e,t),l=o.generalInfo.getMetaSiteId(e);s=s||{};const u={applicationId:t,vendorProductId:r,paymentCycle:a||"MONTHLY",appDefinitionId:p.appDefinitionId,metaSiteId:l,pp_type:s.pp_type,referralAdditionalInfo:s.referralAdditionalInfo};return s.premiumIntent&&(u.premiumIntent=s.premiumIntent),new n.common.TPABaseUrlBuilder(c).addMultipleQueryParams(u).build()}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1)],void 0===(i=function(e,t){"use strict";const n={EVENT_TYPE_NOT_SUPPORTED:{errorName:"EVENT_TYPE_NOT_SUPPORTED",errorCode:28004,desc:"tpa event type is not supported",severity:"error"},ECOM_HIDDEN_PAGES_MISSING:{errorName:"ECOM_HIDDEN_PAGES_MISSING",errorCode:28005,desc:"ecom pages are missing after save",severity:"error"},FAIL_TO_GET_APP_MARKET_DATA:{errorName:"FAIL_TO_GET_APP_MARKET_DATA",errorCode:28006,desc:"failure while trying to get app market data",severity:"error"}};return t.loggingUtils.logger.register("documentServices","error",n),n}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(38),n(55),n(44),n(119),n(70),n(26),n(56),n(176)],void 0===(i=function(e,t,n,o,i,r,a,s,c){"use strict";function p(e,t){return n.setWixCodeModel(e,{gridAppId:t.gridAppId}),t}function l(e){const t=e.pointers.general.getMetaSiteId();return e.dal.get(t)}function u(e){return a.isFirstSave(e)}function d(a,s){const m=o.trace(a,{action:"cloneApp"});return function(o){const r={baseUrl:i.getBaseUrlFromPS(o),gridAppId:n.getGridAppId(o),metasiteId:l(o),signedInstance:t.getExistingWixCodeAppFromPS(o).instance,isFirstSave:u(o)};return i.clone(r).then(e.partial(p,o)).then(e=>(g(o),e))}(a).then(function(e){m({appId:n.getGridAppId(a),message:e})}).catch(function(t){return function(e){return-409===r.safeGetErrorCode(e)}(t)?(g(a),m({level:o.levels.WARN,message:t}),c.runUsingPS(a).then(e.partial(f,a)).then(e.partial(d,a,s))):0===s?(m({level:o.levels.ERROR,message:t}),Promise.reject(t)):(m({level:o.levels.WARN,message:t,params:{retriesLeft:s}}),d(a,s-1))})}function g(e){const t=e.pointers.wixCode.getIsAppReadOnly();e.dal.set(t,!1)}function f(e){const t=e.pointers.wixCode.getIsAppReadOnly();e.dal.set(t,!0)}function m(e){return s.runFunctionInSaveQueue(()=>(function(e){return function(e){const t=e.pointers.wixCode.getIsAppReadOnly();return!e.dal.get(t)}(e)?Promise.resolve():d(e,2)})(e))}return{ensureAppIsWriteable:m,setAppWriteable:g,handleAppIsReadOnlyServerError:function(e){const t=e.pointers.wixCode.getIsAppReadOnly();return e.dal.set(t,!0),m(e)},createNewWriteableApp:function(r){return s.runFunctionInSaveQueue(()=>(function(r){const a=o.trace(r,{action:"createApp"}),s={baseUrl:i.getBaseUrlFromPS(r),metasiteId:l(r),signedInstance:t.getExistingWixCodeAppFromPS(r).instance};return i.create(s).then(e.partial(p,r)).then(e=>(g(r),e)).then(function(e){a({appId:n.getGridAppId(r),message:e})}).catch(function(e){return a({level:o.levels.WARN,message:e}),Promise.reject(e)})})(r))}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(43),n(70),n(119),n(44),n(55),n(38),n(20)],void 0===(i=function(e,t,n,o,i,r,a,s){"use strict";function c({traceFunc:e,isAppReadOnly:t,wixCodeApp:r,baseUrl:a,metasiteId:s,gridAppId:c}){const p=e({action:"markAppImmutable"});if(t)return p({message:"no changes"}),Promise.resolve();if(!r)return Promise.reject(new Error("no wix code app"));const l={baseUrl:a,metasiteId:s,gridAppId:c,signedInstance:r.instance};return o.save(l).then(function(){p()}).catch(function(e){if(!function(e){return-409===n.safeGetErrorCode(e)}(e))throw p({level:i.levels.ERROR,message:e}),e;p({level:i.levels.WARN,message:"The grid app was already saved on server"})})}return{runUsingPS:function(t){return c({traceFunc:e.partial(i.trace,t),isAppReadOnly:function(e){const t=e.pointers.wixCode.getIsAppReadOnly();return e.dal.get(t)}(t),wixCodeApp:a.getExistingWixCodeAppFromPS(t),baseUrl:o.getBaseUrlFromPS(t),metasiteId:function(e){const t=e.pointers.general.getMetaSiteId();return e.dal.get(t)}(t),gridAppId:r.getGridAppId(t)})},runUsingSnapshot:function(n){return c({traceFunc:e.partial(i.traceWithSnapshot,n),isAppReadOnly:n.getIn(s.paths.IS_APP_READ_ONLY),wixCodeApp:a.getExistingWixCodeAppFromSnapshot(n),baseUrl:t.extractFromSnapshot(n,["serviceTopology",s.WIX_CODE_SERVICE_URL_KEY]),metasiteId:function(e){return t.extractFromSnapshot(e,["rendererModel","metaSiteId"])}(n),gridAppId:t.extractFromSnapshot(n,s.paths.GRID_APP_ID)})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(11)],void 0===(i=function(e,t){"use strict";const n={"wysiwyg.viewer.components.MediaOverlayControls":function(e,n,o,i){s(o,i),t.updateCompLayout(e,n,o,!0)},"wysiwyg.viewer.components.MediaControls":function(e,n,o,i){c(o,i,p(e,n)),t.updateCompLayout(e,n,o,!0)}},o={vertical:2,horizontal:2},i=.65;function r(t,n){const o=e.get(n,["cssStyle","cssBorderRadius"]),i=function(t,n){if(!e.isEmpty(n)){const e=Math.max(n.topLeft.value+n.topRight.value,n.bottomLeft.value+n.bottomRight.value),o=Math.max(n.topLeft.value+n.bottomLeft.value,n.topRight.value+n.bottomRight.value),i=t.width/e,r=t.height/o,a=Math.min(i,r);return a<1?a:1}return 1}(t,o),r=e.get(o,["bottomLeft","value"],0)*i;return{left:.8*r,width:.8*(r+e.get(o,["bottomRight","value"],0)*i)}}function a(e,t){const n=e.dal.get(e.pointers.getInnerPointer(t,"propertyQuery")),o=e.pointers.components.getPageOfComponent(t),{playerId:i}=e.dal.get(e.pointers.data.getPropertyItem(n.replace("#",""),o.id));return e.pointers.components.getComponent(i,o)}function s(e,t){const n=Math.min(t.width,t.height)*i;(e.width>n||e.height>n)&&(e.width=n,e.height=n),e.y=(t.height-e.height)/2,e.x=(t.width-e.width)/2}function c(e,t,n){const i=r(t,n);e.y=t.height-e.height-o.vertical,e.x=o.horizontal+i.left,e.width=t.width-i.width-2*o.horizontal}function p(e,t){const n=a(e,t),o=e.dal.get(e.pointers.getInnerPointer(n,"designQuery")),i=e.pointers.components.getPageOfComponent(t),r=e.pointers.data.getDesignItem(o.replace("#",""),i.id);return e.dal.get(r)}return{layoutPlayerChildren:function(t,o,i){const r=t.pointers.components.getChildren(o);e.forEach(r,e=>{const o=t.dal.get(t.pointers.getInnerPointer(e,"componentType"));if(n[o]){const r=t.dal.get(t.pointers.getInnerPointer(e,"layout"));n[o](t,e,r,i)}})},positionBigPlay:function(e,t,n,o,i){if(i)return;const r=a(e,t);e.pointers.components.isDescendant(t,r)&&s(n,e.dal.get(e.pointers.getInnerPointer(r,"layout")))},positionControlsBar:function(e,t,n,o,i){if(i)return;const r=a(e,t);e.pointers.components.isDescendant(t,r)&&c(n,e.dal.get(e.pointers.getInnerPointer(r,"layout")),p(e,t))}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(74)],void 0===(i=function(e){"use strict";return function(t,n){e.upgradeUrl(t,n,"facebook.comments")}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(4),n(3),n(32),n(51)],void 0===(i=function(e,t,n,o,i){"use strict";return{removePlatformApplicationFromPageIfLastController:function(e,i){const r=t.getPage(e,i),a=n.getDataItem(e,i).applicationId,s=e.pointers.data.getDataItemsWithPredicate({applicationId:a},r.id);o.updatePagePlatformApp(e,r,a,s.length>1)},removeControllerFromStateMap:function(e,t){const n=e.pointers.platform.getControllerStatePointer(t.id);e.dal.isExist(n)&&e.dal.remove(n)},addControllerStateToSerializedStructure:function(e,t,n){const o=e.dal.get(e.pointers.platform.getControllerStatePointer(t.id));void 0!==o&&(n.state=o)},setControllerStateFromSerializedStructure:function(t,n,o){e.has(o,"custom.state")&&i.setState(t,e.set({},e.get(o,"custom.state"),[n]))},addPlatformAppToPageIfFirstController:function(e,n,i,r){r=r||t.getPage(e,n),o.updatePagePlatformApp(e,r,i,!0)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(452)],void 0===(i=function(e,t){"use strict";const n=function(t,o){return e.reduce(e.get(o,t),function(i,r,a){const s=t.concat([a]);return e.isFunction(r)||!e.isObject(r)?(i[s.join(".")]=r,i):e.merge(i,n(s,o))},{})};return{getAPIForSDK:function(o){const i=function t(n,o){return e.isFunction(n)?e.partial(n,o):e.isObject(n)?e.mapValues(n,function(e){return t(e,o)}):n}({document:t},window.documentServices);return o=o||{},e.merge(i.document,o),e(i).merge(o).merge(o.editor).reduce(function(t,o,i,r){return e.assign(t,n([i],r))},{})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(5),n(25),n(48)],void 0===(i=function(e,t,n,o){"use strict";return{reportAPICallBI:function(i,r){if(t.isOpen("platformSdkApiCallBI")){const t=r.call.split("."),a=t.slice(0,-1).join("."),s=e.last(t),c=r.args.map(JSON.stringify).join(",");n.event(i,o.PLATFORM_API_CALL,{app_name:r.args[0].appDefinitionId,module:a,function:s,arguments:c,pageId:i.siteAPI.getPrimaryPageId()})}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(17),n(35),n(183),n(1)],void 0===(i=function(e,t,n,o,i){"use strict";const r=o.linkUtils;return{navigateTo:function(n,o,a){const s=n.dal.get(n.pointers.routers.getRoutersConfigMapPointer()),c=i.siteStructureUtils.getRouterPrefixes({configMap:s}),p=function(n){const o=t.getPagesDataItems(n),r=n.dal.get(n.pointers.routers.getRoutersPointer()),a=n.dal.get(n.pointers.general.getClientSpecMap()),s=t.popupPages.isPopup.bind(t.popupPages,n),c=n.pointers.data.getDataItemFromMaster(i.siteConstants.MASTER_PAGE_ID),p=n.dal.get(c),l=e.get(p,["mainPage","id"])||e.get(p,"mainPageId")||"mainPage";return i.siteStructureUtils.getPages(o,s,l,r,a)}(n),l=r.convertUrlToLinkObject(c,o,null,p);l.hasOwnProperty("pageId")&&(l.pageId="#"===l.pageId?l.pageId:l.pageId.replace("#","")),t.navigateTo(n,l,a)},setState:function(t,n){const o=t.pointers.platform.getAppStatePointer();e.forEach(n,function(n,i){e.forEach(n,function(e){t.dal.full.set(t.pointers.getInnerPointer(o,e.id),i)})})},getState:function(e,t){const o=e.pointers.platform.getAppStatePointer();return e.dal.get(e.pointers.getInnerPointer(o,t.id))||n.Page.DEFAULT_STATE}}}.apply(t,o))||(e.exports=i)},function(e,t){e.exports=E},function(e,t,n){var o,i;o=[n(0),n(30)],void 0===(i=function(e,t){"use strict";const n=t.common.TPABaseUrlBuilder,o=function(e){n.call(this,e)};return o.prototype=e.assign(new n,{addMetaSiteId(e){return this.addQueryParam("metaSiteId",e)},addEditorSessionId(e){return this.addQueryParam("editorSessionId",e)},addAcceptJson(){return this.addQueryParam("accept","json")},addAppVersionAndSiteRevision(e,t){return e?this.addQueryParam("appVersion",e).addQueryParam("siteRevision",t):this}}),o}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(6),n(458),n(459),n(1),n(186),n(5)],void 0===(i=function(e,t,n,o,i,r,a){"use strict";function s(t,n,s){if(!a.isOpen("sv_livePreview"))return;if(n.apps=e.intersection(n.apps,o.getAllowedApps(t)),e.isEmpty(n.apps))return;const c=function(t,n,r){if(!n||!n.apps)return n;return n.apps.reduce((a,s)=>{const c=e.get(o.optionsModifiers,s,e.noop)(t,n,r);return c&&i.wSpy.log("livepreview",["options changed by app",s,c,n]),e.assign(a,c)},n)}(t,n,s);r.action("refresh livepreview",()=>t.siteAPI.refreshAppsInCurrentPage(c))()}function c(t,n,o,i){e.isEmpty(n)||s(t,{apps:n,source:o},i)}function p(t,n){s(t,e.assign(n,{apps:o.getAllowedApps(t)}))}return{init:function(e){p(e,{immediate:!0})},debouncedRefresh:s,isActive:function(){return a.isOpen("sv_livePreview")},autoRun:function(e){t.registerHook(t.HOOKS.DATA.UPDATE_AFTER,(t,o,i)=>c(e,n.appsOfComp(e,i,o),"DATA.UPDATE_AFTER",o)),t.registerHook(t.HOOKS.PROPERTIES.UPDATE_AFTER,(t,o,i)=>c(e,n.appsOfComp(e,i,o),"PROPERTIES.UPDATE_AFTER",o)),t.registerHook(t.HOOKS.DATA.SET_BY_POINTER_AFTER,(t,o,i)=>c(e,n.appsOfComp(e,i,o),"SET_BY_POINTER_AFTER")),t.registerHook(t.HOOKS.CHANGE_PARENT.AFTER,(t,o)=>c(e,n.appsOfComp(e,null,o),"CHANGE_PARENT")),t.registerHook(t.HOOKS.ADD_ROOT.AFTER,(t,o)=>c(e,n.appsOfComp(e,null,o),"ADD_ROOT.AFTER")),t.registerHook(t.HOOKS.DATA.AFTER_UPDATE_CONNECTIONS,(t,o,i)=>{c(e,n.appsOfConnectionItem(e,o,i),"AFTER_UPDATE_CONNECTIONS",i)}),t.registerHook(t.HOOKS.CHANGE_COMPONENT_VIEW_MODE.BEFORE,(t,n)=>{"editor"===n&&p(e,{forceWorkerRestart:!0,source:"CHANGE_COMPONENT_VIEW_MODE"})}),t.registerHook(t.HOOKS.PAGE.AFTER_NAVIGATE_TO_PAGE,()=>p(e,{forceWorkerRestart:!0,source:"AFTER_NAVIGATE_TO_PAGE"})),t.registerHook(t.HOOKS.CONNECTION.AFTER_DISCONNECT,()=>p(e,{forceWorkerRestart:!0,resetRuntimeOverrides:!0,srouce:"AFTER_DISCONNECT"})),t.registerHook(t.HOOKS.UNDO_REDO.AFTER_APPLY_SNAPSHOT,()=>p(e,{forceWorkerRestart:!0,resetRuntimeOverrides:!0,source:"UNDO_REDO.AFTER_APPLY_SNAPSHOT"})),t.registerHook(t.HOOKS.PLATFORM.APP_UPDATED,()=>p(e,{forceWorkerRestart:!0,resetRuntimeOverrides:!0,source:"PLATFORM.APP_UPDATED"})),t.registerHook(t.HOOKS.SWITCH_VIEW_MODE.AFTER,()=>p(e,{forceWorkerRestart:!0,resetRuntimeOverrides:!0,source:"SWITCH_VIEW_MODE"}))}}}.apply(t,o))||(e.exports=i)},function(e,t){e.exports=I},function(e,t,n){var o,i;o=[n(0),n(128),n(1)],void 0===(i=function(e,t,n){"use strict";function o(e,t,n){return e.dal.isExist(t)?e.dal.get(t):n}return{isUndoableFile:function(e){return t.isSchemaFile(e)},assembleUndoableFile:function(n,o,i,r){if(e.isUndefined(o))throw new Error(`Cannot read undoable file which has not been loaded [${n}]`);if(t.isSchemaFile(n))return t.assembleSchema(o,i,r)},setUndoableContent:function(e,t,i){const r=e.pointers.wixCode.getFilePathId(t);let a=o(e,r,null);null===a&&(a=function(e){return n.guidUtils.getUniqueId(e,"-")}(t),e.dal.set(r,a));const s=e.pointers.wixCode.getUndoableModifiedFileContent(a);e.dal.set(s,i)},getUndoableContent:function(e,t){const n=e.pointers.wixCode.getFilePathId(t),i=o(e,n,null);if(null===i)return null;const r=e.pointers.wixCode.getUndoableModifiedFileContent(i);return o(e,r,null)},getUndoableContentByPath:function(t,n){return e.mapValues(n,function(e){return t[e]})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{getTaskName:()=>"saveCode",getSnapshotTags(e){switch(e){case"autosave":return["autosave"];default:return["primary"]}}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(1),n(465),n(466),n(70)],void 0===(i=function(e,t,n,o){"use strict";const i=t.errorTypes,r=e=>(a(e),n.default(t)),a=({signedInstance:n,instanceId:o,appId:i})=>{t.baseUrl=`//${o}.dev.wix-code.com/preview`,t.queryParameters=e.urlUtils.toQueryString({instance:n,gridAppId:i}),t.options={headers:{"X-XSRF-TOKEN":e.cookieUtils.getCookie("XSRF-TOKEN")}}},s=o.errorTypes,c={[i.ABORT]:s.ABORT,[i.TIMEOUT]:s.TIMEOUT,[i.PARSE]:s.PARSE},p=e=>e.catch(e=>e.xhr?Promise.reject(o.build({xhr:e.xhr,errorType:c[e.errorType]})):Promise.reject(e));return{list:e=>p(r(e).list()),get:(e,t)=>p(r(e).get(t)),save:(e,t,n)=>p(r(e).save(t,n,{returnUpdated:!0})),remove:(e,t)=>p(r(e).remove(t,{returnUpdated:!0}))}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(56),n(474),n(26),n(25),n(47),n(76),n(2),n(12),n(5),n(202),n(6),n(19),n(186),n(1)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l,u,d,g,f){"use strict";const m="Editor1.4",y="onboarding";return E=>{function I(e,t){e.config.origin===m&&o.setUseOnBoarding(e,t)}function S(t){return{event:e.partial(i.event,t),error:e.partial(i.error,t)}}function h(t){return-10104===e.get(t,["document","errorCode"])}function P(e){const t=e.pointers.general.getPublishSaveInnerPointer(),n=e.pointers.general.getSilentSaveInnerPointer();e.dal.get(t)?e.dal.remove(t):e.dal.get(n)&&e.dal.remove(n)}function A(e,t,n,...o){if(h(n)){const t=e.pointers.general.getSaveInvalidationCount();let n=e.dal.get(t)||0;e.dal.set(t,++n)}P(e),t&&t(n,...o)}function T(e,t,n,...o){const i=e.pointers.general.getSaveInvalidationCount();e.dal.set(i,0),P(e),l.setSaveProgress(!1),u.executeHook(u.HOOKS.SAVE.SITE_SAVED,null,[t]),n&&n(...o)}function v(t,n,o,...i){if(l.setSaveProgress(!1),P(t),n&&n(o,...i),h(o)){const n=e.get(t,["config","origin"])===y;n&&c.integrations.ravenUtils.captureError(new Error("Site validation error - ADI"),{tags:{adiSaveError:n},extra:{errorDescription:o}}),u.executeHook(u.HOOKS.SAVE.VALIDATION_ERROR)}}const C=e=>({extraPayload:e.runtimeConfig.firstSaveExtraPayload}),_=e=>(t,n,o,...i)=>l.canSave()?e(t,n,o,...i):l.isEnabled()?l.isSaveInProgress()?(e=>{e({documentServices:{errorCode:-1,errorType:a.save.SAVE_IN_PROGRESS,errorDescription:"Save is already in progress. The last save request is being ignored."}})})(o):void 0:(e=>{e({documentServices:{errorCode:-1,errorType:a.save.SAVE_DISABLED_IN_DOCUMENT_SERVICES,errorDescription:"DocumentServices was created with parameter disableSave=true, so save is disabled."}})})(o),O={initMethod:(e,{disableSave:t=!1,firstSaveExtraPayload:n=null}={disableSave:!1,firstSaveExtraPayload:null})=>{t&&l.setSaveAllowed(!1),n&&(e.runtimeConfig.firstSaveExtraPayload=n)},save:_((o,s,u,d,m)=>{I(o,!1),o.setOperationsQueue.flushQueueAndExecute(g.action(function(){const g=!function(e){return!e.dal.get(e.pointers.general.getNeverSaved())}(o);try{c.integrations.ravenUtils.breadcrumb("preSaveOperation on save started."),f.loggingUtils.fedopsLogger.interactionStarted(f.loggingUtils.fedopsLogger.INTERACTIONS.SAVE.PRESAVE_OPERATIONS),n.save(o),f.loggingUtils.fedopsLogger.interactionEnded(f.loggingUtils.fedopsLogger.INTERACTIONS.SAVE.PRESAVE_OPERATIONS)}catch(e){return c.integrations.ravenUtils.breadcrumb("preSaveOperation on save failed."),u&&u({preSaveOperation:e}),i.error(o,r.SAVE_FAILED_DUE_TO_PRE_SAVE_OPERATION,{stack:e.stack}),c.integrations.ravenUtils.captureError(e,{tags:{preSaveOperationError:!0,isFullSave:d}}),void f.log.error("Save has failed due to a preSaveOperation, and no request has been sent to the server - please see the failure details below:",e)}c.integrations.ravenUtils.breadcrumb("preSaveOperation on save finished.");const y=S(o),h=e.partial(T,o,g,s),P=e.partial(v,o,u);if(m&&(m.isPublish?function(e){const t=e.pointers.general.getPublishSaveInnerPointer();e.dal.set(t,!0)}(o):m.isSilent&&function(e){const t=e.pointers.general.getSilentSaveInnerPointer();e.dal.set(t,!0)}(o),e.isUndefined(m.onBoarding)||I(o,m.onBoarding)),l.setSaveProgress(!0),g){const e=C(o);t.runFirstSaveTasks(E.getSaveTasksConfig(o),o.dal,h,P,y,e)}else if(d)t.runFullSaveTasks(E.getSaveTasksConfig(o),o.dal,h,P,y);else{if(function(e){const t=e.dal.get(e.pointers.general.getSaveInvalidationCount());return p.isOpen("block_after_third_invalid_save")&&t>=3}(o))return P({documentServices:{errorCode:-1,errorType:a.save.SAVE_BLOCKED_BY_DOCUMENT_SERVICES,errorDescription:"Save has failed 3 times due to invalidation error (-10104). This site is corrupt (in client!).\nPlease refresh the frame to reload to the last failed saved state."}}),void i.error(o,r.SAVE_BLOCKED_BY_DOCUMENT_SERVICES);t.runPartialSaveTasks(E.getSaveTasksConfig(o),o.dal,h,e.partial(A,o,P),y)}}))}),autosave:_((e,o,a)=>{const s=S(e);e.setOperationsQueue.flushQueueAndExecute(g.action(function(){if(!p.isOpen("sv_autoSaveNoMobileMerge")){let t;f.loggingUtils.fedopsLogger.interactionStarted(f.loggingUtils.fedopsLogger.INTERACTIONS.AUTOSAVE.PRESAVE_OPERATIONS),f.loggingUtils.performance.start(f.loggingUtils.performanceMetrics.AUTOSAVE.PRESAVE_OPERATIONS);try{n.autosave(e),f.loggingUtils.fedopsLogger.interactionEnded(f.loggingUtils.fedopsLogger.INTERACTIONS.AUTOSAVE.PRESAVE_OPERATIONS)}catch(n){if(t=n,a)return a({preAutosaveOperation:t}),i.error(e,r.AUTOSAVE_FAILED_DUE_TO_PRE_SAVE_OPERATION,{stack:t.stack}),void f.log.error("Autosave has failed due to a pre Autosave operation, and no request has been sent to the server - please see the failure details below:",t)}finally{f.loggingUtils.performance.finish(f.loggingUtils.performanceMetrics.AUTOSAVE.PRESAVE_OPERATIONS,{report:!0,additionalData:{success:(!t).toString(),pagesCount:d.getNumberOfPages(e)}})}}t.runAutosaveTasks(E.getSaveTasksConfig(e),e.dal,o,a,s)}))}),saveAsTemplate:_((e,o,i)=>{try{n.saveAsTemplate(e)}catch(e){if(i)return void i({preSaveAsTemplateOperation:e})}O.save(e,function(){O.publish(e,function(e,n,o){e.setOperationsQueue.flushQueueAndExecute(g.action(function(){const i=[E.getSaveTasksConfig(e),e.dal,n,o,S(e)];t.runSaveAsTemplate.apply(t,i)}))}.bind(null,e,o,i),i)},i,!1)}),publish:_((e,n,o,i)=>{const r=E.getSaveTasksConfig(e),a=[r,e.dal,n,o,S(e),i];((e,n)=>p.isOpen("ds_saveChangesBeforePublish")&&t.shouldSaveBeforePublish(e,n))(r,e.dal)?(c.integrations.ravenUtils.breadcrumb("shouldSaveBeforePublish - saving before publishing",{ds_saveChangesBeforePublish:p.isOpen("ds_saveChangesBeforePublish")}),f.loggingUtils.fedopsLogger.interactionStarted(f.loggingUtils.fedopsLogger.INTERACTIONS.SAVE_BEFORE_PUBLISH),O.save(e,function(){f.loggingUtils.fedopsLogger.interactionEnded(f.loggingUtils.fedopsLogger.INTERACTIONS.SAVE_BEFORE_PUBLISH),t.runPublishTasks.apply(t,a)},o,!1)):(c.integrations.ravenUtils.breadcrumb("shouldSaveBeforePublish - no need to save, only publishing"),e.setOperationsQueue.flushQueueAndExecute(g.action(function(){t.runPublishTasks.apply(t,a)})))}),canUserPublish:function(t){if(!l.isEnabled())return!1;if(!o.isFirstSave(t)&&!o.isOwner(t)){const n=o.getUserPermissions(t);return e.includes(n,s.PERMISSIONS.PUBLISH)}return!0},saveState:l};return O}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";const t={targetComponent:"PAGES_CONTAINER",type:"BOTTOM_TOP"},n=(t,o)=>i(t,o)&&e.every(t.pointers.components.getChildren(o),e.partial(n,t)),o=(e,t)=>e.dal.full.get(e.pointers.getInnerPointer(t,["layout","anchors"])),i=(t,n)=>e.isEmpty(o(t,n));return(r,a)=>{if(!i(r,a)){const n=o(r,a);if(!(e=>"masterPage"===e.id)(a)||e.size(n)>1||!(n=>e.isEqual(t,e.pick(n,["targetComponent","type"])))(e.head(n)))return!1}return e.every(r.pointers.components.getChildren(a),e.partial(n,r))}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(37)],void 0===(i=function(e,t){"use strict";return function(e){if(e.siteAPI.isMobileView())return;t.runPartialConversionAllPages(e,!1)}}.apply(t,o))||(e.exports=i)},function(e,t){e.exports=S},function(e,t){e.exports=h},function(e,t,n){var o,i;o=[n(0),n(193),n(132)],void 0===(i=function(e,t,n){"use strict";const o=n.getSavePaths(),i={documentServicesModel:!0,rendererModel:!0,serviceTopology:!0,origin:!0};return{extendSavableSnapshotWithFullSnapshot:(e,t)=>e.merge(t.filter((e,t)=>i[t])),getSaveableSnapshot:n=>e.reduce(o,(e,t)=>n.hasIn(t)?e.setIn(t,n.getIn(t)):e,t.fromJS({}))}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{actions:{}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(0),n(58),n(30),n(1),n(10),n(4),n(18),n(7),n(17),n(15),n(64),n(102),n(138),n(71),n(29),n(97),n(31),n(28),n(63),n(198),n(103),n(6)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l,u,d,g,f,m,y,E,I,S,h,P){"use strict";const A=function(t,n,o,i,r,a,s){r=r||{};const c=p.getAppDataByAppDefinitionId(t,i);m.requestAppMarketDataToBeCached(t,i),!r.sourceTemplateId||c?c?(g.isPending(t,c)&&g.add(c),a(c)):l.preSaveAddApp(t,i,a,s,e.get(r,"appVersion")):l.provisionAppFromSourceTemplate(t,i,r.sourceTemplateId,a,s)},T=function(e,t,n,o,i,r,a){p.registerAppData(e,i);try{v(n)(e,t,o,i,r,a)}catch(e){a&&a(e)}},v=function(e){return{TPAWidget:u.addWidgetAfterProvision,TPASection:d.addSectionAfterProvision}[e]},C=function(e,t){const n={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i}[t||"all"];return n&&n.test(e)},_=function(e,o,i){const r=t(`#${e}`).find("iframe")[0];try{n.common.tpaPostMessageCommon.callPostMessage(r,{intent:"addEventListener",eventType:o,params:i})}catch(e){}},O=function(t,n,o,i,r,a={},s,c){if(o&&!o.dontAdd){const r=a.callback;a.callback=((...e)=>{P.executeHook(P.HOOKS.ADD_TPA.AFTER,null,[n,o]),r&&r(...e)}),T(n,i,t,a,o,s,e.get(a,"onError")||c)}};return{provisionApp:A,provisionWidget:function(e,t,n,o){const i=function(t,n){e.setOperationsQueue.asyncPreDataManipulationComplete(t,n)};A(e,0,E.TYPE.TPA_WIDGET,n,o,i,function(){o.onError&&o.onError(),i(null,new Error("addWidget - provision failed"))})},provisionSection:function(t,n,i,r,a){const s=`${E.TYPE.TPA_SECTION}_${o.guidUtils.getUniqueId()}`;(r=r||{}).sectionId=s;return A(t,0,E.TYPE.TPA_SECTION,i,r,function(e,n){(e=e||{}).additionalOptions=r,t.setOperationsQueue.asyncPreDataManipulationComplete(e,n)},function(){a&&a(),t.setOperationsQueue.asyncPreDataManipulationComplete(null,new Error("addSection - provision failed"))}),e.assign(n,{sectionId:s})},provisionMultiSection:function(t,n,i,r){if(d.alreadyInstalled(t,i)){const a=`${E.TYPE.TPA_SECTION}_${o.guidUtils.getUniqueId()}`;r.sectionId=a;const s=p.getWidgetDataFromTPAPageId(t,i,r.pageId),c=p.getAppDataByAppDefinitionId(t,i);return s&&p.isMultiSectionInstanceEnabled(c,s.widgetId)?(r.applicationId=c.applicationId,r.appDefinitionId=c.appDefinitionId,r.widgetData=s,t.setOperationsQueue.asyncPreDataManipulationComplete(c),e.assign(n,{sectionId:a})):t.setOperationsQueue.asyncPreDataManipulationComplete(null,new Error("Creating this section is not allowed"))}return t.setOperationsQueue.asyncPreDataManipulationComplete(null,new Error("Main section is not installed"))},provisionAppDemoSave:function(e,t,n,o){const i=p.getAppData(e,t)||{};l.preSaveAddApp(e,i.appDefinitionId,e.setOperationsQueue.asyncPreDataManipulationComplete.bind(e.setOperationsQueue),function(t){o&&o(),e.setOperationsQueue.asyncPreDataManipulationComplete(null,t)})},addApp:T,addAppWrapper:O,addSection:function(t,n,o,i,r,a){r=e.merge(r,e.get(n,"additionalOptions")),n=e.omit(n,"additionalOptions"),O(E.TYPE.TPA_SECTION,t,n,o,i,r,e.noop,a)},addMultiSection:function(e,t,n,o,i={}){p.registerAppData(e,t);const r=i.callback;i.callback=((...n)=>{P.executeHook(P.HOOKS.ADD_TPA.AFTER,null,[e,t]),r&&r(...n)}),d.addMultiSection(e,n,i)},addSubSection:function(t,n,o,i){i=i||{};const r=p.getAppDataByAppDefinitionId(t,o);if(r){const o=e.find(r.widgets,["appPage.id",i.pageId]);if(o){const a=h.addSubSection(t,n,o,r,i);e.assign(n,{sectionId:a}),t.setOperationsQueue.isRunningSetOperation()?t.setOperationsQueue.executeAfterCurrentOperationDone(function(){d.invokeSectionCallback(i,n,a,!0),P.executeHook(P.HOOKS.ADD_TPA.AFTER,null,[t])}):(d.invokeSectionCallback(i,n,a,!0),P.executeHook(P.HOOKS.ADD_TPA.AFTER,null,[t]))}}},settingsUpdated:function(t,n,o,i){if("*"===o){const o=f.getAllAppCompsByAppId(t,n);e.forEach(o,function(e){I.callSettingsUpdateCallback(e.id,i)})}else I.callSettingsUpdateCallback(o,i)},refreshApp:function(t,n,o){o=e.merge(o||{},{cacheKiller:`${e.now()}`}),e.forEach(n,function(n){const i=e.get(n,"id");if(i){const n=t.pointers.siteAspects.getAspectComponentData("tpaCompStateAspect",i),r=t.dal.get(n)||{};t.dal.set(n,e.merge(r,{queryParams:o}))}})},getSectionRefByPageId:function(t,n){const o=c.getPage(t,n),i=r.getTpaChildren(t,o);return e.find(i,function(e){return function(e,t){const n=r.getType(e,t);return n===E.COMP_TYPES.TPA_SECTION||n===E.TPA_COMP_TYPES.TPA_SECTION}(t,e)})},setExternalId:function(t,n,o,i,a){C(o)?(e.invoke(t.siteAPI,"updatePreventRefreshState",n.id,{preventRefresh:Boolean(a)}),r.data.update(t,n,{referenceId:o},!0),i(`ExternalId: ${o} will be saved when the site will be saved`)):i({onError:`The given externalId: ${o} is not a valid UUID.`})},getExternalId:function(e,t){const n=r.data.get(e,t,null,!0);return n&&n.referenceId},postBackThemeData:function(e,t,n){const o=a.style.getId(e,s.getComponentById(e,t));if("STYLE"!==n.type||"STYLE"===n.type&&o===n.values){const n=S.getStyleDataToPassIntoApp(e,t);_(t,"THEME_CHANGE",n)}},postMessageBackToApp:_,getDefaultLayout:function(t,n,o){const i=p.getWidgetData(t,n,o);return{height:e.get(i,"defaultHeight")||500,width:e.get(i,"defaultWidth")||980,x:0}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(30),n(18),n(7),n(4),n(10),n(26)],void 0===(i=function(e,t,n,o,i,r,a){"use strict";const s=function(t,n){e.isArray(n)?e.forEach(n,function(e){c(t,e)}):c(t,n)},c=function(e,t){let n=t.key;switch(t.type){case"color":d(e,n="param_color_"+n,t);break;case"font":g(e,n="param_font_"+n,t);break;case"number":u(e,n="param_number_"+n,t);break;case"boolean":l(e,n="param_boolean_"+n,t)}},p=function(t,o){const i=function(e,t){return n.style.get(e,t)}(t,o);return e.defaults(i,{style:{groups:{},properties:{},propertiesSource:{}}}),i&&(i.styleType="custom"),i},l=function(t,n,o){const i=o.param.value;t.style.properties[n]=i,t.style.propertiesSource=e.get(t,"style.propertiesSource",{}),t.style.propertiesSource[n]="value"},u=function(t,n,o){const i=o.param.value;t.style.properties[n]=i,t.style.propertiesSource=e.get(t,"style.propertiesSource",{}),t.style.propertiesSource[n]="value"},d=function(t,n,o){const i=o.param.value.color&&"object"==typeof o.param.value.color,r=i?o.param.value.color.name:o.param.value.rgba||o.param.value.cssColor;t.style.properties[n]=r,t.style.propertiesSource=e.get(t,"style.propertiesSource",{}),t.style.propertiesSource[n]=i?"theme":"value",o.param.value.hasOwnProperty("opacity")&&(t.style.properties[`alpha-${n}`]=o.param.value.opacity)},g=function(t,n,o){const i=o.param.value;t&&t.style&&(t.style.properties[n]=JSON.stringify(i),t.style.propertiesSource=e.get(t,"style.propertiesSource",{}),t.style.propertiesSource[n]="value")};return{setStyleParam:function(e,t,i,r){const a=o.getComponentById(e,t),c=p(e,a);s(c,i),n.style.update(e,a,c,function(e){r(e)})},mapWixParamsToCssValues:function(e,n,o){t.tpaStyleUtils.getValueForWixParams(r.styles.getAll(e,"masterPage").THEME_DATA,n,o)},getTpaColorsToSiteColors:function(){const t=e.reduce(["white/black","black/white","primery-1","primery-2","primery-3"],function(e,t,n){return e[t]=`color_${++n}`,e},{}),n=e.range(1,26);return e.reduce(n,function(e,t){return e[`color-${t}`]=`color_${t+10}`,e},t)},getStyleDataToPassIntoApp:function(n,s){const c=function(t,n){const r=o.getComponentById(t,n),a=i.data.get(t,r),s=e.get(a,"origCompId"),c=e.isUndefined(s)?r:o.getComponentById(t,s);return c?t.dal.get(t.pointers.getInnerPointer(c,"styleId")):null}(n,s),p=r.styles.getAll(n),l=n.dal.get(n.pointers.general.getSantaBase()),u=a.getDocumentType(n),d=r.fonts.getCharacterSet(n),g=n.dal.get(n.pointers.general.getServiceTopology());return t.common.styleUtils.getStyleDataToPassIntoApp(c,p,l,u,d,g,!1)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";const t={isEcomPagesMissingExperimentOn:e.noop};return{setExperiments:function(n){e.merge(t,n)},getExperiments:function(){return t}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(30),n(5),n(201),n(15),n(63),n(31)],void 0===(i=function(e,t,n,o,i,r,a){"use strict";const s=t.common.tpaPostMessageCommon,c=function(e){return"editor"===e.originFrame},p=function(e,t,n){const r=s.fixOldPingPongMessageType(t.type);if(function(e,t){const n={openSettingsDialog:!0,isApplicationInstalled:!0,onReady:!0}[t.type],r={isSupported:!0,registerEventListener:!0,getInstalledInstance:!0,resizeComponent:!0,revalidateSession:!0}[t.type],a={applicationLoaded:!0,siteInfo:!0,getSectionUrl:!0,getStateUrl:!0,navigateToPage:!0,getExternalId:!0,getValue:!0,getValues:!0,getPublicData:!0,getCurrentPageAnchors:!0,getComponentInfo:!0,navigateToSectionPage:!0,isAppSectionInstalled:!0,getAppVendorProductId:!0,getSitePages:!0,getSiteMap:!0,smCurrentMember:!0,refreshCurrentMember:!0}[t.type],s=c(t),p=e.pointers.general.getRenderFlag("componentViewMode"),l=e.dal.get(p),u={setValue:!0,removeValue:!0,addApplication:!0}[t.type]&&"editor"===l,d=!{getInstalledInstance:!0,addApplication:!0}[t.type]||i.isSuperAppByCompId(e,t.compId);return(a||r||n||s||u)&&d&&o[t.type]}(e,t)&&(o[r].apply(this,[e,t,n]),l(t))){const n=c(t)?"editor":"preview";a.sendBIEvent(e,t,n)}},l=function(t){return"registerEventListener"!==t.type||e.includes(r.supportedEvents,t.data.eventKey)};return{init:function(e){"undefined"!=typeof window&&window.addEventListener("message",s.handleTPAMessage.bind(this,e,null,p),!1)},callHandler:p}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(58),n(0),n(12),n(30),n(31),n(17),n(81),n(7),n(4),n(13),n(147),n(137),n(63),n(11),n(29),n(28),n(60),n(32)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l,u,d,g,f,m,y,E){"use strict";const I=o.services.tpaPreviewEditorCommunicationService;let S;const h=function(e,n){const o=e.pointers.siteAspects.getAspectGlobalData("tpaModalAspect"),i=e.dal.get(o);return n===t.get(i,"modalStructure.id")?i.modalData:null},P=function(e,n){const o=e.pointers.siteAspects.getAspectGlobalData("tpaPopupAspect"),i=e.dal.get(o),r=t.find(i,["structure.id",n]);return r?r.popupData:null},A=function(e,n){const o=s.getComponentById(e,n);return c.data.get(e,o)||h(e,n)||P(e,n)||function(e,n){const o=e.siteAPI.getComponentsToRender(),i=t.find(o,["structure.id",n]);return t.get(i,"props.compData")}(e,n)},T=function(e,n){const o=A(e,n);return parseInt(t.get(o,"applicationId"),10)},v=function(e,n){const o=r.getPagesDataItems(e);return t.filter(o,{tpaApplicationId:n})},C=function(e,t){const n=T(e,t);return v(e,n)},_=function(e){return t.find(e,{hidePage:!1})},O=function(e,n){return t.find(e,{tpaPageId:n})},D=function(e,t,o){const i=p.generalInfo.getPublicUrl(e);return n.wixUrlParser.getUrl(e.siteDataAPI.siteData,{pageId:t.id,title:t.pageUriSEO,tpaInnerRoute:o},!1,!0,i)},w=function(e,t,o=!0){let i=l.title.get(e)||"";const r=t.title||"",s=n.pageUtils.extractPageTitleFromOriginalTitle(t.pageTitleSEO,o,i),c=e.siteAPI.getCurrentUrlPageId(),p=a.isHomepage(e,c);return s?i=s:p||(i=o?`${i} | ${r}`:r),i},M=function(e,t){const o=p.generalInfo.getPublicUrl(e);return n.wixUrlParser.getUrl(e.siteDataAPI.siteData,{pageId:t.id,title:t.pageUriSEO},!1,!0,o)},b=function(e,n){let o;if(t.isArray(n.data.compIds))o=function(e,n){const o=[];return t.forEach(n,function(t){const n=s.getComponentById(e,t);n&&o.push(n)}),o}(e,n.data.compIds);else{const t=T(e,n.compId);o=S.app.getRenderedReactCompsByApplicationId(e,t)}S.app.refreshApp(e,o,n.data.queryParams),e.siteAPI.forceUpdate()},R=function(e,t,n){const o=t.compId,i=s.getComponentById(e,o);S.comp.resize(e,i,t.data.width,t.data.height,n)},N=function(e,n){const o=h(e,n)||P(e,n),i=t.get(o,"origCompId");return i?s.getComponentById(e,i):null},x=function(e){e({error:{message:"comp not found"}})},L=function(e,t){const n=c.data.get(e,t);return{id:n.compId,title:n.name}},B=function(e,t){const n=c.getType(e,t);return n===m.COMP_TYPES.TPA_SECTION||n===m.COMP_TYPES.TPA_MULTI_SECTION};return{registerEventListener:function(e,t){const n=t.data.eventKey,o=t.compId;switch(n){case"EDITOR_EVENT":S.change.register.editorEventHandler(e,t.compId,function(e){S.comp.postMessageBackToApp(o,n,e)});break;case"COMPONENT_DELETED":S.change.register.deleteCompHandler(e,t.compId,function(){S.comp.postMessageBackToApp(o,n,{})});break;case"EDIT_MODE_CHANGE":S.change.register.editModeChangeHandler(e,t.compId,function(e){S.comp.postMessageBackToApp(o,n,{editMode:e})});break;case"SITE_PUBLISHED":S.change.register.sitePublishedHandler(e,t.compId,function(){S.comp.postMessageBackToApp(o,n,{})});break;case"SETTINGS_UPDATED":S.change.register.settingsUpdatedHandler(e,t.compId,function(e){S.comp.postMessageBackToApp(o,n,e)});break;case"WINDOW_PLACEMENT_CHANGED":S.change.register.windowPlacementChangedHandler(e,t.compId,function(e){S.comp.postMessageBackToApp(o,n,e)});break;case"THEME_CHANGE":S.change.register.themeChangeHandler(e,o,function(t){S.style.postBackThemeData(e,o,t)});break;case"DEVICE_TYPE_CHANGED":S.change.register.deviceTypeChangeHandler(e,t.compId,function(e){S.comp.postMessageBackToApp(o,n,{deviceType:e})});break;case"STYLE_PARAMS_CHANGE":break;case"SITE_SAVED":S.change.register.siteSavedHandler(e,t.compId,function(){S.comp.postMessageBackToApp(o,n)});break;case"ON_MESSAGE_RESPONSE":e.siteAPI.reportBI(S.bi.errors.EVENT_TYPE_NOT_SUPPORTED);break;case"PUBLIC_DATA_CHANGED":const i=T(e,o);S.change.register.registerPublicDataChangedHandler(e,t.compId,i,function(e){S.comp.postMessageBackToApp(o,n,e)})}},siteInfo:function(e,t,i){const a={},s=r.data.get(e,e.siteAPI.getCurrentUrlPageId());if(s.siteTitle=w(e,s),o.common.utils.sdkVersionIsAtLeast(t.version,"1.42.0")?a.pageTitle=s.siteTitle||"":(a.siteTitle=s.siteTitle||"",a.pageTitle=s.title||""),a.pageTitleOnly=w(e,s,!1),a.siteDescription=l.description.get(e),a.siteKeywords=l.keywords.get(e),p.generalInfo.isFirstSave(e))a.baseUrl="";else{const t=p.generalInfo.getPublicUrl(e)||"",o=t&&n.urlUtils.parseUrl(t)||"";a.baseUrl=t&&`${o.protocol}//${o.host}${o.path}`||"baseUrl is not available - site is saved but not published"}const c=e.siteAPI.getCurrentUrl();a.url=o.common.utils.appendProtocolToUrlIfNeeded(c.host,c),a.referer=window.document.referrer,i(a)},getSitePages:function(e,n,i){const r={filterHideFromMenuPages:!0,includePagesUrl:t.get(n,"data.includePagesUrl",!1),baseUrl:p.generalInfo.getPublicUrl(e),includeIsHomePage:!0,enhancedInfo:!1};i(o.sitePages.getSitePagesInfoData(e.siteDataAPI.siteData,r))},getSiteMap:function(e,t,n){const i={filterHideFromMenuPages:!0,includePagesUrl:!1,baseUrl:p.generalInfo.getPublicUrl(e),includeIsHomePage:!1,enhancedInfo:!0};n(o.sitePages.getSitePagesInfoData(e.siteDataAPI.siteData,i))},refreshApp:b,refreshAppByCompIds:b,getSectionUrl:function(e,t,n){if(p.generalInfo.isFirstSave(e))return void n({error:{message:"Page was not found."}});const o=t.data.sectionIdentifier,i=C(e,t.compId),r=O(i,o)||_(i);n(r?{url:M(e,r)}:{error:{message:"This app does not have any pages."}})},openSettingsDialog:function(e,n,o){const i=T(e,n.compId),r=S.app.getAllCompsByApplicationId(e,i);let a;if(n.data&&n.data.compId){if(a=t.find(r,{id:n.data.compId}),t.isUndefined(a))return void o({onError:"comp not found"})}else a=t.find(r,{id:n.compId});const s={pageId:a.pageId,compId:a.id};I.doPostMessage("openSettingsDialog",s,n.compId)},isSupported:function(e,t,n){n(!0)},navigateToPage:function(e,n,i){const a=e.siteAPI.getPrimaryPageId(),p=r.getPageIdList(e,!1,!0);o.services.tpaNavigationService.navigateToPage({scrollToAnchor:e.siteAPI.scrollToAnchor.bind(e.siteAPI),registerNavigationComplete:e.siteAPI.registerNavigationComplete.bind(e.siteAPI),navigateToPage:e.siteAPI.navigateToPage.bind(e.siteAPI)},n,a,p,function(t){const n=o.common.utils.Constants.TOP_PAGE_ANCHOR_PREFIX+t;return r.getPageAnchors(e,t,n)},function(n){const o=s.getComponentById(e,n),i=c.data.get(e,o);return t.get(i,"id")},i),I.doPostMessage("deselectComponent")},getExternalId:function(e,t,n){n(S.comp.getExternalId(e,s.getComponentById(e,t.compId)))},getInstalledInstance:function(e,n,o){let i={};const r=S.app.getDataByAppDefId(e,n.data.appDefinitionId);i=t.isEmpty(r)?{onError:!0}:S.app.isInstalled(e,n.data.appDefinitionId,!1)?{instanceId:r.instanceId}:{onError:!0};o(i)},revalidateSession:function(e,t,n){const o=T(e,t.compId),i=e.dal.get(e.pointers.general.getMetaSiteId());S.provision.refreshAppSpecMap(e,o,i,function(e){n({instance:e.instance})},function(e){n({onError:!0,error:{errorCode:e.status,errorText:e.statusText,error:JSON.parse(e.response)}})})},resizeComponent:R,settingsResizeComponent:function(e,t,n){R(e,t,n)},getValue:function(e,t,n){const o=t.compId;if(t.data.scope===S.data.SCOPE.APP){const i=T(e,o);i?S.data.app.get(e,i,t.data.key,n):x(n)}else{const i=s.getComponentById(e,o)||N(e,o);i?S.data.comp.get(e,i,t.data.key,n):x(n)}},getValues:function(e,t,n){const o=t.compId;if(t.data.scope===S.data.SCOPE.APP){const i=T(e,o);i?S.data.app.getMulti(e,i,t.data.keys,n):x(n)}else{const i=s.getComponentById(e,o)||N(e,o);i?S.data.comp.getMulti(e,i,t.data.keys,n):x(n)}},getPublicData:function(e,t,n){const{compId:o}=t,i=T(e,o),r=s.getComponentById(e,o)||N(e,o);i&&r?S.data.getPublicData(e,i,r,n):x(n)},setValue:function(e,t,n){const o=s.getComponentById(e,t.compId);o?u.set(e,o,t.data.key,t.data.value,t.data.scope,n):x(n)},removeValue:function(e,t,n){const o=s.getComponentById(e,t.compId);o?S.data.remove(e,o,t.data.key,t.data.scope,n):x(n)},getCurrentPageAnchors:function(e,i,a){const c=e.siteAPI.getPrimaryPageId(),p=r.getPage(e,c),l=s.getComponentByType(e,"wysiwyg.common.components.anchor.viewer.Anchor",p),u=t.map(l,function(t){return L(e,t)}),d=o.common.utils.Constants.TOP_PAGE_ANCHOR_PREFIX+c,g=n.scrollAnchors.getPageTopAnchor(c,d),f={id:g.compId,title:g.name};u.push(f),a(u)},getComponentInfo:function(e,n,o){const i=s.getComponentById(e,n.compId),r=c.data.get(e,i),a=r.applicationId,p=S.app.getData(e,a),l=g.isShowOnAllPages(e,i),u=p.widgets[r.widgetId];o({compId:n.compId,showOnAllPages:l,pageId:l?"":e.pointers.components.getPageOfComponent(i).id,tpaWidgetId:t.get(u,"tpaWidgetId",""),appPageId:t.get(u,"appPage.id","")})},settpads:function(e){S=e},navigateToSectionPage:function(e,n,i){let r,a;const c=t.get(n,"data.sectionIdentifier.appDefinitionId");c?(r=S.app.getDataByAppDefId(e,c),a=t.get(r,"applicationId")):r=(a=T(e,n.compId))&&S.app.getData(e,a);const p=a&&f.getAppPages(e,a),l=e.siteAPI.getPrimaryPageId(),u={navigateToPage:e.siteAPI.navigateToPage.bind(e.siteAPI),reportBI:e.siteAPI.reportBI.bind(e.siteAPI),updatePageNavInfo:e.siteAPI.updatePageNavInfo.bind(e.siteAPI),scrollSiteTo:t.partial(g.setScroll,e),updateSectionUrlState:e.siteAPI.updateSectionUrlState.bind(e.siteAPI),updateSectionUrlParams:e.siteAPI.updateSectionUrlParams.bind(e.siteAPI),updatePushState:e.siteAPI.updatePushState.bind(e.siteAPI),reportStateChanged:e.siteAPI.reportStateChanged.bind(e.siteAPI)};o.services.tpaNavigationService.navigateToSection(u,r,n,p,l,function(n){const o=s.getAllComponents(e,n,t.partial(B,e)),i=t.head(o);return t.get(i,"id")},t.partial(y.getRouterDataForPageIfExist,e),i)},getStateUrl:function(e,t,n){if(p.generalInfo.isFirstSave(e))return void n({error:{message:"Page was not found."}});const o=t.data.sectionId,i=C(e,t.compId),r=O(i,o);let a;if(r){if(a=y.getRouterDataForPageIfExist(e,r.id))return void n({error:{message:"Can't retrieve url for a dynamic page. Please use the platform app API instead."}});n({url:D(e,r,t.data.state)})}else{const t=_(i);if(t){if(a=y.getRouterDataForPageIfExist(e,t.id))return void n({error:{message:"Can't retrieve url for a dynamic page. Please use the platform app API instead."}});n({url:M(e,t)})}else n({error:{message:"This app does not have any pages."}})}},addApplication:function(e,t,n){I.doPostMessage("editorAddApplication",t.data,t.compId,n)},applicationLoaded:function(e,t){const n=s.getComponentById(e,t.compId);d.callCompLoaded(n)},isApplicationInstalled:function(e,t,n){I.doPostMessage("editorIsApplicationInstalled",t.data,t.compId,n)},isAppSectionInstalled:function(e,n,o){let i;const r=t.get(n,["data","appDefinitionId"]);if(r){const n=S.app.getDataByAppDefId(e,r);i=t.get(n,"applicationId")}else i=T(e,n.compId);const a=v(e,i);o(t.some(a,{tpaPageId:t.get(n,["data","sectionId"])}))},getAppVendorProductId:function(e,n,o){const i=t.get(n,["data","appDefinitionId"]),r=S.app.getDataByAppDefId(e,i);if(!r)return void o(null);const a=E.getAppDataByApplicationId(e,r.applicationId);o(t.get(a,"vendorProductId")||null)},smCurrentMember:function(e,t,n){e.siteAPI.getMemberDetailsInPreview(function(e){n(e||null)})},refreshCurrentMember:function(e){e.siteAPI.getMemberDetailsInPreview(null,null,!0)},onReady:function(e,t,n){I.doPostMessage("onReady",t.data,t.compId,n)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";const e={isSaveInProgress:!1,isSaveAllowedByDSconfig:!0};return{setSaveProgress:function(t){e.isSaveInProgress=t},isSaveInProgress:function(){return e.isSaveInProgress},canSave:()=>e.isSaveAllowedByDSconfig&&!e.isSaveInProgress,isEnabled:()=>e.isSaveAllowedByDSconfig,setSaveAllowed:t=>{e.isSaveAllowedByDSconfig=t}}}.apply(t,[]))||(e.exports=o)},function(e,t){e.exports=P},function(e,t,n){var o;void 0===(o=function(){"use strict";return{incNumberSuffix(e,t){t=t||" ";const n=parseInt(e.split(t).pop(),10);return isNaN(n)?`${e+t}2`:e.split(t).slice(0,-1).concat(n+1).join(t)}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(0),n(1),n(19),n(33),n(104),n(88)],void 0===(i=function(e,t,n,o,i,r){"use strict";const a=["primary"];return{create:s=>{const c=(t,a)=>{const c=o.getAppDataByAppDefinitionId(s,"61f33d50-3002-4882-ae86-d319c1a249ab");if(c){const o=(t=>e.some(n.getPagesList(t),e.partial(r.isBlogPage,t)))(s),l=(e=>"Deleted"===e.state)(c);o&&l?i.restoreWixappOnServer(s,c.appDefinitionId,p("restore",t,a),a):o||l?!o&&l?t():o&&!l&&t():i.disableWixappOnServer(s,c.appDefinitionId,p("disable",t,a),a)}else t()},p=(e,n,i)=>r=>{r&&r.success?(((e,t)=>{o.registerAppData(e,t)})(s,r.payload),n()):(t.log.error(`wixapps blog "${e}" operation failed on MetaSite, errorCode: ${r.errorCode}, errorDecription: ${r.errorDescription}`),i())};return{partialSave(e,t,n,o){c(n,o)},fullSave(e,t,n,o){c(n,o)},firstSave(e,t,n){n()},saveAsTemplate(e,t,n){n()},autosave(e,t,n){n()},publish(e,t){t()},getTaskName:()=>"wixappsSavePermissionsPlugin",getSnapshotTags:()=>a}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(140),n(69),n(44),n(43),n(45)],void 0===(i=function(e,t,n,o,i,r){"use strict";const a=t(function(e,t,a,s){const c=(p=t,i.extractFromSnapshot(p,["rendererModel","clientSpecMap"],!0));var p;if(!r.wixCodeWidgetService.getWixCodeSpec(c))return void a();const l=o.traceWithSnapshot(t,{action:"saveWixCodeInMetasite"});n.save(t,function(e){!function(e,t){t?t.success?e({message:t.payload.clientSpecMap}):e({message:t,level:o.levels.ERROR}):e({message:"no wix code apps to save"})}(l,e),a(e)},function(e){l({message:e,level:o.levels.ERROR}),s(e)})});return{partialSave:a,fullSave:a,firstSave:a,saveAsTemplate:a,publish(e,t){t()},autosave(e,t,n){n()},getTaskName:()=>"saveWixCodeTask",getSnapshotTags(e){switch(e){case"autosave":return["autosave"];default:return["primary"]}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(104),n(140)],void 0===(i=function(e,t,n){"use strict";return{partialSave(e,t,n){n()},fullSave(e,t,n){n()},firstSave:n(function(e,n,o,i){!function(e,n,o){const i=e.getIn(["rendererModel","metaSiteId"]),r=e.getIn(["documentServicesModel","editorSessionId"]),a=e.getIn(["rendererModel","clientSpecMap"]).toJS(),s=e.getIn(["serviceTopology","appStoreUrl"]);t.completeProvisionAppsAfterSave(s,i,r,a,n,o)}(n,o,i)}),saveAsTemplate(e,t,n){n()},autosave(e,t,n){n()},publish(e,t){t()},getTaskName:()=>"unProvisionedApps",getSnapshotTags:()=>["primary"]}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(5),n(71),n(64),n(140)],void 0===(i=function(e,t,n,o,i){"use strict";function r(){n.onSave()}const a=function(e,t,n,i,a){const s=function(e){i(e),r()};setTimeout(function(){n?o.settleOnFirstSave(e,t,s,a):o.settleOnSave(e,t,s,a)},200)},s=i(function(e,t,n,o){a(e,t,!1,n,o)}),c=(e,n,o,i)=>{t.isOpen("settleInServer")?(r(),o()):s(e,n,o,i)};return{saveAsTemplate(e,t,n){n()},publish(e,t){t()},getTaskName:()=>"unProvisionedAppsAppFlows",getSnapshotTags:()=>["primary"],firstSave:i(function(e,t,n,o){a(e,t,!0,n,o)}),partialSave:c,fullSave:c,autosave:c}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(77)],void 0===(i=function(e){"use strict";const t=function(){e.change.siteSaved()};return{partialSave(e,n,o){o(),t()},fullSave(e,n,o){o(),t()},firstSave(e,n,o){o(),t()},saveAsTemplate(e,t,n){n()},publish(e,t){t()},autosave(t,n,o){e.change.siteSaved(),o()},getTaskName:()=>"saveEventDispatcher",getSnapshotTags:()=>["primary"]}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(5),n(3),n(6),n(2),n(211),n(66),n(81),n(19),n(27),n(77)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l,u){"use strict";const d=t.multilingual.PointerOperation;f();const g="CUSTOM_MAIN_MENU";function f(){i.registerHook(i.HOOKS.REMOVE.AFTER,h,"mobile.core.components.Page"),i.registerHook(i.HOOKS.REMOVE.AFTER,h,"wixapps.integration.components.AppPage"),i.registerHook(i.HOOKS.ADD.BEFORE,y,"wysiwyg.viewer.components.menus.DropDownMenu"),i.registerHook(i.HOOKS.ADD.BEFORE,y,"wysiwyg.viewer.components.ExpandableMenu"),i.registerHook(i.HOOKS.ADD.BEFORE,y,"wysiwyg.common.components.verticalmenu.viewer.VerticalMenu"),c.registerPageDataChangedCallback(E),c.registerPageAddedCallback(I)}function m(t,n,i){if(!e.isString(n)||"#"!==n[0])return!1;const r=o.getDataItemById(t,n.replace("#",""),i);return"CustomMenu"===e.get(r,"type")}function y(t,n,o,i){let r=e.get(i,"data.menuRef");const a=t.pointers.components.getPageOfComponent(o).id;r?m(t,r,a)||(i.data.menuRef="#CUSTOM_MAIN_MENU"):(r=i.dataQuery,i.data={menuRef:m(t,r,a)?r:"#CUSTOM_MAIN_MENU",type:"CustomMenuDataRef"},delete i.dataQuery)}function E(t,n,i,r=!1){if(!l.isPopup(t,n)){let a=!1;const c=t.pointers.data.getDataItemsWithPredicate({type:"PageLink",pageId:`#${n}`});let l;for(let e=0;e<c.length;e++)if(l=t.pointers.data.getDataItemWithPredicate({type:"BasicMenuItem",link:`#${c[e].id}`})){a=!0;break}a&&function(t,n,i,r=!1){let a,c;const l=t.dal.full.get(n),u=e.reduce(i,function(n,o,i){switch(i){case"title":n.label=o;break;case"hidePage":a=s.getLinkItemByMenuItemId(t,l.id),c=p.getPageData(t,s.sanitizeHash(a.pageId)),n.isVisible=!o,e.isNil(c.mobileHidePage)&&(n.isVisibleMobile=!o);break;case"mobileHidePage":n.isVisibleMobile=!o}return n},{});n.multilingual=d.SET,n.useOriginalLanguage=r,o.setDataItemByPointer(t,n,e.assign(l,u),"data")}(t,l,i,r)}}function I(e,t,n=!0){!l.isPopup(e,t)&&n&&function(e,t){const n=e.pointers.data.getDataItemFromMaster(t);n.useOriginalLanguage=!0;const o=e.dal.get(n);T(e,`#${o.id}`,o.title,o.hidePage,o.mobileHidePage)}(e,t)}function S(e,t,n){const o=s.getMenuDataItemPointer(e,t),i=e.dal.get(o).items,r=s.getMenuDataItemPointer(e,n),a=e.dal.get(r),c=a.items,p=c.indexOf(`#${t}`);c.splice.call(c,p,1),i&&c.splice.apply(c,[p,0].concat(i)),r.useOriginalLanguage=!0,e.dal.set(r,a),e.dal.remove(o)}function h(t,n){const i=o.getDataItemById(t,"CUSTOM_MENUS").menus;return e.forEach(i,function(i){!function(t,n,i){const r=i.id,a=s.getItemIdAndParent(e.pick(n,["items","id"]),{type:"PageLink",pageId:`#${r}`});if(a){S(t,a.itemId,a.parentId);const e=o.getDataItemById(t,n.id,void 0,void 0,!0);s.updateTranslatedMenuItems(t,e)}}(t,i,n)}),{success:!0}}function P(t,n,i,r,a,c,p,l){s.validateParent(t,a,n,l),function(t,n,i,r,a,s){const c=o.createDataItemByType(t,"BasicMenuItem"),p=t.pointers.data.getDataItemFromMaster(n);o.setDataItemByPointer(t,p,e.assign(c,{id:n,label:i,isVisible:!a,isVisibleMobile:!("boolean"==typeof s?s:a),link:r?`#${r}`:void 0}),"data")}(t,n,i,r,c,p);const u=s.getMenuDataItemPointer(t,a),d=t.pointers.getInnerPointer(u,"items");d.useOriginalLanguage=!0,t.dal.isExist(d)?t.dal.push(d,`#${n}`):t.dal.set(d,[`#${n}`])}function A(t,n,i,r,a,s,c,p){const l=function(t,n){const i=o.generateNewDataItemId(),r=t.pointers.data.getDataItemFromMaster(i);return o.setDataItemByPointer(t,r,e.assign(n,{id:i}),"data"),i}(t,i);P(t,n,r,l,a,s,c,p)}function T(t,n,i,r,a){const s=o.createDataItemByType(t,"PageLink");A(t,o.generateNewDataItemId(),e.assign(s,{pageId:n}),i,g,r,a)}return{addHeaderItem:function(e,t,n,o,i,r){return P(e,t,n,null,o||g,i,r,g)},addLinkItem:function(e,t,n,o,i,r,s){return function(e,t){if(a.isPageLink(e,t))throw new Error('Explicitly adding a LinkItem of type "PageLink" is not allowed')}(e,n),A(e,t,n,o,i||g,r,s,g)},addPageItem:T,deleteItem:function(e,t){!function(e,t){t=s.sanitizeHash(t);const n=s.getLinkItemByMenuItemId(e,t);if(n){const t=n.pageId?s.sanitizeHash(n.pageId):null,o=l.isPopup(e,t);if("PageLink"===n.type&&!o)throw new Error("Explicitly deleting a page link item is not allowed")}}(e,t),function(e,t){const n=s.getSiteMenu(e);S(e,t,s.getParentItemId({items:n,id:g},t))}(e,t)},getMenu:function(t,n){const i=s.getSiteMenu(t);return n?e.filter(i,function(n){return!function(t,n){let i=e.get(n,"pageId");if(i&&"PageLink"===e.get(n,"type")){i=i.replace("#","");const n=o.getDataItemById(t,i),r=e.get(n,"tpaApplicationId"),a=e.get(n,"tpaPageId");return u.isPageMarkedAsHideFromMenu(t,r,a)}return!1}(t,n.link)}):i},initialize:f,moveItem:function(e,t,n,o){t=s.sanitizeHash(t);const i=s.getSiteMenu(e),r=s.getParentItemId({items:i},t)||"CUSTOM_MAIN_MENU";n=n||"CUSTOM_MAIN_MENU",s.validateParent(e,n,t,"CUSTOM_MAIN_MENU");const a=s.getIndexOfItemInParent(e,r,t),c=s.getMenuDataItemPointer(e,r),p=e.dal.get(c);p.items.splice(a,1),e.dal.set(c,p);const l=s.getMenuDataItemPointer(e,n),u=e.dal.get(l);u.items=u.items||[],u.items.splice(o,0,`#${t}`),e.dal.set(l,u)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(2),n(3),n(66),n(27)],void 0===(i=function(e,t,n,o,i){"use strict";function r(t,i,r){const a=o.getMenuDataItemPointer(t,i),s=t.dal.get(a);if(!s)throw new Error(`Cannot update item with "${i}", it does not exist`);n.setDataItemByPointer(t,a,e.assign(s,r),"data")}function a(e,t){const n=t.pageId&&t.pageId.replace("#","");return"PageLink"===t.type&&!i.isPopup(e,n)}function s(e,n){const i=o.getLinkIdByMenuItemId(e,n);if(!i)return t.MENU_ITEM_TYPES.HEADER;const r=o.getMenuDataItemPointer(e,i);return"PageLink"===e.dal.get(e.pointers.getInnerPointer(r,"type"))?t.MENU_ITEM_TYPES.PAGE:t.MENU_ITEM_TYPES.LINK}return{setItemVisibility:function(e,t,n,o){r(e,t,{isVisible:!n,isVisibleMobile:!o})},isItemRemovable:function(e,n){return s(e,n)!==t.MENU_ITEM_TYPES.PAGE},setItemLabel:function(e,t,n){r(e,t,{label:n})},getItemType:s,updateLinkItem:function(t,i,r){if(a(t,r))throw new Error('Explicitly setting a LinkItem of type "PageLink" is not allowed');const s=o.getLinkIdByMenuItemId(t,i);if(!s)throw new Error(`Cannot update item with "${i}", link does not exist`);const c=o.getMenuDataItemPointer(t,s),p=n.generateNewDataItemId();n.setDataItemByPointer(t,c,e.assign(r,{id:p}),"data")},isPageLink:a}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";const e=["routers"],t=e.concat("configMap");return{paths:{ROUTERS_PATH:e,ROUTERS_CONFIG_MAP:t},routerPrefixPath:"prefix",routerPagesPath:"pages",InvalidPrefixReason:{PREFIX_CAN_NOT_BE_EMPTY:1,PREFIX_IS_TOO_LONG:2,PREFIX_IS_DUPLICATE_OF_URI_SEO:3,PREFIX_CONTAINS_INVALID_CHARACTERS:4,PREFIX_IS_FORBIDDEN_WORD:5,PREFIX_IS_IN_USE_BY_ANOTHER_APPLICATION:6}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(0),n(1),n(11),n(3),n(67),n(22),n(34),n(2)],void 0===(i=function(e,t,n,o,i,r,a,s){"use strict";const c="wysiwyg.viewer.components.Repeater",{DATA_TYPES:p}=s;const l={dataQuery:{add:o.addSerializedDataItemToPage,get(e,t){const n=o.getDataItemPointer(e,t);return o.serializeDataItem(e,p.data,n,!0)},getItemById:o.getDataItemById,delete:o.deleteDataItem},designQuery:{add:o.addSerializedDesignItemToPage,get(e,t){const n=o.getDesignItemPointer(e,t);return o.serializeDataItem(e,p.design,n,!0)},getItemById:o.getDesignItemById,delete:o.deleteDesignItem}};function u(n,o,i,r){e.forEach(l,function(e,a){let s=n.dal.get(n.pointers.getInnerPointer(r,a));if(s){s=s.replace("#","");const e=t.displayedOnlyStructureUtil.getOriginalId(s),c=l[a],p=c.get(n,r);c.add(n,o.id,p,t.displayedOnlyStructureUtil.getUniqueDisplayedId(e,i))}})}function d(t,n){e.forEach(l,function(e){e.delete(t,n)})}function g(n,o,i,r,a){let s=n.dal.get(n.pointers.getInnerPointer(i,a));if(!s)return;s=s.replace("#","");const c=(p=l[a].getItemById(n,s,o,!0),u=s,p?e.assign(p,{id:t.displayedOnlyStructureUtil.getOriginalId(u)}):p);var p,u;if(c){const e=n.dal.full.get(n.pointers.getInnerPointer(r,a)).replace("#","");l[a].delete(n,r),l[a].add(n,o,c,e)}}function f(n,o,i){const r=n.pointers.components.getPageOfComponent(o),a=t.displayedOnlyStructureUtil.getOriginalId(o.id),s=n.pointers.full.components.getComponent(a,r);e.forEach(i,function(e){g(n,r.id,o,s,e)})}function m(n,o){if(t.displayedOnlyStructureUtil.isDisplayedComponent(o.id)){const i=r.getAncestorByPredicate(n,o,function(e){return a.getComponentType(n,e)===c});if(i&&function(n,o,i){const r=n.pointers.components.getChildren(o);if(e.size(r)>0){const e=r[0];return t.displayedOnlyStructureUtil.getItemId(e.id)===t.displayedOnlyStructureUtil.getItemId(i.id)}return!1}(n,i,o))return!0}return!1}function y(e,t,n){m(t,n)&&f(t,n,[e])}function E(t,n){const o=t.pointers.components.getChildren(n);if(e.size(o)>0){const n=t.pointers.components.getChildrenRecursivelyRightLeftRootIncludingRoot(o[0]);e.forEach(n,function(e){f(t,e,["dataQuery","designQuery"])})}}return{afterAdd:function(e,t){!function(e,t){e.siteAPI.createDisplayedNode(t)}(e,t),E(e,t)},addRepeatedDataItems:function(e,t){t.repeatedItemIds=e.data.items},afterLayoutChanged:function(t,o,i,r,a,s){if(i.width!==s.width){const i=e.head(t.pointers.components.getChildren(o)),r=t.dal.get(t.pointers.getInnerPointer(i,["layout"]));n.updateCompLayout(t,i,r,!0)}},beforeUpdateRepeaterData:function(t,n,i){const r=t.pointers.components.getPageOfComponent(n)||t.pointers.full.components.getPageOfComponent(n),a=e.get(o.getDataItem(t,n),"items"),s=e.filter(i.items,function(t){return!e.includes(a,t)}),c=e.filter(a,function(t){return!e.includes(i.items,t)}),p=t.pointers.components.getChildren(n);e.forEach(s,function(n){const o=function(t,n,o){let i=Math.max(e.indexOf(t,o),0);for(;i>0;){i--;const o=e.indexOf(n,t[i]);if(o>=0)return o}return 0}(i.items,a,n),s=p[o],c=[s].concat(t.pointers.components.getChildrenRecursively(s));e.forEach(c,e.partial(u,t,r,n))}),e.forEach(a,function(n,o){if(!e.includes(i.items,n)){const n=p[o],i=[n].concat(t.pointers.components.getChildrenRecursively(n));e.forEach(i,e.partial(d,t))}});const l=t.pointers.displayedOnlyComponents.getComponentTemplateId(n.id);!e.isEmpty(c)&&e.includes(c,t.dal.get(l))&&t.dal.set(l,e.head(i.items))},afterUpdateRepeaterData:function(e,t){e.siteDataAPI.createDisplayedNode(t),E(e,t)},syncRepeaterTemplateDataWithFirstItem:y.bind(this,"dataQuery"),syncRepeaterTemplateDesignWithFirstItem:y.bind(this,"designQuery"),afterUpdateRepeaterProperties:function(e,t){e.siteDataAPI.updateDisplayedNodesLayout(t),i.updateAnchorsForCompChildren(e,t)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(520),n(521)],void 0===(i=function(e,t,n){"use strict";return(o,i,{overrides:r,read:a=!0,write:s=!1}={})=>e.merge({},s&&n(o,i),a&&t(o,i),r)}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(5),n(76),n(6),n(101),n(26),n(19)],void 0===(i=function(e,t,n,o,i,r,a,s){"use strict";let c,p;const l={AUTOSAVE_ACTION_COUNT:2,SAVE_AFTER_AUTOSAVE_COUNT:3,DEBOUNCE_WAIT:2,AUTOSAVE_TIMEOUT:10};let u={};const d={SHOULD_AUTOSAVE:"shouldAutoSave",ACTIONS_COUNT:"actionsCount",AUTOSAVES_COUNT:"autosaveCount",AUTO_FULL_SAVE_FLAG:"autoFullSaveFlag",REPORTING_INFO:"reportingInfo"},g={INCREASE:"increase",DECREASE:"decrease",RESET:"reset"},f=o.save,m=i.HOOKS;let y={};function E(t){if(!R(t))return;c=c||e.debounce(I,1e3*u.DEBOUNCE_WAIT),function(t){v(),p=setTimeout(function(){c(t,e.noop,e.noop,"idle")},1e3*u.AUTOSAVE_TIMEOUT)}(t),_(t,d.ACTIONS_COUNT)>=u.AUTOSAVE_ACTION_COUNT&&c(t,e.noop,e.noop,"num of actions")}function I(t,n,o,i){const a=_(t,d.AUTOSAVES_COUNT);if(D(t),a<u.SAVE_AFTER_AUTOSAVE_COUNT){const a=S(t,i,n),c=S(t,i,o),p=M(t,d.REPORTING_INFO);t.dal.set(p,{actionsPerAutosave:u.AUTOSAVE_ACTION_COUNT,autosavesPerFull:u.SAVE_AFTER_AUTOSAVE_COUNT,pagesCount:s.getNumberOfPages(t),trigger:i}),e.invoke(u,"onDiffSaveStarted",i),r.autosave(t,a,c)}else{const a=h(t,i,n),s=h(t,i,o),c=M(t,d.AUTO_FULL_SAVE_FLAG);t.dal.set(c,!0),e.invoke(u,"onPartialSaveStarted",i),r.save(t,a,s,!1)}}function S(t,n,o){return function(i){const r=M(t,d.REPORTING_INFO);t.dal.remove(r),function(t){return e.includes([f.CONCURRENT_AUTO_SAVE,f.SITE_STALE_STATE_FROM_AUTO_SAVE],T(t))}(i)&&function(e,t){C(e,t,g.DECREASE)}(t,d.AUTOSAVES_COUNT),e.isFunction(u.onDiffSaveFinished)&&e.invoke(u,"onDiffSaveFinished",i,n),e.isFunction(o)&&o(i,n),(function(t){return e.includes([f.NOT_LOGGED_IN,f.SESSION_EXPIRED,f.USER_NOT_AUTHORIZED_FOR_SITE],T(t))}(i)||function(e){return f.SAVE_PUBLISH_DISABLED_ON_SERVER===T(e)}(i))&&A(t)}}function h(t,n,o){return function(i){const r=M(t,d.AUTO_FULL_SAVE_FLAG);t.dal.remove(r),e.invoke(u,"onPartialSaveFinished",i,n),O(t,d.AUTOSAVES_COUNT),e.isFunction(o)&&o(i,n)}}function P(e){b(e)||function(e){const n=e.pointers.general.getSiteVersion(),o=e.pointers.general.getServiceTopology(),i=e.pointers.getInnerPointer(o,"autoSaveUrl"),r=`${e.dal.get(i)}delete_diffs`,a={siteId:e.siteAPI.getSiteId(),siteVersion:e.dal.get(n)};t.ajaxLibrary.ajax({url:r,type:"POST",dataType:"json",data:a})}(e),A(e)}function A(e){x(e,{enabled:!1})}function T(t){return e.get(t,"document.errorType")}function v(){p&&(clearTimeout(p),p=null),c&&c.cancel()}function C(e,t,n){const o=M(e,t),i=e.dal.get(o)||0;let r;switch(n){case g.INCREASE:r=i+1;break;case g.DECREASE:r=i-1;break;case g.RESET:r=0}return e.dal.set(o,r),r}function _(e,t){return C(e,t,g.INCREASE)}function O(e,t){return C(e,t,g.RESET)}function D(e){v(),O(e,d.ACTIONS_COUNT)}function w(e){D(e),O(e,d.AUTOSAVES_COUNT)}function M(e,t){return e.pointers.general.getAutoSaveInnerPointer(t)}function b(e){const t=e.pointers.general.getNeverSaved();return e.dal.get(t)}function R(e){const t=N(e);return!1!==u.enabled&&!(!t||!t.shouldAutoSave||b(e)||!u.allowOnBoarding&&function(e){return a.isSiteFromOnBoarding(e)}(e)||!r.saveState.canSave())}function N(e){const t=e.pointers.general.getAutosaveInfo();return e.dal.get(t)}function x(n,o){return o?(u=e.defaults(e.clone(o),l),e.forEach(y,(e,t)=>i.unregisterHook(t,e)),y={},v(),!(!0!==o.enabled||!r.saveState.isEnabled())&&(function(t){y[m.AUTOSAVE.ACTION]=i.registerHook(m.AUTOSAVE.ACTION,e.partial(E,t)),y[m.SAVE.SITE_SAVED]=i.registerHook(m.SAVE.SITE_SAVED,e.partial(w,t)),y[m.SAVE.VALIDATION_ERROR]=i.registerHook(m.SAVE.VALIDATION_ERROR,e.partial(P,t))}(n),!0)):(t.log.error(new Error("Missing autosave config object")),!1)}return{init:x,autosave(e,t,n,o){if(!R(e))return n({document:"Autosave not available"});I(e,t,n,o)},canAutosave:R,getAutoSaveInfo:N,clearAll:w,handleValidationError:P}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";const t=new RegExp("~1","g"),n=new RegExp("~0","g");function o(e){return e.replace(t,"/").replace(n,"~")}function i(t){return e(t).split("/").compact().map(o).value()}const r={add(t,n){const o=i(n.path),r=o.length>1?e.initial(o):o,a=t.getByPathInHostModel(r);let s=e.last(o);e.isArray(a)?(s=Number(e.last(o)),t.pushByPathToHostModel(r,n.value,s)):(e.isUndefined(a)||a[s]!==n.value)&&t.setByPathToHostModel(o,n.value)},remove(e,t){e.removeByPathInHostModel(i(t.path))},replace(t,n){const o=i(n.path);let r,a;const s=e.last(o);if(o.length>1&&!function(t,n){const o=e.initial(n);return t.isPathExistInHostModel(o)&&e.isArray(t.getByPathInHostModel(o))}(t,o)?(a=t.getKeysByPathInHostModel(e.initial(o)),r=e.includes(a,s)):r=t.isPathExistInHostModel(o),!r){const e=new Error("replace operation in nonexisting path");throw e.patch=n,e}t.setByPathToHostModel(o,n.value)},move(e,t){const n=i(t.from),o=i(t.path),r=e.getByPathInHostModel(n);e.removeByPathInHostModel(n),e.setByPathToHostModel(o,r)},copy(e,t){const n=i(t.from),o=i(t.path),r=e.getByPathInHostModel(n);e.setByPathToHostModel(o,r)},test(t,n){const o=i(n.path);if(!e.isEqual(t.getByPathInHostModel(o),n.value)){const e=new Error("test operation failed");throw e.patch=n,e}}};return{applyPatchList(e,t){t&&t.length&&t.forEach(function(e,t){if(!t||!r[t.op]){const e=new Error("Patch not properly formatted");throw e.patch=t,e}r[t.op](e,t)}.bind(null,e))},getPathArray:i}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(57),n(5),n(2),n(11),n(1),n(218),n(191)],void 0===(i=function(e,t,n,o,i,r,a,s){"use strict";const c=e=>e.map(({id:e})=>e).join(","),p=(e,n,o,i,r)=>e.siteAPI.reportBI(t.SOAP_ORDER_FIXER,((e,t,n,o)=>({is_changed:e,soap_order_before:e?c(t):"",soap_order_after:e?c(n):"",components_attached_to_header:e?c(o):""}))(n,o,i,r)),l=(e,t)=>e.pointers.full.components.getPagesContainer(t),u=(e,t)=>e.dal.full.get(e.pointers.getInnerPointer(t,["layout"])),d=(t,n)=>e.get(u(t,n),"fixedPosition",!1),g=e=>e.pointers.data.getDataItemFromMaster("masterPage"),f=e=>(e=>e.dal.full.get(e.pointers.getInnerPointer(g(e),"layoutSettings"))||{})(e).soapCompsAroundPagesContainer,m=(t,n)=>e.includes(r.masterPageLayoutUtils.MASTER_PAGES_SECTIONS[n.type],((e,t)=>e.dal.full.get(e.pointers.getInnerPointer(t,"componentType")))(t,n)),y=(t,n)=>e.reject(n,e=>m(t,e)&&!((e,t)=>e.pointers.isSamePointer(t,l(e,t.type)))(t,e)||d(t,e)),E=(e,t)=>e.pointers.full.components.getChildren(t),I=(t,n,o)=>e.findIndex(n,e=>t.pointers.isSamePointer(e,o)),S=(e,t,n,o)=>I(e,t,n)<I(e,t,o);const h=(t,n,o)=>e.forEach(n,e=>i.setContainer(t,e,e,o)),P=(t,n)=>((t,n)=>e.filter(n,e=>!m(t,e)))(t,E(t,t.pointers.full.components.getMasterPage(n))),A=(t,n,o,r)=>{const a=((e,t)=>e.pointers.full.components.getHeader(t))(t,n),s=e=>((e,t)=>u(e,t).y)(t,e)<((e,t)=>{const n=u(e,t);return n.y+n.height})(t,a);if(!a||d(t,a))return[];const c=P(t,n),p=e.filter(c,e=>!d(t,e)&&((e,t,n)=>i.canSetContainer(e,t,n))(t,e,a)&&s(e)),{attachToBack:l,attachToFront:g}=e.reduce(p,(e,n)=>{const i=S(t,o,n,a),s=S(t,r,n,a);return i&&!s?e.attachToBack.push(n):!i&&s&&e.attachToFront.push(n),e},{attachToBack:[],attachToFront:[]});return((t,n,o)=>{e.isEmpty(n)||(h(t,n,o),function(e,t,n){const o=e.pointers.full.components.getChildrenContainer(t),i=e.dal.full.get(o),r=i.length-n,a=[...i.slice(r,i.length),...i.slice(0,r)];e.dal.full.set(o,a)}(t,o,n.length))})(t,l,a),h(t,g,a),l.concat(g)},T=t=>{const n=o.VIEW_MODES.DESKTOP,i=t.pointers.full.components.getMasterPage(n),r=E(t,i),a=((t,n)=>{const o=E(t,n),i=e.filter(o,e=>m(t,e)||d(t,e)),r=I(t,i,l(t,n.type));return[...i.slice(0,r),...y(t,o),...i.slice(r+1,i.length)]})(t,i);if(e.isEqual(r,a))p(t,!1);else{const o=A(t,n,r,a);((t,n,o)=>{const i=t.pointers.full.components.getChildrenContainer(n),r=t.dal.full.get(i),a=e.sortBy(r,({id:t})=>e.findIndex(o,{id:t}));t.dal.full.set(i,a)})(t,i,a),p(t,!0,r,a,o)}};return{exec:t=>{if(!(e=>n.isOpen("sv_soapReorderFixer")&&!f(e))(t)||!(e=>s(e,e.pointers.full.components.getMasterPage(o.VIEW_MODES.DESKTOP)))(t))return!1;a(t),T(t),(t=>{const n=g(t),o=t.dal.full.get(n);t.dal.full.set(n,e.merge({},o,{layoutSettings:{soapCompsAroundPagesContainer:!0}}))})(t),t.siteAPI.createPageAnchors("masterPage")}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(545),n(57),n(2),n(11),n(41)],void 0===(i=function(e,t,n,o,i,r){"use strict";const a={SITE_HEADER:"HEADER",PAGES_CONTAINER:"PAGES",SITE_FOOTER:"FOOTER"},s=(e,t)=>t.top-e.bottom,c=t=>e.omitBy(t,e=>!e);const p=(e,t,n)=>{const o=e.pointers.getInnerPointer(t,"layout"),i=e.dal.get(o);i.y+=n,e.dal.set(o,i)},l=e=>!!a[e.id],u=(t,o,r)=>{const{top:a,pointer:s,isFixed:c}=r;if(c)return;const p=e(o).filter(({bottom:e})=>e>a).map("pointer").value();e.forEach(p,((e,t)=>o=>{e.siteAPI.reportBI(n.SECTION_LAYOUT_MIGRATION_REPARENT,{component_id:o.id,new_container_id:t.id})})(t,s)),e.forEach(p,((e,t)=>n=>i.setContainer(e,n,n,t))(t,s))},d=(t,n,o)=>{if(t.config.closeSectionGaps)return{};return(t=>e.pickBy(t,e=>e>0))(((t,n,o)=>{if(!o.pagesToFooterGap)return o;const i={top:n.bottom,bottom:n.bottom+o.pagesToFooterGap};return o.pagesToFooterGap<=20&&!e.some(t,(e=>t=>!(t.top>e.bottom||t.bottom<e.top))(i))?e.assign({},o,{pagesToFooterGap:0}):o})(n,o.PAGES,o.gaps))},g=(n,o,i)=>{const{SITE_HEADER:r,SITE_FOOTER:a}=i,s=((t,n)=>e.get(((e,t)=>e.dal.get(e.pointers.getInnerPointer(t,"layout")))(t,n),"anchors.0.distance",0))(n,o)+t.boundingLayout.getBoundingY(r)+t.boundingLayout.getBoundingHeight(r);return{PAGES_CONTAINER:{y:s,height:a.y-s}}},f=t=>{const n=o.VIEW_MODES.DESKTOP,i=t.pointers.components.getMasterPage(n),a=t.pointers.components.getChildren(i),s=((t,n)=>e.reduce(n,(e,n)=>(e[n.id]=r.getComponentLayout(t,n),e),{}))(t,a),c=t.siteAPI.isPageLandingPage(t.siteAPI.getPrimaryPageId())?g(t,i,s):{};return e.map(a,(t,n)=>e.assign({i:n,pointer:t},((t,n,o)=>{const i=e.assign({},t[n],o[n]);return{top:i.y,bottom:i.y+i.height,isFixed:!!i.fixedPosition}})(s,t.id,c)))};return t=>{if((e=>(e=>e.dal.get(e.pointers.getInnerPointer(e.pointers.data.getDataItemFromMaster("masterPage"),"layoutSettings"))||{})(e).useDesktopSectionsLayout)(t))return;const o=f(t),i=function(t){const{HEADER:n,PAGES:o,FOOTER:i}=e(t).filter(({pointer:e})=>l(e)).reduce((e,t)=>(e[a[t.pointer.id]]=t,e),{});return{PAGES:o,FOOTER:i,gaps:c({headerToPagesGap:s(n,o),pagesToFooterGap:s(o,i)})}}(o),r=e.filter(o,e.conforms({isFixed:e=>!e,pointer:e=>!l(e)}));u(t,r,i.FOOTER),((e,{gaps:t,PAGES:n,FOOTER:o})=>{t.headerToPagesGap&&t.headerToPagesGap<0&&p(e,n.pointer,-1*t.headerToPagesGap),t.pagesToFooterGap&&t.pagesToFooterGap<0&&p(e,o.pointer,-1*t.pagesToFooterGap)})(t,i);const g=d(t,r,i);((t,n)=>{const o=t.pointers.getInnerPointer(t.pointers.data.getDataItemFromMaster("masterPage"),"layoutSettings"),i=t.dal.get(o);t.dal.set(o,e.merge({},i,{useDesktopSectionsLayout:!0},n))})(t,g),((t,o,i)=>{t.siteAPI.reportBI(n.SECTION_LAYOUT_MIGRATION_RUN),e.forEach(o,(o,r)=>{t.siteAPI.reportBI(n.SECTION_LAYOUT_MIGRATION_CLOSE_GAP,{gap_size:o,gap_type:r,is_closed:!e.has(i,r)})})})(t,i.gaps,g),t.siteAPI.createPageAnchors("masterPage")}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(166),n(550),n(551),n(164),n(553),n(554),n(111),n(18),n(7),n(3)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l){"use strict";function u(e,t){const n=e.dal.get(t),o=e.pointers.components.getPageOfComponent(t),i=l.getDataItem(e,t);return{id:t.id,pageId:o&&o.id,componentType:n.componentType||n.documentType,skin:c.skin.get(e,t),dataType:i&&i.type}}const d={mobileHints:s.validateComponentMobileHints,data:r.validateCompData,properties:i.validateCompProps,layout:t.validateLayout,skin:o.validateComponentSkin,style:n.validateComponentStyle,json:a.validateCompJSONpaths};function g(t,n,o){return e.reduce((i=n,e.isArray(i)?i:[i]),function(n,i){const r=e(o).mapValues(function(e){try{e(t,i)}catch(e){return e.message||e.toString()}return null}).omitBy(e.isNull).value();return e.isEmpty(r)||n.push({comp:u(t,i),invalidations:r}),n},[]);var i}function f(e,t,n,o){const i=p.getAllComponents(e,n,function(t){return!e.pointers.components.isMasterPage(t)},o);return g(e,i,t)}return{initialize:function(e){s.initialize(e)},validateComponentData:d.data,validateComponentProperties:d.properties,validateComponentLayout:d.layout,validateComponentSkin:d.skin,validateStyle:d.style,validateMobileHints:d.mobileHints,validateComponents:function(e,t){return g(e,t,d)},validateAllComponents:function(e){return f(e,d)},validateAllComponentsWithValidators:f,validateAllMobileHints:function(t){const n=e.map(t.pointers.page.getNonDeletedPagesPointers(!0),"id");try{s.validateMobileHintsOnPages(t,n)}catch(e){return e}return null}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(587),n(61)],void 0===(i=function(e,t,n,o){"use strict";const i=t=>{const n=r(t);return{name:n,data:e.get(t,[n]),default:e.get(t,[n,"default"]),properties:e.get(t,[n,"properties"])}},r=t=>e.head(e.keys(t)),a=t=>"array"===e.get(t,[r(t),"allOf",0,"type"]),s=t=>a(t)?e.get(t,[r(t),"allOf",0,"items","allOf",0,"$ref"]):e.get(t,[r(t),"allOf",0,"$ref"]),c=t=>e.pick(a(t)?e.get(t,[r(t),"allOf",0,"items","allOf",1]):e.get(t,[r(t),"allOf",1]),["minimum","maximum","multipleOf","minLength","maxLength"]),p=(t,n)=>e.reduce(t,(t,o)=>{const i=r(o);return(a(o)?e.get(o,[i,"allOf",0,"items","allOf",0,"$ref"],""):e.get(o,[i,"allOf",0,"$ref"],""))===n&&t.push({property:o,name:i}),t},[]),l=(t,n,o,i,r)=>{const a=e.mapValues(e.keyBy(r.addedProperties,"name"),"default"),s=e.map(r.removedProperties,"name");if(n)e.forEach(e.get(t,i,[]),(n,o)=>{const c=e.get(t,[...i,o],{});e.set(t,[...i,o],e.assign(u(e.omit(c,s),r.restrictedProperties),a))});else{const n=e.get(t,o,{});e.set(t,o,e.assign(u(e.omit(n,s),r.restrictedProperties),a))}return t},u=(t,n)=>(e.forOwn(t,(o,i)=>{const r=e.get(e.find(n,["name",i]),"restrictions");e.has(r,"minimum")||e.has(r,"maximum")||e.has(r,"multipleOf")?t[i]=d(o,r):(e.has(r,"minLength")||e.has(r,"maxLength"))&&(t[i]=g(o,r))}),t),d=(t,n)=>{const o=e.get(n,"minimum",Number.MIN_SAFE_INTEGER),i=e.get(n,"maximum",Number.MAX_SAFE_INTEGER);let r=m(t,o,i);return e.has(n,"multipleOf")&&((r=f(r,n.multipleOf))>i?r-=n.multipleOf:r<o&&(r+=n.multipleOf),r=f(r,n.multipleOf)),r},g=(t,n)=>{const o=e.get(n,"maxLength",Number.MAX_SAFE_INTEGER);if(e.size(t)>o)return e.truncate(t,{length:o,omission:""});const i=e.get(n,"minLength",-1);return e.size(t)<i?e.padEnd(t,i,"?"):t},f=(e,t)=>Math.round(e/t)*t,m=(e,t,n)=>Math.min(Math.max(e,t),n);function y(e,t,o){if(!n.createValidator(e,t).validate(o))throw new Error("app studio: Data validation failed")}return{getSchemaStructureKey:r,mergeExistingDefinitionWithDefinitionData:(t,n)=>{const o=r(t.structure),i=r(n),a=e.assign({},t.structure[o],n[i]),s=e.omit(t,"structure");return e.assign({},s,{structure:{[i]:a}})},createNewDefinitionWithData:(n,o,i)=>{return i[r(i)].$id=t.guidUtils.getUniqueId(),e.assign(o.createDataItemByType(n,"CustomDefinitionDescriptor"),{structure:i})},getDefinitionPropertiesDifference:(t,n)=>{const o=i(t),r=i(n),p=e(r.properties).keys().difference(e.keys(o.properties)).map(t=>({name:t,default:e.get(n,[r.name,"default",t])})).value(),l=e(o.properties).keys().difference(e.keys(r.properties)).map(e=>({name:e})).value(),u=[];return e.forOwn(r.properties,(t,i)=>{if(!e.isUndefined(o.properties[i])){const d=s({[i]:t})!==s({[i]:o.properties[i]}),g=a({[i]:t})!==a({[i]:o.properties[i]});(d||g)&&(p.push({name:i,default:e.get(n,[r.name,"default",i])}),l.push({name:i}));const f=c({[i]:t}),m=c({[i]:o.properties[i]});e.isEqual(f,m)||u.push({name:i,restrictions:f})}}),{addedProperties:p,removedProperties:l,restrictedProperties:u}},getDefinitionUsagesInWidgets:(t,n,i)=>{const r=o.getAllWidgets(t);return e.reduce(r,(e,o)=>{const r=n(t,o.pointer),a=p(r,i);return a.length>0&&e.push({widget:o,dependantProperties:a}),e},[])},getDefinitionUsagesInDefinitions:(t,n)=>{const r=o.getAllCustomDefinitions(t);return e.reduce(r,(r,a)=>{const s=o.getSerializedCustomDefinition(t,a.pointer),c=i(s),l=e.map(e.keys(c.properties),e=>({[e]:c.properties[e]})),u=p(l,n);return u.length>0&&r.push({definition:a,dependantProperties:u}),r},[])},updateDefinitionDefault:(t,n,i)=>{let r=o.getSerializedCustomDefinition(t,n.definition.pointer);return e.forEach(n.dependantProperties,e=>{const t=[n.definition.name,"default",e.name];r=l(r,a(e.property),t,t,i)}),r},updateWidgetPropertiesDefault:(t,n,o,i)=>{const s=i(t,n.widget.pointer);return e.forEach(n.dependantProperties,t=>{const n=e.findIndex(s,e=>r(e)===t.name),i=s[n];if(i){const e=[t.name,"allOf",1,"default"],r=[t.name,"allOf",0,"default"];s[n]=l(i,a(i),e,r,o)}}),s},setPropertiesOrder:t=>{const n=r(t),o=e.keys(e.get(t,[n,"properties"],{}));let i=e.get(t,[n,"propertiesOrder"],[]);return i=e(i).reject(t=>!e.includes(o,t)).concat(e.difference(o,i)).uniq().value(),e.set(t,[n,"propertiesOrder"],i)},validatePropertyDefaultValue:function(t,o){const i=e.merge({},...e.map(t,"structure")),r=e.merge({},...o),a=n.createDriver(i);y(i,r,e.merge({},...e.map(o,e=>(a.set.schema(e),{[a.get.name()]:a.get.default()}))))},validateDefinitionDefaultValue:function(t,n){const o=e.mapValues(n,"default");y(e.merge({},...e.map(t,"structure")),n,o)},validateDefinitionHasProperties:function(t){const n=i(t);if(e.isEmpty(n.properties))throw new Error("app studio: Definition cannot be set without properties")},validateNewDefinitionName:function(t,n){const o=e.concat(e.map(t,e=>r(e.structure)),["text","number","boolean","image","url","dateTime","array","object","string","widget","props"]);if(e.includes(o,n))throw new Error("appStudio.definitions: definition name is already in use for this app")}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";const e="comp";return{executeBehavior:function(t,n,o,i,r){const a={type:e,targetId:n.id,name:o,params:i};t.siteAPI.handleBehavior(a,{group:e,callback:r})},getRuntimeState:function(e,t){return e.siteAPI.getRuntimeDal().getCompState(t.id)}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(0),n(75),n(127),n(124),n(125),n(607)],void 0===(i=function(e,t,n,o,i,r){"use strict";const{serialize:a}=r(void 0,{encodeWhenSerializing:!0}),s=(e,{code:t,document:n})=>{const o=(e=>{const t=e.socketAPI;if(!t)throw new Error("Cannot save to local server - no socket!");return t})(e),i=n?o.updateDocument(n):Promise.resolve(),r=t?o.updateCodeFiles(t):Promise.resolve();return Promise.all([i,r])},c=(e,t)=>({fileId:n,content:r})=>{const a=e=>i.isPageFile(e),s=n=>{const o=["pagesData","masterPage","data","document_data",i.getPageId(n)],r=t&&t.getIn(o);return e.getIn(o,r)},c=o.getVirtualDescriptor(n,!1);if(a(c)&&!s(c))return null;const p=(e=>{if(a(e)){const t=s(e);return{pageId:i.getPageId(e),title:t.get("title"),isPopup:t.get("isPopup")}}return{}})(c);return{path:c.location,content:r,metaData:p}},p=(t,o)=>{const{toSave:i,toCopy:r,toDelete:a}=n.getChangesBetweenSnapshots(t,o),s=c(o,t);return{modifiedFiles:e.compact(i.map(e=>s(e))),copiedFiles:r.map(({srcFileId:e,destFileId:t})=>({source:s({fileId:e}),target:s({fileId:t})})),deletedFiles:Object.keys(a).map(e=>s({fileId:e}))}};return{save:(e,t,n)=>{const o=a(n.toJS()),i=p(t,n);return s(e,{code:i,document:o})},clone:n=>t.loadAllFilesFromGrid(n).then(t=>{const o=n.dal.full.immutable.getCurrentSnapshot(),i=a(o.toJS()),r=c(o),p=e.compact(t.map(e=>r({fileId:e.path,content:e.content})));return s(n,{code:{modifiedFiles:p},document:i})}),saveCode:(e,t,n)=>{const o=p(t,n);return s(e,{code:o})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(11),n(8),n(2)],void 0===(i=function(e,t,n,o){"use strict";const i={};function r(n,o){return e.filter(o,function(e){return!t.isHorizontallyStretchedToScreen(n,e)})}function a(t,o){if(1===e.size(o))return e.filter(o,function(e,t){return n.public.isAlignable(e,t)}.bind(this,t));let i=r(t,o);return 1===i.length&&(i=[]),i}function s(e,t,n){return p(n)?a(e,t):t}function c(t,n,o){return e.isFunction(i[o])?i[o](t,n,o):n}function p(t){return e.includes([o.COMP_ALIGNMENT_OPTIONS.LEFT,o.COMP_ALIGNMENT_OPTIONS.RIGHT,o.COMP_ALIGNMENT_OPTIONS.CENTER,o.COMP_DISTRIBUTION_OPTIONS.HORIZONTAL,o.COMP_DISTRIBUTION_OPTIONS.BOTH,o.COMP_MATCH_SIZE_OPTIONS.WIDTH,o.COMP_MATCH_SIZE_OPTIONS.BOTH],t)}return i[o.COMP_MATCH_SIZE_OPTIONS.WIDTH]=r,i[o.COMP_MATCH_SIZE_OPTIONS.BOTH]=r,i[o.COMP_ALIGNMENT_OPTIONS.LEFT]=s,i[o.COMP_ALIGNMENT_OPTIONS.RIGHT]=s,i[o.COMP_ALIGNMENT_OPTIONS.CENTER]=s,i[o.COMP_ALIGNMENT_OPTIONS.TOP]=s,i[o.COMP_ALIGNMENT_OPTIONS.BOTTOM]=s,i[o.COMP_ALIGNMENT_OPTIONS.MIDDLE]=s,i[o.COMP_DISTRIBUTION_OPTIONS.HORIZONTAL]=r,i[o.COMP_DISTRIBUTION_OPTIONS.BOTH]=r,{canAlign(t,n,o){if(!o||!e.size(n))return!1;const i=c(t,n,o);return e.size(i)>0},canDistribute:(t,n,o)=>o&&e.size(c(t,n,o))>1,canMatchSize:(t,n,o)=>o&&e.size(c(t,n,o))>1,isHorizontalAxis:p,getFilteredComponentsToApplyAction:c}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(139),n(21),n(65),n(46),n(79),n(78),n(106)],void 0===(i=function(e,t,n,o,i,r,a,s){"use strict";const c="Only manual lists are supported",p="List does not exist",l="Type does not exist",u="List views do not exist",d="Data selector does not exist",g="Template's type definition is not valid",f="Template's view definitions are not valid",m="The template is missing an item view",y="New List";function E(e){throw new Error(e)}function I(t,n,o,i){const r=n?e.pick(o,n.itemIds):o;return function(e,t,n){const o=s.createSelector(e,t);return s.setManualSelector(e,o,n),o}(t,i,e.values(r))}return{generateTemplate:function(t,n){const i=o.getListDef(t,n)||E(p),r=o.getSelector(t,n)||E(d);if("ManualSelectedList"!==r.type)throw new Error(c);const s=o.getViews(t,n);e.isEmpty(s)&&E(u);const g=o.getType(t,n);return{type:g||E(l),views:e.values(s),items:(f=a.getAllItemsOfType(t,g.name),e.mapValues(f,function(t){return e.omitBy(t,function(t,n){return"_iid"!==n&&e.startsWith(n,"_")})})),dataSelector:r,displayName:i.displayName||y};var f},createListFromTemplate:function(t,n){if(e.isEmpty(n.type))throw new Error(g);if(e.isEmpty(n.views))throw new Error(f);const s=e.map(n.views,function(t){return e.clone(t)}),c=i.createType(t,n.type);!function(t,n){e.forEach(t,function(e){e.forType="Array"===e.forType?"Array":n})}(s,c);const p=function(e,t){const n=r.createViewsWithSameName(e,t);return r.getViewById(e,n[0]).name}(t,s),l=function(t,n,o){return e.transform(n,function(e,n){const i=a.createItem(t,o,n);e[n._iid||i]=i},{})}(t,n.items,c),u=I(t,n.dataSelector,l,c),d={displayName:n.displayName,dataSelector:u,type:c,viewName:p};return o.createList(t,d)},setItemViewFromTemplate:function(n,i,r){if(e.isEmpty(r.type))throw new Error(g);if(e.isEmpty(r.views))throw new Error(m);const a=o.getType(n,i)||E(l),s=e.filter(r.views,{forType:r.type.name}),c=t.viewsTemplatesUtils.getMatchingViewsForType(s,r.type,a);e.forEach(c,function(e){o.replaceItemView(n,i,e)})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(12),n(39),n(10)],void 0===(i=function(e,t,n,o){"use strict";const i=t.fonts,r={fontSize:{defaultValue:null,parsedStyleKey:"size"},fontFamily:{defaultValue:null,parsedStyleKey:"family"},bold:{defaultValue:!1,parsedStyleKey:"bold"},italic:{defaultValue:!1,parsedStyleKey:"italic"},underline:{defaultValue:!1,parsedStyleKey:"underline"},color:{defaultValue:null,parsedStyleKey:"color"},backgroundColor:{defaultValue:null,parsedStyleKey:null},lineHeight:{defaultValue:null,parsedStyleKey:"lineHeight"},lineThrough:{defaultValue:!1,parsedStyleKey:null}},a=["fontSize","lineHeight"],s='Cannot set "fontClass" together with additional attributes',c="Cannot set fontClass to null";function p(t){return e.forEach(a,function(n){t[n]&&e.isString(t[n])&&(t[n]=parseInt(t[n],10))}),t}function l(t,n){if(n.fontClass){const a=function(t,n){const a=i.fontUtils.parseStyleFont(n,o.fonts.getAll(t),o.colors.getAll(t));return e.reduce(r,function(t,n,o){const i=n.parsedStyleKey&&a[n.parsedStyleKey];return i&&(t[o]=e.isString(i)?i.replace(/[{}]/g,""):i),t},{})}(t,n.fontClass);let s=!1;e.forOwn(a,function(e,t){n[t]=n[t]||e,s=s||n[t]!==e}),s&&(n.fontClass=null)}return n}return{convertFieldPropsToViewDefProps:function(t,o){if(!e.isUndefined(t.fontClass)&&function(t){const n=e.keys(t),o=e.keys(r),i=e.intersection(n,o);return!e.isEmpty(i)}(t))throw new Error(s);if(null===t.fontClass)throw new Error(c);if(function(t,n){return e.isUndefined(t.fontClass)&&!e.isEmpty(t)&&n&&n.fontClass}(t,o))(t=e.defaults(t,o)).style=null;else if(t.fontClass){const o=e.mapValues(r,"defaultValue");(t=e.defaults({},o,t)).style=n.styleMapping.fontClassToStyle(t.fontClass)}return delete t.fontClass,p(t)},convertViewDefPropsToFieldProps:function(e,t){return t.fontClass=n.styleMapping.styleToFontClass(t.style)||null,delete t.style,t.fontClass&&(t=l(e,t)),p(t)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(39),n(139),n(4),n(11)],void 0===(i=function(e,t,n,o,i){"use strict";const r=t.viewsUtils;function a(e){return parseInt(e,10)}function s(t,n){const o=r.getCompProp("spacers",t);return"vertical"===n?e.sum([a(o["xax-before"]||0),a(o["xax-after"]||0)]):e.sum([a(o.before||0),a(o.after||0)])}function c(e){return"Field"===r.getCompProp("name",e)||"manual"===r.getCompProp("width-mode",e)?r.getCompProp("width",e):0}function p(t,n){const o=e.map(n,function(e){return c(e)+s(e,t)});return"vertical"===t?e.max(o):e.sum(o)}function l(t,o){const i=r.getCompProp("items",t);if(!i||0===i.length)return 0;const a=r.getCompProp("name",t);if("FieldBox"===a){const e=n.fieldBoxProxyUtils.getFieldBoxDef(r.getCompProp,o,t),i=r.getCompProp("css",e).width,a=r.getCompProp("orientation",t);return"auto"===i?p(a,r.getCompProp("items",e)):i}const s=function(e,t){switch(e){case"VBox":return"vertical";case"HBox":return"horizontal";default:return t}}(a,o),c=e.map(i,function(e){return l(e,s)});return"vertical"===s?e.max(c):e.sum(c)}return{getSpacers:s,getFieldMinWidth:c,getFieldBoxMinWidth:p,getAppPart2MinWidth:l,updateAppPart2MinWidth:function(t,n,r,a){if("DESKTOP"!==n.type||!e.has(r,"hidden"))return;const s=l(a,null);s>o.layout.get(t,n).width&&i.updateCompLayout(t,n,{width:s})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(39),n(10)],void 0===(i=function(e,t){"use strict";const n="wysiwyg.viewer.components.WRichText";function o(t){const n=t.comp.name;return e.proxyFactory.getProxyClass(n,!0)}return{getStyle:function(i,r){return o(r).componentType===n?r.comp.style:e.styleData.getSkinAndStyle(t.styles.getAll(i),r.comp.name,r.comp.styleNS,r.comp.style,r.comp.skin).styleId||null},getCompProxyClass:o}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(56),n(21),n(105),n(25)],void 0===(i=function(e,t,n,o,i){"use strict";const r={primaryTask:o,secondaryTasks:[]};function a(t){return{event:e.partial(i.event,t),error:e.partial(i.error,t)}}return{reload:function(t){t.dal.full.removeByPath(n.getAppbuilderPath());let i=[];e.forEach(n.getAppbuilderMetadataPath("requestedPartNames"),function(e){const n="requestedPartNames"!==e?{}:[];i=i.concat(e),t.dal.full.setByPath(i,n)}),t.dal.takeSnapshot(o.getTaskName())},save:function(e,n,o,i){e.setOperationsQueue.flushQueueAndExecute(function(){const s=[r,e.dal,n,o,a(e)];i?t.runFullSaveTasks.apply(t,s):t.runPartialSaveTasks.apply(t,s)})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return function(e){return{fieldId:"vars",forType:"Post",format:"*",key:"shouldUseNewSocialShareButtons",type:"AppPartCustomization",value:!0,view:e}}}.call(t,n,t,e))||(e.exports=o)},function(e,t,n){var o,i;o=[n(0),n(33)],void 0===(i=function(e,t){"use strict";function n(n){return e.head(t.filterAppsDataByType(n,"appbuilder"))}return{getInstanceId:function(e){return n(e).instanceId},getApplicationId:function(e){return n(e).applicationId}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(2),n(47),n(25),n(57),n(146),n(13),n(22),n(24),n(413),n(523),n(524),n(525),n(192),n(558),n(215),n(86),n(11),n(49),n(3),n(67),n(17),n(218),n(559),n(560),n(62),n(59),n(132),n(34),n(196),n(561),n(581),n(76),n(159),n(583),n(36),n(51),n(584),n(586),n(7),n(4),n(18),n(120),n(221),n(589),n(162),n(117),n(8),n(214),n(73),n(590),n(591),n(592),n(593),n(114),n(594),n(152),n(595),n(210),n(596),n(211),n(37),n(597),n(169),n(598),n(68),n(54),n(112),n(171),n(19),n(116),n(32),n(182),n(600),n(601),n(181),n(185),n(35),n(602),n(141),n(603),n(101),n(604),n(608),n(609),n(610),n(144),n(223),n(611),n(90),n(41),n(83),n(612),n(10),n(77),n(613),n(219),n(122),n(614),n(20),n(56),n(178)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l,u,d,g,f,m,y,E,I,S,h,P,A,T,v,C,_,O,D,w,M,b,R,N,x,L,B,F,k,U,H,V,W,G,Y,z,K,$,q,j,Q,X,Z,J,ee,te,ne,oe,ie,re,ae,se,ce,pe,le,ue,de,ge,fe,me,ye,Ee,Ie,Se,he,Pe,Ae,Te,ve,Ce,_e,Oe,De,we,Me,be,Re,Ne,xe,Le,Be,Fe,ke,Ue,He,Ve,We,Ge,Ye,ze,Ke){"use strict";return{constants:e,biErrors:t,bi:n,biEvents:o,siteMetadataPropertiesInfo:i,siteMetadata:r,componentStructureInfo:a,componentModes:s,componentsLoader:c,undoRedo:p,responsiveLayout:l,documentServicesDataFixer:u,mobilePreSaveOperation:d,patchData:g,autosave:f,componentLayout:m,structure:y,documentMode:E,dataModel:I,anchors:S,page:h,sectionsLayoutMigrator:P,setOperationQueueUtils:A,dsQTrace:T,modesUtils:v,dataIds:C,jsonConfig:_,utils:O,contextAdapter:D,temp:{tmpErrors:b,idGenerator:R,visualFocusData:N,actionsAndBehaviors:x,appControllerData:L,appStudioComponents:B,appStudio:F,componentDetectorAPI:k,component:U,componentStylesAndSkinsAPI:H,componentCode:V,componentBehaviors:W,wixVideoAPI:G,componentScroll:Y,mobileActions:z,componentsMetaData:K,createCompDriver:$,connections:q,feedback:j,fonts:Q,inlinePopup:X,browserThemeColor:Z,layouters:J,globalImageQualityData:ee,vectorImageAPI:te,svgFiltersDefinitions:ne,mainMenu:oe,menuAPI:ie,basicMenuItemMethods:re,mobileConversionFacade:ae,mobileSettings:se,quickActions:ce,quickActionsVersionUtils:pe,quickActionBarManager:le,mergeAggregator:ue,mobilePresetsHandler:de,menuContainer:ge,pageData:fe,pagesGroup:me,platform:ye,pages:Ee,serialization:Ie,viewerInfoChangedEmitter:Se,apiCallBiService:he,livePreview:Pe,platformConstants:Ae,renderPlugins:Te,routers:ve,routersPointers:Ce,saveAPI:_e,localMode:Oe,siteMembers:De,siteSegments:we,smartBoxes:Me,multiComponentsUtils:be,multiComponentsUtilsValidations:Re,grouping:Ne,groupingUtils:xe,structureUtils:Le,arrangement:Be,meshMigrationUtil:Fe,theme:ke,tpa:Ue,tpaCore:He,validation:Ve,wixCode:We,wixapps:Ge},wixCodeDS:We,platform:ye,wixCodeConstants:Ye,wFacebookComment:Ke,component:U}}.apply(t,o))||(e.exports=i)},function(e){e.exports={MOBILE_STRUCTURE_NOT_SAVED_DUE_TO_CORRUPTION:{errorCode:21056,desc:"mobile structure was not saved with site due to a corruption in site structure - missing header, footer or pages container",severity:"fatal"},SAVE_FAILED_DUE_TO_PRE_SAVE_OPERATION:{errorCode:55021,severity:"fatal",params:{p1:"stack"}},SAVE_DOCUMENT_FAILED_ON_SERVER:{errorCode:55666,severity:"fatal",desc:"Save document failed due to a server error",params:{p1:"serverErrorCode",p2:"origin",p3:"errorType"}},SAVE_BLOCKED_BY_DOCUMENT_SERVICES:{errorCode:55022,severity:"fatal",desc:"save has been blocked in the client by documentServices, since it failed 3x *in a row* via -10104 validation error from server"},AUTOSAVE_RESTORE_FAILED:{errorCode:55023,severity:"error",desc:"Failed to apply autosave diffs",params:{p1:"errorMsg",p2:"op",p3:"path",p4:"value"}},AUTOSAVE_FAILED_DUE_TO_PRE_SAVE_OPERATION:{errorCode:55024,severity:"error",params:{p1:"stack"}},PASSWORD_PROTECTION_HASH_GENERATION_FAILED:{errorCode:55025,severity:"error",params:{p1:"serverErrorCode",p2:"errorDescription"}},SYNC_DELETED_ITEMS_AFTER_SAVE_FAILED:{errorCode:55026,severity:"error",params:{p1:"errorType",p2:"itemId",p3:"pagesIds"}},MOBILE_STRUCTURE_MANDATORY_ELEMENT_MISSING:{errorCode:55027,severity:"error",params:{p1:"missingComponents",p2:"stack"}},DIRECT_PAGES_DATA_ACCESS_IN_GSD:{errorCode:55028,severity:"warning",params:{p1:"path",p2:"stack"}},ADD_COMPONENT_WITH_CUSTOM_STYLE_ID:{errorCode:55778,sampleRatio:10,severity:"error",params:{p1:"styleId",p2:"compType"}},FAILED_TO_SEND_MOBILE_MENU_CONTAINER_CORRUPTION_MSG:{errorName:"FAILED_TO_SEND_MOBILE_MENU_CONTAINER_CORRUPTION_MSG",errorCode:112003,severity:"error",params:{p1:"statusId",p2:"errorType",p3:"errorMessage"}}}},function(e,t,n){var o,i;o=[n(0),n(40)],void 0===(i=function(e,t){"use strict";const n={FB_USERNAME_IS_NOT_STRING:"FB_USERNAME_IS_NOT_STRING",FB_USERNAME_INVALID_CHARS:"FB_USERNAME_INVALID_CHARS",FB_USERNAME_TOO_LONG:"FB_USERNAME_TOO_LONG",FB_THUMBNAIL_IS_NOT_STRING:"FB_THUMBNAIL_IS_NOT_STRING"},o={FB_USERNAME_MAX_LENGTH:250};function i(t,i){if(!e.isString(i))return{success:!1,errorCode:n.FB_USERNAME_IS_NOT_STRING};if(i.length>o.FB_USERNAME_MAX_LENGTH)return{success:!1,errorCode:n.FB_USERNAME_TOO_LONG};const r=(a=i,e.uniq(a.match(/[^a-zA-Z0-9\.]/g)));var a;return r&&r.length?{success:!1,errorCode:n.FB_USERNAME_INVALID_CHARS,errorContent:r}:{success:!0}}return{facebook:{setThumbnail:function(o,i){const r=function(t){return e.isString(t)?{success:!0}:{success:!1,errorCode:n.FB_THUMBNAIL_IS_NOT_STRING}}(i);if(!r.success)throw new Error(r.errorCode);t.setProperty(o,t.PROPERTY_NAMES.SOCIAL_THUMBNAIL,i||"")},getThumbnail:function(e){return t.getProperty(e,t.PROPERTY_NAMES.SOCIAL_THUMBNAIL)},setUsername:function(n,o){const r=i(0,o);if(!r.success)throw new Error(r.errorCode);const a=t.getProperty(n,t.PROPERTY_NAMES.META_TAGS);e.find(a,{name:"fb_admins_meta_tag"}).value=o||"",t.setProperty(n,t.PROPERTY_NAMES.META_TAGS,a)},getUsername:function(n){const o=t.getProperty(n,t.PROPERTY_NAMES.META_TAGS);return e.find(o,{name:"fb_admins_meta_tag"}).value},validateUsername:i,ERRORS:n}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(40)],void 0===(i=function(e,t){"use strict";const n={FAVICON_IS_NOT_STRING:"FAVICON_IS_NOT_STRING"};return{get:function(e){return t.getProperty(e,t.PROPERTY_NAMES.FAVICON)},set:function(o,i){const r=function(t){return e.isString(t)?{success:!0}:{success:!1,errorCode:n.FAVICON_IS_NOT_STRING}}(i);if(!r.success)throw new Error(r.errorCode);t.setProperty(o,t.PROPERTY_NAMES.FAVICON,i||"")},ERRORS:n}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(40)],void 0===(i=function(e){"use strict";return{getFeatures:function(t){return e.getProperty(t,e.PROPERTY_NAMES.PREMIUM_FEATURES)},setFeatures:function(t,n){e.setProperty(t,e.PROPERTY_NAMES.PREMIUM_FEATURES,n)}}}.apply(t,o))||(e.exports=i)},function(e,t){e.exports=A},function(e,t,n){var o,i;o=[n(0),n(40)],void 0===(i=function(e,t){"use strict";const n={SITE_NAME_IS_EMPTY:"SITE_NAME_IS_EMPTY",SITE_NAME_IS_NOT_STRING:"SITE_NAME_IS_NOT_STRING",SITE_NAME_INVALID_CHARS:"SITE_NAME_INVALID_CHARS",SITE_NAME_ENDS_WITH_HYPHEN:"SITE_NAME_ENDS_WITH_HYPHEN",SITE_NAME_TOO_SHORT:"SITE_NAME_TOO_SHORT",SITE_NAME_TOO_LONG:"SITE_NAME_TOO_LONG",SITE_NAME_ALREADY_EXISTS:"SITE_NAME_ALREADY_EXISTS"},o={MIN_LENGTH:4,MAX_LENGTH:20};function i(t,o){const i=r(o);return i.success?function(t,n){n=c(n);const o=e.without(s.call(this,t),a(t));return e.includes(e.invokeMap(o,"toLowerCase"),n)}(t,o)?{success:!1,errorCode:n.SITE_NAME_ALREADY_EXISTS}:{success:!0,extraInfo:c(o)}:i}function r(t){if(!e.isString(t))return{success:!1,errorCode:n.SITE_NAME_IS_NOT_STRING};if(e.isEmpty(t))return{success:!1,errorCode:n.SITE_NAME_IS_EMPTY};const i=function(t){return e.uniq(t.match(/[^a-zA-Z0-9\s\-]/g))}(t);return i&&i.length?{success:!1,errorCode:n.SITE_NAME_INVALID_CHARS,errorContent:i}:function(e){return"-"===e.slice(-1)}(t)?{success:!1,errorCode:n.SITE_NAME_ENDS_WITH_HYPHEN}:(t=c(t)).length<o.MIN_LENGTH?{success:!1,errorCode:n.SITE_NAME_TOO_SHORT}:t.length>o.MAX_LENGTH?{success:!1,errorCode:n.SITE_NAME_TOO_LONG}:{success:!0,extraInfo:c(t)}}function a(e){return t.getProperty(e,t.PROPERTY_NAMES.SITE_NAME)}function s(e){return t.getProperty(e,t.PROPERTY_NAMES.USED_META_SITE_NAMES)}function c(e){return e.replace(/([^\s\w\d_\-])/g,"").replace(/\s+/g,"-").replace(/-+$/g,"").toLowerCase()}return{set:function(n,o){const p=i(n,o);if(!p.success)throw new Error(p.errorCode);const l=a(n);t.setProperty(n,t.PROPERTY_NAMES.SITE_NAME,c(o)),r(l).success&&function(n,o){let i=s(n);i=e.without(i,o),t.setProperty(n,t.PROPERTY_NAMES.USED_META_SITE_NAMES,i)}(n,l)},get:a,sanitize:(e,t)=>c(t),validate:i,getUsedSiteNames:s,markSiteNameAsUsed:function(e,n){const o=t.getProperty(e,t.PROPERTY_NAMES.USED_META_SITE_NAMES);o.push(n),t.setProperty(e,t.PROPERTY_NAMES.USED_META_SITE_NAMES,o)},ERRORS:n}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(40)],void 0===(i=function(e,t){"use strict";return{cookies:{enable:function(n,o){if(!e.isBoolean(o))throw new Error("argument isEnabled must be boolean");t.setProperty(n,t.PROPERTY_NAMES.SUPPRESS_COOKIES,!o)},isEnabled:function(e){return!t.getProperty(e,t.PROPERTY_NAMES.SUPPRESS_COOKIES)}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(7),n(3)],void 0===(i=function(e,t,n){"use strict";const o=["news","menu","faq"],i="wixapps.integration.components.AppPart";return{hasAppPage:function(t){const n=function(e){const t=e.pointers.page.getPageData("masterPage");return e.dal.get(t)}(t);return!!e.find(n,{type:"AppPage",appPageType:"AppBuilderPage"})},hasOldApp:function(r){const a=r.pointers.general.getClientSpecMap(),s=r.dal.get(a),c={};e.forEach(o,function(t){const n=e.find(s,{type:"wixapps",packageName:t});if(n){const e=n.applicationId;c[e]=n}});const p=e.find(s,{packageName:"ecommerce"});if(p&&(c[p.applicationId]=p),e.isEmpty(c))return!1;const l=t.getComponentByType(r,i);return e.some(l,function(e){const t=n.getDataItem(r,e);return!!c[t.appInnerID]})},hasNewBlog:function(t){const n=t.pointers.general.getClientSpecMap(),o=t.dal.get(n);return!!e.find(o,["appDefinitionName","Wix Blog"])}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1)],void 0===(i=function(e,t){"use strict";const n={LAYOUT:{UPDATE_BEFORE:"before_layout_update",UPDATE_AFTER:"after_layout_update"},COMPONENT:{STYLE_UPDATE_AFTER:"after_style_update"},ADD:{BEFORE:"before_add",AFTER:"after_add",IS_OPERATION_ALLOWED:"isOperationAllowed_add"},DATA:{UPDATE_BEFORE:"data_update_before",UPDATE_AFTER:"data_update_after",SET_BY_POINTER_AFTER:"data_set_by_pointer_after",AFTER_GET:"after_get_data",AFTER_UPDATE_CONNECTIONS:"data_after_update_connections"},DESIGN:{UPDATE_BEFORE:"design_update_before",UPDATE_AFTER:"design_update_after"},MOBILE_HINTS:{UPDATE_BEFORE:"mobile_hints_update_before"},SITE_BACKGROUND_UPDATE:{AFTER:"after_site_background_update"},PROPERTIES:{UPDATE_BEFORE:"properties_update_before",UPDATE_AFTER:"properties_update_after"},ADD_ROOT:{BEFORE:"before_add_root",AFTER:"after_add_root",IS_OPERATION_ALLOWED:"isOperationAllowed_add_root",GET_CONTAINER_TO_ADD_TO:"get_container_to_add_to"},ADD_PAGE:{AFTER:"after_add_page"},DUPLICATE_ROOT:{BEFORE:"before_duplicate_root",AFTER:"after_duplicate_root"},REMOVE:{BEFORE:"before_remove",AFTER:"after_remove",IS_OPERATION_ALLOWED:"isOperationAllowed_remove"},DUPLICATE:{IS_OPERATION_ALLOWED:"isOperationAllowed_duplicate"},SERIALIZE:{SET_CUSTOM:"set_custom_serialize",CHILDREN_BEFORE:"before_serialize_children"},CHANGE_PARENT:{BEFORE:"before_change_parent",AFTER:"after_change_parent"},CHANGE_COMPONENT_VIEW_MODE:{BEFORE:"before_change_component_view_mode"},SWITCH_VIEW_MODE:{AFTER:"after_switch_view_mode",MOBILE:"switch_to_mobile_view"},MOBILE_CONVERSION:{BEFORE:"before_mobile_conversion",AFTER:"after_mobile_conversion"},MOBILE_MERGE:{BEFORE:"before_mobile_merge"},RELAYOUT_MOBILE_PAGE:{AFTER:"after_relayout_page"},PUBLISH:{BEFORE:"before_site_publish"},AUTOSAVE:{ACTION:"autosave_action"},SAVE:{SITE_SAVED:"site_saved",VALIDATION_ERROR:"validation_error"},WIX_CODE:{FLUSH:"wixcode_flush"},METADATA:{MOVE_DIRECTIONS:"meta_data_move_directions",REMOVABLE:"meta_data_removable",DUPLICATABLE:"meta_data_duplicatable",CAN_REPARENT:"meta_data_can_reparent",RESIZABLE_SIDES:"meta_data_resizable_sides",ROTATABLE:"meta_data_rotatable",FIXED_POSITION:"meta_data_fixed_position",CONTAINABLE:"meta_data_containable",LAYOUT_LIMITS:"meta_data_layout_limits"},PLATFORM:{APP_PROVISIONED:"platform_app_provisioned",APP_UPDATED:"platform_app_updated",AFTER_CONTROLLERS_SET_STATE:"after_platform_controllers_set_state"},CONNECTION:{AFTER_DISCONNECT:"after_connection_disconnect"},ADD_TPA:{AFTER:"after_tpa_app_add"},PAGE:{AFTER_NAVIGATE_TO_PAGE:"after_navigate_to_page"},UNDO_REDO:{AFTER_APPLY_SNAPSHOT:"after_apply_snapshot"},REMOVE_COMP_MODE:{BEFORE:"before_remove_comp_mode"}},o=e(n).flatMap(function(t){return e.flatMap(t)}).reduce(function(e,t){return e[t]=!0,e},Object.create(null));function i(e){if(!o[e])throw new Error(`Invalid Hook Name ${e}`)}return{createHandler:function(){const o=Object.create(null),r={isRunningRecursiveHooksAllowed:!0};function a(n,i="",r,a=!1){if(t.wSpy.logCallBackRegistration(r,"setHook",[...arguments],"at setHook"),!r)return;let s=o[n];s||(o[n]=s=Object.create(null));let c=s[i];if(c){if(a&&e.find(c,"isExternal"))return}else s[i]=c=[];const p={func:r,isExternal:a};return e(c).map("func").some(e=>r===e)||c.push(p),r}function s(t,n,a){if(i(t),r.isRunningRecursiveHooksAllowed){const i=o[t];i&&(n&&e.forEach(i[n],a),e.forEach(i[""],a))}}function c(e,n){e.isExternal&&(r.isRunningRecursiveHooksAllowed=!1),t.wSpy.logCallBackExecution(e.func,"applyHook",[...arguments]);const o=e.func.apply(this,n);return r.isRunningRecursiveHooksAllowed=!0,o}return{HOOKS:n,unregisterHooks:function(t){const n=e.isArray(t)?t:[t];e.forEach(n,function(e){o[e]={}})},unregisterComponentHook:function(e,t){o[e]&&o[e][t]&&(o[e][t]=[])},unregisterHook:function(t,n,i){if(i=i||"",o[t]&&o[t][i]){const r=o[t][i];e.remove(r,["func",n])}},registerHook:function(e,t,n){return i(e),a(e,n,t,!1)},registerExternalHook:function(e,t,n){i(e),a(e,n,t,!0)},executeHook:function(t,n,o,i=e.noop){let r=!1;return s(t,n,function(e){const t=c(e,o);if(r||i(t))return r=!0,!1}),!r},executeHooksAndCollectValues:function(t,n,o){const i=[];return s(t,n,function(t){const n=c(t,o);e.isUndefined(n)||i.push(n)}),i},executeHookAndUpdateValue:function(t,n,o,i,r){let a=e.cloneDeep(r);return s(n,o,function(e){a=c(e,[t,a].concat(i))}),a}}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(12),n(80),n(59),n(16)],void 0===(i=function(e,t,n,o,i){"use strict";const{dataValidators:r,schemasService:a}=i.services,s=t.constants.DATA_TYPES;function c(e,t,n,o,i,r,a=!1){return function(e,t,n,o,i,r,a=!1){const s=[],c=p(e,t,n,o,i,r,s,void 0,a),l=s.reverse();return function(e,t){let n=null;for(let o=0;o<t.length;o++){const i=t[o],r=i.pointer;!n&&r.component&&(n=r.component),r.component=n,r.refPath=i.refPath;const a=i.item;e.dal.set(r,a)}}(e,l),c}(e,t,n,o,i,r,a)}function p(t,n,o,i,a,s,c,u,d=!1){const g=l(t,n,o,i,a,p,c,u=u||[],d);e.set(g,"metaData.isPreset",!1);const f=t.pointers.data.getItemWithOptional(a,g.id,n,s);return f.useOriginalLanguage=d,r.validateDataBySchema(g,a),c.push({pointer:f,item:g,refPath:u}),g.id}function l(t,i,r,s,c,p,l,u,d=!1){const g=s||o.generateNewId(c);let f={},m={id:g};const y=t.pointers.data.getItem(c,g,i);t.dal.isExist(y)&&(f=t.dal.full.get(y)),r.type=r.type||e.get(f,"type");const E=r.type;if(!a.getSchema(c,E))throw new Error(`missing schema (schemaType: ${c} schemaName: ${E}) for the given data item`);function I(e,n){return p?`#${p(t,i,n,n.id,c,null,l,u.concat(e),d)}`:`#${n.id||o.generateNewId(c)}`}var S,h;return e.forOwn(r,function(t,o){e.isPlainObject(t)&&n.isOfType(c,E,o,"ref")?m[o]=I(o,t):n.isOfType(c,E,o,"refList")?m[o]=e.map(t,I.bind(null,o)):"id"!==o&&(m[o]=t)}),h=m,(S=f).type&&h.type&&!e.isEqual(S.type,h.type)||(m=e.assign(f,m)),function(t){t.metaData=e.assign({isPreset:!1,schemaVersion:"1.0",isHidden:!1},t.metaData)}(m),m}return{addSerializedItemToPage:(e,t,n,o,i)=>c(e,t,n,o,i),addSerializedStyleItemToPage:function(e,t,n,o="masterPage"){return c(e,o,t,n,s.theme)},addSerializedDataItemToPage:function(e,t,n,o,i=!1){return c(e,t,n,o,s.data,void 0,i)},addSerializedPropertyItemToPage:function(e,t,n,o,i){return c(e,t,n,o,s.prop,i)},addSerializedDesignItemToPage:function(e,t,n,o,i){return c(e,t,n,o,s.design,i)},addSerializedBehaviorsItemToPage:function(e,t,n,o){return c(e,t,n,o,s.behaviors)},addSerializedLayoutItemToPage:function(e,t,n,o){return c(e,t,n,o,s.layout)},addSerializedConnectionsItemToPage:function(e,t,n,o){return c(e,t,n,o,s.connections)},addSerializedMobileHintsItemToPage:function(e,t,n,o,i){return c(e,t,n,o,s.mobileHints,i)},deserializeDataItem:function(e,t,n){return l(e,null,t,t.id,n)},serializeDataItem:function o(i,r,a,s,c=!1){if(!i.dal.full.isExist(a))return;a=e.assign({},a,{useOriginalLanguage:!0});const p=i.dal.full.get(a);s&&delete p.id;const l=i.pointers.data.getPageIdOfData(a);function u(n){const a=function(n,o,i,r){const a=o&&e.isString(o)&&t.stringUtils.startsWith(o,"#")&&o.replace("#","");return n.pointers.data.getItem(r,a,i)}(i,n,l,r);return o(i,r,a,s,c)}const d=e.assign({},a,{useOriginalLanguage:!1}),g=i.dal.full.get(d),f=p.type;return e.forOwn(p,function(t,o){let i=t;if(!0!==c){const t=g[o];e.isNil(t)||(i=t)}const s=n.isOfType(r,f,o,"ref");if(i&&s)i=u(i,a.type);else{const t=n.isOfType(r,f,o,"refList");i&&t&&(l=i,i=e.compact(e.map(l,e=>u(e))))}var l;p[o]=i}),p}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(80),n(243)],void 0===(i=function(e,t,n,o){"use strict";const i=t.constants.DATA_TYPES,r={data:["MAIN_MENU","CUSTOM_MENUS","CUSTOM_MAIN_MENU"],props:[],style:[]};function a(e,t,n){if(!e||!t)return null;const o=e.pointers.getInnerPointer(t,n),i=(e.dal.isExist(o)?e.dal:e.dal.full).get(o);return i?i.replace("#",""):null}function s(t,o,i,a){if(!t.dal.isExist(i))return;const c=t.dal.get(i);var p,l;(p=o,l=i.id,e.includes(r[p],l))||(n.executeForDataItemRefs(o,c,function(e){if(e){const n=t.pointers.data.getItem(o,e.replace("#",""),a);s(t,o,n,a)}}),t.dal.remove(i))}function c(e,t){if(!e.dal.isExist(t)||o.isDataItemPersistent(e,t))return;const n=e.pointers.data.getPageIdOfData(t);s(e,i.data,t,n)}function p(e,t){return(e.pointers.components.getPageOfComponent(t)||e.pointers.full.components.getPageOfComponent(t)).id}return{removeDataItemRecursively:c,removeDesignItemRecursively:function(e,t){if(!e.dal.isExist(t))return;const n=e.pointers.data.getPageIdOfData(t);s(e,i.design,t,n)},removeConnectionsItem:function(e,t){const n=a(e,t,"connectionQuery");if(!n)return;const o=p(e,t),r=e.pointers.data.getConnectionsItem(n,o);s(e,i.connections,r,o);const c=e.pointers.getInnerPointer(t,"connectionQuery");e.dal.full.remove(c)},removeBehaviorsItem:function(e,t){const n=a(e,t,"behaviorQuery");if(!n)return;const o=p(e,t),r=e.pointers.data.getBehaviorsItem(n,o);s(e,i.behaviors,r,o);const c=e.pointers.getInnerPointer(t,"behaviorQuery");e.dal.full.remove(c)},removeMobileHintsItem:function(e,t){const n=a(e,t,"mobileHintsQuery");if(!n||e.pointers.page.is)return null;const o=p(e,t),i=e.pointers.data.getMobileHintsItem(n,o);c(e,i)},deleteDesignItem:function(e,t){if(e&&t){const n=a(e,t,"designQuery");if(!n)return null;const o=p(e,t),r=e.pointers.data.getDesignItem(n,o);s(e,i.design,r,o)}},deletePropertiesItem:function(e,t){if(e&&t){const n=a(e,t,"propertyQuery");if(!n)return null;const o=p(e,t),r=e.pointers.data.getPropertyItem(n,o);s(e,i.prop,r,o)}},deleteDataItem:function(e,t){if(e&&t){const n=a(e,t,"dataQuery");if(!n)return null;const o=p(e,t),i=e.pointers.data.getDataItem(n,o);c(e,i)}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";const t=["MAIN_MENU","CUSTOM_MENUS","CUSTOM_MAIN_MENU","IMAGE_QUALITY"];return{isDataItemPersistent:function(n,o){const i=n.dal.get(o);return i&&e.includes(t,i.id)}}}.apply(t,o))||(e.exports=i)},function(e,t){e.exports=T},function(e,t){e.exports=v},function(e,t,n){var o;void 0===(o=function(){"use strict";return{mobileConversionConfig:{hideByDefault:!0}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(0),n(9)],void 0===(i=function(e,t){"use strict";return{isRepeatable:!1,styleCanBeApplied:!1,layoutLimits(t,n){const o=t.siteAPI.getSiteMeasureMap(),i=e.get(o,["custom",n.id],{});return{minHeight:i.minHeight,minWidth:i.minWidth}},containableByStructure:t.notContainableByPopup,mobileConversionConfig:{desktopOnly:!0}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(2),n(3)],void 0===(i=function(e,t){"use strict";return{"wysiwyg.viewer.components.WSiteStructure":!0,"mobile.core.components.SiteStructure":!0,"wysiwyg.viewer.components.FooterContainer":!0,"wysiwyg.viewer.components.HeaderContainer":!0,"mobile.core.components.Page":!0,"core.components.Page":!0,"wixapps.integration.components.AppPage":!0,"wysiwyg.viewer.components.ScreenWidthContainer":!0,"wysiwyg.viewer.components.StripContainer":!0,"wysiwyg.viewer.components.StripContainerSlideShow":!0,"wysiwyg.viewer.components.StripContainerSlideShowSlide":!0,"wysiwyg.viewer.components.StripColumnsContainer":!0,"wysiwyg.viewer.components.Column"(n,o){if(n.pointers.components.getViewMode(o)===e.VIEW_MODES.MOBILE)return!0;const i=0===n.pointers.components.getSiblings(o).length,r=n.pointers.components.getParent(o),a=t.getPropertiesItem(n,r);return i&&a.fullWidth}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(1),n(0)],void 0===(i=function(e,t){"use strict";return{isRepeatable:!1,rotatable:!0,layoutLimits(n,o){const i=n.siteAPI.getSiteMeasureMap();return{minWidth:t.get(i,["minWidth",o.id],e.siteConstants.COMP_SIZE.MIN_WIDTH)}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(9),n(2)],void 0===(i=function(e,t){"use strict";return{moveDirections:[t.MOVE_DIRECTIONS.VERTICAL],resizableSides:[t.RESIZE_SIDES.TOP,t.RESIZE_SIDES.BOTTOM],fullWidth:!0,fullWidthByStructure:!0,styleCanBeApplied:!0,mobileConversionConfig:{isScreenWidth:!0,filterChildrenWhenHidden:!0,preserveAspectRatio:!1}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(2)],void 0===(i=function(e){"use strict";return{resizableSides:[e.RESIZE_SIDES.LEFT,e.RESIZE_SIDES.RIGHT],layoutLimits:{minWidth:180,maxWidth:980,minHeight:180,maxHeight:1024},styleCanBeApplied:!0}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(3),n(2)],void 0===(i=function(e,t){"use strict";return{isRepeatable:!1,resizableSides:(n,o)=>!e.getDataItem(n,o).showStream?[t.RESIZE_SIDES.LEFT,t.RESIZE_SIDES.RIGHT]:[t.RESIZE_SIDES.TOP,t.RESIZE_SIDES.LEFT,t.RESIZE_SIDES.BOTTOM,t.RESIZE_SIDES.RIGHT],layoutLimits:{minWidth:280,minHeight:575,maxWidth:500}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{isRepeatable:!1,resizableSides:[]}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{resizableSides:[]}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(0),n(3),n(2),n(1)],void 0===(i=function(e,t,n,o){"use strict";function i(e,t){const n=e.pointers.getInnerPointer(t,"layout"),i=e.dal.get(n);return o.dockUtils.isStretched(i)}return{mobileConversionConfig:{category:"graphic"},styleCanBeApplied:!0,rotatable:(e,t)=>!i(e,t),resizableSides:()=>[n.RESIZE_SIDES.LEFT,n.RESIZE_SIDES.RIGHT],moveDirections:(e,t)=>i(e,t)?[n.MOVE_DIRECTIONS.VERTICAL]:[n.MOVE_DIRECTIONS.HORIZONTAL,n.MOVE_DIRECTIONS.VERTICAL],fullWidth:(e,t)=>(function(e,t){const n=e.pointers.getInnerPointer(t,"layout"),i=e.dal.get(n);return o.dockUtils.isHorizontalDockToScreen(i)})(e,t),fullWidthByStructure:(e,t)=>!!o.dockUtils.isHorizontalDockToScreen(t.layout),canBeStretched:!0}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{isRepeatable:!1,resizableSides:[]}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(2),n(85),n(5)],void 0===(i=function(e,t,n){"use strict";return{resizableSides:[e.RESIZE_SIDES.BOTTOM],moveDirections(o){if(n.isOpen("sv_zeroGapsThreshold"))return[e.MOVE_DIRECTIONS.VERTICAL];const i=t.getInitialGapMap(o);return i&&i.aboveHeader>=e.SITE_SEGMENTS_GAP_THRESHOLD?[e.MOVE_DIRECTIONS.VERTICAL]:[]},canBeFixedPosition:!0,removable:!1,duplicatable:!1,containable:!1,fullWidth:!0,enforceContainerChildLimitsByHeight:(e,t)=>!e.pointers.components.isMobile(t),styleCanBeApplied(e){const t=e.pointers.general.getIsStudioUser();return e.dal.get(t)},hiddenable:!1,collapsible:!1,mobileConversionConfig:{preserveAspectRatio:!1,minHeight:90,topRightMargin:[90,90],descendantImageScaleFactor:.7,siteSegmentRole:"SITE_HEADER",category:"siteSegments"}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(2),n(85),n(5)],void 0===(i=function(e,t,n){"use strict";return{resizableSides:[e.RESIZE_SIDES.BOTTOM],moveDirections:o=>o.siteAPI.getMasterPageLayoutSettings().useDesktopSectionsLayout?[]:n.isOpen("sv_zeroGapsThreshold")?[e.MOVE_DIRECTIONS.VERTICAL]:t.getInitialGapMap(o).aboveFooter>=e.SITE_SEGMENTS_GAP_THRESHOLD?[e.MOVE_DIRECTIONS.VERTICAL]:[],canBeFixedPosition:function(e,t){return!e.pointers.components.isMobile(t)},removable:!1,duplicatable:!1,containable:!1,fullWidth:!0,styleCanBeApplied(e){const t=e.pointers.general.getIsStudioUser();return e.dal.get(t)},hiddenable:!1,collapsible:!1,mobileConversionConfig:{preserveAspectRatio:!1,siteSegmentRole:"SITE_FOOTER",category:"siteSegments"}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{rotatable:!0}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(2)],void 0===(i=function(e){"use strict";return{resizableSides:[e.RESIZE_SIDES.LEFT,e.RESIZE_SIDES.RIGHT],layoutLimits:{minWidth:110,maxWidth:400}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(3)],void 0===(i=function(e,t){"use strict";return{resizableSides:[],defaultMobileProperties:{iconSize:35,spacing:15},mobileConversionConfig:{fixedSize(n,o,i){const r=n.dal.get(n.pointers.data.getPropertyItem(o.propertyQuery,i)),a=t.getDataItemById(n,o.dataQuery.replace("#",""),i),s=e.get(a,["items","length"],0),c=e.get(r,"iconSize",0),p=c*s+e.get(r,"spacing",0)*(s-1),l="HORIZ"===e.get(r,"orientation","HORIZ");return{width:l?p:c,height:l?c:p}}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{isRepeatable:!1}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(1),n(0),n(2)],void 0===(i=function(e,t,n){"use strict";return{layoutLimits(n,o){const i=n.siteAPI.getSiteMeasureMap()||{},r=o.id;return{minWidth:t.get(i,["minWidth",r],e.siteConstants.COMP_SIZE.MIN_WIDTH),minHeight:t.get(i,["minHeight",r],e.siteConstants.COMP_SIZE.MIN_HEIGHT)}},mobileConversionConfig:{hideByDefault(e,t,o){const i=e.pointers.components.getMasterPage(n.VIEW_MODES.MOBILE),r=e.pointers.components.getComponent(n.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER,i),a=e.dal.isExist(r);return"masterPage"===o&&!a},tinyMenuDataRefName:"loginSocialBarRef"}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{rotatable:!0,resizableSides:[]}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(2)],void 0===(i=function(e){"use strict";return{anchors:{to:{allow:!0,lock:e.ANCHORS.LOCK_CONDITION.THRESHOLD},from:{allow:!0,lock:e.ANCHORS.LOCK_CONDITION.ALWAYS}},resizableSides:[],moveDirections:[],removable:!1,duplicatable:!1,fullWidth:!0,collapsible:!1,hiddenable:!1}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(2),n(61)],void 0===(i=function(e,t){"use strict";return{anchors:{to:{allow:!0,lock:e.ANCHORS.LOCK_CONDITION.NEVER},from:!1},resizableSides:[],moveDirections:[],containable:!1,duplicatable:!1,removable:!1,fullWidth:!0,styleCanBeApplied:(e,t)=>!(e.siteAPI.getCurrentPopupId()===t.id),hiddenable:!1,collapsible:!1,dockable:!1,mobileConversionConfig:{shouldApplyPreset:!1,marginX:20,category:"page"},maximumChildrenNumber:(e,n)=>n&&t.isWidgetPage(e,n.id)?1:Number.MAX_VALUE}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{minimalChildrenNumber:2,resizableSides:[],canBeFixedPosition:!1,mobileConversionConfig:{category:"boxContainer",filterChildrenWhenHidden:!0,isTightContainer:!0,nestOverlayingSiblings:!1,marginX:0}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(3),n(2)],void 0===(i=function(e,t){"use strict";const n=[t.RESIZE_SIDES.TOP,t.RESIZE_SIDES.LEFT,t.RESIZE_SIDES.BOTTOM,t.RESIZE_SIDES.RIGHT];return{isRepeatable:!1,mobileConversionConfig:{hideByDefault:!0},resizableSides:(t,o)=>"original"===e.getPropertiesItem(t,o).displayMode?[]:n}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(2),n(85),n(5)],void 0===(i=function(e,t,n){"use strict";return{anchors:{to:{allow:!0,allowBottomBottom:!1,lock:e.ANCHORS.LOCK_CONDITION.THRESHOLD},from:{allow:!0,lock:e.ANCHORS.LOCK_CONDITION.ALWAYS}},resizableSides:[],moveDirections:o=>o.siteAPI.getMasterPageLayoutSettings().useDesktopSectionsLayout?[]:n.isOpen("sv_zeroGapsThreshold")?[e.MOVE_DIRECTIONS.VERTICAL]:t.getInitialGapMap(o).abovePagesContainer>=e.SITE_SEGMENTS_GAP_THRESHOLD?[e.MOVE_DIRECTIONS.VERTICAL]:[],removable:!1,duplicatable:!1,containable:!1,fullWidth:!1,hiddenable:!1,collapsible:!1,mobileConversionConfig:{marginX:20,siteSegmentRole:"PAGES_CONTAINER",category:"siteSegments"}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{resizableSides:[]}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{isRepeatable:!1,resizableSides:[]}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{isRepeatable:!1,resizableSides:[]}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{isRepeatable:!1,resizableSides:[]}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{rotatable:!0}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(2)],void 0===(i=function(e){"use strict";return{resizableSides:[e.RESIZE_SIDES.TOP,e.RESIZE_SIDES.BOTTOM],moveDirections:[e.MOVE_DIRECTIONS.VERTICAL],fullWidth:!0,mobileConversionConfig:{isScreenWidth:!0,preserveAspectRatio:!1}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(2),n(27),n(9)],void 0===(i=function(e,t,n,o){"use strict";return{resizableSides:[t.RESIZE_SIDES.TOP,t.RESIZE_SIDES.BOTTOM],moveDirections:[t.MOVE_DIRECTIONS.VERTICAL],fullWidth:!0,fullWidthByStructure:!0,canBeFixedPosition:!1,containableByStructure:o.containableByFullWidthPopup,mobileConversionConfig:{hideWhenEmptyBackgroundContainer:!0,isScreenWidth:!0,filterChildrenWhenHidden:!0,minHeight:200,preserveAspectRatio:!1}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(2)],void 0===(i=function(e){"use strict";return{styleCanBeApplied:!0,resizableSides:[e.RESIZE_SIDES.LEFT,e.RESIZE_SIDES.RIGHT],layoutLimits:{minWidth:250}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(1),n(0)],void 0===(i=function(e,t){"use strict";return{rotatable:!0,styleCanBeApplied:!0,layoutLimits(n,o,i){const r=n.siteAPI.getSiteMeasureMap(),a={minWidth:t.get(r,["minWidth",o.id],e.siteConstants.COMP_SIZE.MIN_WIDTH),minHeight:t.get(r,["minHeight",o.id],e.siteConstants.COMP_SIZE.MIN_HEIGHT)};if(i&&i.scale){const e=function(e,t){const n=e.pointers.getInnerPointer(t,"layout.scale");return e.dal.get(n)||1}(n,o);if(e!==i.scale){const n=i.scale/e;return t.mapValues(a,function(e){return e*n})}}return a},disableable:!0}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(2),n(2)],void 0===(i=function(e,t){"use strict";return{anchors:{to:{allow:!0,lock:e.ANCHORS.LOCK_CONDITION.THRESHOLD},from:{allow:!0,lock:e.ANCHORS.LOCK_CONDITION.ALWAYS}},resizableSides:[t.RESIZE_SIDES.TOP,t.RESIZE_SIDES.BOTTOM],containable:!1}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(14),n(9),n(2)],void 0===(i=function(e,t,n,o){"use strict";function i(e,t,o){const i=n.getComponentType(e,o);return n.isSiteStructure(i)}return{canBeFixedPosition:!0,removable:!1,resizableSides:(e,t)=>t.type===o.VIEW_MODES.MOBILE?[o.RESIZE_SIDES.BOTTOM]:[o.RESIZE_SIDES.LEFT,o.RESIZE_SIDES.RIGHT,o.RESIZE_SIDES.TOP,o.RESIZE_SIDES.BOTTOM],moveDirections:(e,t)=>t.type===o.VIEW_MODES.MOBILE?[]:[o.MOVE_DIRECTIONS.VERTICAL,o.MOVE_DIRECTIONS.HORIZONTAL],duplicatable:!1,containable:i,containableByStructure:i,fullWidth:(e,t)=>t.type===o.VIEW_MODES.MOBILE,enforceContainerChildLimitsByHeight:!0,styleCanBeApplied:!1,hiddenable:!0,collapsible:!0,mobileConversionConfig:{preserveAspectRatio:!1,siteSegmentRole:"SUBHEADER",category:"siteSegments",isTightContainer:!0,hasTightMarginBetweenChildren:!0}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(2)],void 0===(i=function(e){"use strict";return{anchors:{to:{allow:!0,lock:e.ANCHORS.LOCK_CONDITION.ALWAYS,distance:0},from:{allow:!1,lock:e.ANCHORS.LOCK_CONDITION.NEVER}},resizableSides:[],moveDirections:[],removable:!1,duplicatable:!1,containable:!1,fullWidth:!0,collapsible:!1,hiddenable:!1}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{resizableSides:[]}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(3),n(2)],void 0===(i=function(e,t){"use strict";return{styleCanBeApplied:!0,canBeStretched:!0,resizableSides:(n,o)=>"flexibleHeight"===e.getPropertiesItem(n,o).imageMode?[t.RESIZE_SIDES.LEFT,t.RESIZE_SIDES.RIGHT]:[t.RESIZE_SIDES.TOP,t.RESIZE_SIDES.LEFT,t.RESIZE_SIDES.BOTTOM,t.RESIZE_SIDES.RIGHT],mobileConversionConfig:{minHeight:200}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{isRepeatable:!1,canBeStretched:!0,defaultMobileProperties:{textMode:"noText"}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{isRepeatable:!1,canBeStretched:!0}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{isRepeatable:!1}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{isRepeatable:!1,canBeStretched:!0,mobileConversionConfig:{fixedSize:{width:280,height:240}}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(3),n(2)],void 0===(i=function(e,t){"use strict";return{isRepeatable:!1,resizableSides:(n,o)=>e.getPropertiesItem(n,o).uri?[t.RESIZE_SIDES.LEFT,t.RESIZE_SIDES.RIGHT]:[],mobileConversionConfig:{preserveAspectRatio:!1}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(2)],void 0===(i=function(e){"use strict";const t={"wysiwyg.common.components.subscribeform.viewer.skins.SubscribeFormBoxLayoutEnvelope":{minWidth:505,maxWidth:980,minHeight:126,maxHeight:1024},"wysiwyg.common.components.subscribeform.viewer.skins.SubscribeFormBoxLayoutFlat":{minWidth:505,maxWidth:980,minHeight:98,maxHeight:1024},"wysiwyg.common.components.subscribeform.viewer.skins.SubscribeFormBoxLayoutShiny":{minWidth:505,maxWidth:980,minHeight:98,maxHeight:1024},"wysiwyg.common.components.subscribeform.viewer.skins.SubscribeFormLineLayoutFlat":{minWidth:724,maxWidth:1e3,minHeight:85,maxHeight:300},"wysiwyg.common.components.subscribeform.viewer.skins.SubscribeFormLineLayoutTransparentWithIcon":{minWidth:800,maxWidth:1e3,minHeight:81,maxHeight:300},"wysiwyg.common.components.subscribeform.viewer.skins.SubscribeFormPlaceholderSkin":{minWidth:235,maxWidth:980,maxHeight:1024}},n={minWidth:235,maxWidth:980,minHeight:120,maxHeight:1024};return{resizableSides:[e.RESIZE_SIDES.LEFT,e.RESIZE_SIDES.RIGHT],styleCanBeApplied:!0,layoutLimits(e,o){const i=e.dal.get(e.pointers.getInnerPointer(o,"skin"));return t[i]||n}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";return{mobileConversionConfig:{category:"graphic",isSuitableForProportionGrouping:!0},rotatable:!0,layoutLimits(t,n){const o=t.dal.get(t.pointers.getInnerPointer(n,"styleId")),i=t.pointers.components.getPageOfComponent(n).id,r=t.dal.get(t.pointers.data.getThemeItem(o,i)),a=parseInt(e.get(r,"style.properties.strokewidth",0),0);let s=a+1,c=a+1;const p=e.get(r,"svgId"),l=t.pointers.svgShapes.getSvgShapePointer(p),u=t.pointers.getInnerPointer(l,"boxBoundaries"),d=t.dal.get(u),g=e.isEmpty(d)?0:d.width/d.height;return g&&(g>1?s=(c=a+1)*g:c=(s=a+1)/g),{minWidth:Math.ceil(s),minHeight:Math.ceil(c),maxHeight:2e3}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";return{canBeFixedPosition:!0,layoutLimits:{minWidth:40,minHeight:40},containable:!1,modal(t,n){const o=t.pointers.general.getRenderFlag("componentPreviewStates"),i=t.dal.get(o,{});return"open"===e.get(i,n.id)},styleCanBeApplied(e){const t=e.pointers.general.getIsStudioUser();return e.dal.get(t)},mobileOnly:!0}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{mobileOnly:!0}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(0),n(151)],void 0===(i=function(e,t){"use strict";return e.defaults({mobileOnly:!0,hiddenable:!1,moveDirections:[]},t)}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(2)],void 0===(i=function(e){"use strict";return{mobileConversionConfig:{category:"graphic",isSuitableForProportionGrouping:!0,keepIfVerticalDivider:!0},rotatable:!0,styleCanBeApplied:!0,resizableSides:[e.RESIZE_SIDES.TOP,e.RESIZE_SIDES.BOTTOM]}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{isRepeatable:!1,resizableSides:[]}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{resizableSides:[]}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(14),n(2)],void 0===(i=function(e,t){"use strict";return{isRepeatable:!1,resizableSides:n=>"MOBILE"===e.getViewMode(n)?[]:[t.RESIZE_SIDES.LEFT,t.RESIZE_SIDES.RIGHT],layoutLimits:t=>"MOBILE"===e.getViewMode(t)?{}:{minWidth:400},mobileConversionConfig:{stretchHorizontally:!0}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(2)],void 0===(i=function(e){"use strict";return{resizableSides:[e.RESIZE_SIDES.LEFT,e.RESIZE_SIDES.RIGHT],layoutLimits:{minWidth:500}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(3),n(2),n(52)],void 0===(i=function(e,t,n,o){"use strict";const i={defaultMobileProperties:{layout:"vertical"},layoutLimits(e,n){const o=t.getDataItem(e,n).options.length;return{minWidth:"vertical"===t.getPropertiesItem(e,n).layout?60:60*o}},resizableSides:[n.RESIZE_SIDES.LEFT,n.RESIZE_SIDES.RIGHT]};return e.merge(i,o)}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(3),n(2),n(52)],void 0===(i=function(e,t,n,o){"use strict";const i={defaultMobileProperties:{layout:"vertical"},layoutLimits(e,n){const o=t.getDataItem(e,n).options.length;return{minWidth:"vertical"===t.getPropertiesItem(e,n).layout?60:60*o}},resizableSides:[n.RESIZE_SIDES.LEFT,n.RESIZE_SIDES.RIGHT]};return e.assign(i,o)}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{isRepeatable:!1,resizableSides:[],defaultMobileProperties:{size:"standard"}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(0),n(9),n(2),n(303)],void 0===(i=function(e,t,n,o){"use strict";return{rotatable:!0,styleCanBeApplied:!0,resizableSides(e,o){const i=e.dal.get(o),r=e.pointers.components.getPageOfComponent(o);return t.isMaintainWPhotoAspectRatio(e,i,r.id)?[]:[n.RESIZE_SIDES.TOP,n.RESIZE_SIDES.LEFT,n.RESIZE_SIDES.BOTTOM,n.RESIZE_SIDES.RIGHT]},layoutLimits(e,n){const i=e.dal.get(n),r=e.pointers.components.getPageOfComponent(n),a=t.isMaintainWPhotoAspectRatio(e,i,r.id)?o.getStageAspectRatio(e,n):null;return{aspectRatio:a,minWidth:5,minHeight:5*(a||1)}},mobileConversionConfig:{isSuitableForProportionGrouping:!0,category:"photo",preserveAspectRatio:(e,n,o)=>t.isMaintainWPhotoAspectRatio(e,n,o)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(2)],void 0===(i=function(e,t){"use strict";return{getImageAspectRatio(n,o){const i=n.dal.get(o),r=n.pointers.components.getPageOfComponent(o),a=n.pointers.data.getDataItem(i.dataQuery.replace("#",""),r.id),s=n.dal.get(a);let c={};if(o.type===t.VIEW_MODES.MOBILE){const e=n.pointers.data.getPropertyItem(i.propertyQuery,r.id);c=n.dal.get(e)}return function(t,n){let o=t.width/t.height;return!e.isEmpty(t.crop)&&e.isEmpty(n.overrideCrop)?o=t.crop.width/t.crop.height:e.isEmpty(e.get(n,"overrideCrop"))||(o=n.overrideCrop.width/n.overrideCrop.height),o}(s,c)},getStageAspectRatio(e,t){const n=e.dal.get(t),{width:o,height:i}=n.layout;return o/i}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{isRepeatable:!1,resizableSides:[]}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{isRepeatable:!1,resizableSides:[]}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{isRepeatable:!1,resizableSides:[],mobileConversionConfig:{preserveAspectRatio:!1}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(0),n(3),n(153)],void 0===(i=function(e,t,n){"use strict";function o(e,t,n){const o=e.dataQuery.replace("#",""),i=t.pointers.data.getDataItem(o,n);return t.dal.get(i)}return{isRepeatable:!1,mobileConversionConfig:{hideByDefault(t,i,r){const a=o(i,t,r),s=n.getWidgetData(t,a);return e.isEmpty(s.mobileUrl)},minHeight(t,i,r){const a=o(i,t,r),s=n.getWidgetData(t,a);return e.get(s,"componentFields.minHeightInMobile")},stretchHorizontally(t,i,r){const a=o(i,t,r),s=n.getWidgetData(t,a);return!0===e.get(s,"shouldBeStretchedByDefaultMobile")}},canBeStretched(o,i){const r=t.getDataItem(o,i),a=n.getWidgetData(o,r);return!0===e.get(a,"canBeStretched")},nickname:(e,t)=>n.nickname(e,t)}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(30),n(153)],void 0===(i=function(e,t,n){"use strict";const o=t.common.metaData.PERMITTED_GLUED_TPAS_IN_MOBILE;return{isRepeatable:!1,resizableSides:[],moveDirections:[],containable:!1,fullWidth:!1,mobileConversionConfig:{structuralItem:!0,convertFixedPositionToAbsolute:!0,nonLayoutComponent:!0,desktopOnly(t,n,i){const r=n.dataQuery,a=t.pointers.data.getDataItem(function(t){return e.isString(t)&&"#"===t[0]?t.slice(1):t}(r),i),s=t.dal.get(a);return!function(t,n){if(n){const i=t.pointers.general.getClientSpecMap(),r=t.dal.get(i)[n]||{};return e.includes(o,r.appDefinitionId)}return!1}(t,e.get(s,"applicationId"))},minHeight(t,o,i){const r=function(e,t,n){const o=e.dataQuery.replace("#",""),i=t.pointers.data.getDataItem(o,n);return t.dal.get(i)}(o,t,i),a=n.getWidgetData(t,r);return e.get(a,"componentFields.minHeightInMobile")}},nickname:(e,t)=>n.nickname(e,t)}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{resizableSides:[],moveDirections:[],fullWidth:!0,containable:!1,duplicatable:!1,removable:!1,mobileConversionConfig:{marginX:20}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(0),n(2),n(3),n(155),n(9),n(108),n(88),n(1)],void 0===(i=function(e,t,n,o,i,r,a,s){"use strict";const c=s.blogAppPartNames;function p(e,t){return e.pointers.components.isMasterPage(t)||e.pointers.components.isInMasterPage(t)}function l(t,i,r){const a=n.getDataItem(t,i),s=o.getPackageName(t,a.appInnerID);return"blog"===s&&e.includes(r,o.getAppPartRole(t,s,a.appPartName))}return{layoutLimits:function(e,o){return n.getDataItem(e,o).appPartName===c.HERO_IMAGE?{minHeight:t.HERO_IMAGE.MIN_HEIGHT}:{}},resizableSides:function(e,i){let a=[t.RESIZE_SIDES.LEFT,t.RESIZE_SIDES.RIGHT];const s=n.getDataItem(e,i),c=o.getPackageName(e,s.appInnerID),p=o.getAppPartDefinition(e,c,s.appPartName);return r.descriptorUtils.doesAllowHeightResize(p,s.viewName)&&(a=a.concat([t.RESIZE_SIDES.TOP,t.RESIZE_SIDES.BOTTOM])),a},containable:function(e,t,n){return n&&!(function(e,t,n){return p(e,t)!==p(e,n)}(e,t,n)&&function(e,t){return l(e,t,["BLOG_FEED","SINGLE_POST","RELATED_POSTS"])}(e,t))},containableByStructure:function(e,t,n){const o=!i.notContainableByPopup.apply(i,arguments),r=e.pointers.components.getPageOfComponent(n),s=a.isSinglePost(e,r.id);if("ea63bc0f-c09f-470c-ac9e-2a408b499f22"===t.data.appPartName){const{type:n,appPartName:o}=t.data;return s&&!e.pointers.data.getDataItemWithPredicate({type:n,appPartName:o},r.id)}const p=t.data.appPartName===c.RELATED_POSTS;return!(o||p&&!s)},canBeStretched:function(e,t){return l(e,t,["POST_GALLERY","BLOG_FEED","CUSTOM_FEED"].concat(["RELATED_POSTS"]))},mobileConversionConfig:{fixedSize:function(t,o,i){const r=n.getDataItemById(t,o.dataQuery.replace("#",""),i),a=e.get(r,"appPartName");return a===c.POSTS_GALLERY||a===c.RELATED_POSTS?{height:o.layout.height}:{}}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(2),n(3),n(156),n(14),n(9)],void 0===(i=function(e,t,n,o,i){"use strict";return{isRepeatable:!1,resizableSides:[e.RESIZE_SIDES.LEFT,e.RESIZE_SIDES.RIGHT],removable:!0,duplicatable:function(e,i){return!o.isMobileView(e)&&n.wasPartLoadedSuccessfully(e,function(e,n){const o=t.getDataItem(e,n);if(!o)throw new Error(`Can't find data for component id ${n.id}`);return o.appPartName}(e,i))},containableByStructure:i.notContainableByPopup,usingLegacyAppPartSchema:!0}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(9),n(2),n(27)],void 0===(i=function(e,t,n,o){"use strict";const i=["mobile.core.components.Page","core.components.Page","wixapps.integration.components.AppPage"];function r(n,r,a){if(a){const r=t.getComponentType(n,a),s=n.pointers.components.getPageOfComponent(a);return e.includes(i,r)&&!o.isPopup(n,s.id)}return!1}return{resizableSides:[],moveDirections:[n.MOVE_DIRECTIONS.VERTICAL],containable:r,containableByStructure:r,fullWidth:!0,fullWidthByStructure:!0,collapsible:!1,mobileConversionConfig:{isInvisible:!0}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(2)],void 0===(i=function(e){"use strict";return{isRepeatable:!1,canBeStretched:!0,defaultMobileProperties:(e,t,n)=>({numCols:2,margin:n.margin<=3?n.margin:15,textMode:{titleAndDescription:"titleOnly",descriptionOnly:"noText"}[n.textMode]||n.textMode}),resizableSides:[e.RESIZE_SIDES.LEFT,e.RESIZE_SIDES.RIGHT]}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(3),n(2)],void 0===(i=function(e,t){"use strict";return{isRepeatable:!1,resizableSides(n,o){const i=e.getPropertiesItem(n,o),r=[t.RESIZE_SIDES.LEFT,t.RESIZE_SIDES.RIGHT];return"horizontal"===i.orientation?r.concat([t.RESIZE_SIDES.TOP,t.RESIZE_SIDES.BOTTOM]):r}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(2),n(9)],void 0===(i=function(e,t,n){"use strict";return{mobileConversionConfig:{isScreenWidth:!0},moveDirections:[t.MOVE_DIRECTIONS.VERTICAL],resizableSides:[t.RESIZE_SIDES.TOP,t.RESIZE_SIDES.BOTTOM],fullWidth:!0,fullWidthByStructure:!0,canBeFixedPosition:!1,containableByStructure:n.containableByFullWidthPopup}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(2),n(9)],void 0===(i=function(e,t){"use strict";return{isRepeatable:!1,mobileConversionConfig:{isScreenWidth:!0},moveDirections:[e.MOVE_DIRECTIONS.VERTICAL],resizableSides:[e.RESIZE_SIDES.TOP,e.RESIZE_SIDES.BOTTOM],fullWidth:!0,fullWidthByStructure:!0,canBeFixedPosition:!1,containableByStructure:t.containableByFullWidthPopup}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(2),n(3)],void 0===(i=function(e,t,n){"use strict";function o(e,t){return!!n.getPropertiesItem(e,t).fitToScreenWidth}return{isRepeatable:!1,mobileConversionConfig:{isScreenWidth(t,n,o){const i=t.dal.get(t.pointers.data.getPropertyItem(n.propertyQuery,o));return e.get(i,"fitToScreenWidth",!1)}},moveDirections:function(e,n){return function(e){const n=[t.MOVE_DIRECTIONS.VERTICAL];return e||n.push(t.MOVE_DIRECTIONS.HORIZONTAL),n}(o(e,n))},resizableSides:function(e,n){return o(e,n)?[]:[t.RESIZE_SIDES.LEFT,t.RESIZE_SIDES.RIGHT]},fullWidth:o,fullWidthByStructure:function(e,t){return!!t.props.fitToScreenWidth}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(2)],void 0===(i=function(e){"use strict";return{isRepeatable:!1,resizableSides:[e.RESIZE_SIDES.LEFT,e.RESIZE_SIDES.RIGHT]}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(3)],void 0===(i=function(e){"use strict";const t={DEFAULT:{minWidth:10,minHeight:10},VIMEO:{minWidth:100,minHeight:100},YOUTUBE:{minWidth:200,minHeight:200},DAILYMOTION:{minWidth:100,minHeight:100},FACEBOOK:{minWidth:100,minHeight:100}};return{isRepeatable:!1,styleCanBeApplied:!0,layoutLimits(n,o){const i=e.getDataItem(n,o);return t[i.videoType]||t.DEFAULT},defaultMobileProperties:{autoplay:!1}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{canBeStretched:!0,styleCanBeApplied:!0,layoutLimits:{minWidth:45,minHeight:70},defaultMobileProperties:(e,t,n)=>({margin:Math.min(20,n.margin),numCols:n.numCols>=2?2:1}),mobileConversionConfig:{preserveAspectRatio:!1}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(1),n(0)],void 0===(i=function(e,t){"use strict";return{rotatable:!0,layoutLimits(n,o){const i=n.siteAPI.getSiteMeasureMap();return{minWidth:t.get(i,["minWidth",o.id],e.siteConstants.COMP_SIZE.MIN_WIDTH)}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{isRepeatable:!1,resizableSides:[]}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{isRepeatable:!1,layoutLimits:{minWidth:250,minHeight:50}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(2)],void 0===(i=function(e){"use strict";return{layoutLimits:{minWidth:10},rotatable:!0,isProportionallyResizable:!0,resizableSides:(t,n)=>(function(e,t){const n=e.pointers.getInnerPointer(t,"layout");return!!e.dal.get(n).rotationInDegrees})(t,n)?[e.RESIZE_SIDES.LEFT,e.RESIZE_SIDES.RIGHT]:[e.RESIZE_SIDES.LEFT,e.RESIZE_SIDES.RIGHT,e.RESIZE_SIDES.BOTTOM],defaultMobileProperties:{packed:!1,minHeight:null},mobileConversionConfig:{isSuitableForProportionGrouping:!0,category:"text",preserveAspectRatio:!1,shouldEnlargeToFitWidth:!0}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";return{isRepeatable:!1,styleCanBeApplied:!0,mobileConversionConfig:{isScreenWidth:!0,desktopOnly(t,n,o){const i=n.dataQuery,r=t.pointers.data.getDataItem(function(t){return e.isString(t)&&"#"===t[0]?t.slice(1):t}(i),o);return"#CUSTOM_MAIN_MENU"===(t.dal.get(r)||{menuRef:"#CUSTOM_MAIN_MENU"}).menuRef},fixedSize:{height:48}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(3)],void 0===(i=function(e,t){"use strict";return{isRepeatable:!1,layoutLimits:(n,o)=>{return{minHeight:25*((n,o)=>{const i=t.getDataItem(n,o),r=e.isString(i.menuRef)?i.menuRef.replace("#",""):i.menuRef.id,a=t.getDataItemById(n,r).items;return e.filter(a,"isVisible").length})(n,o),minWidth:100}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{isRepeatable:!1,canBeStretched:!0,styleCanBeApplied:!0,mobileConversionConfig:{desktopOnly:!0}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{canBeStretched:!0,styleCanBeApplied:!0,mobileConversionConfig:{preserveAspectRatio:!1}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{canBeStretched:!0,styleCanBeApplied:!0,defaultMobileProperties:(e,t,n)=>({margin:Math.min(20,n.margin),numCols:Math.min(2,n.numCols)}),mobileConversionConfig:{preserveAspectRatio:!1}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{styleCanBeApplied:!0,mobileConversionConfig:{category:"boxContainer",minHeight:50,isSuitableForProportionGrouping:!0,filterChildrenWhenHidden:!0}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(0),n(2),n(5)],void 0===(i=function(e,t,n){"use strict";const o={mobileConversionConfig:{createMobilePresets:!1},hiddenable:!1,styleCanBeApplied:!1,moveDirections:[],canBeFixedPosition:!1,duplicatable:!1,groupable:!1,removable:!0,enforceContainerChildLimitsByWidth:!1,enforceContainerChildLimitsByHeight:!1,layoutLimits:{minWidth:50,minHeight:50},resizableSides(e,n){const o=t.RESIZE_SIDES.LEFT,i=t.RESIZE_SIDES.RIGHT,r=t.RESIZE_SIDES.BOTTOM,a=t.RESIZE_SIDES.TOP,s=e.dal.get(n),c=e.pointers.components.getPageOfComponent(n),p=c&&c.id,l=e.pointers.data.getPropertyItem(s.propertyQuery,p),u=e.dal.get(l),d={left:{top:[r,i],center:[r,i],bottom:[a,i]},center:{top:[r,i,o],center:[a,r,i,o],bottom:[a,i,o]},right:{top:[r,o],center:[r,o],bottom:[a,o]}},g={left:[i],center:[i,o],right:[o]},f={top:[r],center:[a,r],bottom:[a]};return{nineGrid:()=>d[u.horizontalAlignment][u.verticalAlignment],fullHeight:()=>g[u.horizontalAlignment],fullWidth:()=>f[u.verticalAlignment]}[u.alignmentType]()},defaultMobileProperties:(e,t,n)=>({horizontalAlignment:"nineGrid"===n.alignmentType?"center":n.horizontalAlignment,horizontalOffset:0,verticalOffset:0})};return n.isOpen("sv_movePopup")&&delete o.moveDirections,o}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{styleCanBeApplied:!0}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{mobileConversionConfig:{category:"graphic",isSuitableForProportionGrouping:!0},rotatable:!0}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(9)],void 0===(i=function(e){"use strict";const t="wysiwyg.viewer.components.BoxSlideShow";function n(t,n,o,i){if(i){const o=t?i.componentType:e.getComponentType(n,i);return e.isComponentSuitableForNonRenderingState(o)}return!1}return{mobileConversionConfig:{nestOverlayingSiblings:!1,stackLayout:!0,structuralItem:!0},enforceContainerChildLimitsByWidth:!1,enforceContainerChildLimitsByHeight:!1,containable:function(n,o,i){return e.getComponentType(n,i)===t},canContain:n.bind(null,!1),canContainByStructure:n.bind(null,!0)}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{isRepeatable:!1,minimalChildrenNumber:1,shouldKeepChildrenInPlace:!1,enforceContainerChildLimitsByWidth:!1,enforceContainerChildLimitsByHeight:!1,defaultMobileProperties:{flexibleBoxHeight:!1,shouldHideOverflowContent:!0,navigationButtonMargin:22,navigationButtonSize:15,navigationDotsGap:15,navigationDotsMargin:24,navigationDotsSize:6},mobileConversionConfig:{structuralContainer:!0,nestOverlayingSiblings:!1,filterChildrenWhenHidden:!0,marginX:0}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(9)],void 0===(i=function(e){"use strict";const t="wysiwyg.viewer.components.StateBox";function n(t,n,o,i){if(i){const o=t?i.componentType:e.getComponentType(n,i);return e.isComponentSuitableForNonRenderingState(o)}return!1}return{mobileConversionConfig:{nestOverlayingSiblings:!1,stackLayout:!0,structuralItem:!0},enforceContainerChildLimitsByWidth:!1,enforceContainerChildLimitsByHeight:!1,containable:function(n,o,i){return e.getComponentType(n,i)===t},canContain:n.bind(null,!1),canContainByStructure:n.bind(null,!0)}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{isRepeatable:!1,minimalChildrenNumber:1,shouldKeepChildrenInPlace:!1,enforceContainerChildLimitsByWidth:!1,enforceContainerChildLimitsByHeight:!1,mobileConversionConfig:{structuralContainer:!0,nestOverlayingSiblings:!1,filterChildrenWhenHidden:!0,marginX:0}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(2),n(9)],void 0===(i=function(e,t){"use strict";const n="wysiwyg.viewer.components.StateStrip";function o(e,n,o,i){if(i){const o=e?i.componentType:t.getComponentType(n,i);return t.isComponentSuitableForNonRenderingState(o)}return!1}return{enforceContainerChildLimitsByWidth:!1,enforceContainerChildLimitsByHeight:!1,moveDirections:[e.MOVE_DIRECTIONS.VERTICAL],resizableSides:[e.RESIZE_SIDES.TOP,e.RESIZE_SIDES.BOTTOM],fullWidth:!0,fullWidthByStructure:!0,canContain:o.bind(null,!1),canContainByStructure:o.bind(null,!0),containable:function(e,o,i){return t.getComponentType(e,i)===n},mobileConversionConfig:{nestOverlayingSiblings:!1,structuralItem:!0,stackLayout:!0,isScreenWidth:!0,filterChildrenWhenHidden:!0,preserveAspectRatio:!1}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(2),n(9)],void 0===(i=function(e,t){"use strict";return{isRepeatable:!1,minimalChildrenNumber:1,shouldKeepChildrenInPlace:!1,enforceContainerChildLimitsByWidth:!1,enforceContainerChildLimitsByHeight:!1,moveDirections:[e.MOVE_DIRECTIONS.VERTICAL],resizableSides:[e.RESIZE_SIDES.TOP,e.RESIZE_SIDES.BOTTOM],fullWidth:!0,fullWidthByStructure:!0,containableByStructure:t.containableByFullWidthPopup,mobileConversionConfig:{structuralContainer:!0,nestOverlayingSiblings:!1,isScreenWidth:!0,filterChildrenWhenHidden:!0,marginX:0,preserveAspectRatio:!1}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(2),n(9)],void 0===(i=function(e,t){"use strict";const n="wysiwyg.viewer.components.StripContainerSlideShow";function o(e,n,o,i){if(i){const o=e?i.componentType:t.getComponentType(n,i);return t.isComponentSuitableForNonRenderingState(o)}return!1}return{enforceContainerChildLimitsByWidth:!1,enforceContainerChildLimitsByHeight:!1,moveDirections:[e.MOVE_DIRECTIONS.VERTICAL],resizableSides:[e.RESIZE_SIDES.TOP,e.RESIZE_SIDES.BOTTOM],fullWidth:!0,fullWidthByStructure:!0,canContain:o.bind(null,!1),canContainByStructure:o.bind(null,!0),containable:function(e,o,i){return t.getComponentType(e,i)===n},mobileConversionConfig:{nestOverlayingSiblings:!1,structuralItem:!0,stackLayout:!0,isScreenWidth:!0,filterChildrenWhenHidden:!0,preserveAspectRatio:!1}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{mobileOnly:!0,anchors:{to:!1,from:!1},moveDirections:[],resizableSides:[],dockable:!1,alignable:!1,groupable:!1,canContainByStructure:!0,hiddenable:!1}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{mobileOnly:!0,anchors:{to:!1,from:!1},moveDirections:[],resizableSides:[],dockable:!1,alignable:!1,groupable:!1,containableByStructure:!0,hiddenable:!1}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(2),n(9)],void 0===(i=function(e,t){"use strict";return{isRepeatable:!1,minimalChildrenNumber:1,shouldKeepChildrenInPlace:!1,enforceContainerChildLimitsByWidth:!1,enforceContainerChildLimitsByHeight:!1,moveDirections:[e.MOVE_DIRECTIONS.VERTICAL],resizableSides:[e.RESIZE_SIDES.TOP,e.RESIZE_SIDES.BOTTOM],fullWidth:!0,fullWidthByStructure:!0,containableByStructure:t.containableByFullWidthPopup,defaultMobileProperties:{flexibleBoxHeight:!1,shouldHideOverflowContent:!0,navigationButtonMargin:22,navigationButtonSize:15,navigationDotsGap:15,navigationDotsMargin:24,navigationDotsSize:6},mobileConversionConfig:{structuralContainer:!0,nestOverlayingSiblings:!1,isScreenWidth:!0,filterChildrenWhenHidden:!0,marginX:0,preserveAspectRatio:!1}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(2),n(9),n(27),n(3)],void 0===(i=function(e,t,n,o,i){"use strict";const r=["wysiwyg.viewer.components.PopupContainer"];return{minimalChildrenNumber:1,canContain:(e,t,o)=>"wysiwyg.viewer.components.Column"===n.getComponentType(e,o),canContainByStructure:(e,t,n)=>"wysiwyg.viewer.components.Column"===n.componentType,containable:function(e,t,i){if(!i)return!1;const a=n.getComponentType(e,i),s=e.siteAPI.getFocusedRootId(),c=o.isPopup(e,s),p=r.includes(a);return c?p:n.isHeaderOrFooterOrPageOrMasterPage(a)},containableByStructure:n.containableByFullWidthPopup,moveDirections:[t.MOVE_DIRECTIONS.VERTICAL],resizableSides(e,n){const o=1===e.pointers.components.getChildren(n).length;return e.pointers.components.isMobile(n)&&!o?[]:[t.RESIZE_SIDES.TOP,t.RESIZE_SIDES.BOTTOM]},fullWidth:(e,t)=>i.getPropertiesItem(e,t).fullWidth,fullWidthByStructure:(e,t)=>t.props.fullWidth,canBeFixedPosition:!1,mobileConversionConfig:{nestOverlayingSiblings:!1,hideWhenEmptyBackgroundContainer:!0,filterChildrenWhenHidden:!0,isScreenWidth:!0,marginX:0,category:"columns"}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(52)],void 0===(i=function(e,t){"use strict";return e.assign({},t)}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(52)],void 0===(i=function(e,t){"use strict";return e.assign({},t)}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(52)],void 0===(i=function(e){"use strict";return e}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(3),n(2),n(52)],void 0===(i=function(e,t,n,o){"use strict";const i=(e,n)=>{return!!t.getDataItem(e,n).label},r={mobileConversionConfig:{category:"graphic",inlineWhenGrouped:!0},resizableSides:(e,t)=>i(e,t)?[n.RESIZE_SIDES.LEFT,n.RESIZE_SIDES.RIGHT]:[],layoutLimits(t,n){const o={minWidth:60};return i(t,n)||e.assign(o,{minWidth:12,minHeight:12,aspectRatio:1}),o}};return e.assign({},o,r)}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(52)],void 0===(i=function(e,t,n){"use strict";const o={layoutLimits(n,o){const i=n.siteAPI.getSiteMeasureMap()||{},r=o.id;return{minWidth:e.get(i,["minWidth",r],t.siteConstants.COMP_SIZE.MIN_WIDTH),minHeight:e.get(i,["minHeight",r],t.siteConstants.COMP_SIZE.MIN_HEIGHT)}}};return e.merge(o,n)}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(2),n(3)],void 0===(i=function(e,t,n){"use strict";return{duplicatable(e,t,n){if(e.siteAPI.isMobileView())return!1;const o=e.pointers.isSamePointer(e.pointers.components.getParent(t),n),i=n&&e.pointers.components.getChildren(n).length;return o&&i<5},groupable:!1,enforceContainerChildLimitsByWidth:!1,enforceContainerChildLimitsByHeight:!0,anchors:{to:{allow:!0,lock:t.ANCHORS.LOCK_CONDITION.NEVER},from:{allow:!1,lock:t.ANCHORS.LOCK_CONDITION.ALWAYS}},isContainCheckRecursive:!1,mobileConversionConfig:{structuralItem:!0,filterChildrenWhenHidden:!0,stretchHorizontally:!0,minHeight:200,category:"column",preserveAspectRatio:!1,hideWhenEmptyBackgroundContainer:!0,fixedSize(t,o,i){const r=o.designQuery&&n.getDesignItemById(t,o.designQuery.replace("#",""),i);let a=e.get(r,["background","mediaRef"]);return(a=a&&(a.posterImageRef||a)||{}).height&&a.width?{width:320,height:320*a.height/a.width}:null}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(9)],void 0===(i=function(e,t){"use strict";const n=["wysiwyg.viewer.components.MediaControls","wysiwyg.viewer.components.MediaOverlayControls"],o={minWidth:240,maxWidth:320,minHeight:120,maxHeight:480},i={minWidth:240,maxWidth:1920,minHeight:240,maxHeight:1920};return{isRepeatable:!1,rotatable:!1,canContain(o,i,r){const a=t.getComponentType(o,r);return e.includes(n,a)},canContainByStructure(t,o,i){const r=i.componentType;return e.includes(n,r)},enforceContainerChildLimitsByWidth:!1,enforceContainerChildLimitsByHeight:!1,enforceMaxDimensionsOnProportionalResize:!0,preserveAspectRatio:!0,ignoreChildrenOnProportionalResize:["wysiwyg.viewer.components.MediaControls"],layoutLimits:(e,t)=>e.pointers.components.isMobile(t)?o:i,mobileConversionConfig:{filterChildrenWhenHidden:!0,preserveAspectRatio:!1,fixedSize:(e,t)=>({width:280,height:Math.max(t.layout.height*(280/t.layout.width),120)})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{anchors:{to:!1,from:!1},dockable:!1,alignable:!1,removable:!1,groupable:!1,duplicatable:!1,canBeFixedPosition:!1,mobileConversionConfig:{minHeight:44}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{anchors:{to:!1,from:!1},resizableSides:[],dockable:!1,alignable:!1,removable:!1,groupable:!1,duplicatable:!1,canBeFixedPosition:!1,enforceMaxDimensionsOnProportionalResize:!0,layoutLimits:()=>({minWidth:50,minHeight:50,aspectRatio:1}),mobileConversionConfig:{preserveAspectRatio:!0,fixedSize(e,t){const n=e.pointers.components.getParent({id:t.id,type:"DESKTOP"}),o=e.dal.get(e.pointers.getInnerPointer(n,"layout")),i=t.layout.width*t.layout.height/(o.width*o.height),r=Math.max(o.height*(280/o.width),120),a=Math.max(Math.sqrt(280*i*r),50);return{width:a,height:a}}}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(0),n(1),n(9),n(51),n(3)],void 0===(i=function(e,t,n,o,i){"use strict";const r=["core.components.Page","mobile.core.components.Page","wixapps.integration.components.AppPage"];function a(t,o,i){const a=n.getComponentType(t,o);return i&&n.isHeaderOrFooterOrPageOrMasterPage(a)||e.includes(r,a)||n.isPopupPageOrPopupContainer(t,o)}function s(t,n,i,r){const a=o.getControllerStageData(t,n,i.controllerType,i.applicationId);return e.get(a,r)}return{containable:function(e,t,n){const o=i.getDataItem(e,t);return a(e,n,!1!==s(e,t.id,o,"enableShowOnAllPages")&&!1!==s(e,t.id,o,"toggleShowOnAllPagesEnabled"))},containableByStructure:function(e,t,n){return a(e,n,!0)},container:!1,canContain:!1,canContainByStructure:!1,resizableSides:[],alignable:!1,hiddenable:!1,collapsible:!1,fullWidth:!1,fullWidthByStructure:!1,canBeFixedPosition:!1,groupable:!1,mobileConversionConfig:{nonLayoutComponent:!0},removable:function(e,t){const n=i.getDataItem(e,t);return!1!==s(e,t.id,n,"removable")},duplicatable:function(e,t){const n=i.getDataItem(e,t);return!1!==s(e,t.id,n,"duplicatable")},nickname:n.getControllerNickname,isVisible:function(e,n){const r=i.getDataItem(e,n),a=r.applicationId,s=r.controllerType,c=e.pointers.platform.getAppManifestPointer(r.applicationId),p=!!e.dal.get(c),l=o.getControllerStageData(e,n.id,s,a),u=e.pointers.general.getRenderFlag("showControllers"),d=e.dal.get(u);return t.appManifest.controllerStageData.isControllerVisible(l,p,d)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{containableByStructure:!1}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(0),n(2),n(9)],void 0===(i=function(e,t,n){"use strict";function o(e){return!n.isContainer(e)&&n.isComponentSuitableForNonRenderingState(e)}return{isRepeatable:!1,canContainByStructure:(t,i,r)=>(function(t){if(!t.components)return o(t.componentType);const i=n.getChildrenTypesDeep([t]);return e.every(i,o)})(r),canContain:(t,i,r)=>(function(t,i){const r=t.pointers.components.getChildrenRecursively(i);return e.every(r.concat(i),function(e){return o(n.getComponentType(t,e))})})(t,r),mobileConversionConfig:{nestOverlayingSiblings:!1,createMobilePresets:!1,filterChildrenWhenHidden:!0}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";function t(t,n,o,i){return!(i.id===n.id&&function(t,n){const o=t.pointers.full.components.getChildren(n);return e.size(o)>0}(t,n))}return{isRepeatable:!1,defaultMobileProperties:{closeMethod:"outerClick"},canContain:t,canContainByStructure:t}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(2)],void 0===(i=function(e,t){"use strict";return{enforceContainerChildLimitsByWidth:!1,layoutLimits:function(t,n){const o=e.head(t.pointers.full.components.getChildren(n)),i=t.dal.full.get(t.pointers.getInnerPointer(o,["layout"]));return{minWidth:e.get(i,"width")}},canBeStretched:!0,isRepeater:!0,isRepeatable:!1,resizableSides:[t.RESIZE_SIDES.LEFT,t.RESIZE_SIDES.RIGHT],mobileConversionConfig:{filterChildrenWhenHidden:!0,stretchHorizontally:!0}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(2),n(9)],void 0===(i=function(e,t,n){"use strict";return{mobileConversionConfig:{stretchHorizontally:function(e,o,i){const r=e.pointers.components.getPage(i,t.VIEW_MODES.DESKTOP),a=e.pointers.full.components.getComponent(o.id,r),s=e.pointers.full.components.getParent(a);return"wysiwyg.viewer.components.Repeater"===(s?n.getComponentType(e,s):null)}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(2)],void 0===(i=function(e){"use strict";const t=Object.freeze({MANUAL:"manual",AUTO:"auto"});return{defaultMobileProperties:{columnLayout:"manual"},mobileConversionConfig:{fixedSize:(e,t)=>({height:t.layout.height})},resizableSides(n,o){const i=[e.RESIZE_SIDES.LEFT,e.RESIZE_SIDES.RIGHT],r=n.dal.get(o),a=n.pointers.components.getPageOfComponent(o),s=a&&a.id,c=n.pointers.data.getPropertyItem(r.propertyQuery,s);return n.dal.get(c).heightLayout!==t.AUTO&&i.push(e.RESIZE_SIDES.TOP,e.RESIZE_SIDES.BOTTOM),i}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(2)],void 0===(i=function(e){"use strict";return{mobileConversionConfig:{hideByDefault(t){const n=t.pointers.components.getMasterPage(e.VIEW_MODES.MOBILE),o=t.pointers.components.getComponent(e.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER,n);return!t.dal.isExist(o)},fixedSize:{width:40,height:26}},defaultMobileProperties:{itemFormat:"iconOnly"}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{mobileConversionConfig:{category:"boxContainer",minHeight:50,isSuitableForProportionGrouping:!0,filterChildrenWhenHidden:!0}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(0),n(51),n(9),n(14)],void 0===(i=function(e,t,n,o){"use strict";const i=["wysiwyg.viewer.components.HoverBox","wysiwyg.viewer.components.BoxSlideShow","wysiwyg.viewer.components.StripContainerSlideShow","wysiwyg.viewer.components.Repeater","wysiwyg.viewer.components.StripContainer","wysiwyg.viewer.components.StripColumnsContainer"];function r(n,o,i){return e.get(t.getControllerStageDataByControllerRef(n,i),["behavior",o])}return{groupable:!1,minimalChildrenNumber:1,maximumChildrenNumber:1,forceMaintainIDsOnSerialize:!0,container:!0,isRepeatable:!1,canContainByStructure:(t,o,r,a)=>!t.pointers.isSamePointer(o,a)||!e.includes(i,r.componentType)||!function(t){if(!t.components)return n.isComponentSuitableForNonRenderingState(t.componentType);const o=n.getChildrenTypesDeep([t]);return e.every(o,n.isComponentSuitableForNonRenderingState)}(t),canContain:(t,o,i)=>(function(t,o){const i=t.pointers.components.getChildrenRecursively(o);return e.every(i.concat(o),function(e){const o=n.getComponentType(t,e);return n.isComponentSuitableForNonRenderingState(o)})})(t,i),canBeFixedPosition:(e,t)=>!1!==r(e,"pinnable",t),containable:(e,t,n)=>!function(e,t,n){return e.pointers.components.isInMasterPage(t)&&!e.pointers.components.isInMasterPage(n)||!e.pointers.components.isInMasterPage(t)&&e.pointers.components.isInMasterPage(n)}(e,t,n)||!o.isMobileView(e)&&!1!==r(e,"toggleShowOnAllPagesEnabled",t),duplicatable:(e,t)=>!1!==r(e,"duplicatable",t),nickname:n.getControllerNickname,mobileConversionConfig:{category:"appWidget",isTightContainer:!0,marginX:0,filterChildrenWhenHidden:!0}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(2),n(157)],void 0===(i=function(e,t,n){"use strict";return e.defaultsDeep({containable:function(e,n,o){const i=e.pointers.components.getMasterPage(t.VIEW_MODES.MOBILE),r=e.pointers.components.getComponent(t.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER,i);return o&&!e.pointers.isSamePointer(o,r)&&e.pointers.components.isInMasterPage(o)},styleCanBeApplied:!0},n)}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{removable:!1,hiddenable:!1,mobileConversionConfig:{isDockingAllowed:!0,isFixedPositionAllowed:!0,isAllowedToBeChildOfMasterPage:!0,isNonContainableFullWidth:!0}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(0),n(367)],void 0===(i=function(e,t){"use strict";const n=["disableable","rotatable","moveDirections","resizableSides","canBeFixedPosition","layoutLimits","mobileConversionConfig","defaultMobileProperties","isRepeatable","styleCanBeApplied","canBeStretched"],o={isExternal:!0},i={isRepeatable:!1};return e.mapValues(t.default,t=>e(t).pick(n).defaults(i).assign(o).value())}.apply(t,o))||(e.exports=i)},function(e,t){e.exports=C},function(e,t){e.exports=_},function(e,t){e.exports=O},function(e){e.exports=[{paletteName:"Lets Hear It For The Boys",paletteTags:["Super Load Movers"],color_1:"#000000",color_2:"#FFFFFF",color_11:"#F0F0F0",color_12:"#C0C0C0",color_13:"#909090",color_14:"#606060",color_15:"#303030",color_16:"#B2BDE6",color_17:"#8896CD",color_18:"#3A54B4",color_19:"#273878",color_20:"#131C3C",color_21:"#FFF2D4",color_22:"#FEE6AA",color_23:"#BFAD7F",color_24:"#7F7355",color_25:"#40392A",color_26:"#FFC5BD",color_27:"#FF8B7B",color_28:"#BF685C",color_29:"#80463E",color_30:"#40231F",color_31:"#A8D5DE",color_32:"#78B2BE",color_33:"#2A8A9D",color_34:"#1C5C69",color_35:"#0E2E34"},{paletteName:"I See Red",paletteTags:["Electronic Shop"],color_1:"#FFFFFF",color_2:"#000000",color_11:"#FFFFFF",color_12:"#D4D4D4",color_13:"#909090",color_14:"#606060",color_15:"#303030",color_16:"#D0DACC",color_17:"#A9B6A4",color_18:"#7D9174",color_19:"#53614D",color_20:"#2A3027",color_21:"#DCD4C8",color_22:"#B9AB98",color_23:"#8B8072",color_24:"#5D564C",color_25:"#2E2B26",color_26:"#DBCECF",color_27:"#B7A7A7",color_28:"#93797A",color_29:"#625151",color_30:"#312829",color_31:"#C4D0D5",color_32:"#99A6AB",color_33:"#6D7B81",color_34:"#3C4F57",color_35:"#1E282C"},{paletteName:"Im a Bumble Bee",paletteTags:["the bakery"],color_1:"#FFFFFF",color_2:"#000000",color_11:"#FFFFFF",color_12:"#D4D4D4",color_13:"#909090",color_14:"#606060",color_15:"#000000",color_16:"#A0C2E8",color_17:"#709DD1",color_18:"#0D5EBA",color_19:"#093F7C",color_20:"#041F3E",color_21:"#F6CCB0",color_22:"#EEB188",color_23:"#E57022",color_24:"#994B17",color_25:"#4C250B",color_26:"#F1EEA7",color_27:"#E4DE7B",color_28:"#D6CC11",color_29:"#8F880B",color_30:"#474406",color_31:"#B2E0BB",color_32:"#86C091",color_33:"#3FA152",color_34:"#2A6B37",color_35:"#15361B"},{paletteName:"Licorice Allsorts In Blue",paletteTags:["Real Estate"],color_1:"#FFFFFF",color_2:"#000000",color_11:"#231111",color_12:"#452222",color_13:"#745656",color_14:"#B89C9C",color_15:"#E8DFDF",color_16:"#321F1F",color_17:"#653F3F",color_18:"#C97D7D",color_19:"#E0A2A2",color_20:"#E4B9B9",color_21:"#081F4E",color_22:"#0F3E9B",color_23:"#637EB4",color_24:"#8FA4CD",color_25:"#B2C3E6",color_26:"#1F373B",color_27:"#3F6F75",color_28:"#5EA6B0",color_29:"#9BC5CA",color_30:"#C1E0E5",color_31:"#353223",color_32:"#6A6447",color_33:"#9E966A",color_34:"#D3C88D",color_35:"#E9E3C2"},{paletteName:"Pretty in Pink",paletteTags:["wedding 01"],color_1:"#000000",color_2:"#FEFDFD",color_11:"#F0FAFF",color_12:"#CADDE6",color_13:"#9AAEB8",color_14:"#515E65",color_15:"#292F33",color_16:"#A4F7D5",color_17:"#77EEBE",color_18:"#00E689",color_19:"#00995B",color_20:"#004D2E",color_21:"#C7FCF2",color_22:"#91F9E6",color_23:"#6DBBAD",color_24:"#497D73",color_25:"#243E3A",color_26:"#C2E3D8",color_27:"#9CC6B9",color_28:"#61AA93",color_29:"#417162",color_30:"#203931",color_31:"#B6CDE1",color_32:"#91ABC2",color_33:"#6587A4",color_34:"#205685",color_35:"#102B43"},{paletteName:"Tranquil Sea",paletteTags:["spa reesort"],color_1:"#FFFFFF",color_2:"#000000",color_11:"#F3F2DC",color_12:"#C2C2B0",color_13:"#929184",color_14:"#616158",color_15:"#31302C",color_16:"#C0CBDE",color_17:"#96A4BE",color_18:"#5C739D",color_19:"#3D4D69",color_20:"#1F2634",color_21:"#F0E7CB",color_22:"#E0D19C",color_23:"#A89D75",color_24:"#70694E",color_25:"#383427",color_26:"#FCDDB5",color_27:"#F8CA90",color_28:"#F59A28",color_29:"#A3671B",color_30:"#52330D",color_31:"#BAD4D4",color_32:"#8EA9AA",color_33:"#607F80",color_34:"#2B5455",color_35:"#162A2A"},{paletteName:"My Blue Sneakers",paletteTags:["amazing smile"],color_1:"#FFFFFF",color_2:"#000000",color_11:"#0E1821",color_12:"#1C3142",color_13:"#516371",color_14:"#8293A1",color_15:"#C5D0D9",color_16:"#1E2A4B",color_17:"#3D5495",color_18:"#5B7EE0",color_19:"#A5B7EA",color_20:"#C4D1F5",color_21:"#053342",color_22:"#2B8FB3",color_23:"#50C4ED",color_24:"#86D2ED",color_25:"#ABE0F2",color_26:"#1D2932",color_27:"#395264",color_28:"#567B96",color_29:"#92A8B9",color_30:"#BDCFDC",color_31:"#3F3C1F",color_32:"#7D793E",color_33:"#BCB55D",color_34:"#FAF17C",color_35:"#FCF8BD"},{paletteName:"Chefs Like Orange",paletteTags:["Papas"],color_1:"#FDFDFE",color_2:"#000000",color_11:"#F2F2F2",color_12:"#B6B6B6",color_13:"#898989",color_14:"#5B5B5B",color_15:"#2E2E2E",color_16:"#FFE5D9",color_17:"#FFC1A3",color_18:"#FFAA81",color_19:"#7E5541",color_20:"#3F2B21",color_21:"#FFEFE8",color_22:"#F9DED3",color_23:"#DEC3B8",color_24:"#645954",color_25:"#322C2A",color_26:"#CCDBD9",color_27:"#A4B6B4",color_28:"#75928E",color_29:"#4E615F",color_30:"#27312F",color_31:"#BFC8D7",color_32:"#959EAE",color_33:"#697386",color_34:"#35435D",color_35:"#1B222F"},{paletteName:"Corporate Blues",paletteTags:["James Consulting"],color_1:"#FFFFFF",color_2:"#000000",color_11:"#222120",color_12:"#43423F",color_13:"#72716F",color_14:"#A1A09E",color_15:"#D0CFCD",color_16:"#2F261E",color_17:"#5E4D3D",color_18:"#BC9979",color_19:"#D4B9A1",color_20:"#E3D5C8",color_21:"#252D28",color_22:"#4B5A51",color_23:"#708779",color_24:"#A0AFA6",color_25:"#CBD7D0",color_26:"#4F3316",color_27:"#9E662C",color_28:"#ED9942",color_29:"#F3C89B",color_30:"#F9DCBD",color_31:"#282829",color_32:"#505052",color_33:"#78797C",color_34:"#A0A1A5",color_35:"#CFCFD2"},{paletteName:"At The Car Wash Yeah",paletteTags:["moving company"],color_1:"#FFFFFF",color_2:"#000000",color_11:"#FFFFFF",color_12:"#CCCCCC",color_13:"#808080",color_14:"#555555",color_15:"#2A2A2A",color_16:"#FFEEBC",color_17:"#FFDE7A",color_18:"#FFC824",color_19:"#AA8924",color_20:"#554412",color_21:"#FFE0E3",color_22:"#FFC5C9",color_23:"#E68E94",color_24:"#A85258",color_25:"#6B1E23",color_26:"#FED1BF",color_27:"#FEBA9E",color_28:"#FD763F",color_29:"#A94F2A",color_30:"#542715",color_31:"#DFA3A6",color_32:"#C07275",color_33:"#A01F24",color_34:"#6B1518",color_35:"#350A0C"},{paletteName:"Sleeping Beauty Wakes",paletteTags:["interiors and co"],color_1:"#000000",color_2:"#FFFFFF",color_11:"#1C191C",color_12:"#494549",color_13:"#777377",color_14:"#A4A0A4",color_15:"#D2CDD2",color_16:"#552018",color_17:"#A94130",color_18:"#FE6148",color_19:"#FEB0A3",color_20:"#FFCAC2",color_21:"#141E3F",color_22:"#273C7D",color_23:"#67759E",color_24:"#929DBE",color_25:"#B8C2DF",color_26:"#1F3624",color_27:"#3D6C47",color_28:"#5CA26B",color_29:"#97C1A0",color_30:"#C0E0C7",color_31:"#243236",color_32:"#48656D",color_33:"#6B97A3",color_34:"#8FC9D9",color_35:"#C4E3EC"},{paletteName:"Elephant Walks",paletteTags:["Coach"],color_1:"#FFFFFF",color_2:"#000000",color_11:"#FFFFFF",color_12:"#DBDBDB",color_13:"#B3B3B3",color_14:"#7A7A7A",color_15:"#333333",color_16:"#EDBFAF",color_17:"#EB9C81",color_18:"#E3815F",color_19:"#755144",color_20:"#332926",color_21:"#C5F0E7",color_22:"#96DBCD",color_23:"#71D4C0",color_24:"#52706A",color_25:"#293835",color_26:"#DEE8B7",color_27:"#D0E094",color_28:"#BBD16D",color_29:"#707857",color_30:"#2F312B",color_31:"#D5D9ED",color_32:"#AFB6E0",color_33:"#919AC7",color_34:"#6E77A8",color_35:"#252838"},{paletteName:"Skin Tone Portrait",paletteTags:["interior design"],color_1:"#000000",color_2:"#FFFFFF",color_11:"#323232",color_12:"#5B5B5B",color_13:"#848484",color_14:"#ADADAD",color_15:"#FFFFFF",color_16:"#3A3321",color_17:"#746743",color_18:"#AE9A64",color_19:"#C9BD9E",color_20:"#E4DBC4",color_21:"#282634",color_22:"#504B67",color_23:"#7D7A8D",color_24:"#A6A3B3",color_25:"#CDCAD9",color_26:"#36241C",color_27:"#6D4737",color_28:"#A36B53",color_29:"#C2A092",color_30:"#E0C7BC",color_31:"#282828",color_32:"#515151",color_33:"#797979",color_34:"#A1A1A1",color_35:"#D0D0D0"},{paletteName:"Feelings Are Overrated",paletteTags:["The Soccer club"],color_1:"#FFFFFF",color_2:"#000000",color_11:"#EFEFEF",color_12:"#BFBFBF",color_13:"#8F8F8F",color_14:"#606060",color_15:"#303030",color_16:"#ADC5D8",color_17:"#839CB1",color_18:"#54728A",color_19:"#154063",color_20:"#0A2032",color_21:"#FCDACB",color_22:"#FAB598",color_23:"#BC8872",color_24:"#7D5B4C",color_25:"#3F2D26",color_26:"#C1E5C5",color_27:"#9BCCA1",color_28:"#5DB267",color_29:"#3E7745",color_30:"#1F3B22",color_31:"#C3CBDA",color_32:"#9CA5B5",color_33:"#727C90",color_34:"#3E4E6B",color_35:"#1F2736"},{paletteName:"Lolas Nature Trip",paletteTags:["Lifestyle Mentor"],color_1:"#FFFFFF",color_2:"#000000",color_11:"#FFFFFF",color_12:"#DBDBDB",color_13:"#8F8F8F",color_14:"#606060",color_15:"#303030",color_16:"#CCD2DB",color_17:"#A4ABB6",color_18:"#748092",color_19:"#4D5561",color_20:"#272B31",color_21:"#F1FFEB",color_22:"#DAF9CC",color_23:"#A3B59A",color_24:"#576452",color_25:"#2C3229",color_26:"#F2F2D0",color_27:"#E3E3A6",color_28:"#CFCF84",color_29:"#686842",color_30:"#343421",color_31:"#CED6D5",color_32:"#A3ACAB",color_33:"#758381",color_34:"#4E5756",color_35:"#272C2B"},{paletteName:"Black & White",paletteTags:["Photography Studio"],color_1:"#FFFFFF",color_2:"#000000",color_11:"#FFFFFF",color_12:"#DBDBDB",color_13:"#8F8F8F",color_14:"#606060",color_15:"#303030",color_16:"#F5B8BC",color_17:"#EB9499",color_18:"#E13A44",color_19:"#96272D",color_20:"#4B1317",color_21:"#C1F3ED",color_22:"#88E6DC",color_23:"#28D9C7",color_24:"#44736E",color_25:"#0F4842",color_26:"#AFD7FA",color_27:"#86C1F5",color_28:"#178AF0",color_29:"#0F5CA0",color_30:"#082E50",color_31:"#D7D4D1",color_32:"#AFACA9",color_33:"#878380",color_34:"#5F5A55",color_35:"#302D2B"},{paletteName:"Minimalist White",paletteTags:["Dawkins&Dodger"],color_1:"#FFFFFF",color_2:"#000000",color_11:"#EDEBF2",color_12:"#BEBCC2",color_13:"#8E8D91",color_14:"#5F5E61",color_15:"#2F2F30",color_16:"#C7CDD0",color_17:"#979EA0",color_18:"#676E71",color_19:"#363E41",color_20:"#1B1F21",color_21:"#C6DFDC",color_22:"#9EB2B0",color_23:"#778684",color_24:"#4F5958",color_25:"#282D2C",color_26:"#F0DFD8",color_27:"#EBC9BC",color_28:"#DBAB97",color_29:"#A67560",color_30:"#5C4339",color_31:"#D7D3D2",color_32:"#AEAAA9",color_33:"#858180",color_34:"#5D5755",color_35:"#2F2C2B"},{paletteName:"Hot Pink Bites",paletteTags:["Fashion Photographer"],color_1:"#FFFFFF",color_2:"#000000",color_11:"#FFFFFF",color_12:"#BEBCC2",color_13:"#8E8D91",color_14:"#5F5E61",color_15:"#2F2F30",color_16:"#FFEEBC",color_17:"#FFDC73",color_18:"#F2BD1E",color_19:"#AA8925",color_20:"#554412",color_21:"#E8E6C4",color_22:"#D2CE90",color_23:"#BBB546",color_24:"#7D792F",color_25:"#3E3C17",color_26:"#BEDED7",color_27:"#94BCB4",color_28:"#599B8D",color_29:"#3B675E",color_30:"#1E342F",color_31:"#C7CFD3",color_32:"#9AA3A8",color_33:"#6D777C",color_34:"#3D4A50",color_35:"#1F2528"},{paletteName:"Business Edition",paletteTags:["success consulting"],color_1:"#FFFFFF",color_2:"#000000",color_11:"#2F2E2E",color_12:"#595858",color_13:"#828181",color_14:"#ACABAB",color_15:"#F2F2F2",color_16:"#4D1916",color_17:"#9B312D",color_18:"#E84A43",color_19:"#F09E9A",color_20:"#F7BFBD",color_21:"#141A2D",color_22:"#293559",color_23:"#5F6883",color_24:"#8D95AC",color_25:"#B9C0D5",color_26:"#4F4B13",color_27:"#9E9625",color_28:"#EDE138",color_29:"#F3ED96",color_30:"#F9F5BA",color_31:"#283E23",color_32:"#517C45",color_33:"#78BA68",color_34:"#ACD1A3",color_35:"#D3E8CE"},{paletteName:"White on Black",paletteTags:["Jack Banks Photography"],color_1:"#FFFFFF",color_2:"#000000",color_11:"#FFFFFF",color_12:"#BEBCC2",color_13:"#8E8D91",color_14:"#5F5E61",color_15:"#2F2F30",color_16:"#B2DED6",color_17:"#85BDB3",color_18:"#409C8C",color_19:"#2B685D",color_20:"#15342F",color_21:"#FFDBC6",color_22:"#FEB88D",color_23:"#BF8A6A",color_24:"#7F5C47",color_25:"#402E23",color_26:"#C0EEF5",color_27:"#9FE1EA",color_28:"#50CFE0",color_29:"#358A95",color_30:"#1B454B",color_31:"#BFC8D7",color_32:"#959EAE",color_33:"#697386",color_34:"#35435D",color_35:"#1B222F"}]},function(e,t,n){var o,i;o=[n(0),n(149),n(148),n(1),n(8)],void 0===(i=function(e,t,n,o,i){"use strict";const r=o.masterPageLayoutUtils.MASTER_PAGES_SECTIONS,a=(e,t,n)=>e.pointers.components.getChildren(t)[n],s=(e,t)=>e.pointers.components.getPagesContainer(t),c=e=>"wysiwyg.viewer.components.PagesContainer"===e,p=(e,t)=>c(i.getComponentType(e,t)),l=(e,t)=>{const n=e.pointers.getInnerPointer(t,"layout.fixedPosition");return!!e.dal.get(n)},u=(e,n,o)=>!!t.canSwapComponents(e,n,o)&&(!(!l(e,n)||!l(e,o))||(E(e,n)?E(e,o):!E(e,o)||p(e,o))),d=(t,o,i,r)=>{const a=t.dal.full,s=t.pointers.full.components.getChildrenContainer(o),c=a.get(s),p=e.sortBy([i,r],e=>e[0]),l=n.swapGroups(c,p[0],p[1]);a.set(s,l)},g=(e,t,o,i)=>{const r=e.dal.full,a=e.pointers.full.components.getChildrenContainer(t),s=r.get(a),c=n.moveGroupToIndex(s,o,i);r.set(a,c)},f=(t,n)=>{const i=t.pointers.full.components.getParent(n),r=t.pointers.full.components.getChildren(i),a=e.findIndex(r,{id:o.displayedOnlyStructureUtil.getOriginalId(n.id)});return[a,a]},m=(e,t)=>p(e,t)?P(e,t):f(e,t),y=(t,n)=>e.includes(r[n],t),E=(e,t)=>y(i.getComponentType(e,t),t.type),I=(e,t,o)=>0===o?o:n.findPrev(t,t=>E(e,t)||l(e,t),o)+1,S=(e,t,o)=>{const i=t.length-1;if(o===i)return o;const r=n.findNext(t,t=>E(e,t)||l(e,t),o);return-1===r?i:r-1},h=(t,n,o)=>{const i=e.findIndex(o,{id:n.id});return[I(t,o,i),S(t,o,i)]},P=(e,t)=>{const n=e.pointers.full.components.getParent(t);return h(e,t,e.pointers.full.components.getChildren(n))},A=(t,o)=>{const i=t.pointers.components.getParent(o),r=t.pointers.components.getChildren(i),a=e.findIndex(r,{id:o.id});return n.findNext(r,e=>u(t,o,e),a)},T=(t,o)=>{const i=t.pointers.components.getParent(o),r=t.pointers.components.getChildren(i),a=e.findIndex(r,{id:o.id});return n.findPrev(r,e=>u(t,o,e),a)},v=(e,t)=>[e,t],C=t=>e.reject(t,([e,t])=>e>t),_=(t,n,o)=>{const i=o.type,r=t.pointers.full.components.getChildren(o),a=s(t,i),[p,l]=h(t,a,r);return!(y(n.componentType,i)&&!c(n.componentType)||(t=>e.get(t,["layout","fixedPosition"],!1))(n))?[v(p,l+1)]:C([v(0,p),v(l+1,r.length)])};return{shouldUseMasterPageArrangement:(t,n)=>((e,t)=>e.pointers.isSamePointer(t,e.pointers.components.getMasterPage(o.constants.VIEW_MODES.DESKTOP)))(t,n)&&(t=>e.get((e=>e.dal.get(e.pointers.getInnerPointer((e=>e.pointers.data.getDataItemFromMaster("masterPage"))(e),"layoutSettings")))(t),"soapCompsAroundPagesContainer",!1))(t),isMasterPageSection:E,getPrevCompIndexInDisplayedJson:T,getNextCompIndexInDisplayedJson:A,findValidIndexForNewChild:(e,t,o)=>{const i=_(e,t,o),r=e.pointers.full.components.getChildren(o);return n.findNearestValidIndex(r,r.length,i)},findValidIndexForChild:(t,o,i,r)=>{const a=t.pointers.full.components.getChildren(i),c=e.reject(a,e=>t.pointers.isSamePointer(o,e));r=e.isUndefined(r)?c.length:r;const u=((t,n,o)=>{const i=t.pointers.full.components.getChildren(o),r=e.reject(i,e=>t.pointers.isSamePointer(n,e)),a=s(t,n.type),[c,u]=h(t,a,r);return E(t,n)&&!p(t,n)||l(t,n)?C([v(0,c),v(u+1,r.length)]):[v(c,u+1)]})(t,o,i);return n.findNearestValidIndex(c,r,u)},moveMasterPageSectionBackward:(e,t)=>{const n=T(e,t),o=e.pointers.components.getParent(t),i=a(e,o,n);d(e,o,m(e,t),m(e,i))},moveMasterPageSectionForward:(e,t)=>{const n=A(e,t),o=e.pointers.components.getParent(t),i=a(e,o,n);d(e,o,m(e,t),m(e,i))},moveMasterPageChildToFront:(t,o)=>{const i=t.pointers.components.getParent(o);if(E(t,o))((e,t,o)=>{const i=e.dal.full,r=e.pointers.full.components.getChildrenContainer(t),a=i.get(r),s=n.moveGroupToEndOfArray(a,o);i.set(r,s)})(t,i,m(t,o));else{const n=t.pointers.full.components.getChildren(i),r=e.findIndex(n,{id:"PAGES_CONTAINER"}),a=S(t,n,r);g(t,i,f(t,o),a)}},moveMasterPageChildToBack:(t,o)=>{const i=t.pointers.components.getParent(o);if(E(t,o))((e,t,o)=>{const i=e.dal.full,r=e.pointers.full.components.getChildrenContainer(t),a=i.get(r),s=n.moveGroupToStartOfArray(a,o);i.set(r,s)})(t,i,m(t,o));else{const n=t.pointers.full.components.getChildren(i),r=e.findIndex(n,{id:"PAGES_CONTAINER"}),a=I(t,n,r);g(t,i,f(t,o),a)}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";const e=["entrance","animation","scrub"].concat(["mask","3d"]),t=["exit"],n=["animation","background"],o=["transition","pageTransition"],i=[],r={AllComponents:e.concat(t),PopupContainer:e.concat(t),WRichText:e.concat(["text"]).concat(t),WSiteStructure:o,Page:o,AppPage:o,Anchor:i,FlashComponent:i,PagesContainer:i,Header:i,Footer:e,TPAWidget:i,TPASection:i,TPAGluedWidget:i,TPAMultiSection:i,AppPart:i,AppPart2:i,Masonry:i,Accordion:i,Impress:i,Freestyle:i,Collage:i,Honeycomb:i,StripShowcase:i,StripSlideshow:i,Thumbnails:i,TPA3DGallery:i,TPA3DCarousel:i,FlickrBadgeWidget:i,GoogleMap:i,HtmlComponent:i,PinItPinWidget:i,PinterestPinIt:i,FacebookLikeBox:i,SkypeCallButton:i,SoundCloudWidget:i,SpotifyFollow:i,SpotifyPlayer:i,Video:i,VKShareButton:i,WTwitterTweet:i,WTwitterFollow:i,YouTubeSubscribeButton:i,MediaControls:i,MediaOverlayControls:i,StripContainer:n,StripContainerSlideShowSlide:n,Column:e.concat(n),StripColumnsContainer:e.concat(n),BoxSlideShowSlide:n};return Object.freeze(r),{getSchema:function(){return r}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(){"use strict";const e={screenIn:{groups:["animation","entrance"]},inlinePopupIn:{groups:["animation","entrance"]},inlinePopupOut:{groups:["exit","animation"]},bgScrub:{groups:["animation","background"]},pageTransition:{groups:["transition","pageTransition"]},exit:{groups:["exit","animation"]},load:{groups:["transition","pageTransition"]},modeIn:{groups:["animation","entrance"]},modeOut:{groups:["animation","exit"]},modeChange:{groups:["animation","entrance"]},scrollScrub:{groups:["scrub"]},backToTopIn:{groups:["animation","entrance"]}};return Object.freeze(e),{getSchema:function(){return e}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(0),n(2)],void 0===(i=function(e,t){"use strict";const n=function(t,n){let o=[];return e.forEach(t,function(t){o=o.concat(e.map(t,function(t){const o=e.cloneDeep(t);return o.type="animation",o.params=o.params||{},e.includes(o.groups,"animation")&&e.defaults(o.params,n),o}))}),o}({general:[{name:"Fade",groups:["animation"],params:{}},{name:"Position",groups:["animation"],params:{}},{name:"Rotate",groups:["animation"],params:{}},{name:"Scale",groups:["animation"],params:{}}],in:[{name:"ArcIn",groups:["3d","entrance","animation"],params:{direction:{type:"list",list:["right","left"]}}},{name:"DropIn",groups:["entrance","animation"],params:{power:{type:"list",list:["soft","medium","hard"]}}},{name:"DropClipIn",groups:["entrance","animation"]},{name:"ExpandIn",groups:["entrance","animation"],params:{power:{type:"list",list:["soft","medium","hard"]}}},{name:"FadeIn",groups:["entrance","animation"],params:{}},{name:"FlipIn",groups:["3d","entrance","animation"],params:{direction:{type:"list",list:["top","right","bottom","left"]}}},{name:"FloatIn",groups:["entrance","animation"],params:{direction:{type:"list",list:["top","right","bottom","left"]}}},{name:"FlyIn",groups:["entrance","animation"],params:{direction:{type:"list",list:["top","top left","top right","left","bottom","bottom left","bottom right","right"]}}},{name:"FoldIn",groups:["3d","entrance","animation"],params:{direction:{type:"list",list:["top","right","bottom","left"]}}},{name:"Reveal",groups:["mask","entrance","animation"],params:{direction:{type:"list",list:["top","right","center","bottom","left"]}}},{name:"SlideIn",groups:["mask","entrance","animation"],params:{direction:{type:"list",list:["top","right","bottom","left"]},power:{type:"list",list:["soft","medium","hard"]}}},{name:"SpinIn",groups:["entrance","animation"],params:{cycles:{type:"number",min:.25,max:15,step:.25},direction:{type:"list",list:["cw","ccw"]},power:{type:"list",list:["soft","medium","hard"]}}},{name:"TurnIn",groups:["entrance","animation"],params:{direction:{type:"list",list:["right","left"]}}},{name:"BounceIn",groups:["entrance","animation"],params:{bounce:{type:"list",list:["soft","medium","hard"]},direction:{type:"list",list:["top left","top right","center","bottom right","bottom left"]}}},{name:"GlideIn",groups:["entrance","animation"],params:{angle:{type:"angle"},distance:{type:"number",min:0,max:300,step:1}}}],out:[{name:"ArcOut",groups:["3d","exit","animation"],params:{direction:{type:"list",list:["right","left"]}}},{name:"PopOut",groups:["exit","animation"],params:{power:{type:"list",list:["soft","medium","hard"]}}},{name:"CollapseOut",groups:["exit","animation"],params:{power:{type:"list",list:["soft","medium","hard"]}}},{name:"FadeOut",groups:["exit","animation"],params:{}},{name:"FlipOut",groups:["3d","exit","animation"],params:{direction:{type:"list",list:["top","right","bottom","left"]}}},{name:"FloatOut",groups:["exit","animation"],params:{direction:{type:"list",list:["top","right","bottom","left"]}}},{name:"FlyOut",groups:["exit","animation"],params:{direction:{type:"list",list:["top","top left","top right","left","bottom","bottom left","bottom right","right"]}}},{name:"FoldOut",groups:["3d","exit","animation"],params:{direction:{type:"list",list:["top","right","bottom","left"]}}},{name:"Conceal",groups:["mask","exit","animation"],params:{direction:{type:"list",list:["top","right","center","bottom","left"]}}},{name:"SlideOut",groups:["mask","exit","animation"],params:{direction:{type:"list",list:["top","right","bottom","left"]},power:{type:"list",list:["soft","medium","hard"]}}},{name:"SpinOut",groups:["exit","animation"],params:{cycles:{type:"number",min:1,max:15,step:1},direction:{type:"list",list:["cw","ccw"]},power:{type:"list",list:["soft","medium","hard"]}}},{name:"TurnOut",groups:["exit","animation"],params:{direction:{type:"list",list:["right","left"]}}},{name:"BounceOut",groups:["exit","animation"],params:{bounce:{type:"list",list:["soft","medium","hard"]},direction:{type:"list",list:["top left","top right","center","bottom right","bottom left"]}}},{name:"GlideOut",groups:["exit","animation"],params:{angle:{type:"angle"},distance:{type:"number",min:0,max:300,step:1}}}],background:[{name:"ContainerFixedBg",groups:["animation","background"],params:{}},{name:"BackgroundReveal",groups:["animation","background"],params:{}},{name:"BackgroundParallax",groups:["animation","background"],params:{}},{name:"BackgroundZoom",groups:["animation","background"],params:{}},{name:"BackgroundFadeIn",groups:["animation","background"],params:{}},{name:"BackgroundBlurIn",groups:["animation","background"],params:{}},{name:"SiteBackgroundParallax",groups:["animation","background"],params:{}}],modes:[{name:"ModesMotion",groups:["entrance","animation"]}]},{duration:{type:"number",min:0,max:4,step:.05},delay:{type:"number",min:0,max:8,step:.1}}),o=[{type:"scrub",name:"AnimateAfterScroll",groups:["scrub"],viewMode:t.VIEW_MODES.DESKTOP,params:{animations:[]}},{type:"scrub",name:"ScrubAnimation",groups:["scrub"],viewMode:t.VIEW_MODES.MOBILE,params:{animations:[]}}];return[].concat([{type:"widget",name:"runCode",params:{callbackId:"",compName:""}},{type:"widget",name:"runAppCode",params:{callbackId:"",compName:""}}],o,[{type:"site",name:"openPopup",params:{delay:2,openInDesktop:!0,openInMobile:!1}},{type:"site",name:"prefetchPages",params:{prefetchFilters:{}}}],n)}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return[{name:"CrossFade",groups:["transition","pageTransition"],legacyName:"crossfade"},{NoTransition:"NoTransition",groups:["transition","pageTransition"],legacyName:"none"},{OutIn:"OutIn",groups:["transition","pageTransition"],legacyName:"outIn"},{name:"SlideHorizontal",groups:["transition","pageTransition"],legacyName:"swipeHorizontalFullScreen"},{name:"SlideVertical",groups:["transition","pageTransition"],legacyName:"swipeVerticalFullScreen"}]}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(0),n(22),n(9),n(27),n(377),n(89),n(378),n(379),n(380),n(381),n(382),n(383),n(384),n(385)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l,u,d,g){"use strict";const f=()=>null,m={"wysiwyg.viewer.components.MatrixGallery":i,"wysiwyg.common.components.anchor.viewer.Anchor":c,"wysiwyg.viewer.components.WSiteStructure":s,"wysiwyg.viewer.components.Column":f,"wysiwyg.viewer.components.StripColumnsContainer":f,"wysiwyg.viewer.components.WRichText":p,"wysiwyg.viewer.components.FiveGridLine":u,"wysiwyg.viewer.components.VerticalLine":l,"wysiwyg.viewer.components.PopupContainer":d,"wysiwyg.viewer.components.QuickActionBar":g};return{getPlugin(e,i){const s=t.getType(e,i);let c=m[s];return!c&&n.isLegacyFullWidthContainer(e,i)&&(c=o.isPopup(e,i.id)?a:r),c}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";return function(t,n,o,i){const r=t.getSiteMeasureMap(),a=e.get(r.custom,[i.id,"itemsContainer","height"]),s=e.get(r.custom,[i.id,"showMore","height"]);return a&&s?{height:a+s}:{}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(89)],void 0===(i=function(e,t){"use strict";return function(n,o){return e.assign(t.call(this,n,o),{height:Math.max(o.height,n.getScreenHeight())})}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(2)],void 0===(i=function(e){"use strict";return function(t,n){const o=t.isMobileView();return{x:o?n.x:0,y:n.y,width:o?t.getSiteWidth():t.getSiteMeasureMap().clientWidth,height:t.getSiteMeasureMap().height[e.MASTER_PAGE_ID]}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";const e=141,t=68;return function(n,o){let i=o.width,r=n.getSiteMeasureMap().clientWidth-(e+t);return n.isMobileView()&&(r=r-(n.getSiteMeasureMap().clientWidth-n.getSiteWidth())/2-13,i=140),{x:r,y:o.y,height:0,width:i}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(){"use strict";return function(e,t,n,o){return{height:e.getSiteMeasureMap().minHeight[o.id]}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(){"use strict";const e=25;return function(t,n){const o={};return n.width<e&&(o.x=n.x-e/2,o.width=e),o}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(0),n(89)],void 0===(i=function(e,t){"use strict";const n=25;return function(o,i,r){const a={};return i.height<n&&(a.y=i.y-n/2,a.height=n),r&&r.fullScreenModeOn&&e.merge(a,t(o,i,r)),a}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(89)],void 0===(i=function(e){"use strict";return function(t,n,o){return"fullWidth"===o.alignmentType?e(t,n):{}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";const t=34;function n(t,n,o,i){return"right"===o.alignment&&e.has(i,"qab-right")?t.width.screen-n-i["qab-right"]:e.has(i,"qab-left")?i["qab-left"]:(t.width.screen-n)/2}function o(e,t,n){return e.clientHeight-t-n["qab-bottom"]}return function(e,i,r,a,s){const c=e.getSiteMeasureMap(),p=function(e,n,o,i,r){return!o.hideText&&r["text-overflow"]&&e.width[`${i.id}maxTextWidth`]>0?n+t+e.width[`${i.id}maxTextWidth`]:n}(c,i.width,r,a,s),l=c.height[`${a.id}actionsContainer`];return{x:(c.clientWidth-c.width.screen)/2+n(c,p,r,s),y:o(c,l,s),width:p,height:l}}}.apply(t,o))||(e.exports=i)},function(e,t){e.exports=D},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";const t="warning";function n(){return{"wysiwyg.viewer.components.StripContainer":{deprecated:t,message:"This component will be deprecated"},"wysiwyg.viewer.components.ClipArt":{deprecated:t,message:"This component will be deprecated"}}}return{isComponentDeprecated:t=>"error"===e.get(n(),[t,"deprecated"]),shouldWarnForDeprecation:o=>e.get(n(),[o,"deprecated"])===t,getDeprecationMessage:t=>`${t}|${e.get(n(),[t,"message"])}`}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(389),n(390),n(391),n(392),n(393),n(394),n(395)],void 0===(i=function(e,t){"use strict";return{initialize(n){t.initialize(n),e.initialize(n)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(87),n(42)],void 0===(i=function(e,t,n){"use strict";function o(n,o,i,r){const a=r[o],s=a.getAttribute("data-svg-id"),c=a.querySelector("svg");if(!s||!c)return;const p=n.pointers.svgShapes.getSvgShapePointer(s),l=n.pointers.getInnerPointer(p,t.svgUtils.SVG_STORES.BOX_BOUNDARIES);if(n.dal.get(p)&&e.isEmpty(n.dal.get(l))){const t="preserve"===a.getAttribute("data-preserve-viewbox"),o=function(e){const[t,n,o,i]=e.getAttribute("data-viewbox").split(" ");return{x:t,y:n,width:o,height:i}}(a),i=t&&e.some(o)?o:function(e){const{x:t,y:n,width:o,height:i}=e.getBBox();return{x:t,y:n,width:o,height:i}}(c);e.some(i)&&n.dal.set(l,i)}}const i=["wysiwyg.viewer.components.VectorImage","wysiwyg.viewer.components.svgshape.SvgShape","wysiwyg.viewer.components.PopupCloseIconButton","wysiwyg.viewer.components.MediaControls","wysiwyg.viewer.components.MediaOverlayControls","wysiwyg.viewer.components.mobile.TinyMenu","wysiwyg.viewer.components.LoginSocialBar","wysiwyg.viewer.components.BackToTopButton"];return{initialize(t){n.registerShapesMeasureFunction(i,e.partial(o,t))}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(42)],void 0===(i=function(e,t){"use strict";function n(t){let n=t.getBoundingClientRect();const o=e.toArray(t.children),i=n.left,r=n.top;return n=function t(n,o){o=o||{left:-Number.MAX_VALUE,right:Number.MAX_VALUE,top:-Number.MAX_VALUE,bottom:Number.MAX_VALUE};const i=window.document.createRange();o=e.reduce(n,function(e,n){let o;const r=function(e){let t,n;const o=e.childNodes;let i="";for(t=0;t<o.length;t++)3===(n=o[t]).nodeType&&(i+=n.textContent.trim());return i}(n);return r?(i.selectNodeContents(n),(o=i.getBoundingClientRect()).width&&o.height&&(e.left=Math.min(e.left,o.left),e.top=Math.min(e.top,o.top),e.right=Math.max(e.right,o.right),e.bottom=Math.max(e.bottom,o.bottom))):e=t(n.children,e),e},o);return o}(o,n={left:n.right,right:n.left,top:n.bottom,bottom:n.top}),{dx:Math.floor(n.left)-i,dy:Math.floor(n.top)-r,width:Math.ceil(n.right-n.left),height:Math.ceil(n.bottom-n.top)}}function o(t,o,i,r){const a=r[o],s=t.pointers.general.getTextRuntimeOverallBorders(),c=e.isUndefined(a.dataset.minHeight)?0:parseInt(a.dataset.minHeight,10),p=a.querySelector(".measurer");if(i.minHeight[o]=Math.max(c,e.get(p,"offsetTop",a.offsetHeight)),a.textContent.trim()&&!t.siteAPI.isMobileView()){const e=n(a);t.siteAPI.isMobileView()||t.dal.set(t.pointers.getInnerPointer(s,o),e)}}return{initialize(n){t.registerAdditionalMeasureFunction("wysiwyg.viewer.components.WRichText",e.partial(o,n))}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(42),n(1)],void 0===(i=function(e,t,n){"use strict";t.registerMeasureChildrenFirst("wysiwyg.viewer.components.Group",!0),t.registerRequestToMeasureDom("wysiwyg.viewer.components.Group"),t.registerCustomMeasure("wysiwyg.viewer.components.Group",function(t,o,i,r,{isMobileView:a}){const s=n.dataUtils.getChildrenData(r.structure,a()),c=function(t,o){let i,r,a,s;return i=a=Number.MAX_VALUE,r=s=-Number.MAX_VALUE,e.forEach(t,function(e){const t=e.layout,c=o.left&&o.left[e.id]?o.left[e.id]:t.x,p=o.width&&o.width[e.id]?o.width[e.id]:t.width,l=o.top&&o.top[e.id]?o.top[e.id]:t.y,u=o.height&&o.height[e.id]?o.height[e.id]:t.height,d=n.boundingLayout.getBoundingLayout({x:c,y:l,width:p,height:u,rotationInDegrees:t.rotationInDegrees});i=Math.min(i,d.x),r=Math.max(r,d.x+d.width),a=Math.min(a,d.y),s=Math.max(s,d.y+d.height)}),{left:i,right:r,top:a,bottom:s}}(s,o);o.left[t]=r.layout.x,s.length>0&&(o.width[t]=c.right-c.left,o.height[t]=c.bottom-c.top,o.top[t]=r.layout.y+c.top,o.left[t]=r.layout.x+c.left,e.forEach(s,function(e){o.top[e.id]=e.layout.y-c.top,o.left[e.id]=e.layout.x-c.left}))}),t.registerPatcher("wysiwyg.viewer.components.Group",function(t,o,i,r,a){o.css(t,{width:i.width[t],height:i.height[t],top:i.top[t],left:i.left[t]});const s=n.dataUtils.getChildrenData(r.structure,a.isMobileView());e.forEach(s,function(e){o.css(e.id,{top:i.top[e.id],left:i.left[e.id]})})})}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(42)],void 0===(i=function(e,t,n){"use strict";function o(n,o,i){const r=i[n],a=t.contentAreaUtil.getContentAreaMarkerForElement(r);a&&e.merge(o,{left:{[n]:0},width:{[n]:a.offsetWidth},relativeToScreenOverrides:{[n]:{x:r.offsetLeft,width:r.offsetWidth}}})}n.registerAdditionalMeasureFunction("wysiwyg.viewer.components.StripColumnsContainer",function(n,o,i){const r=i[n],{left:a,width:s}=r.getBoundingClientRect(),c=t.contentAreaUtil.getContentAreaMarkerChildOnNode(r);c&&e.merge(o,{left:{[n]:0},width:{[n]:c.offsetWidth},relativeToScreenOverrides:{[n]:{x:a,width:s}}})}),n.registerAdditionalMeasureFunction("wysiwyg.viewer.components.StripContainerSlideShow",o),n.registerAdditionalMeasureFunction("wysiwyg.viewer.components.StripContainerSlideShowSlide",o),n.registerAdditionalMeasureFunction("wysiwyg.viewer.components.Column",function(n,o,i,r){const a=i[n],{left:s,width:c}=a.getBoundingClientRect(),p=t.contentAreaUtil.getContentAreaMarkerChildOnNode(a);p&&e.merge(o,{left:{[n]:Math.floor(p.getBoundingClientRect().left+r.getSiteX())},width:{[n]:p.offsetWidth},relativeToScreenOverrides:{[n]:{x:s,width:c}}})})}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(42)],void 0===(i=function(e,t){"use strict";t.registerAdditionalMeasureFunction("wysiwyg.viewer.components.VerticalLine",function(e,t,n){const o=n[e];t.width[e]=parseInt(o.style.width,10),t.left[e]=parseInt(o.style.left,10)})}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(42)],void 0===(i=function(e,t,n){"use strict";const o="platform.components.AppWidget";n.registerMeasureChildrenFirst(o,!0),n.registerRequestToMeasureDom(o),n.registerCustomMeasure(o,function(n,o,i,r,{isMobileView:a}){const[s]=t.dataUtils.getChildrenData(r.structure,a());s&&(o.width[n]=e.get(o,["width",s.id],s.layout.width),o.height[n]=e.get(o,["height",s.id],s.layout.height))}),n.registerPatcher(o,function(e,t,n){t.css(e,{width:n.width[e],height:n.height[e]})})}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(42),n(1)],void 0===(i=function(e,t,n){"use strict";t.registerAdditionalMeasureFunction("mobile.core.components.Page",function(e,t,o,i,r){t.pageBottomByComponents[e]=n.layoutUtils.getPageBottomChildEnd(t,o,i.isMobileView(),r)+t.containerHeightMargin[e]},"pageBottomPlugin")}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(397)],void 0===(i=function(e){"use strict";const t={};return t["wysiwyg.viewer.components.PopupContainer"]=e,t}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(1),n(22)],void 0===(i=function(e,t){"use strict";return function(n,o,i){const r={width:i.width,height:i.height},a=t.getPropertiesItem(n,o);r.x=e.compAlignmentUtils.getLeft(a,r.width,n.siteAPI.getScreenWidth(),n.siteAPI.getSiteWidth()),"fullWidth"===a.alignmentType&&(r.x=Math.max(r.x,0));const s=n.siteAPI.getSiteMeasureMap();return r.y=e.compAlignmentUtils.getTop(a,r.height,s.innerHeight.screen),r}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(2),n(3),n(6),n(22),n(24),n(37),n(8),n(5)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p){"use strict";const{DATA_TYPES:l}=n,u="custom",d=["dataQuery","designQuery"];function g(e,t,n){return n||c.shouldForceMaintainIDsOnSerialize(e,t)}function f(o,a,c,l,y,E,I){E=e.defaults({maintainIdentifiers:g(o,a,E.maintainIdentifiers)},E),l=l||function(t){const n=t.pointers.general.getMobileStructuresPointer(),o=t.dal.get(n),i={};return e.forOwn(o,function t(n){i[n.id]=e.omit(e.clone(n),"components"),e.forEach(n.components,t)}),i}(o);let S=o.dal.full.get(a);if(!S)return null;const h=t.displayedOnlyStructureUtil.isDisplayedComponent(a.id);S=e.reduce(d,function(e,n){return e[n]&&(E.itemId?e[n]=t.displayedOnlyStructureUtil.getUniqueDisplayedId(e[n],E.itemId):h&&(e[n]=o.dal.get(o.pointers.getInnerPointer(a,n)))),e},S);const P=o.pointers.full.components.getPageOfComponent(a),A=P.id;if(m(o,S,c,E,A,y,I),E.ignoreChildren)delete S.components;else{const r=e.clone(E);h&&(r.itemId=t.displayedOnlyStructureUtil.getItemId(a.id)),i.executeHook(i.HOOKS.SERIALIZE.CHILDREN_BEFORE,S.componentType,[S,r]),function(t,n,o,i,r,a,s,c){const p=t.pointers.full.components.getChildren(o);p.length&&(n.components=e.map(p,function(e){return f(t,e,null,r,a,s,c)}))}(o,S,a,0,l,y,r,I),E.maintainIdentifiers&&function(t,o,i,r,a,s,c){if(o.mobileComponents){const p=t.pointers.components.getPage(i,n.VIEW_MODES.MOBILE),l=t.pointers.full.components.getChildren(p);o.mobileComponents=e.map(l,function(e){return f(t,e,null,a,s,r,c)})}}(o,S,A,r,l,y,I)}E.maintainIdentifiers||(delete S.mobileComponents,delete S.id);const T={},v=[o,a,T];return i.executeHook(i.HOOKS.SERIALIZE.SET_CUSTOM,S.componentType,v),e.isEmpty(T)||(S[u]=e.defaults(S[u]||{},T)),a.type===n.VIEW_MODES.DESKTOP&&function(t,n,o,i,a,c,l){const u=t.pointers.components.getMobilePointer(n);if(p.isOpen("presetUploaderAddOn")){if(r.isExist(t,u)){const e={ignoreChildren:!0,maintainIdentifiers:!1};o.mobileStructure=f(t,u,null,null,c,e)}return}if(t.pointers.components.isPage(n))return;const d=a[n.id];if(d&&!d.isCustomPreset)return m(t,d,void 0,l,i,c),void(o.mobileStructure={layout:e.cloneDeep(d.layout)});l.shouldAddMobilePresets&&s.createMobilePreset(t,i,n,o)}(o,a,S,A,l,y,E),S}function m(t,n,i,r,a,s,c){s(n),function(t,n,o,i,r,a){const s=o.dataQuery;if(s){const c=n.repeatedItemIds,p=e.isArray(c)&&c.length>0;o.data=p?I(t,s,i,r,c,E):E(t,s,i,r,a),n.maintainIdentifiers&&o.data&&(o.data.id=y(s)),delete o.dataQuery}}(t,r,n,a,i,c),S(t,r.maintainIdentifiers,n,a),function(e,t,n,i){if(!n.mobileHintsQuery)return;const r=e.pointers.data.getMobileHintsItem(y(n.mobileHintsQuery),i);n.mobileHints=o.serializeDataItem(e,l.mobileHints,r,!0),t&&n.mobileHints&&(n.mobileHints.id=y(n.mobileHintsQuery));delete n.mobileHintsQuery}(t,r.maintainIdentifiers,n,a),function(e,t,n,i){if(!n.layoutQuery)return;const r=e.pointers.data.getItem(l.layout,y(n.layoutQuery),i);n.layoutResponsive=o.serializeDataItem(e,l.layout,r,!0),t&&n.layoutResponsive&&(n.layoutResponsive.id=y(n.layoutResponsive));delete n.layoutQuery}(t,r.maintainIdentifiers,n,a),P(t,r,n,a),A(t,r.maintainIdentifiers,n,a),function(e,t,n,i){if(n.behaviorQuery){const r=e.pointers.data.getBehaviorsItem(y(n.behaviorQuery),i);n.behaviors=o.serializeDataItem(e,l.behaviors,r,!0),t&&n.behaviors&&(n.behaviors.id=n.behaviorQuery),delete n.behaviorQuery}}(t,r.maintainIdentifiers,n,a),function(e,t,n,i){if(n.connectionQuery){const r=e.pointers.data.getConnectionsItem(y(n.connectionQuery),i);n.connections=o.serializeDataItem(e,l.connections,r,!0),t&&n.connections&&(n.connections.id=n.connectionQuery),delete n.connectionQuery}}(t,r.maintainIdentifiers,n,a),e.get(n,"modes.overrides")&&function(t,n,o,i,r){e.forEach(n,function(e){r(e),A(t,o.maintainIdentifiers,e,i),P(t,o,e,i),S(t,o.maintainIdentifiers,e,i)})}(t,n.modes.overrides,r,a,s)}function y(t){return e.isString(t)?t.replace("#",""):null}function E(e,t,n,i,r){const a=i||e.pointers.data.getDataItem(y(t),n);return o.serializeDataItem(e,l.data,a,!0,r)}function I(n,i,r,a,s,c){const p=o.createDataItemByType(n,"RepeatedData");return p.original=c(n,i,r,a),p.overrides=e.zipObject(s,e.map(s,function(e){const o=t.displayedOnlyStructureUtil.getUniqueDisplayedId(i,e);return c(n,o,r)})),p}function S(e,t,n,i){if(n.propertyQuery){const r=y(n.propertyQuery),a=e.pointers.data.getPropertyItem(r,i);n.props=o.serializeDataItem(e,l.prop,a,!t),t&&n.props&&(n.props.id=r),delete n.propertyQuery}}function h(e,t,n,i){const r=i||e.pointers.data.getDesignItem(y(t),n);return o.serializeDataItem(e,l.design,r,!0)}function P(t,n,o,i){const r=o.designQuery;if(r){const a=n.repeatedItemIds,s=e.isArray(a)&&a.length>0,c=t.pointers.data.getDesignItem(y(r),i);o.design=s?I(t,r,i,c,a,h):h(t,r,i,c),n.maintainIdentifiers&&o.design&&(o.design.id=y(r)),delete o.designQuery}}function A(e,t,n,i){if(n.styleId){const r=e.pointers.data.getThemeItem(n.styleId,i);"custom"===e.dal.get(e.pointers.getInnerPointer(r,"styleType"))?(n.style=o.serializeDataItem(e,l.theme,r,!0),t&&(n.style.id=n.styleId)):n.style=n.styleId,delete n.styleId}}return{serializeComponent:function(t,n,o,i,r,c,p,l){const u=f(t,n,o,c,p=p||e.noop,{shouldAddMobilePresets:s.shouldCreateMobilePreset(t,n),ignoreChildren:i,maintainIdentifiers:r},l);return u&&(u.activeModes=function(t,n){const o={};let i=t.pointers.full.components.getParent(n);for(;i;){const n=a.getComponentActiveModeIds(t,i);e.merge(o,n),i=t.pointers.full.components.getParent(i)}return o}(t,n)),u}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(5),n(23),n(47),n(400),n(402),n(112),n(54),n(93),n(94),n(404),n(92),n(409),n(410),n(1),n(6),n(2),n(411),n(111),n(412),n(113)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l,u,d,g,f,m,y,E,I,S,h){"use strict";return{mobileConversion:function(P){const A=P.ps,T=P.heuristicStrategy||A.dal.get(A.pointers.general.getMobileConversionHeuristicStrategy()),v=p.getConversionSettings({conversionType:"FULL",heuristicStrategy:T});function C(t){const n=e.map(t.updatedPageIds,e=>A.pointers.components.getPage(e,y.VIEW_MODES.MOBILE));e.forEach(n,e.partial(d.convertModes,A)),m.executeHook(m.HOOKS.MOBILE_CONVERSION.AFTER,null,[A,n,t.commitConversionResults]),t.commitConversionResults&&s.commitResults(A),e.forEach(t.updatedPageIds,e=>A.siteAPI.createPageAnchors(e,{forceMobileStructure:!0,applyGroupingAnchors:!0}))}function _(e,t,n){const o=A.pointers.components.getPage(t,y.VIEW_MODES.MOBILE),i=A.pointers.getInnerPointer(o,"mobileComponents");A.dal.full.set(i,e),c.updateHiddenComponentsOnPage(A,t),c.markPageAsInitialized(A,t),t===y.MASTER_PAGE_ID&&(g.applyDataToTinyMenu(A),g.addAdditionalStyles(A)),n&&C({updatedPageIds:[t],commitConversionResults:n.commitConversionResults})}function O(t,n){e.forEach(t,(e,t)=>_(e,t)),n&&C({updatedPageIds:e.keys(t),commitConversionResults:n.commitConversionResults})}function D(o,s){const c=e.values(n.conversionUtils.getAllCompsInStructure(o)).concat(n.conversionUtils.isMasterPage(o)?[]:[o]),u=!s;if(o.mobileComponents=[],e.forEach(c,e=>{const t=s&&n.conversionUtils.getComponentByIdFromStructure(e.id,s)||e,i=r.modifyComponentProperties(A,e,o.id,{override:u}),a=A.pointers.data.getPropertyItem(t.propertyQuery,o.id),c=!u&&a&&A.dal.isExist(a)?t.propertyQuery:e.propertyQuery;e.propertyQuery=t.propertyQuery=i||c,l.createConversionData(A,e,o.id)}),s){const t=e.filter(n.conversionUtils.getAllCompsInStructure(s),e=>h.isMobileOnlyComponentToBeMockedInDesktop(e));e.forEach(t,e=>l.createConversionDataForMobileOnlyComp(A,e,o.id))}return E.reduceAllTextsData(A,c,o.id),function(o,s){return a.applyPresetsToConversionData(A,o,s.id),e.forEach(o,o=>{if(t.isOpen("sv_persistentMobilePresets"))return void r.createPropertiesAccordingToConversionData(A,o,s.id);const a=e.get(o,["conversionData","preset"]);if(!a)return;const c=Math.random()<.1;a.conversionData.isCustomPreset&&c&&A.siteAPI.reportBI(i.events.CUSTOM_MOBILE_PRESET_APPLIED,{componentId:o.id,pageId:s.id});const l=p.getConversionSettings({conversionType:"MERGE_PRESET",heuristicStrategy:T});r.createPropertiesAccordingToPreset(A,a,s.id),n.conversion.mergeDesktopStructureWithMobile(o,a,l),e.set(o,["conversionData","preset"],a)}),s}(c,e.set(o,"conversionData",e.get(o,"conversionData",{})))}function w(t=!0){const o=e.get(s.getAggregatedPages(A),"desktop");O(e.mapValues(o,e=>{const t=D(f.objectUtils.cloneDeep(e)),o=S.extractNonLayoutComponentsFromPages(e,t),i=n.conversion.convertDesktopPageToMobile(t,n.conversionUtils.getChildren(t),v);return S.insertNonLayoutComponentsToPage(t,o),i}),{commitConversionResults:t})}function M(e){const t=n.conversionUtils.getComponentByIdFromStructure("MENU_AS_CONTAINER_TOGGLE",e),o=n.conversionUtils.getComponentByIdFromStructure("MENU_AS_CONTAINER",e);return t&&!o}const b=(t,o,i)=>o&&n.conversionUtils.isMasterPage(o)&&!M(o)?e.assign({desktopMasterPage:e.cloneDeep(t),mobileMasterPage:e.cloneDeep(o)},i):null,R=(t,n)=>{n&&t&&M(n)&&function(t){const n=(t,n,i)=>{A.siteAPI.reportBI(o.FAILED_TO_SEND_MOBILE_MENU_CONTAINER_CORRUPTION_MSG,{statusId:e.get(t,"status",0),errorType:n||"noErrorType",errorMessage:i||"noErrorMessage"})};f.ajaxLibrary.ajax({type:"POST",url:"https://jy75p2avi1.execute-api.us-west-2.amazonaws.com/prod/logDiffs",dataType:"json",headers:{"x-api-key":"NrelGcqXZH9pIBYc3zjA77SIpiBKUkp643H7P41F"},success(e,t,o){(e.errorType||e.errorMessage)&&n(o,e.errorType,e.errorMessage)},data:{vsi:`mobileConversionCorruption_${Date.now()}`,url:JSON.stringify(t),ssrDiverge:{clientMarkup:"",serverMarkup:""}},error:n})}(t)},N=(t,o)=>{const i=e.get(t,y.MASTER_PAGE_ID,null);if(!i)return!1;const r=e.get(o,y.MASTER_PAGE_ID,null);if(!r)return!0;const a=n.conversionUtils.getChildren(i),s=n.conversionUtils.getChildren(r),c={id:"SOSP_CONTAINER_CUSTOM_ID"};return e.some(a,c)&&!e.some(s,c)};return{getComponentsOrder:function(t){const o=p.getConversionSettings({heuristicStrategy:"accessibility",conversionType:"FULL"}),i=t=>e.get(t,["conversionData","componentsOrder"],(t=>e.map(t.components,"id"))(t)),r=A.pointers.page.getComponentsMapPointer(t,y.VIEW_MODES.DESKTOP),a=A.dal.get(r,!0),s=f.mobileUtils.buildDeepStructure(a[t],a);!function(t){t.mobileComponents=[];const o=e.values(n.conversionUtils.getAllCompsInStructure(t)).concat(n.conversionUtils.isMasterPage(t)?[]:[t]);e.forEach(o,e=>{l.createConversionData(A,e,t.id)})}(s),n.conversion.inspectStructure(s,n.conversionUtils.getChildren(s),o);const c=n.conversionUtils.getAllCompsInStructure(s),u=e=>"RESCALE_VIRTUAL_GROUP"===c[e].componentType;return e.reduce(c,(t,n)=>{if(!e.has(n,"components")||u(n.id))return t;const o=e.reduce(i(n),(e,t)=>e.concat(u(t)?i(c[t]):[t]),[]);return e.set(t,n.id,o)},{})},inspect:function(t=v){const o=A.dal.get(A.pointers.general.getPagesData());return e.transform(o,(o,i,r)=>{const a=i.structure.DESKTOP,s=f.mobileUtils.buildDeepStructure(a[r],a);D(s),n.conversion.inspectStructure(s,n.conversionUtils.getChildren(s),t);const c=e.transform(n.conversionUtils.getAllCompsInStructure(s),(t,n)=>(e.isEmpty(e.get(n,["conversionData","componentsOrder"]))||(t[n.id]=n.conversionData.componentsOrder),t),{});return o.reducedPages.push(s),o.componentsOrder.push(c),o},{reducedPages:[],componentsOrder:[]})},executeConversion:e=>n.conversion.convertDesktopPageToMobile(e,n.conversionUtils.getChildren(e),v),runMobileMergeOnAllPages:function(t){if(f.loggingUtils.performance.start(f.loggingUtils.performanceMetrics.MOBILE.MERGE_ALL_PAGES),!function(){const t=y.VIEW_MODES.DESKTOP,n=A.pointers.components;return e.every([n.getFooter(t),n.getHeader(t),n.getPagesContainer(t)],A.dal.isExist)}())return void A.siteAPI.reportBI(o.MOBILE_STRUCTURE_NOT_SAVED_DUE_TO_CORRUPTION);if(!u.hasMobileStructure(A))return void w(t);m.executeHook(m.HOOKS.MOBILE_MERGE.BEFORE,null,[A]);const i=s.getAggregatedPages(A);if(e.isEmpty(i))return;const r=i.desktop,a=i.mobile,c=b(r.masterPage,a.masterPage,{origin:"runMobileMergeOnAllPages",commitConversionResults:t});!function(t,o){const i=e.difference(e.keys(t),e.keys(o));e.forEach(i,e=>{const i=t[e],r=f.objectUtils.cloneDeep(i);o[e]=r,D(r);const a=S.extractNonLayoutComponentsFromPages(i,r);n.conversion.convertDesktopPageToMobile(r,[],v),S.insertNonLayoutComponentsToPage(r,a)})}(r,a);const l={};e.forOwn(r,(e,t)=>{const n=a[t];D(e,n),l[t]=S.extractNonLayoutComponentsFromPages(e,n),h.handleComponentsBeforeMobileAlgo(e,n)});const d=p.getConversionSettings({conversionType:"MERGE_ALL_PAGES",heuristicStrategy:T});d.fixMasterPageStructureOrder=N(r,a);const g=n.conversion.mergeDesktopPagesWithMobile(r,a,d);e.forOwn(r,(e,t)=>{const n=a[t];S.insertNonLayoutComponentsToPage(n,l[t]),h.handleComponentsAfterMobileAlgo(e,n)}),O(g,{commitConversionResults:t}),R(c,a.masterPage),f.loggingUtils.performance.finish(f.loggingUtils.performanceMetrics.MOBILE.MERGE_ALL_PAGES)},runMobileMergeOnPage:function(e,t,o){const i=b(e,t,{origin:"runMobileMergeOnPage",settings:o});D(e,t);const r=S.extractNonLayoutComponentsFromPages(e,t);h.handleComponentsBeforeMobileAlgo(e,t);const a=n.conversion.mergeDesktopStructureWithMobile(e,t,o);S.insertNonLayoutComponentsToPage(t,r),h.handleComponentsAfterMobileAlgo(e,t),_(a,e.id,{commitConversionResults:!1}),R(i,t)},runMobileConversionOnPage:function(e){f.loggingUtils.performance.start(f.loggingUtils.performanceMetrics.MOBILE.CONVERT_PAGE);const t=f.objectUtils.cloneDeep(e);D(t);const o=S.extractNonLayoutComponentsFromPages(e,t),i=n.conversionUtils.getChildren(t),r=n.conversion.convertDesktopPageToMobile(t,i,v);S.insertNonLayoutComponentsToPage(t,o),_(r,e.id,{commitConversionResults:!1}),f.loggingUtils.performance.finish(f.loggingUtils.performanceMetrics.MOBILE.CONVERT_PAGE)},runMobileConversionOnAllPages:w,syncMobileSite:function(){const t=s.getAggregatedPages(A);if(e.isEmpty(t))return;const o=e.difference(e.keys(t.desktop),e.keys(t.mobile));e.forEach(o,e=>{const n=f.objectUtils.cloneDeep(t.desktop[e]);t.mobile[e]=n}),I.validateMobileHintsOnPages(A,e.keys(t.desktop));const i={};e.forOwn(t.desktop,(e,n)=>{const o=t.mobile[n];D(e,o),i[n]=S.extractNonLayoutComponentsFromPages(e,o),h.handleComponentsBeforeMobileAlgo(e,o)});const r=n.conversion.synchronizePages(t.desktop,t.mobile);e.forOwn(t.desktop,(e,n)=>{const o=t.mobile[n];S.insertNonLayoutComponentsToPage(o,i[n]),h.handleComponentsAfterMobileAlgo(e,o)}),O(r,{commitConversionResults:!0})},applyConvertedComponentsMap:O,applyConvertedComponentsToPage:_,prepareConversion:D}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(401),n(1)],void 0===(i=function(e,t){"use strict";return t.loggingUtils.logger.register("documentServices/mobileConversion","event",e.events),{events:e.events}}.apply(t,o))||(e.exports=i)},function(e){e.exports={CUSTOM_MOBILE_PRESET_APPLIED:{endpoint:"editor",eventId:664,src:38,params:{component_id:"componentId",page_id:"pageId"}}}},function(e,t,n){var o,i;o=[n(0),n(2),n(8),n(3)],void 0===(i=function(e,t,n,o){"use strict";const i=(t,n)=>e.get(o.getMobileHintsItem(t,n),"hidden",!1);function r(t,n,i){const r=e.get(n,["conversionData","mobileProps"],{});if(e.isEmpty(r))return!1;const a=o.generateNewPropertiesItemId(),s=t.pointers.data.getPropertyItem(a,i),c=e.set(r,"id",a);return t.dal.set(s,c),n.propertyQuery=a,!0}return{modifyComponentProperties:function(o,r,a,s){const c=r.propertyQuery,p=r.componentType;if(!c||!p)return null;const l=o.pointers.data.getPropertyItem(c,a);if(!l)return null;const u=o.pointers.components.getPage(a,t.VIEW_MODES.DESKTOP),d=o.pointers.components.getComponent(r.id,u);if(i(o,d))return null;const g=o.dal.get(l);if(!g)return null;const f=n.public.getDefaultMobileProperties(o,r,g);if(!f)return null;const m=function(n){const o=n.replace("#","");return(e.startsWith(o,t.DOM_ID_PREFIX.MOBILE)?"":t.DOM_ID_PREFIX.MOBILE)+o}(c),y=o.pointers.data.getPropertyItem(m,a),E=o.dal.get(y)||{};return e.get(E,"metaData.autoGenerated",!0)||s.override?(e.mergeWith(E,g,{metaData:{autoGenerated:!0}},f,(t,n)=>{if(e.isArray(n)&&e.isArray(t))return n}),E.id=m,o.dal.set(y,E),m):m},createPropertiesAccordingToPreset:function t(n,o,i){r(n,o,i)&&delete o.conversionData.mobileProps,o.components&&e.forEach(o.components,e=>t(n,e,i))},createPropertiesAccordingToConversionData:r}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(6),n(54),n(23),n(1),n(3),n(2),n(24),n(91)],void 0===(i=function(e,t,n,o,i,r,a,s,c){"use strict";const p={STUDIO:"studio",DUPLICATE:"duplicate"},l={nestOverlayingSiblings:!1,keepIfVerticalDivider:!1,isSuitableForProportionGrouping:!1,hideByDefault:!1},u={GENERAL_HINTS_PROPERTIES:["id","metaData","type"],GENERAL_PRESET_DATA:["author"],SIZE_DATA:["recommendedHeight","recommendedWidth","recommendedScale","originalCompId"],OFFSET_DATA:["offsetX","offsetY","offsetOrigin","orderIndex"]},d=(e,t,n)=>e.pointers.components.getPage(t,n||a.VIEW_MODES.DESKTOP),g=t=>(t=>t&&e.some(u.SIZE_DATA,n=>e.has(t,n)))(t)||(t=>t&&e.some(u.OFFSET_DATA,n=>e.has(t,n)))(t),f=(t,n,o)=>e.get(r.getMobileHintsItemById(t,o.mobileHintsQuery,n),"orderIndex");function m(t,n){const a=t.pointers.components.getPageOfComponent(n),c=function(t,n,o){const r=e.set({},o,s.getMobileActiveModesMap(t,o)),a=t.dal.full.get(n);return i.fullToDisplayedJson.getDisplayedJson(a,r,o).structure}(t,n,a.id);if(!e.get(c,"mobileStructure")){const o=t.pointers.components.getChildren(n);return void e.forEach(o,e=>m(t,e))}const p=o.mobileHints.parseMobilePreset(c);!function(t,n,o){e.forEach(n,e=>{const n=t.pointers.full.components.getComponent(e,o),i=t.pointers.getInnerPointer(n,"mobileStructure");t.dal.full.remove(i)})}(t,e.keys(p),a),function(t,n,o){e.forEach(n,(e,n)=>{const i=t.pointers.components.getComponent(n,o);r.updateMobileHintsItem(t,i,e)})}(t,p,a)}function y(t,n){const o=t.pointers.components.getChildren(n);e.forEach(o,y.bind(null,t));const i=r.getMobileHintsItem(t,n);e.get(i,"author")===p.DUPLICATE&&r.deleteMobileHintsItem(t,n)}function E(e,t,n){const o=e.pointers.components.getComponent(t,d(e,n,a.VIEW_MODES.MOBILE));if(!o||!e.dal.isExist(o))return null;if(!c.isMobileComponentPropertiesSplit(e,o))return null;const i=r.getPropertyItemPointer(e,o);return i&&e.dal.isExist(i)?e.dal.get(i):null}function I(t,n,o){if(t.pointers.components.isMobile(n))return;const i=r.getMobileHintsItem(t,n);if(!g(i))return;const a=e.omit(i,[...o,...u.GENERAL_HINTS_PROPERTIES]);r.deleteMobileHintsItem(t,n),e.isEmpty(a)||r.updateMobileHintsItem(t,n,a)}function S(t,n){const o=e.concat(u.OFFSET_DATA,u.SIZE_DATA,u.GENERAL_PRESET_DATA);I(t,n,o);const i=t.pointers.components.getChildren(n);e.forEach(i,e=>S(t,e))}function h(e,t){I(e,t,u.OFFSET_DATA)}function P(t,n){const o=t.pointers.components.getChildren(n);e.forEach(o,e=>h(t,e)),A(t,n)}function A(e,t){I(e,t,["recommendedHeight"]);const n=e.pointers.components.getParent(t);n&&!e.pointers.components.isPage(n)&&A(e,n)}const T={[t.HOOKS.CHANGE_PARENT.BEFORE]:(e,t,n)=>{if(e.pointers.components.isMobile(t))return;S(e,t),P(e,n);const o=e.pointers.components.getParent(t);P(e,o)},[t.HOOKS.ADD_ROOT.BEFORE]:(e,t,n)=>{e.pointers.components.isMobile(t)||e.pointers.components.isPage(t)||(P(e,n),h(e,t),e.pointers.components.isPage(n)||S(e,t))},[t.HOOKS.REMOVE.BEFORE]:(e,t,n)=>{if(e.pointers.components.isMobile(t)||e.pointers.components.isPage(t)||n)return;const o=e.pointers.components.getParent(t);P(e,o)}};function v(t,n,o){return e.isEmpty(n)||e.every(n,n=>e.isNumber(f(t,o,n)))?e(n).reject(["conversionData.mobileHints.hidden",!0]).sortBy(e=>f(t,o,e)).map("id").value():null}return{createDuplicateMobilePreset:function(t,o,r,a){const s=t.pointers.components.getMobilePointer(r);if(!o||!s||!t.dal.isExist(s))return;const c=t.siteAPI.isQaMode(),l=n.getCommittedMobileComponent(t,o,s);!l||!c&&g(a.mobileHints)||e.set(a,"mobileStructure",{layout:i.objectUtils.cloneDeep(l.layout),metaData:{originalCompId:s.id,author:p.DUPLICATE}})},removeAutomaticPresets:y,initialize:function(){t.registerHook(t.HOOKS.ADD_ROOT.AFTER,m),e.forEach(T,(e,n)=>t.registerHook(n,e)),t.registerHook(t.HOOKS.MOBILE_CONVERSION.AFTER,(t,n,o)=>{o&&e.forEach(n,e=>y(t,t.pointers.components.getPage(e.id,a.VIEW_MODES.DESKTOP)))})},applyPresetsToConversionData:function t(n,o,i){e.forEach(o,o=>{const a=r.getMobileHintsItemById(n,o.mobileHintsQuery,i);if(t(n,o.components,i),!g(a))return;const s=E(n,a.originalCompId,i);e.assign(o.conversionData,{mobileScale:a.recommendedScale||o.conversionData.mobileScale,mobileProps:s||o.conversionData.mobileProps},l),e.assign(o.conversionData.mobileHints,e.pick(a,["recommendedHeight","recommendedWidth","offsetX","offsetY","offsetOrigin"]),{recommendedComponentsOrder:v(n,o.components,i)})})},testAPI:{getRecommendedComponentsOrder:v,handleMobileStructure:m,getMobilePropsIfForked:E,removePresetData:I,removeAllPresetDataRecursively:S,removeOffsetDataOfChildren:P,removeHeightOfParent:A}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(23),n(12),n(10),n(8),n(3),n(9),n(405)],void 0===(i=function(e,t,n,o,i,r,a,s){"use strict";function c(e,t){const n=t.styleId;return n?o.styles.get(e,n):null}function p(t,n,o){return e.get(n.designQuery&&r.getDesignItemById(t,n.designQuery.replace("#",""),o),"background")}function l(t,n,o){const i=e.get(n,"mobileHintsQuery","");return e.get(i?r.getMobileHintsItemById(t,i,o):{},"hidden",!1)}function u(t,n,o){return e.has(p(t,n,o),"mediaRef")}function d(t,n){const o=e.get(t,"conversionData",{}),i=e.assign(o,n);e.assign(t,{conversionData:e.omitBy(i,e.isNull)})}return{createConversionData:function(o,r,g){const f=i.public.getMobileConversionConfig(o,r,g),m=e.assign({},e.clone(r),{conversionData:f}),y={},E=function(t,n){return+(""+e.get(c(t,n),["style","properties","brw"],"0")).match(/\d/g).join("")}(o,r);y.borderWidth=E||null,y.isSolidColorBackground=function(t,n,o){return"columns"===e.get(n,["conversionData","category"])?1===e.size(n.components)&&!u(t,n.components[0],o):("column"===e.get(n,["conversionData","category"])||"wysiwyg.viewer.components.StripContainer"===n.componentType)&&!u(t,n,o)}(o,m,g)||null;const I=function(t,n,o,i){if(i||"column"===e.get(n,["conversionData","category"]))return+e.get(p(t,n,o),"colorOpacity",1);if("mobile.core.components.Container"!==n.componentType)return 1;const r=c(t,n),a=e.get(r,"skin");return"wysiwyg.viewer.skins.area.RectangleArea"!==a&&"wysiwyg.viewer.skins.area.DefaultAreaSkin"!==a?1:+e.get(r,["style","properties","alpha-bg"],1)}(o,m,g,y.isSolidColorBackground);y.isSemiTransparentContainer=I<1,y.isTransparentContainer=!E&&0===I,y.backgroundColor=function(t,n,o){const i=n.designQuery?e.get(p(t,n,o),"color",null):e.get(c(t,n),["style","properties","bg"],null);return i?i.replace(/[{}]/g,""):null}(o,r,g),y.shouldApplyPreset=function(t,o,i){const r=e.get(o,["modes","definitions"]);if(e.isEmpty(r))return!0;const a=t.pointers.data.getPropertyItem(o.propertyQuery,i);if(!a)return!0;const s=t.dal.get(a)||{},c=s.mobileDisplayedModeId&&e.find(r,"modeId",s.mobileDisplayedModeId);return e.get(c,"type")!==n.siteConstants.COMP_MODES_TYPES.DEFAULT}(o,r,g),y.mobileHints={hidden:l(o,r,g)};const S=s.getComponentSpecificConversionData(o,r,g);e.assign(y,S);const h=o.dal.get(o.pointers.general.getDockedRuntimeLayout());e.has(r,["layout","docked"])&&h[r.id]&&e.assign(r.layout.docked,h[r.id]),y.isScreenWidth=y.isScreenWidth||n.dockUtils.isHorizontalDockToScreen(r.layout)||n.dockUtils.isFullPageComponent(r.layout)||null,y.isNonContainableFullWidth=a.isNonContainableFullWidth(r.componentType),e.assign(y,f),d(r,y),function(o){e.defaults(o,{layout:{}}),delete o.layout.anchors,t.conversionUtils.isSiteSegmentOrPage(o)||t.conversionUtils.isMasterPage(o)?e.assign(o.layout,{fixedPosition:!1}):e.defaults(o.layout,{height:e.get(o,["conversionData","layoutLimits","minHeight"]),width:e.get(o,["conversionData","layoutLimits","minWidth"])},{height:n.siteConstants.COMP_SIZE.MIN_HEIGHT,width:n.siteConstants.COMP_SIZE.MIN_WIDTH,x:t.conversionConfig.COMPONENT_MOBILE_MARGIN_X,y:t.conversionConfig.COMPONENT_MOBILE_MARGIN_Y})}(r)},createConversionDataForMobileOnlyComp:function(e,t,n){d(t,i.public.getMobileConversionConfig(e,t,n)||{})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(406),n(407)],void 0===(i=function(e,t,n){"use strict";const o=(e,t)=>n.getVectorImageConversionData(t),i={"wysiwyg.viewer.components.SiteButton":t.getButtonConversionData,"wysiwyg.viewer.components.VectorImage":o,"wysiwyg.viewer.components.WPhoto":o,"wysiwyg.viewer.components.ClipArt":o};return{getComponentSpecificConversionData:function(t,n,o){return e.get(i,n.componentType,e.noop)(t,n,o)||null}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(23),n(1),n(10)],void 0===(i=function(e,t,n,o){"use strict";const i=14,r=10,a=24,s={breakPoints:[16,19,24],value:[42,48,54]},c={breakPoints:[7,14,20,30,100],value:[120,160,200,240,280]},p=(t,n)=>{const o=n.breakPoints,i=Math.min(t,e.last(o)),r=e.findIndex(o,e=>i<=e);return n.value[r]},l=(e,t)=>{return{height:p(e,s),width:p(t,c)}};return{getButtonConversionData:function(s,c,p){const u=function(t,n,r){if(!n)return i;const a=o.styles.get(t,n,r),s=e.get(a,["style","properties","fnt"],""),c=e.get(s.match(/\d+px/),"0",`${i} + 'px'`);return+e.get(c.match(/\d+/),"0",i)}(s,c.styleId,p),d=function(t,n,o){if(!n)return r;const i=t.pointers.data.getDataItem(n.replace("#",""),o);return e.get(t.dal.get(i),"label","").length||r}(s,c.dataQuery,p),g=Math.min(t.textUtils.convertFontSizeByTextLength(u,d),a),f={};return f.fixedSize=l(g,d),f.mobileScale=function(e,t){return e/n.mobileUtils.convertFontSizeToMobile(t,1)}(g,u),f}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(408)],void 0===(i=function(e,t){"use strict";const n={upToSize:60,convert:t.roundToNearestDecade},o={upToSize:400,convert:t.scaleByFactor,paramsForConvert:[t.buildScaleFactorDataStructure(.7,60,t.roundToNearestDecade)]},i={upToSize:980,convert:e.constant(280)},r=(e,r)=>{const a=[t.buildRangeDataStructure(n.upToSize,n.convert),t.buildRangeDataStructure(o.upToSize,o.convert,o.paramsForConvert),t.buildRangeDataStructure(i.upToSize,i.convert)],s=t.scaleByRange(e,a);return{width:s,height:t.scaleProportionally(r,s,e)}};return{getVectorImageConversionData:function(t){const n=e.get(t,["layout","width"],0),o=e.get(t,["layout","height"],0);return{fixedSize:r(n,o)}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";return{roundToNearestDecade:e=>10*Math.round(e/10),buildRangeDataStructure:(e,t,n)=>({upToValue:e,valueHandler:t,additionalParamsForHandler:n||[]}),buildScaleFactorDataStructure:(e,t,n)=>({scaleFactor:e,minValueLimit:t,roundFunction:n||Math.round}),scaleByRange:(t,n)=>{const o=Math.min(t,e.last(n).upToValue),i=e.find(n,e=>o<=e.upToValue),r=i.valueHandler;return e.isFunction(r)?r(t,...i.additionalParamsForHandler):r},scaleByFactor:(e,t)=>{const n=e*t.scaleFactor,o=t.roundFunction(n);return Math.max(t.minValueLimit,o)},scaleProportionally:(e,t,n)=>{const o=t&&n?t/n:1;return Math.round(e*o)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(24)],void 0===(i=function(e,t){"use strict";return{convertModes:function(n,o){const i=n.pointers.components.getDesktopPointer(o),r=n.pointers.full.components.getChildrenRecursively(i),a=e(i).concat(r).flatMap(e=>t.getComponentModes(n,e)).compact().filter(n=>"copyOverrides"===e.get(t.metaData,[n.type,"mobileConversionConfig"])).map("modeId").value();if(e.isEmpty(a))return;const s=n.pointers.full.components.getChildrenRecursively(o);e.forEach(s,t=>{const o=n.pointers.components.getDesktopPointer(t),i=n.dal.full.get(n.pointers.componentStructure.getModes(o));if(!i)return;const r=e(i.overrides).map(t=>e.defaults({modeIds:e.intersection(t.modeIds,a)},t)).filter(t=>e.size(t.modeIds)).value();e.isEmpty(r)||n.dal.full.set(n.pointers.componentStructure.getModes(t),e.defaults({overrides:r},i))})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(3),n(16),n(8),n(2),n(10),n(23)],void 0===(i=function(e,t,n,o,i,r,a){"use strict";const s="TinyMenu",c="TINY_MENU",p=(e,t)=>o.public.getMobileConversionConfigByName(e,e.dal.get(t),"tinyMenuDataRefName",i.MASTER_PAGE_ID);return{applyDataToTinyMenu:function(o){const r=o.pointers.components.getPage(i.MASTER_PAGE_ID,i.VIEW_MODES.MOBILE),a=o.pointers.components.getComponent(i.MOBILE_ONLY_COMPONENTS.TINY_MENU,r);if(!a||!o.dal.isExist(a))return;!function(o,i){const r=o.pointers.getInnerPointer(i,"dataQuery");o.dal.set(r,`#${c}`);const a=n.services.createDataItemByType(s),p=e.assign({id:c},a),l=o.pointers.data.getDataItemFromMaster("TINY_MENU");t.setDataItemByPointer(o,l,p,"data")}(o,a),function(e,n){const o=e.pointers.getInnerPointer(n,"connectionQuery");e.dal.set(o,"TINY_MENU_CONNECTION"),t.updateConnectionsItem(e,n,[])}(o,a);const l=function(t){const n=t.pointers.components.getHeader(i.VIEW_MODES.DESKTOP),o=t.pointers.components.getChildrenRecursively(n),r=t.pointers.components.getPage(i.MASTER_PAGE_ID,i.VIEW_MODES.DESKTOP),a=t.pointers.components.getChildrenRecursively(r),s=e.unionBy(o,a,e=>e.id);return e.find(s,e=>p(t,e))}(o);if(!l)return;const u=e.get(o.dal.get(l),"dataQuery"),d=t.getDataItem(o,a),g=p(o,l);e.set(d,g,u),t.updateDataItem(o,a,d);const f=t.getPlatformAppConnections(o,l);t.updateConnectionsItem(o,a,f)},addAdditionalStyles:function(t){e.forOwn(a.mobileOnlyComponents.getAdditionalStyles(),(n,o)=>{if(r.styles.get(t,o))return;const i=e.assign({type:"TopLevelStyle",styleType:"system",id:o,metaData:{isHidden:!1,isPreset:!1}},n);r.styles.createAndAddStyleItem(t,i,o)})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(10),n(0),n(3),n(23),n(1)],void 0===(i=function(e,t,n,o,i){"use strict";function r(n,o){if(t.isEmpty(o))return null;if(/^#\w{3,6}$/.test(o))return o;const i=t.get(o.match(/^\{(color_\d+)\}$/),1,"");return i?e.colors.get(n,i):null}const a=e=>/^color_\d+$/.test(e),s=e=>/^font_\d{1,10}$/.test(e),c=e=>t.pickBy(e,t.identity);function p(n,o){if(a(o))return c({textColor:e.colors.get(n,o)});if(!s(o))return{};const i=e.fonts.get(n,o),p=/^\w+\s\w+\s\w+\s(-?\d+(?:\.\d+)?)px\/[\w\-.]*\s('[^']*'|[\w#$%&'()*+,.:;?@^_`~-]*)\s({\w+}|#\w{3,6})?$/.exec(i),l=r(n,t.get(p,3,""));return c({fontSize:+t.get(p,1,0),fontName:t.get(p,2),textColor:l})}function l(e){return t.size(e)?(e=` ${e}`,c({fontSize:+t.get(e.match(/font-size:\s?(\d+(\.\d+)?)px/i),1,0),textAlignment:t.get(e.match(/text-align:\s?(left|right|center)/i),1),textColor:t.get(e.match(/[^-]color:\s*(#[\da-f]{3,6}|[a-z]{3,20})/i),1)})):{}}function u(e,n,i={fontSize:0,fontName:"",textAlignment:"left",textColor:""}){const r={textLength:0,accumulatedFontSize:0,accumulatedNormalizedFontSize:0,textAlignments:[],textColors:[],fontNames:[]};if(t.get(n,"nodeType")===n.TEXT_NODE){const e=n.textContent.trim().length;return t.assign({textLength:e,accumulatedFontSize:e*i.fontSize,accumulatedNormalizedFontSize:e*o.textUtils.getFontSizeByFontName(i.fontName,i.fontSize)},e>0?{textAlignments:[i.textAlignment],fontNames:[i.fontName],textColors:[i.textColor]}:{textAlignments:[],textColors:[],fontNames:[]})}if(!n||!t.size(n.childNodes))return r;const a={};if(n.nodeType===n.ELEMENT_NODE){const o=n.getAttribute("class"),i=n.getAttribute("style");t.defaults(a,l(i),p(e,o))}return t.defaults(a,i),t.reduce(n.childNodes,(t,n)=>{const o=u(e,n,a);return{fontNames:[...t.fontNames,...o.fontNames],textColors:[...t.textColors,...o.textColors],textAlignments:[...t.textAlignments,...o.textAlignments],textLength:t.textLength+o.textLength,accumulatedFontSize:t.accumulatedFontSize+o.accumulatedFontSize,accumulatedNormalizedFontSize:t.accumulatedNormalizedFontSize+o.accumulatedNormalizedFontSize}},r)}function d(e,n){const r=u(e,n),a=r.textLength,s=r.accumulatedNormalizedFontSize/a,c=function(e,t){return o.textUtils.convertFontSizeByTextLength(e,t)/i.mobileUtils.convertFontSizeToMobile(e,1)}(s,a),p=r.accumulatedFontSize/r.textLength,l=i.mobileUtils.convertFontSizeToMobile(p||0,1);return{fontNames:t.uniq(r.fontNames),textLength:a,actualTextWidth:"undefined"!=typeof window?n.clientWidth+1:void 0,textAlignments:t.uniq(r.textAlignments),textColors:t.uniq(r.textColors),averageFontSize:p,mobileAdjustedAverageFontSize:l,averageNormalizedFontSize:s,mobileScale:c}}return{reduceAllTextsData:function(e,r,a){const s=i.fragment.document.createElement("DIV"),c=t(r).filter(o.conversionUtils.isTextComponent).map(o=>(function(e,o,r,a){const s=i.fragment.document.createElement("DIV");return s.innerHTML=o.dataQuery?t.get(n.getDataItemById(e,o.dataQuery.replace("#",""),r),"text",""):"",s.setAttribute("style","opacity: 0; max-width: none !important; white-space: nowrap; position: absolute"),a.appendChild(s),{htmlElement:s,component:o}})(e,o,a,s)).value();window.document.body.appendChild(s),t.forEach(c,n=>t.assign(n.component.conversionData,d(e,n.htmlElement))),window.document.body.removeChild(s)},testAPI:{getTextColorValue:r,getFontDataByClassName:p,getFontDataByStyleAttribute:l,getAccumulatedTextStats:u}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(23)],void 0===(i=function(e,t){"use strict";function n(i){const r=t.conversionUtils.getChildren(i),a=e.remove(r,o);return e.concat(a,e.flatMap(r,n))}function o(t){const n=e.get(t,["conversionData","desktopOnly"],!1),o=e.get(t,["conversionData","nonLayoutComponent"],!1);return!n&&o}return{extractNonLayoutComponentsFromPages:function(o,i){const r=n(o);return i&&!e.isEmpty(r)&&function n(o,i){const r=t.conversionUtils.getChildren(o);e.remove(r,t=>e.some(i,["id",t.id])),e.forEach(r,e=>n(e,i))}(i,r),r},insertNonLayoutComponentsToPage:function(n,o){!function(n,o){e.forEach(o,t=>e.assign(t.layout,{width:0,height:0,x:0,y:0})),t.conversionUtils.addComponentsTo(n,o)}(function(e){const n=t.conversionUtils.getChildren(e);return 1===n.length&&"wysiwyg.viewer.components.PopupContainer"===n[0].componentType?n[0]:e}(n),o)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(50),n(1),n(414),n(167)],void 0===(i=function(e,t,n,o,i){"use strict";const{viewerCompsService:r}=t;return{loadExternalComponentsForDS:(t,r)=>{const a=(()=>`${requirejs.toUrl("wix-ui-santa")}/`)(),s="ALL"===r;if(!s&&!e.isArray(r)){if(r)throw new Error(`componentsToLoad in DS config must be either the string 'ALL' or an array of component types. received ${typeof r} instead`);return}return(()=>s?(e=>o.loadAll(e))(a):((t,n)=>Promise.all(e(n).filter(o.exists).map(e=>o.load(e,t)).value()))(a,r))().then(n=>{e(n).flatMap().forEach(e=>i.registerComponent(t,e))}).catch(e=>n.log.error(`Could not load external components from ${a}`,e))},loadViewerComponents:function(e,t){return Promise.all(t.map(e=>r.loadAndRegister(e))).catch(e=>{n.log.error(`Error loading viewer components during DS init: ${t}`,e)})}}}.apply(t,o))||(e.exports=i)},function(e,t){e.exports=w},function(e,t,n){var o,i;o=[n(0),n(12),n(150),n(158)],void 0===(i=function(e,t,n,o){"use strict";const i=["disableable","rotatable","moveDirections","resizableSides","canBeFixedPosition","layoutLimits","mobileConversionConfig","defaultMobileProperties"],r={isRepeatable:!1},a={isExternal:!0},s=e.invert(o),c=e=>s[e];const p={registerMetaData:(e,o)=>{n[e]?function(e){const n=new Error(`Unable to register a component metaData for type "${e}" that is already registered`);t.integrations.ravenUtils.captureError(n,{tags:{metaDataRegistration:!0,failedMetaDataRegistration:!0},extra:{componentType:e}})}(e):n[e]=o},registerExternalMetaData:(n,o)=>{const s=function(t){return e(t).keys().reject(c).value()}(o);s.length&&function(e,n,o){const i=new Error(`Unable to use illegal meta data key(s) "${e.join(", ")}" for component "${n}"`);t.integrations.ravenUtils.captureError(i,{tags:{metaDataRegistration:!0},extra:{illegalKeys:e,metaDataToRegister:o}})}(s,n,o=e.omit(o,s));const l=e(o).pick(i).defaults(r).assign(a).value();return p.registerMetaData(n,l)},unregisterExternalMetaData:t=>{(t=>e.get(n,[t,"isExternal"],!1))(t)&&delete n[t]}};return p}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return function(e,t,n,o){o.data.compId=t.id}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(0),n(1),n(10)],void 0===(i=function(e,t,n){"use strict";const o=t.vectorImageConversionUtils.vectorImageDefaults,i=t.vectorImageConversionUtils.convertStyleToDesignData,r=t.vectorImageConversionUtils.convertStyle,a=t.vectorImageConversionUtils.convertData,s=t.vectorImageConversionUtils.convertProperties,c=t.vectorImageConversionUtils.convertStructure;return{beforeAdd(t,p,l,u){u.design=u.design||{type:"VectorImageDesignData"};const d=u.skin,g=(t.pointers.components.getPageOfComponent(l)||t.pointers.full.components.getPageOfComponent(l)).id,f=e.isString(u.style),m=f?n.styles.get(t,u.style,g):u.style,y=u.data,E=u.design,I=u.props;c(u,o),r(m,o),i(E,m,o),a(y,o,d),s(I,o),function(t){const n=e.get(t,["modes","overrides"]);e.forEach(n,function(t){t.style&&(t.design={},i(t.design,t.style,o),e.unset(t,"style"))})}(u),function(t){if("RepeatedData"===t.data.type){const n={type:"RepeatedData",original:t.design,overrides:{}};e.forEach(t.data.overrides,(o,i)=>{n.overrides[i]=e.clone(t.design)}),t.design=n}}(u),f&&n.styles.update(t,u.style,m,g)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{beforeAdd(e,t,n,o){o.componentType="wysiwyg.viewer.components.WPhoto",o.props.displayMode="fill"}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(0),n(107),n(4),n(114),n(18)],void 0===(i=function(e,t,n,o,i){"use strict";const r=["rd","brd","brw","alpha-brd"],a={"wysiwyg.viewer.components.BoxSlideShowSlide":"wysiwyg.viewer.components.BoxSlideShow","wysiwyg.viewer.components.StateBoxState":"wysiwyg.viewer.components.StateBox","wysiwyg.viewer.components.StateStripState":"wysiwyg.viewer.components.StateStrip","wysiwyg.viewer.components.StripContainerSlideShowSlide":"wysiwyg.viewer.components.StripContainerSlideShow"};return{updateSlidesStyle:function(t,n,a,s){const c=e.omitBy(s.style.properties,function(e,t){return a.style.properties[t]===e});if(e(c).keys().intersection(r).isEmpty())return;const p=o.getNonMasterChildren(t,n),l={style:{properties:{}}};e.forEach(r,function(e){l.style.properties[e]=c[e]}),e.forEach(p,function(n){!function(t,n,o){const r=i.style.get(t,n);let a=e.cloneDeep(r);a=e.merge(a,o),i.style.fork(t,n,a)}(t,n,l)})},verifySlideShowStructureOnAdd:function(n,o,i,r){const a=t.getSlidesFromChildrenByStructure(r.components),s=a.length>0,c=e.find(a,function(e){return e.componentType!==t.getMatchingChildSlideType(r.componentType)});if(!s||c)throw new Error("Invalid slideShow structure definition")},verifySlideShowStructureOnDelete:function(o,i,r){if(r||function(e,t){const o=e.pointers.components.getParent(t),i=n.getType(e,t);return n.getType(e,o)!==a[i]}(o,i))return;const s=o.pointers.components.getParent(i),c=o.pointers.components.getChildren(s),p=e.map(c,function(e){return{componentType:n.getType(o,e)}});if(1===t.getSlidesFromChildrenByStructure(p).length)throw new Error("can't delete the last slide")}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(107),n(4),n(8),n(11)],void 0===(i=function(e,t,n,o,i){"use strict";function r(e,n,i){return o.getComponentType(e,i)===t.getMatchingChildSlideType(n)}function a(t,o,i){return e.reject(n.getChildren(t,o),r.bind(this,t,i))}function s(t,o,i){return e.filter(n.getChildren(t,o),r.bind(this,t,i))}function c(t,i){const r=o.getComponentType(t,i),c=e.find(s(t,i,r),e=>n.isRenderedOnSite(t,e)),p=a(t,i,r);return c?[c].concat(p):p}function p(e,t,i){if(e.pointers.components.isPage(t))return null;let r=n.getContainer(e,t);for(;r&&!e.pointers.components.isPage(r);){if(o.getComponentType(e,r)===i)return r;r=n.getContainer(e,r)}return null}function l(e,n,i){const r=o.getComponentType(e,n),a=t.getMatchingChildSlideType(i);return"MOBILE"!==n.type&&r!==a&&!!p(e,n,i)}return{getMasterChildren:a,getNonMasterChildren:s,getCurrentRenderedChildren:c,isMasterChild:function(e,n,o){const i=t.getMatchingChildSlideType(o);return l(e,n,o)&&!p(e,n,i)},canBeMasterChild:l,toggleMasterChild:function(n,r,a){const s=p(n,r,a),l=t.getMatchingChildSlideType(a);if(s&&o.getComponentType(n,r)!==l){let t;t=p(n,r,l)?s:e.find(c(n,s),e=>o.getComponentType(n,e)===l),i.setContainer(n,void 0,r,t)}},getParentCompWithOverflowHidden:function(e,t,o){const i=p(e,t,o);return n.properties.get(e,i).shouldHideOverflowContent?i:null}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(3),n(1)],void 0===(i=function(e,t,n){"use strict";return{setLinksCustomData:function(n,o,i){const r=t.getDataItem(n,o);return e.has(r,"linkList")&&r.linkList.length>0&&(i.linkList=r.linkList),{success:!0,description:"Added text links to the custom component structure"}},duplicateLinksDataItems:function(o,i,r){if(!r.custom)return{success:!0,description:"Duplicated text links data items"};const a=e.cloneDeep(r.custom.linkList);let s=r.data.text;return e.forEach(a,function(e){if(e.id){const t=n.guidUtils.getUniqueId("link","-");s=s.replace(`#${e.id}`,`#${t}`),e.id=t}}),function(e,n,o,i){const r=t.getDataItem(e,n);r.text=o,r.linkList=i,t.updateDataItem(e,n,r)}(o,i,s,a),{success:!0,description:"Duplicated text links data items"}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(68),n(169),n(4),n(28)],void 0===(i=function(e,t,n,o,i){"use strict";function r(t,n){const r=o.data.get(t,n);return e.get(t.siteAPI.getClientSpecMap(),[r.applicationId,"appDefinitionId"])===i.APP_DEF_ID.CHAT}return{addedGluedWidget:function(e,o){r(e,o)&&!function(e){return n.isEnabled(e)}(e)&&t.addQuickActionBar(e)},willRemoveGluedWidget:function(n,o){r(n,o)&&e(t.getActions(n)).reject("isDynamic").isEmpty()&&t.removeQuickActionBar(n)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(68),n(95),n(18),n(3)],void 0===(i=function(e,t,n,o,i){"use strict";return{enforceIconLimitations:function(r,a,s){const c=e.defaults({},s,i.getDataItem(r,a));t.validateActionItemData(c),e.assign(s,e.pick(c,["itemType","icon","text"]));const p=e.find(n.quickActionIconsData,{hash:c.icon}),l=o.style.get(r,a);l.style.properties.color=p.color,o.style.update(r,a,l)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(69),n(4),n(7),n(120)],void 0===(i=function(e,t,n,o,i){"use strict";function r(e,o){if(t.isProvisioned(e)){const t=n.isPageComponent(e,o)?o:n.getPage(e,o),r=e.pointers.components.getViewMode(t);i.generateNicknamesForPages(e,[t.id],r)}}return{generateNicknamesForPages:function(t,n){e.forEach(n,e.partial(r,t))},generateNicknamesForComponent:r,removeNicknameFromSerializedComponentIfInvalid:function(o,r,a,s){if(t.isProvisioned(o)&&"Page"!==s.type&&s.connections){const t=n.isPageComponent(o,a)?a:n.getPage(o,a),c=e.find(s.connections.items,{type:"WixCodeConnectionItem"});c&&i.hasComponentWithThatNickname(o,t,c.role,r)&&e.remove(s.connections.items,c)}},deleteNicknameFromComponentIfInvalid:function(o,r,a){if(t.isProvisioned(o)&&"Page"!==n.getType(o,r)){const t=n.isPageComponent(o,a)?a:n.getPage(o,a);e.forEach(o.pointers.components.getChildrenRecursivelyRightLeftRootIncludingRoot(r),function(e){const n=i.getNickname(o,e);i.hasComponentWithThatNickname(o,t,n,e)&&i.removeNickname(o,e)})}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1)],void 0===(i=function(e,t){"use strict";const n=function(e){this.url=t.urlUtils.parseUrl(e),this.url.query={}};return n.prototype={addLangParam(t){return t&&!e.isEmpty(t)&&(this.url.query.lang=t),this},addOriginParam(t){return t&&!e.isEmpty(t)&&(this.url.query.eo=window.btoa(t)),this},addDevAppParam(t){return t&&!e.isEmpty(t)&&(this.url.query.appDefinitionId=t),this},addCompIdParam(){return this.url.query.compId="MarketPanel",this},addAppMarketTests(t){return t&&!e.isEmpty(t)&&(this.url.query.experiment=t),this},addMetaSiteIdParam(t){return t&&!e.isEmpty(t)&&(this.url.query.metaSiteId=t),this},addModalParams(e,t,n){return e&&(this.url.path+=`/${e}/${t}/`,n&&(this.url.path+=`${n}/`)),this},addSiteIdParam(t){return t&&!e.isEmpty(t)&&(this.url.query.siteId=t),this},addTagsParam(t){return t&&!e.isEmpty(t)&&(this.url.query.query=t),this},addOpenAppParam(t){return t&&!e.isEmpty(t)&&(this.url.query.openAppDefId=t),this},addAppMarketParams(e){return e&&(this.url.query.appMarketParams=e),this},addNewWixStores(t){return e.isUndefined(t)||(this.url.query.newWixStores=`${t}`),this},addCategoryParam(t){return t&&!e.isEmpty(t)&&(this.url.query.categorySlug=t),this},addBiReferralInfoParam(t){return t&&!e.isEmpty(t)&&(this.url.query.referralInfo=t),this},addBiReferralInfoCategoryParam(t){return t&&!e.isEmpty(t)&&(this.url.query.referralInfoCategory=t),this},addBiSectionParam(t){return t&&!e.isEmpty(t)&&(this.url.query.section=t),this},addAddingMethodParam(t){return t&&!e.isEmpty(t)&&(this.url.query.addingMethod=t),this},addStateParam(t){return t&&!e.isEmpty(t)&&(this.url.query.state=t),this},build(){return t.urlUtils.buildFullUrl(this.url)}},n}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(3),n(6),n(23),n(54),n(37),n(94)],void 0===(i=function(e,t,n,o,i,r,a){"use strict";return{setComponentDisplayMode:function(s,c,p){const l=s.pointers.components.getDesktopPointer(c);if(!function(t,n){const o=t.dal.full.get(t.pointers.componentStructure.getModesDefinitions(n));return e.size(o)>1}(s,l))return null;const u=s.pointers.components.getPageOfComponent(c).id,d=s.pointers.page.getPagePointer(u);t.updatePropertiesItem(s,l,{mobileDisplayedModeId:p});const g=s.dal.get(s.pointers.getInnerPointer(d,"componentType"));n.executeHook(n.HOOKS.MOBILE_CONVERSION.BEFORE,g,[s,d]);const f=i.getPage(s,u),m=o.conversionUtils.extractMobilePage(f);!function t(n,o){const i=e.remove(n,o);return!e.isEmpty(i)||e.some(n,e=>t(e.components,o))}(o.conversionUtils.getChildren(m),{id:c.id});const y=a.getConversionSettings({conversionType:"MERGE_DISPLAY_MODE"});r.runMobileMergeOnPage(s,f,m,y)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(11),n(8),n(4),n(23),n(0)],void 0===(i=function(e,t,n,o,i){"use strict";const r=(e,n,o,i)=>t.public.getMobileConversionConfigByName(e,e.dal.get(n),i,o),a=(e,t,o)=>i.filter(o,o=>c(n.layout.get(e,o))>t.y),s=(t,o,i)=>e.updateCompLayout(t,o,{y:n.layout.get(t,o).y+i}),c=e=>e.y+e.height,p=e=>[e.y,c(e)],l=(e,t,r)=>i.filter(r,i=>o.conversionUtils.getRangesOverlap(p(n.layout.get(e,i)),p(t))>0);function u(e,t,o){const r=l(e,t,o),a=function(e,t,o){if(i.isEmpty(o))return{overlappingSiblingsOffset:0,lowerSiblingsOffset:t.height};const r=i.minBy(o,t=>n.layout.get(e,t).y),a=n.layout.get(e,r).y-t.y,s=i.maxBy(o,t=>c(n.layout.get(e,t))),p=c(t)-c(n.layout.get(e,s));if(a>0&&p>0)return{overlappingSiblingsOffset:a,lowerSiblingsOffset:a+p};if(a>0&&p<=0)return{overlappingSiblingsOffset:a,lowerSiblingsOffset:a};if(a<=0&&p>0)return{overlappingSiblingsOffset:0,lowerSiblingsOffset:p};return{overlappingSiblingsOffset:0,lowerSiblingsOffset:0}}(e,t,r);a.overlappingSiblingsOffset>0&&i.forEach(r,t=>s(e,t,-a.overlappingSiblingsOffset));const p=i.difference(o,r);return a.lowerSiblingsOffset>0&&i.forEach(p,t=>s(e,t,-a.lowerSiblingsOffset)),a.lowerSiblingsOffset}function d(e,t,o){return{freedRect:o=o||n.layout.get(e,t),parentPointer:n.getContainer(e,t),affectedComps:a(e,o,n.getSiblings(e,t))}}return{hideMobileComponent:function(t,o,a,s={updateLayout:!0}){if(!s.updateLayout)return void n.deleteComponent(t,o,!1);const c=d(t,o);n.deleteComponent(t,o,!1),function t(o,a,s){const c=u(o,a.freedRect,a.affectedComps);if(0===c)return;const p=n.layout.get(o,a.parentPointer),l=r(o,a.parentPointer,s,"minHeight")||0,g=i.max([p.height-c,l]);if(e.updateCompLayout(o,a.parentPointer,{height:g}),!n.getContainer(o,a.parentPointer))return;const f=i.assign(p,{y:p.y+g,height:p.height-g});t(o,d(o,a.parentPointer,f),s)}(t,c,a)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{id:"MediaContainer0",style:{type:"ComponentStyle",styleType:"custom",compId:"",componentClassName:"wysiwyg.viewer.components.MenuContainer",pageId:"",skin:"wysiwyg.viewer.skins.inlinePopup.DefaultInlinePopup",style:{groups:{},properties:{bg:"color_15","alpha-bg":.6},propertiesSource:{bg:"theme","alpha-bg":"value"}},metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1}},type:"Container",components:[],skin:"wysiwyg.viewer.skins.inlinePopup.DefaultInlinePopup",layout:{width:260,height:200,x:0,y:0,scale:1,rotationInDegrees:0,fixedPosition:!0,docked:{top:{px:0},bottom:{px:0},right:{px:0}}},componentType:"wysiwyg.viewer.components.MenuContainer",behaviors:{type:"ObsoleteBehaviorsList",items:'[{"name":"FloatIn","delay":0,"duration":0.5,"params":{"direction":"right"},"action":"inlinePopupIn","targetId":"","viewMode":"MOBILE"},{"name":"Conceal","delay":0,"duration":0.5,"params":{"direction":"right"},"action":"inlinePopupOut","targetId":"","viewMode":"MOBILE"}]'},design:{type:"MediaContainerDesignData",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},background:{type:"BackgroundMedia",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},color:"{color_11}",colorOpacity:1,alignType:"center",fittingType:"fill",scrollType:"none",colorOverlay:"",colorOverlayOpacity:0,showOverlayForMediaType:"WixVideo",mediaRef:null,imageOverlay:null,filterEffect:null},charas:"design-jr0840d9",dataChangeBehaviors:[]}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{type:"Component",skin:"wysiwyg.viewer.skins.inlinePopupToggle.inlinePopupToggleSkin4",layout:{width:50,height:50,x:261,y:19,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:"wysiwyg.viewer.components.MenuToggle",style:{type:"ComponentStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{"alpha-bg":"0","alpha-bgOpen":"0",bg:"color_11",bgOpen:"color_11",bordercolor:"color_15",bordercolorOpen:"color_15","boxShadowToggleOn-shd":"false","boxShadowToggleOn-shdOpen":"false",lineColor:"color_15",lineColorOpen:"color_15",shd:"0px 1px 4px 0px rgba(0,0,0,0.6)",shdOpen:"0px 1px 4px 0px rgba(0,0,0,0.6)"},propertiesSource:{"alpha-bg":"value","alpha-bgOpen":"value",bg:"theme",bgOpen:"theme",bordercolor:"theme",bordercolorOpen:"theme","boxShadowToggleOn-shd":"value","boxShadowToggleOn-shdOpen":"value",lineColor:"theme",lineColorOpen:"theme",shd:"value",shdOpen:"value"},groups:{}},componentClassName:"wysiwyg.viewer.components.MenuToggle",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.inlinePopupToggle.inlinePopupToggleSkin4"},behaviors:{type:"ObsoleteBehaviorsList",items:'[{"action":{"sourceId":"MENU_AS_CONTAINER_TOGGLE","name":"click","type":"comp"},"behavior":{"targetId":"MENU_AS_CONTAINER","name":"toggle","type":"comp"}}]'},activeModes:{}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{type:"Component",skin:"wysiwyg.viewer.skins.ExpandableMenuSkin",layout:{width:188,height:392,x:30,y:100,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:"wysiwyg.viewer.components.ExpandableMenu",data:{type:"CustomMenuDataRef",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},menuRef:"#CUSTOM_MAIN_MENU"},props:{type:"ExpandableMenuProperties",metaData:{schemaVersion:"1.0",autoGenerated:!1},itemsAlignment:"left",menuArrowDirection:"right",originalHeight:225,menuItemHeight:56},style:{type:"ComponentStyle",styleType:"custom",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{SKINS_fntSubmenu:"normal normal normal 16px/1.4em din-next-w01-light {color_14}",SKINS_submenuBR:"90px",SKINS_submenuMargin:"0","alpha-SKINS_bgSubmenu":"0","alpha-bg":"0","alpha-bgexpanded":"0","alpha-bgh":"1","alpha-bgs":"0","alpha-bgsSub":"0","alpha-brd":.2,arrowColor:"color_15",bg:"color_11",bgexpanded:"color_11",bgh:"#E6EAF5",bgs:"color_11",bgsSub:"color_11","boxShadowToggleOn-shd":"false",brd:"color_15",brw:"0px 0px 0px 0px",fnt:"font_7",fntSubMenu:"font_7",menuSpacing:"10",rd:"90px",separatorHeight:"15",sepw:"1",shd:"0px 1px 4px 0px rgba(0,0,0,0.6)",subMenuSpacing:25,textSpacing:"0",txt:"color_15",txtexpanded:"color_15",txts:"color_18",txtsSub:"color_18"},propertiesSource:{SKINS_fntSubmenu:"value",SKINS_submenuBR:"value",SKINS_submenuMargin:"value","alpha-SKINS_bgSubmenu":"value","alpha-bg":"value","alpha-bgexpanded":"value","alpha-bgh":"value","alpha-bgs":"value","alpha-bgsSub":"value","alpha-brd":"value",arrowColor:"theme",bg:"theme",bgexpanded:"theme",bgh:"value",bgs:"theme",bgsSub:"theme","boxShadowToggleOn-shd":"value",brd:"theme",brw:"value",fnt:"theme",fntSubMenu:"theme",menuSpacing:"value",rd:"value",separatorHeight:"value",sepw:"value",shd:"value",subMenuSpacing:"value",textSpacing:"value",txt:"theme",txtexpanded:"theme",txts:"theme",txtsSub:"theme"},groups:{}},componentClassName:"wysiwyg.viewer.components.ExpandableMenu",pageId:"",compId:"",skin:"wysiwyg.viewer.skins.ExpandableMenuSkin"},connections:{type:"ConnectionList",items:[{type:"WixCodeConnectionItem",role:"expandableMenu1"}]},activeModes:{}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";const t={color1:"color_11",color2:"color_15",color3:"color_13"},n={color1:"#000000",color2:"#FFFFFF"};return{getBackToTopButtonDefinition:(o,i={})=>({layout:{fixedPosition:!0,width:44,height:44,scale:1,rotationInDegrees:0,docked:e.defaults({},i,{bottom:{px:20},right:{px:20}}),y:522,x:262},componentType:"wysiwyg.viewer.components.BackToTopButton",type:"Component",skin:"skins.viewer.VectorImageSkin",data:{type:"VectorImage",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},svgId:o?"a3c153_64191a64b70a446fb44c9be3fce6df77.svg":"a3c153_8f424995247e4e4b9083564be3aa7c01.svg",link:{type:"AnchorLink",anchorDataId:"SCROLL_TO_TOP",pageId:"#masterPage",anchorName:"Top of Page",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1}}},props:{type:"VectorImageProperties",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1,autoGenerated:!1},displayMode:"fit"},behaviors:{type:"ObsoleteBehaviorsList",items:'[{"name":"FadeIn","delay":0,"duration":0.5,"action":"backToTopIn","targetId":"","viewMode":"MOBILE","params":{}}]',metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1}},design:{type:"VectorImageDesignData",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},overrideColors:o?n:t,shapeStyle:{opacity:o?.6:1}},style:{type:"ComponentStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{groups:{},properties:{},propertiesSource:{}},componentClassName:"wysiwyg.viewer.components.VectorImage",pageId:"",compId:"",styleType:"custom",skin:"skins.viewer.VectorImageSkin"},connections:{type:"ConnectionList",items:[{type:"WixCodeConnectionItem",role:"backToTop"}],metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1}},activeModes:{}})}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(5),n(13),n(25),n(47)],void 0===(i=function(e,t,n,o,i,r){"use strict";function a(e){return o.getProperty(e,o.PROPERTY_NAMES.PASSWORD_PROTECTED_PAGES)||[]}function s(t,n,i){const r=a(t),s=i?e.union(r,[n]):e.difference(r,[n]);o.setProperty(t,o.PROPERTY_NAMES.PASSWORD_PROTECTED_PAGES,s)}function c(t,n){const o=a(t);return e.includes(o,n)}function p(n,i,r){const a=e.isObject(r)?r.value:r;if(e.isNull(a))return l(n,i,null);const p=n.dal.get(n.pointers.getInnerPointer(n.pointers.general.getServiceTopology(),["editorServerRoot"])),d=c(n,i);s(n,i,!0),t.ajaxLibrary.ajax({url:`${p.replace("http://","https://")}/api/page_protection/new`,type:"POST",dataType:"json",xhrFields:{withCredentials:!0},data:{siteId:o.getProperty(n,o.PROPERTY_NAMES.SITE_ID),metaSiteId:o.getProperty(n,o.PROPERTY_NAMES.META_SITE_ID),pageId:i,password:a},success(e){e.result?l(n,i,e.result):u(n,i,d,e.errorCode,e.errorDescription)},error(e,t){u(n,i,d,-1,t)}})}function l(e,t,n){const i=function(e){return o.getProperty(e,o.PROPERTY_NAMES.SESSION_PAGES_TO_HASH_PASSWORD)||{}}(e);i[t]=n,o.setProperty(e,o.PROPERTY_NAMES.SESSION_PAGES_TO_HASH_PASSWORD,i),s(e,t,n)}function u(e,t,n,o,a){!function(e,t,n){s(e,t,n)}(e,t,n),i.error(e,r.PASSWORD_PROTECTION_HASH_GENERATION_FAILED,{serverErrorCode:o,errorDescription:a})}return{getPasswordProtectedPages:a,isPageProtected:c,setPagePassword:p,setPageToNoRestriction:function(e,t){p(e,t,{value:null})},isPagesProtectionOnServerOn:function(){return!0}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";return{isPlatformAppInstalled:function(t,n){if(!n)return!1;const o=e.get(n,"appDefinitionId"),i=e.get(t,[o],{});return!e.isEmpty(i)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(435)],void 0===(i=function(e){"use strict";return e.create(!0)}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";return{create:function(t){let n={},o={};const i=function(e){return n[e]};return{get:i,set:function(o,r){const a=i(o);return n[o]=a&&t?e.merge({},a,r):r,n[o]},lock:function(e){o[e]=1},unlock:function(e){delete o[e]},isLocked:function(e){return o[e]},keys:function(){return n&&e.keys(n)||[]},clear:function(){n={},o={}}}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(24),n(3),n(1)],void 0===(i=function(e,t,n,o){"use strict";return{activatePageMobileHoverModes:function(n,i){const r=n.pointers.components.getPage(i.id,o.constants.VIEW_MODES.DESKTOP),a=n.pointers.components.getChildrenRecursively(r);e(a).filter(function(n,o){return!!function(n,o){const i=t.getComponentModes(n,o);return e.find(i,{type:"HOVER"})}(n,o)}.bind(null,n)).forEach(function(e,n){const o=e.pointers.components.getMobilePointer(n);(function(e,n){const o=t.getCompMobileMode(e,n);t.activateComponentMode(e,n,o.modeId)})(e,n),function(e,t){const n=e.pointers.components.getMobilePointer(t);return e.dal.isExist(n)}(e,n)&&function(e,t,n){const o=e.dal.get(e.pointers.getInnerPointer(t,"designQuery"));e.dal.set(e.pointers.getInnerPointer(n,"designQuery"),o)}(e,n,o)}.bind(null,n))}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(3),n(4)],void 0===(i=function(e,t,n){"use strict";return{removeMobileCropOverrideIfNeeded:function(o,i,r){const a=t.getDataItem(o,i),s=r.uri&&a.uri!==r.uri,c=o.pointers.components.getMobilePointer(i);if(!s||!n.isExist(o,c))return;const p=t.getPropertiesItem(o,c);t.setPropertiesItem(o,c,e.assign(p,{overrideCrop:null}))}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(3),n(4),n(91),n(177)],void 0===(i=function(e,t,n,o,i){"use strict";function r(e,t){const n=e.dal.get(e.pointers.getInnerPointer(t,"layout"));i.layoutPlayerChildren(e,t,n)}return{setPlayerIdAfterAddHook:function(i,r,a,s,c,p){!function(i,r,a){if("wysiwyg.viewer.components.MediaPlayer"===n.getType(i,a)){const s=a.id,c=n.getType(i,r),p=o.getComponentPropertiesByType(i,c);e.get(p,["properties","playerId"])&&t.updatePropertiesItem(i,r,{playerId:s})}}(i,r,p)},layoutPlayerChildren:r,layoutChildrenOnMobileConversion:function(t,o){e.forEach(o,o=>{const i=n.getChildren(t,o,!0),a=e.filter(i,e=>"wysiwyg.viewer.components.MediaPlayer"===n.getType(t,e));e.forEach(a,e=>r(t,e))})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(3),n(4),n(8),n(11),n(34),n(91),n(2)],void 0===(i=function(e,t,n,o,i,r,a,s){"use strict";const c="wysiwyg.viewer.components.StripColumnsContainer";function p(t,n){const a=e.head(t.pointers.components.getChildren(n)),s=t.pointers.components.getChildren(a);e.forEach(s,function(e){(r.getComponentType(t,e)===c||o.public.isFullWidth(t,e))&&i.reparentComponentToPage(t,e,!0)})}return{handleFullWidthPropertyChange:function(n,o,i){const r=t.getPropertiesItem(n,o);r.fullWidth&&e.get(i,"fullWidth",r.fullWidth)!==r.fullWidth&&p(n,o)},handleSplitToColumns:function(e,t,n){1===e.pointers.components.getChildren(n).length&&p(e,n)},handleColumnDeletion:function(e,n,o){if(o)return;const i=e.pointers.components.getParent(n);if(2===e.pointers.components.getChildren(i).length){const n={rowMargin:0,columnsMargin:0,siteMargin:0,frameMargin:0};!function(e,t){t.type!==s.VIEW_MODES.DESKTOP&&(a.isMobileComponentPropertiesSplit(e,t)||a.splitMobileComponentProperties(e,t))}(e,i),t.updatePropertiesItem(e,i,n)}},deleteContainerIfHasNoMoreColumns:function(e,t,o,i,r,a,s){e.pointers.components.getChildren(s).length||o||n.deleteComponent(e,s)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return function(e,t,n,o){o.layout.x=0}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(0),n(4)],void 0===(i=function(e,t){"use strict";return function(n,o,i,r){const a=n.pointers.components.getChildren(i);if(e.find(a,function(e){return t.getType(n,e)===r.componentType}))throw new Error("Only one SiteRegionContainer allowed")}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(11),n(74)],void 0===(i=function(e,t){"use strict";return function(n,o,i,r,a,s){t.upgradeUrl(n,o,"facebook.likes",{forceMainPage:e.isShowOnAllPages(n,s)})}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(74)],void 0===(i=function(e){"use strict";return function(t,n){e.upgradeUrl(t,n,"pinterest")}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(74)],void 0===(i=function(e){"use strict";return function(t,n){e.upgradeUrl(t,n,"vk")}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(3),n(74)],void 0===(i=function(e,t){"use strict";return function(n,o){const i=e.getDataItem(n,o),r=i.urlChoice&&"site"===i.urlChoice.toLowerCase();t.upgradeUrl(n,o,"facebook.shares",{forceMainPage:r})}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(36),n(14),n(17)],void 0===(i=function(e,t,n,o){"use strict";return{getContainerToAddTo:function(e,t){return e.pointers.components.isPage(t)&&o.popupPages.isPopup(e,t.id)?o.popupPages.getCurrentMainContainer(e):t},removeDeadBehaviors:function(e,i){if(!o.popupPages.isPopup(e,i.id))return;const r=n.getViewMode(e);o.getPageIdList(e,!0).map(function(t){return e.pointers.components.getPage(t,r)}).forEach(function(n){t.removeComponentsBehaviorsWithFilter(e,n,{behavior:{targetId:i.id}})})},removeBehaviorsFromAddedPage:function(e,n){t.removeComponentsBehaviorsWithFilter(e,n,{behavior:{name:"openPopup"}})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(3),n(11)],void 0===(i=function(e,t){"use strict";return{replaceFullScreenPropertyWithDocking:function(n,o){const i=e.getPropertiesItem(n,o);i&&i.fullScreenModeOn&&(t.setDock(n,o,{left:{vw:0},right:{vw:0}}),e.updatePropertiesItem(n,o,{fullScreenModeOn:!1}))}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(73),n(4),n(3),n(7),n(179)],void 0===(i=function(e,t,n,o,i,r,a){"use strict";function s(i,a,s,c,p){const l=function(t,n){return e(t).chain().get("custom.relatedConnections").transform(function(t,o,i){t[e.get(n,i,i)]=o},{}).value()}(s,p),u=e.keys(l),d=o.getPage(i,a).id,g=d===t.siteConstants.MASTER_PAGE_ID?null:d;!function(t,o,i,r){e.forEach(t,function(t){const a=e.get(o,t.id,[]);e.forEach(a,function(e){n.connect(i,t,r,e.role,e.config,e.isPrimary)})})}(r.getAllComponents(i,g,function(t){return e.includes(u,t.id)}),l,i,a)}return{handleControllerDeletion:function(t,o){!function(t,o){const i=n.getConnectedComponents(t,o);e.forEach(i,function(e){n.disconnect(t,e,o)})}(t,o),a.removePlatformApplicationFromPageIfLastController(t,o),a.removeControllerFromStateMap(t,o)},handleControllerSerialization:function(t,o,i){!function(t,o,i){const r=n.getConnectedComponents(t,o);if(e.isEmpty(r))return;const a=e.transform(r,function(i,r){i[r.id]=e.filter(n.get(t,r),{controllerRef:o})},{});e.set(i,"relatedConnections",a)}(t,o,i),a.addControllerStateToSerializedStructure(t,o,i)},handleControllerAddition:function(e,t,n,o,i){s(e,t,n,0,i),a.setControllerStateFromSerializedStructure(e,t,n),a.addPlatformAppToPageIfFirstController(e,t,n.data.applicationId)},handleControllerParentChange:function(r,s,c){const p=i.getDataItem(r,s).applicationId;!function(i,r,a){const s=o.getPage(i,a).id;if(s===t.siteConstants.MASTER_PAGE_ID)return;const c=n.getConnectedComponents(i,r);e(c).reject(function(e){return o.getPage(i,e).id===s}).forEach(function(e){n.disconnect(i,e,r)})}(r,s,c),a.removePlatformApplicationFromPageIfLastController(r,s),a.addPlatformAppToPageIfFirstController(r,s,p,o.getPage(r,c))}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(5),n(87),n(99),n(69)],void 0===(i=function(e,t,n,o){"use strict";return{installCollections:(i,r,a)=>e.isOpen("ds_provision_with_collections")?((e,n)=>t.requestsUtil.fetchJson(`https://apps.wix.com/app-studio-server/getToken/${e}/${n}`).then(e=>{if(!e)throw new Error("bad response");return e.token}))(r,a).then(e=>{if(e)return((e,i)=>o.ensureAppIsWriteable(e).then(()=>{const o=n.getCodeAppInfoFromPS(e);return t.requestsUtil.fetchJson("https://www.wix.com/_api/cloud-data-packaging/v1/install-data",{mode:"cors",method:"POST",credentials:"include",body:JSON.stringify({signedInstance:o.signedInstance,gridAppId:o.appId,packageToken:i})})}))(i,e)}):Promise.resolve()}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(451),n(180),n(453),n(454),n(35),n(13),n(14),n(98),n(181),n(29)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l){"use strict";let u,d={};const g=[];let f={},m=!1,y=!1,E={},I=!1;const S=t=>{const n=t.data.applicationId;E[n]=!0,e.forEach(f[n],A),delete f[n];const o=e.get(d,[r.MessageTypes.ADD_APP_COMPLETED,n]);e.isFunction(o)&&o(t.data)},h=t=>{if(!0===t.data.success){y=!0;const t=e.get(d,[r.MessageTypes.ADD_ALL_APPS_COMPLETED]);e.forEach(t,e=>{e()})}};function P(t,n){if(function(e){return e.source===u.contentWindow}(n))switch(n.data.type){case r.MessageTypes.SDK_READY:m=!0,e.forEach(g,A),g.length=0;break;case r.MessageTypes.SET_MANIFEST:const o=e.get(c.getAppDataByApplicationId(t,n.data.applicationId),"appDefinitionId");c.setManifest(t,o,n.data.manifest);break;case r.MessageTypes.SET_APP_PUBLIC_API:c.setAppPublicAPI(t,n.data.appDefinitionId,n.data.apiName);break;case r.MessageTypes.ADD_APP_COMPLETED:S(n);break;case r.MessageTypes.ADD_ALL_APPS_COMPLETED:h(n);break;case r.MessageTypes.APP_UPDATE_COMPLETED:{const t=e.get(d,[r.MessageTypes.APP_UPDATE_COMPLETED,n.data.applicationId]);e.isFunction(t)&&t(n.data);break}case r.MessageTypes.MIGRATE_COMPLETED:{const t=e.get(d,[r.MessageTypes.MIGRATE_COMPLETED,n.data.applicationId]);e.isFunction(t)&&t(n.data);break}case r.MessageTypes.REMOVE_APP_COMPLETED:{const t=e.get(d,[r.MessageTypes.REMOVE_APP_COMPLETED,n.data.applicationId]);e.isFunction(t)&&t(n.data);break}case r.MessageTypes.GET_INSTALLED_APPS:const i=t.siteAPI.getClientSpecMap(),a=t.dal.get(t.pointers.routers.getRoutersConfigMapPointer()),s=t.dal.full.immutable.getByPath(["pagesData"]),p=l.getAllAppIdsInstalledOnPages(s,i,a);n.ports&&n.ports[0]&&e.isFunction(n.ports[0].postMessage)&&n.ports[0].postMessage(p);break;case r.MessageTypes.GET_IS_PLATFORM_APP_INSTALLED:const u=c.isPlatformAppInstalled(t,n.data.appDefinitionId);n.ports&&n.ports[0]&&n.ports[0].postMessage({isAppInstalled:u})}}function A(e){u.contentWindow.postMessage(e,"*")}function T(e){m?A(e):g.push(e)}function v(e,t){m&&E[t]?A(e):(f[t]=f[t]||[],f[t].push(e))}const C=e=>({languageCode:a.getProperty(e,a.PROPERTY_NAMES.LANGUAGE_CODE)||"en",viewMode:s.getViewMode(e),metaSiteId:a.getProperty(e,a.PROPERTY_NAMES.META_SITE_ID),userId:a.getProperty(e,a.PROPERTY_NAMES.USER_ID),editorSessionId:a.getProperty(e,a.PROPERTY_NAMES.EDITOR_SESSION_ID)});return{init:function(e,i,a){u?(u.remove(),g.length=0,d={},f={},E={},m=!1):t.api.set(r.AppIds.EDITOR,n.getAPIForSDK(i),{onApiCall:p.reportAPICallBI.bind(null,e)}),o.addWorkerHandler(P.bind(this,e)),I=!0;const s=o.getAppsContainerUrl(e,a);u=o.createWorkerIframe("workerIframe",s)},triggerEvent:function(e,t){v(i.triggerEvent(e,t),e)},addApp:function(t,n,o){o&&e.set(d,[r.MessageTypes.ADD_APP_COMPLETED,n.applicationId],o),E[n.applicationId]=!1,T(i.addApp(n,C(t)),n.applicationId)},addApps:function(t,n){e.forEach(n,({applicationId:e})=>{E[e]=!1}),T(i.addApps(n,C(t)))},notifyAppUpdated:function(t,n,o){o&&e.set(d,[r.MessageTypes.APP_UPDATE_COMPLETED,t],o),v(i.notifyAppUpdated(t,n),t)},notifyRemoveApp:function(t){return new Promise(n=>{e.set(d,[r.MessageTypes.REMOVE_APP_COMPLETED,t],n),v(i.notifyRemoveApp(t),t)})},notifyMigrate:function(t,n){return new Promise(o=>{e.set(d,[r.MessageTypes.MIGRATE_COMPLETED,t],o),v(i.notifyMigrate(t,n),t)})},getAppsContainer:function(){return u},isInitiated:function(){return I},registerToAppsCompleted:function(t){y&&t();const n=e.get(d,[r.MessageTypes.ADD_ALL_APPS_COMPLETED]);n?n.push(t):e.set(d,[r.MessageTypes.ADD_ALL_APPS_COMPLETED],[t])}}}.apply(t,o))||(e.exports=i)},function(e,t){e.exports=M},function(e,t){e.exports=b},function(e,t,n){var o,i;o=[n(0),n(1)],void 0===(i=function(e,t){"use strict";let n;const o=t.urlUtils.joinURL,i=/\d+\.\d+\.\d+/,r=function(t,n,r,a,s){if(function(e){return/^https?\:\/\/localhost/.test(e)}(a))return a;const c=e.trimEnd(o(n,"services"),"/");let p=t.replace(c,e.trimEnd(r,"/"));var l;return/^\d+\.\d+\.\d+$/.test(a)&&(l=a,p=p.replace(i,l)),"true"===s&&(p=p.replace(/^https:\/\//,"http://")),p};return{createWorkerIframe:function(e,t){let n=window.document.createElement("iframe");return n.id=e,n.src=t,n.style.display="none",n=window.document.body.appendChild(n)},addWorkerHandler:function(e){n&&window.removeEventListener("message",n),n=e,window.addEventListener("message",n)},getAppsContainerUrl:function(t,n={}){const i=t.dal.get(t.pointers.general.getServiceTopology()),a=i.scriptsLocationMap["santa-platform-apps-container"],s=`https://editor.${i.serverName}/_partials/`,c=t.siteAPI.getCurrentUrl(),p=e.get(c,"query"),l=i.scriptsDomainUrl,u=r(a,l,s,p.PlatformContainerSource,p.PlatformContainerHttp),d=p.EditorSdkSource||p.editorSdkSource||o(e.get(i,["scriptsLocationMap","js-platform-editor-sdk"],""),"lib","editorSDK.min.js"),g=e.isEmpty(n.extraNamespaces)?void 0:e.join(n.extraNamespaces,",");return o(u,`index.html?sdkVersion=${d}${g?`&extraNamespaces=${g}`:""}`)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(35)],void 0===(i=function(e,t){"use strict";const n=(n,o)=>({intent:t.Intents.PLATFORM_WORKER,type:t.MessageTypes.ADD_APPS,apps:e.map(n,t=>e.pick(t,["applicationId","appFields.platform.editorScriptUrl","appDefinitionId","firstInstall","origin","instance","instanceId"])),initData:o});return e.mapValues({triggerEvent:function(e,n){return{intent:t.Intents.PLATFORM_WORKER,type:t.MessageTypes.TRIGGER_EVENT,applicationId:e,args:n}},addApp:function(e,t){return n([e],t)},addApps:n,notifyAppUpdated:(e,n)=>({intent:t.Intents.PLATFORM_WORKER,type:t.MessageTypes.NOTIFY_APP_UPDATED,applicationId:e,payload:n}),notifyRemoveApp:e=>({intent:t.Intents.PLATFORM_WORKER,type:t.MessageTypes.REMOVE_APP,applicationId:e}),notifyMigrate:(e,n)=>({intent:t.Intents.PLATFORM_WORKER,type:t.MessageTypes.MIGRATE,applicationId:e,payload:n})},t=>e.flow(t,JSON.stringify))}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";const t={},n=[t=>e.debounce(t,10),t=>e.throttle(t,1e3)],o=(e,t,n,o,i)=>{t.forEach(t=>i(e,t,{eventType:n,eventPayload:o}))};return{notifyAppsOnCustomEvent:(i,r,a,s)=>{const c=(e=>t[e]?Array.from(t[e]):null)(r);if(c)return e.flow(n)(o)(i,c,r,a,s)},registerAppToEvents:(n,o)=>{e.forEach(o,e=>{t[e]||(t[e]=new Set),t[e].add(n)})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(121),n(51),n(73),n(98),n(3),n(4),n(7)],void 0===(i=function(e,t,n,o,i,r,a,s){"use strict";function c(n,o,a,s,c,p,l,u,d){if(e.isEmpty(d))return;const g=e.reduce(d,function(t,n){const a=r.getDataItem(o,n.controllerRef);if(a){const r=a.applicationId,s=e.get(i.getAppDataByAppDefId(o,r),"applicationId");s&&(t[s]=t[s]||[],t[s].push(n))}return t},{});e.forEach(g,function(e,i){n(o,i,t.factory.componentDeleted({componentRef:a,connections:e}),!0)})}function p(t,o,i,r,a){const s=n.getConnectedComponentStageData(t,i),c=e.get(s,["behavior",o]);return e.isUndefined(c)||e.isUndefined(a[c])?r:e.isFunction(a[c])?a[c](r):a[c]}function l(e,t,n,o,i){return!1!==o&&p(e,t,n,o,i)}function u(t,n,i){const r=[n,...t.pointers.full.components.getChildrenRecursively(n)],c=e(r).map(e=>o.getPrimaryConnection(t,e)).compact().value(),p=e.filter(r,e=>"platform.components.AppWidget"===a.getType(t,e));return e.some(c,e=>(function(e,t,n,o){return"platform.components.AppWidget"===a.getType(e,n.controllerRef)&&!s.isDescendantOfComp(e,o,n.controllerRef)&&!t.some(t=>e.pointers.isSamePointer(t,n.controllerRef))})(t,p,e,i))}return{getOnDeleteHook:function(t){return e.partial(c,t)},isDuplicatable:function(e,t,n){return l(e,"duplicatable",n,t,{false:!1,true:t})},canReparent:function(e,t,n){return l(e,"canReparent",n,t,{false:!1,true:t})},isRotatable:function(e,t,n){return l(e,"rotatable",n,t,{false:!1,true:t})},canBeFixedPosition:function(t,n,i){if(!1===n)return!1;const r=e.filter(a.getAncestors(t,i),e=>"platform.components.AppWidget"===a.getType(t,e)),s=[i,...t.pointers.full.components.getChildrenRecursively(i)];return!e.some(s,n=>(function(t,n,o){return n&&e.some(o,e=>t.pointers.isSamePointer(e,n.controllerRef))})(t,o.getPrimaryConnection(t,n),r))&&l(t,"pinnable",i,n,{false:!1,true:n})},isResizableSides:function(e,t,n){return l(e,"resizable",n,t,{false:[],true:t})},layoutLimitsHook:function(t,n,o){return l(t,"resizable",o,n,{false:function(t){return t.aspectRatio?e.omit(t,"aspectRatio"):t},true:n})},isContainable:function(e,t,n,o){return!1!==t&&!u(e,n,o)&&(function(e,t,n){return t&&(e.pointers.components.isInMasterPage(t)&&!e.pointers.components.isInMasterPage(n)||!e.pointers.components.isInMasterPage(t)&&e.pointers.components.isInMasterPage(n))}(e,o,n)?p(e,"toggleShowOnAllPagesEnabled",n,t,{false:!1,true:t}):t)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(13),n(121)],void 0===(i=function(e,t,n){"use strict";return{notifyOnFirstSaved:function(o,i,r){const a=t.generalInfo.getMetaSiteId(o);e.forEach(i,({applicationId:e,instance:t,instanceId:i})=>{r(o,e,n.factory.siteWasFirstSaved({metaSiteId:a,instance:t,instanceId:i}))})},removeGhostStructureForApp:function(e,{appDefinitionId:t}){e.siteDataAPI.siteData.removeGhostStructureData(t)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(3),n(15)],void 0===(i=function(e,t,n){"use strict";function o(t){return e.compact([e.get(t,"applicationId")])}return{appsOfComp:function(i,r,a){return r&&"AppController"===r.type?o(r):r&&"TPAWidget"===r.type?function(t,o){const i=e.get(o,"applicationId"),r=n.getWidgetData(t,i,e.get(o,"widgetId"));return e.has(r,"componentFields.componentUrl")?[o.appDefinitionId]:[]}(i,r):a?e(t.getConnectionsItem(i,a)).compact().reject(t=>e.isEqual(t.type,"WixCodeConnectionItem")).flatMap(n=>o(t.getDataItem(i,e.get(n,"controllerRef")))).value():[]},appsOfControllerStateMap:function(n,i){return e(e.get(i,"configured")).flatMap(e=>o(t.getDataItem(n,e))).compact().sortedUniq().value()},appsOfConnectionItem:function(n,i){return e(e.get(i,"items")).reject(t=>e.isEqual(t.type,"WixCodeConnectionItem")).map("controllerId").compact().flatMap(e=>o(t.getDataItemById(n,e))).value()}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(4),n(15),n(5)],void 0===(i=function(e,t,n,o){"use strict";const i={appbuilder:"3d590cbc-4907-4cc4-b0b1-ddf2c5edf297","Email Marketing":"135c3d92-0fea-1f9d-2ba5-2a1dfb04297e",wixCodeApp:"675bbcef-18d8-41f5-800e-131ec9e08762","Wix Forms":"14ce1214-b278-a7e4-1373-00cebd1bef7c","Wix Pro Gallery":"14271d6f-ba62-d045-549b-ab972ae1f70e",dataBinding:"dataBinding","wix-code":"wix-code",metasite:"22bef345-3c5b-4c18-b782-74d4085112ff","Members Area":"14cc59bc-f0b7-15b8-e1c7-89ce41d0e0c9","Members Account Info":"14cffd81-5215-0a7f-22f8-074b0e2401fb","My Wallet":"4aebd0cb-fbdb-4da7-b5d1-d05660a30172"};return{getAllowedApps:function(t){let r=e.values(i);o.isOpen("sv_livePreview_forDataBinding")&&(r=e.without(r,"dataBinding"));const a=n.getAppsData(t);return e(a).filter(e=>"Dashboard"!==e.appType).map("appDefinitionId").difference(r).compact().value()},optionsModifiers:{dataBinding:(e,n,o)=>{if(t.getAncestors(e,o).reduce((n,o)=>n||"wysiwyg.viewer.components.Repeater"===t.getType(e,o),!1))return{resetRuntimeOverrides:!0}}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(121),n(122),n(32),n(141),n(77)],void 0===(i=function(e,t,n,o,i,r){"use strict";return{beforePageRemoveHook:function(n,r){const a=i.getRouterRef.byPage(n,r);a&&(function(n,r,a){const s=i.get.byRef(n,r),c=o.getAppDataByAppDefId(n,s.appDefinitionId).applicationId,p=e.findKey(s.pages,e=>e===a);o.notifyApplication(n,c,t.factory.pageDeleted({pageRole:p}))}(n,a,r.id),i.pages.removePageFromRouter(n,a,r.id))},duplicatePageCode:n.duplicatePageCode,removePageFromPlatformApps:function(e,t){o.removePageFromPlatformApps(e,t)},addOriginCompIdToWidgetsOnPage:function(e,t){r.addOriginCompIdToWidgetsOnPage(e,t)},initMobileComponents:function(e,t){const n=e.pointers.getInnerPointer(t,"mobileComponents");e.dal.full.isExist(n)||e.dal.full.set(n,[])},fixDuplicatedPageCodeBehaviors:function(t,n){const o=t.pointers.page.getPagePointer(n),i=t.pointers.getInnerPointer(o,"structure"),r=t.dal.full.get(i);!function t(n,o,i){if(o.behaviorQuery){const t=n.pointers.data.getBehaviorsItem(o.behaviorQuery,i),r=n.dal.get(t);let a;try{a=JSON.parse(r.items)}catch(e){}let s=!1;e(a).filter(["action.type","comp"]).reject(["action.sourceId",o.id]).forEach(function(t){s=!0,t.action.sourceId=o.id,t.behavior.targetId=i,e.has(t,"behavior.params.compId")&&(t.behavior.params.compId=o.id)}),s&&(r.items=JSON.stringify(a),n.dal.set(t,r))}e.forEach(o.components,function(e){t(n,e,i)})}(t,r,n)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(462)],void 0===(i=function(e){"use strict";return{initPaths:function(t){const n=[t.pointers.wixCode.getRoot(),t.pointers.wixCode.getNonUndoableRoot(),t.pointers.wixCode.getUndoableRoot(),t.pointers.wixCode.getModifiedFileContentMap(),t.pointers.wixCode.getLoadedFileContentMap(),t.pointers.wixCode.getDuplicatedFilesInfoMap(),t.pointers.wixCode.getUndoableModifiedFileContentMap(),t.pointers.wixCode.getFilePathToIdMap(),t.pointers.wixCode.getBundleCacheKillerMap(),t.pointers.wixCode.getWixCodeModel(),t.pointers.wixCode.getWixCodeAppData(),t.pointers.wixCode.getAreChildrenLoadedMap(),t.pointers.wixCode.getLoadedChildrenMap(),t.pointers.wixCode.getDirectoryFlagByDeletedPathMap()];e.forEach(n,function(e){t.dal.isExist(e)||t.dal.set(e,{})})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(50),n(45),n(20)],void 0===(i=function(e,t,n){"use strict";const o="wixCode",i=e.pointerGeneratorsRegistry;i.registerPointerType(o,function(){return null},function(){return!0});const r={getRoot:(e,t)=>t.getPointer("wixCodeRoot",o,n.paths.BASE),getNonUndoableRoot:(e,t)=>t.getPointer("wixCodeNonUndoableRoot",o,n.paths.NON_UNDOABLE_BASE_PATH),getUndoableRoot:(e,t)=>t.getPointer("wixCodeUndoableRoot",o,n.paths.UNDOABLE_BASE_PATH),getModifiedFileContentMap:(e,t)=>t.getPointer("modifiedFileContents",o,n.paths.MODIFIED_FILE_CONTENTS),getModifiedFileContent:(e,t,i)=>t.getPointer(`modifiedFileContents_${i}`,o,n.paths.MODIFIED_FILE_CONTENTS.concat(i)),getLoadedFileContentMap:(e,t)=>t.getPointer("loadedFileContents",o,n.paths.LOADED_FILE_CONTENTS),getLoadedFileContent:(e,t,i)=>t.getPointer(`loadedFileContents_${i}`,o,n.paths.LOADED_FILE_CONTENTS.concat(i)),getUndoableModifiedFileContentMap:(e,t)=>t.getPointer("undoableModifiedFileContents",o,n.paths.UNDOABLE_MODIFIED_FILE_CONTENTS),getUndoableModifiedFileContent:(e,t,i)=>t.getPointer(`undoableModifiedFileContents_${i}`,o,n.paths.UNDOABLE_MODIFIED_FILE_CONTENTS.concat(i)),getFilePathToIdMap:(e,t)=>t.getPointer("filePathToIdMap",o,n.paths.FILE_PATH_TO_ID_MAP),getFilePathId:(e,t,i)=>t.getPointer(`filePathToIdMap_${i}`,o,n.paths.FILE_PATH_TO_ID_MAP.concat(i)),getDuplicatedFilesInfoMap:(e,t)=>t.getPointer("duplicatedFilesInfo",o,n.paths.DUPLICATED_FILES_INFO),getGlobalBundleCacheKiller:(e,n)=>n.getPointer("globalBundleCacheKiller",o,t.wixCodeUserScriptsService.paths.GLOBAL_CACHE_KILLER),getBundleCacheKillerMap:(e,n)=>n.getPointer("bundleCacheKillers",o,t.wixCodeUserScriptsService.paths.CACHE_KILLERS_MAP),getBundleCacheKiller:(e,n,i)=>n.getPointer(`bundleCacheKillers_${i}`,o,t.wixCodeUserScriptsService.paths.CACHE_KILLERS_MAP.concat(i)),getLoadedChildrenMap:(e,t)=>t.getPointer("loadedChildren",o,n.paths.LOADED_CHILDREN),getLoadedChildren:(e,t,i)=>t.getPointer(`loadedChildren_${i}`,o,n.paths.LOADED_CHILDREN.concat(i)),getAreChildrenLoadedMap:(e,t)=>t.getPointer("areChildrenLoaded",o,n.paths.ARE_CHILDREN_LOADED),getAreChildrenLoaded:(e,t,i)=>t.getPointer(`areChildrenLoaded_${i}`,o,n.paths.ARE_CHILDREN_LOADED.concat(i)),getWixCodeModel:(e,t)=>t.getPointer("wixCodeModel",o,n.paths.WIX_CODE_MODEL),getWixCodeAppData:(e,t)=>t.getPointer("appData",o,n.paths.WIX_CODE_APP_DATA),getGridAppId:(e,t)=>t.getPointer("gridAppId",o,n.paths.GRID_APP_ID),getIsAppReadOnly:(e,t)=>t.getPointer("isAppReadOnly",o,n.paths.IS_APP_READ_ONLY),getDirectoryFlagByDeletedPathMap:(e,t)=>t.getPointer("directoryFlagByDeletedPath",o,n.paths.DIRECTORY_FLAG_BY_DELETED_PATH)};i.registerDataAccessPointersGenerator(o,r)}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(464),n(129),n(467),n(1)],void 0===(i=function(e,t,n,o,i){"use strict";const r=function(){try{o.setState(null),o.setAnotherSaveRequested(!1)}catch(e){i.log.error(e)}};return{save:function(e,i){return function(e,i){let a=o.getState();return a?(o.setAnotherSaveRequested(!0),a):((a=new Promise(function(r,a){function s(){o.getAnotherSaveRequested()?(o.setAnotherSaveRequested(!1),t(e,n,i,s,c)):r()}function c(r){o.getAnotherSaveRequested()?(o.setAnotherSaveRequested(!1),t(e,n,i,s,c)):a(r)}t(e,n,i,s,c)})).then(r,r),o.setState(a),a)}(e,i)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(56),n(25)],void 0===(i=function(e,t,n){"use strict";function o(t){return{event:e.partial(n.event,t),error:e.partial(n.error,t)}}return function(e,n,i,r,a){const s=[{primaryTask:n,secondaryTasks:[]},e.dal,r,function(e){a(e.document)},o(e)];i?t.runFullSaveTasks.apply(t,s):t.runPartialSaveTasks.apply(t,s)}}.apply(t,o))||(e.exports=i)},function(e,t){e.exports=R},function(e,t){e.exports=N},function(e,t,n){var o;void 0===(o=function(){"use strict";let e=null,t=!1;return{getState:function(){return e},setState:function(t){e=t},getAnotherSaveRequested:function(){return t},setAnotherSaveRequested:function(e){t=e}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(32),n(75),n(20)],void 0===(i=function(e,t,n){"use strict";function o(e,o){return`${t.getRoots(e).pages.location}${o}${n.JS_EXTENSION}`}return{getFileId:o,hasCode:function(t,o){return e.pageHasPlatformApp(t,o,n.WIX_CODE_APP_ID)},readCode:function(e,n){const i=o(e,n),r=t.getVirtualDescriptor(e,i,!1);return t.readFile(e,r)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(32),n(2),n(75),n(20)],void 0===(i=function(e,t,n,o){"use strict";return{duplicatePageCode:function(t,i,r){if(!e.pageHasPlatformApp(t,r,o.WIX_CODE_APP_ID))return Promise.resolve();const a=function(e,t){const o=`public/pages/${t}.js`;return n.getVirtualDescriptor(e,o,!1)}(t,r),s=function(e){return n.getVirtualDescriptor(e,"public/pages",!0)}(t),c=`${i}.js`;return n.copyFile(t,a,s,c)}}}.apply(t,o))||(e.exports=i)},function(e,t){e.exports=x},function(e,t){e.exports=L},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";return{getWidgetDisplayName:function(t,n){if(!t||!t.api)return null;const o=t.api,i=e.assign({},e.assign.apply(e,[{}].concat(o)));return e.has(i,n)?e.get(i[n],"widgetDisplayName")||n:null}}}.apply(t,o))||(e.exports=i)},function(e,t){e.exports=B},function(e,t,n){var o,i;o=[n(0),n(1),n(475),n(192),n(476),n(477),n(478),n(479),n(486)],void 0===(i=function(e,t,n,o,i,r,a,s,c){"use strict";const p=[r,a,o,s,c,n],l=[r,a,i],u=o;return{save:t.functionUtils.runMultiple(p),saveAsTemplate:t.functionUtils.runMultiple(l),autosave:u}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(130)],void 0===(i=function(e){"use strict";return e.meshLayoutReadySiteDataPreSaveFixer}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(17)],void 0===(i=function(e,t){"use strict";return function(n){const o=e(t.getPageIdList(n,!0)).transform(function(e,t){e[t]=n.pointers.page.getPageData(t)},{}).mapValues(n.dal.get.bind(n.dal)).mapValues(function(t){return e.pickBy(t,"metaData")}).value();e.forEach(o,function(t,n,o){e.forEach(n,function(e){e.metaData.isPreset=!0;const n=t.pointers.data.getDataItem(e.id,o);t.dal.set(n,e)})}.bind(null,n))}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(19)],void 0===(i=function(e,t,n){"use strict";function o(e){return e>1}return function(i){const r=i.pointers.general.getUrlFormat();if(i.dal.get(r)===t.siteConstants.URL_FORMATS.HASH_BANG)return;const a=n.getPagesList(i),s=e(a).map(n.getPageUriSEO.bind(null,i)).countBy().pickBy(o).value();if(!e.isEmpty(s))throw new Error(`Found pages with duplicate url title: ${JSON.stringify(s)}`)}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(19)],void 0===(i=function(e,t,n){"use strict";return function(o){const i=o.pointers.general.getUrlFormat();if(o.dal.get(i)===t.siteConstants.URL_FORMATS.HASH_BANG)return;const r=n.getPagesList(o),a=n.getForbiddenPageUriSEOs(o),s=e.reduce(r,function(e,t){const i=n.getPageUriSEO(o,t);return i&&a[i.toLowerCase()]&&e.push(i),e},[]);if(!e.isEmpty(s))throw new Error(`Found pages with forbidden url title: ${JSON.stringify(s)}`)}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(12),n(480),n(131)],void 0===(i=function(e,t,n,o){"use strict";return function(t){const i=function(e){const t=e.dal.full.immutable.getLastSnapshotByTagName("reordering")||e.dal.full.immutable.getInitialSnapshot();return e.dal.takeSnapshot("reordering"),[t,e.dal.full.immutable.getLastSnapshotByTagName("reordering")]}(t),r=o.getChangedPages(i[0],i[1]);n.reorderComponents(t,e.noop,e.noop,r)}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(1),n(0),n(37)],void 0===(i=function(e,t,n){"use strict";const o=e.constants,i=[o.COMP_IDS.HEADER,o.COMP_IDS.PAGES_CONTAINER,o.COMP_IDS.FOOTER];function r(e){const n=function(e){const n=t.invert(e);return function(e){const t=n[e.id];return t?Number(t):-1}}(e);return function(e,t){return n(e)-n(t)}}function a(e,t,n){const o=e.pointers.full.components.getChildrenContainer(t),i=e.dal.full.get(o);"wysiwyg.viewer.components.HoverBox"!==e.dal.get(t).componentType&&i.sort(r(n)),e.dal.full.set(o,i)}function s(e,n){return new Promise(function(o,i){t.delay(function(){let t;try{t=e(n),o(t)}catch(e){i(e)}})})}function c(e,t,n,i){const r=e.pointers.components.getPage(t,o.VIEW_MODES.DESKTOP),s=e.pointers.full.components.getComponent(n,r);s&&a(e,s,i)}function p(e,r){return p=[function(){return n.getComponentsOrder(e,r)},function(n){return"masterPage"===r&&function(e,n){const r=e.pointers.full.components.getMasterPage(o.VIEW_MODES.DESKTOP),a=e.pointers.full.components.getChildren(r),s=t.reject(a,e=>t.includes(i,e.id)),c=t.map(s,"id"),p=(n.SITE_HEADER||[]).concat(n.SITE_FOOTER||[]),l=t.union(p,c);n.masterPage=[o.COMP_IDS.HEADER,o.COMP_IDS.PAGES_CONTAINER].concat(l).concat(o.COMP_IDS.FOOTER),t.remove(n.SITE_HEADER,t.partial(t.includes,c)),t.remove(n.SITE_FOOTER,t.partial(t.includes,c))}(e,n),n},function(n){const i=e.pointers.components.getPage(r,o.VIEW_MODES.DESKTOP);return a(e,i,n[r]),t.omit(n,r)},function(n){return function(e,n,o){return Promise.all(t.transform(o,function(o,i,r){const a=s(t.partial(c,e,n,r,i));return o.push(a),o},[]))}(e,r,n)}],t.reduce(p,function(e,t){return e.then(function(e){return s(t,e)})},Promise.resolve());var p}return{reorderComponents:(e,n,o,i)=>{Promise.all(t.map(i,t.partial(p,e))).then(n).catch(o)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{UNKNOWN_SERVER_ERROR:"UNKNOWN_SERVER_ERROR",HTTP_REQUEST_ERROR:"HTTP_REQUEST_ERROR",SAVE_DISABLED_IN_DOCUMENT_SERVICES:"SAVE_DISABLED_IN_DOCUMENT_SERVICES",SAVE_BLOCKED_BY_DOCUMENT_SERVICES:"SAVE_BLOCKED_BY_DOCUMENT_SERVICES",SAVE_IN_PROGRESS:"SAVE_IN_PROGRESS",NOT_LOGGED_IN:"NOT_LOGGED_IN",SESSION_EXPIRED:"SESSION_EXPIRED",USER_NOT_AUTHORIZED_FOR_SITE:"USER_NOT_AUTHORIZED_FOR_SITE",CONCURRENT_SAVE:"CONCURRENT_SAVE_ERROR",SITE_NAME_TAKEN:"SITE_NAME_TAKEN_ERROR",DUPLICATE_COMPONENTS:"DUPLICATE_COMPONENTS",DATA_REFERENCE_MISMATCH:"DATA_REFERENCE_MISMATCH",MISSING_CONTAINERS:"MISSING_CONTAINERS",APP_CONTROLLER_REFERENCE_MISMATCH:"APP_CONTROLLER_REFERENCE_MISMATCH",DESIGN_REFERENCE_MISMATCHES:"DESIGN_REFERENCE_MISMATCHES",BEHAVIOR_REFERENCE_MISMATHCHES:"BEHAVIOR_REFERENCE_MISMATHCHES",PROPERTY_REFERENCE_MISMATCHES:"PROPERTY_REFERENCE_MISMATCHES",STYLE_REFERENCE_MISMATCHES:"STYLE_REFERENCE_MISMATCHES",CONNECTION_LIST_REFERENCE_MISMATCHES:"CONNECTION_LIST_REFERENCE_MISMATCHES",SITE_DESERIALIZATION_ERROR:"SITE_DESERIALIZATION_ERROR",SAVE_PUBLISH_DISABLED_ON_SERVER:"SAVE_PUBLISH_DISABLED_ON_SERVER",SAVE_PUBLISH_RC_FAILED_ON_SERVER:"SAVE_PUBLISH_RC_FAILED_ON_SERVER",CONCURRENT_AUTO_SAVE:"CONCURRENT_AUTO_SAVE",SITE_STALE_STATE_FROM_AUTO_SAVE:"SITE_STALE_STATE_FROM_AUTO_SAVE",AUTOSAVE_DISABLE_FROM_SERVER:"AUTOSAVE_DISABLE_FROM_SERVER"}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{INVALID_VERSION_TYPE:"INVALID_VERSION_TYPE",NO_GRID_APP_ID:"NO_GRID_APP_ID",NO_STUDIO_APP_APP_ID:"NO_STUDIO_APP_APP_ID",UNKNOWN_SERVER_ERROR:"UNKNOWN_SERVER_ERROR",USER_NOT_AUTHORIZED_FOR_APP:"USER_NOT_AUTHORIZED_FOR_APP"}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(0),n(484),n(485),n(1)],void 0===(i=function(e,t,n,o){"use strict";const i=[t,n];return{fixData:function(e,t,n,r){return o.loggingUtils.performance.start(o.loggingUtils.performanceMetrics.SAVE.SAVE_DATA_FIXER),i.forEach(function(o){o.exec(e,t,n,r)}),o.loggingUtils.performance.start(o.loggingUtils.performanceMetrics.SAVE.SAVE_DATA_FIXER),e}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(3),n(57)],void 0===(i=function(e,t,n,o){"use strict";const{DATA_TYPES:i,PAGE_DATA_DATA_TYPES:r}=t.constants;function a(e,t,n,o){const i=n.getIn([e,"data",r[o],t]);return i&&i.toJS()}function s(t,n,o,i,r){const s=a(t,n.id,r,o);return!s||!e.isEqual(s[i],n[i])}function c(e,t,n,o,i,r){const s=function(e,t,n,o){return a(e,t.replace("#",""),n,o)}(e,t,o,r);s&&!i[s.id]&&(i[s.id]=s,p(e,s,r,n,o,!1,i))}function p(t,o,i,r,p,l,u){"Page"===o.type&&o.pageBackgrounds&&function(t,n,o,i,r,s){const p=a(t,n.id,i,o);e.forEach(["desktop","mobile"],function(e){(!p||!p.pageBackgrounds||p.pageBackgrounds[e].ref!==n.pageBackgrounds[e].ref)&&c(t,n.pageBackgrounds[e].ref,i,r,s,o)})}(t,o,i,r,p,u);const d=o.type;e.forEach(o,function(g,f){if(g)if(!n.isOfType(i,d,f,"ref")||l&&!s(t,o,i,f,r)){if(n.isOfType(i,d,f,"refList")&&(!l||s(t,o,i,f,r))){const n=g,s=l&&a(t,o.id,r,i),d=s?e.difference(n,s[f]):n;e.forEach(d,function(e){c(t,e,r,p,u,i)})}}else c(t,g,r,p,u,i)})}function l(t,n,i,a,s){const c={};e.forEach(t,function(e){p(function(e,t,n){const o=["data",r[t],e.id],i=n.findEntry(function(e){return Boolean(e.getIn(o))});return i&&i[0]}(e,n,a),e,n,i,a,!0,c)});const l=function(t,n){return e.reduce(n,function(n,o,i){return e.isEqual(o,t[i])||(n[i]=o),n},{})}(t,c);e.isEmpty(l)||function(t,n,i){const r={dataType:n,dataItemType:e(t).map("type").uniq().value().toString()};i&&i.event&&i.event(o.DATA_ITEM_REFS_SAVE_DATAFIXER,r)}(l,n,s),e.assign(t,c)}return{exec(t,n,o,a){if(!n)return;const s=t.dataDelta[r.data],c=t.dataDelta[r.design];e.isEmpty(s)||l(s,i.data,n.get("pagesData"),o.get("pagesData"),a),e.isEmpty(c)||l(c,i.design,n.get("pagesData"),o.get("pagesData"),a)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";return{exec(t,n,o){const i=t.pagesPlatformApplications;i&&(!function(t,n){const o=n.getIn(["rendererModel","clientSpecMap"]).toJS();t[e.chain(o).find({type:"siteextension"}).get("appDefinitionId").value()]=e.assign({},t.wixCode),delete t.wixCode}(i,o),t.pagesPlatformApplications=e.transform(i,function(t,n,o){e.forOwn(n,function(e,n){t[n]=t[n]||[],t[n].push(o)})},{}))}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(77),n(13),n(7)],void 0===(i=function(e,t,n,o,i){"use strict";const r={appPart:["wixapps.integration.components.AppPart"],appPart2:["wixapps.integration.components.AppPart2"],tpa:e.concat(e.values(n.constants.COMP_TYPES),e.values(n.constants.TPA_COMP_TYPES))},a=n=>{const o=n.pointers.data.getDataItemFromMaster(t.siteConstants.MASTER_PAGE_ID),i=n.pointers.getInnerPointer(o,"layoutSettings"),r=n.dal.get(i);return e.get(r,"mechanism")===t.siteConstants.LAYOUT_MECHANISMS.MESH};return function(n){t.loggingUtils.fedopsLogger.interactionStarted(t.loggingUtils.fedopsLogger.INTERACTIONS.CALCULATE_SITE_META_DATA_RENDER_HINTS);const s=o.getProperty(n,o.PROPERTY_NAMES.SITE_META_DATA);s.renderHints=e.defaults({isMeshReady:a(n),containsAppPart:i.getComponentByType(n,r.appPart).length>0,containsAppPart2:i.getComponentByType(n,r.appPart2).length>0,containsTPA:i.getComponentByType(n,r.tpa).length>0},s.renderHints),o.setProperty(n,o.PROPERTY_NAMES.SITE_META_DATA,s),t.loggingUtils.fedopsLogger.interactionEnded(t.loggingUtils.fedopsLogger.INTERACTIONS.CALCULATE_SITE_META_DATA_RENDER_HINTS)}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(58),n(4),n(14)],void 0===(i=function(e,t,n,o){"use strict";const i=function(e,n){const o=t(window);return(o.height()-e.height)/2+o.scrollTop()-n.y},r=function(e){return null!==e&&!isNaN(e)};return{getCompLayoutFrom:function(t,a,s){if(s&&r(s.x)&&r(s.y)){let t=s.x,n=s.y;return e.isNumber(t)||(t=parseInt(t,10)),e.isNumber(n)||(n=parseInt(n,10)),{width:s.width,height:s.height,x:t,y:n}}const c=o.getViewMode(t),p=t.pointers.components.getPagesContainer(c),l=n.layout.get(t,p);if(s=s||{},a.width=s.width||a.width,a.height=s.height||a.height,a.defaultPosition)switch(a.defaultPosition.region){case"header":const o=t.pointers.components.getHeader(c),r=n.layout.get(t,o);return function(t,n,o){const i={y:o.height/2-n.height/2,width:n.width,height:n.height};switch(t){case"LEFT":return e.merge(i,{x:0});case"RIGHT":return e.merge(i,{x:o.width-n.width});default:return e.merge(i,{x:o.width/2-n.width/2})}}(a.defaultPosition.placement,a,r);case"footer":const s=t.pointers.components.getFooter(c),p=n.layout.get(t,s);return function(t,n,o,i){const r={y:o.height+i.height/2-n.height/2,width:n.width,height:n.height};switch(t){case"LEFT":return e.merge(r,{x:0});case"RIGHT":return e.merge(r,{x:i.width-n.width});default:return e.merge(r,{x:i.width/2-n.width/2})}}(a.defaultPosition.placement,a,l,p);default:return function(t,n,o){const r={width:n.width,height:n.height};switch(t){case"TOP_LEFT":return e.merge(r,{x:0,y:0});case"TOP_CENTER":return e.merge(r,{x:o.width/2-n.width/2,y:0});case"TOP_RIGHT":return e.merge(r,{x:o.width-n.width,y:0});case"CENTER_LEFT":return e.merge(r,{x:0,y:i(n,o)});case"CENTER_RIGHT":return e.merge(r,{x:o.width-n.width,y:i(n,o)});case"BOTTOM_LEFT":return e.merge(r,{x:0,y:o.height-n.height});case"BOTTOM_CENTER":return e.merge(r,{x:o.width/2-n.width/2,y:o.height-n.height});case"BOTTOM_RIGHT":return e.merge(r,{x:o.width-n.width,y:o.height-n.height});default:return e.merge(r,{x:o.width/2-n.width/2,y:i(n,o)})}}(a.defaultPosition.placement,a,l)}return{width:a.width,height:a.height,x:l.width/2-a.width/2,y:i(a,l)}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(58),n(10),n(4),n(18),n(7),n(17),n(15),n(138),n(102),n(29),n(97),n(28),n(197)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l,u,d,g){"use strict";const f="WIDGET",m="PAGE",y=function(t,o,a,s){let c;if(o)if(a)e.includes(n.styles.getAllIds(t),a)&&(c=a);else{const e=r.getComponentById(t,s);c=i.style.getId(t,e)}return c};function E(t,n,o,i){const r=t.siteAPI.getFocusedRootId(),a=e.get(o,"widget.wixPageId")||r,c=s.getWidgetDataFromTPAWidgetId(t,n.appDefinitionId,e.get(o,"widget.tpaWidgetId"));return{pageId:a,widgetId:e.get(c,"widgetId"),showOnAllPages:e.get(o,"widget.allPages"),styleId:y(t,o.copyStyle,o.styleId,i)}}const I=function(t,n,o,i,r){const a=t.siteAPI.getFocusedRootId(),c=e.get(r,"widget.wixPageId")||a;if(t.pointers.page.isExists(c)||r.widget.allPages){s.getWidgetDataFromTPAWidgetId(t,o.appDefinitionId,e.get(r,"widget.tpaWidgetId"))?function(t,n,o,i,r){e.assign(t,E(n,r,t,o)),g.provisionWidget(n,i,r.appDefinitionId,t)}(r,t,i,n,o):t.setOperationsQueue.asyncPreDataManipulationComplete({onError:"No widget found."})}else t.setOperationsQueue.asyncPreDataManipulationComplete({onError:"pageId was not found."})},S=function(t,n,o){return{pageId:e.get(n,"page.pageId"),title:e.get(n,"page.title"),styleId:y(t,n.copyStyle,n.styleId,o),layout:P(n),isHidden:e.get(n,"page.isHidden"),requireLogin:e.get(n,"page.requireLogin")}};const h=function(t,n,o,i,r){const a=s.getWidgetDataFromTPAPageId(t,o.appDefinitionId,e.get(r,"page.pageId"));a?s.isMultiSectionInstanceEnabled(o,a.widgetId)?function(t,n,o,i,r){e.assign(o,S(t,o,r)),g.provisionMultiSection(t,n,i.appDefinitionId,o)}(t,n,r,o,i):l.isSectionInstalledByTpaPageId(t,o.applicationId,e.get(a,"appPage.id"))?t.setOperationsQueue.asyncPreDataManipulationComplete({onError:"Page already installed."}):function(t,n,o,i){e.assign(n,S(t,n,o)),t.setOperationsQueue.asyncPreDataManipulationComplete(i)}(t,r,i,o):t.setOperationsQueue.asyncPreDataManipulationComplete({onError:"No page found."})},P=function(t){const n={};return e.isNumber(t.x)&&(n.x=t.x),e.isNumber(t.y)&&(n.y=t.y),e.isNumber(t.width)&&(n.width=t.width),e.isNumber(t.height)&&(n.height=t.height),n},A=function(t,n,i){if("WIDGET"===i.componentType){const n=t.siteAPI.getPrimaryPageId(),r=t.pointers.page.getPagePointer(n);return o.getComponentToAddRef(t,r,i,e.get(i,"optionalCustomId"))}return a.getPageIdToAdd(t)},T=function(t,n,o,i){if(o){const i=l.getAllAppCompsByAppId(t,n.applicationId);return e.find(i,{widgetId:e.get(o,"widgetId")})||e.find(i,{widgetId:null})}return i({onError:"No widget found."}),null},v=function(t,n,o){if(n.onError)e.isFunction(o.callback)&&o.callback(n);else{if(o.appFlow){const i=o.callback||e.noop;o.callback=(()=>{const a=s.getAppDataByAppDefinitionId(t,o.componentOptions.appDefinitionId);if(function(t,n){const o=e.find(t.widgets,function(t){return"WIDGET"===n.componentType?t.tpaWidgetId===n.widget.tpaWidgetId:"PAGE"===n.componentType?e.get(t,"appPage.id")===n.page.pageId:null});return!!e.get(o,"autoAddToSite")}(a,o.componentOptions))!function(e,t,n,o){let i,a;if("WIDGET"===t.componentType){if(i=s.getWidgetDataFromTPAWidgetId(e,n.appDefinitionId,t.widget.tpaWidgetId),a=T(e,n,i,o)){const t=r.getComponentById(e,a.id);p.invokeWidgetCallback({callback:o},t,!0)}}else if("PAGE"===t.componentType&&(i=s.getWidgetDataFromTPAPageId(e,n.appDefinitionId,t.page.pageId),a=T(e,n,i,o))){const t=e.pointers.components.getPage(a.pageId,e.siteDataAPI.siteData.getViewMode());c.invokeSectionCallback({callback:o},t,a.id,!0)}}(t,o.componentOptions,a,i);else{const r={componentType:o.componentOptions.componentType,componentToAddRef:A(t,o.componentOptions.appDefinitionId,o.componentOptions),callback:i};r.componentType===f?e.assign(r,E(t,a,o.componentOptions,o.compId)):r.componentType===m&&e.assign(r,S(t,o.componentOptions,o.compId)),v(t,n,r)}})}switch(o.componentType){case"WIDGET":g.addAppWrapper(d.TYPE.TPA_WIDGET,t,n,o.componentToAddRef,n.appDefinitionId,o);break;case"PAGE":if(o.appFlow)g.addSection(t,n,o.componentToAddRef,n.appDefinitionId,o);else{const i=s.getWidgetDataFromTPAPageId(t,n.appDefinitionId,e.get(o,"pageId"));i&&(s.isMultiSectionInstanceEnabled(n,i.widgetId)?g.addMultiSection(t,n,o.componentToAddRef,n.appDefinitionId,o):l.isSectionInstalledByTpaPageId(t,n.applicationId,e.get(i,"appPage.id"))||g.addSubSection(t,o.componentToAddRef,n.appDefinitionId,o))}}}},C=function(e,t,n={}){t?u.getAppMarketDataAsync(e,t).then(function(o){o&&!o.error?(n.componentType=o.hasSection?"PAGE":"WIDGET",n.componentToAddRef=A(e,0,n),n.componentType===f?(n.layout=_(n),n.pageId&&!e.pointers.page.isExists(n.pageId)&&delete n.pageId,g.provisionWidget(e,n.componentToAddRef,t,n)):n.componentType===m&&(c.alreadyInstalled(e,t)?e.setOperationsQueue.asyncPreDataManipulationComplete({onError:"Section already installed"}):(n.layout=D(n),g.provisionSection(e,n.componentToAddRef,t,n,n.callback)))):e.setOperationsQueue.asyncPreDataManipulationComplete({onError:`Application with ${t} appDefinitionId do not exist.`})}):e.setOperationsQueue.asyncPreDataManipulationComplete({onError:"appDefinitionId is mandatory."})},_=function(t){let n={};return t&&e.isNumber(t.x)&&e.isNumber(t.y)&&(n={x:t.x,y:t.y}),n},O=function(t){return"WIDGET"===e.get(t,"componentType")?_(t):D(t)},D=function(t){const n={};return t&&(e.isNumber(t.x)&&(n.x=t.x),e.isNumber(t.y)&&(n.y=t.y),e.isNumber(t.width)&&(n.width=t.width),e.isNumber(t.height)&&(n.height=t.height)),n};return{provisionComp:function(t,n={}){let o;const i=n.appDefinitionId;if(i)if(l.isAppInstalledBy(t,i))o=s.getAppDataByAppDefinitionId(t,i),n.componentToAddRef=A(t,0,n),function(e,t,n,o,i){if(o)switch(i.componentType){case"WIDGET":I(e,t,o,n,i);break;case"PAGE":h(e,t,o,n,i);break;default:e.setOperationsQueue.asyncPreDataManipulationComplete({onError:"componentType not supported."})}else e.setOperationsQueue.asyncPreDataManipulationComplete({onError:"General Error."})}(t,n.componentToAddRef,n.compId,o,n);else{const o=e.clone(n);e.forEach(e.keys(n),function(e){delete n[e]}),n.appFlow=!0,n.componentOptions=o,n.componentOptions.layout=O(o),n.callback=o.callback,C(t,i,n)}else t.setOperationsQueue.asyncPreDataManipulationComplete({onError:"appDefinitionId is mandatory."})},addComponent:v,provisionApp:C,addApp:function(t,n,o,i){if(n.onError)e.isFunction(i.callback)&&i.callback(n);else switch(i.componentType){case f:g.addAppWrapper(d.TYPE.TPA_WIDGET,t,n,i.componentToAddRef,o,i);break;case m:g.addSection(t,n,i.componentToAddRef,o,i)}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{getComponentDefinition:function(e){return{addHoneycomb:{layout:{rotationInDegrees:0,width:626,height:723,scale:1,x:130,y:32,fixedPosition:!1},componentType:"tpa.viewer.components.Honeycomb",type:"Component",skin:"wysiwyg.viewer.skins.TPAHoneycombSkin",data:{items:[{type:"Image",title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569},{type:"Image",title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569},{type:"Image",title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569},{type:"Image",title:"Water Droplets",uri:"cd6a81b7d29d88425609ecc053a00d16.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",title:"Budding Tree",uri:"44dab8ba8e2b5ec71d897466745a1623.jpg",description:"Describe your image here",width:1e3,height:750},{type:"Image",title:"Fallen Apples",uri:"8dfce587e3f99f17bba2d3346fea7a8d.jpg",description:"Describe your image here",width:758,height:569}],type:"ImageList"},props:{numOfColumns:4,numOfHoles:2,imageShape:"hexagon",expandEnabled:!1,margin:1,font:"arial",imageScale:"x1",textMode:"titleAndDescription",alignText:"left",rolloverAnimation:"colorOnly",galleryImageOnClickAction:"zoomMode",type:"HoneycombProperties",layoutSeed:50},style:{componentClassName:"tpa.viewer.components.Honeycomb",pageId:"",compId:"i4skqikv",styleType:"custom",style:{propertiesSource:{color1:"theme",color2:"theme",color3:"theme",color4:"theme",color5:"theme",version:"value"},properties:{"alpha-color4":"0.7","alpha-color5":"1",color1:"color_18",color2:"color_1",color3:"color_15",color4:"color_11",color5:"color_11",version:"1","alpha-color1":"1","alpha-color2":"1","alpha-color3":"1"},groups:{}},type:"TopLevelStyle",skin:"wysiwyg.viewer.skins.TPAHoneycombSkin"}}}[e&&e.compType]}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(0),n(12),n(30),n(15),n(13),n(4),n(7),n(26),n(82)],void 0===(i=function(e,t,n,o,i,r,a,s,c){"use strict";const p=function(t){const n=c.current.get(t),o=c.original.get(t),i=c.getFull(t),r=s.getCurrency(t),a=s.getTimeZone(t);let p,l;return n&&(e.get(o,"languageCode")===n?(p=o.locale,l="true"):(p=e.get(e.find(i,{languageCode:n}),"locale"),l="false")),{lang:n,dateNumberFormat:p,isPrimaryLanguage:l,currency:r,timeZone:a}},l=function(t,s,c){if(s.url){const l=o.getAppData(t,s.applicationId),d=i.getProperty(t,i.PROPERTY_NAMES.LANGUAGE_CODE)||"en",g=t.siteAPI.getCurrentUrl(),f=n.common.utils.appendProtocolToUrlIfNeeded(s.url,g),m=n.common.utils.getDebuggingParamsFromUrl(g),y=p(t),E=r.data.get(t,a.getComponentById(t,s.origCompId));return new n.common.TPAUrlBuilder(f).addLocale(d).addOrigCompId(s.origCompId).addCompId(c).addDeviceType(s.deviceType).addViewMode("editor").addInstance(l.instance).addOrigin(s.origin).addMultipleQueryParams(m).addQueryParamsFromFunc(u,e.get(s,"bi")).setHash(s.hash).addExternalId(e.get(E,"referenceId")).addLang(y.lang).addDateNumberFormat(y.dateNumberFormat).addIsPrimaryLanguage(y.isPrimaryLanguage).addCurrency(y.currency).addTimeZone(y.timeZone).build()}return null},u=function(n,o){if(e.isObject(o))try{o=JSON.stringify(o),n.build().length<2083-o.length&&n.addCbi(o)}catch(e){t.log.error("could not add CBI param to URL:",e)}};return{getSettingsModalParams:function(e,n,o){const i=t.guidUtils.getUniqueId();return o.compId=i,o.url=l(e,n,i),o.title=o.title||"",o},getSettingsUrl:function(t,s,c,l,d){const g=o.getAppData(t,s),f=e.get(d,"isNewVersion",!1);let m=g.settingsUrl;const y=g.widgets&&g.widgets[c];if(y){const t=e.get(y,"settings");m=(f?e.get(t,"urlV2"):e.get(t,"url"))||m}const E=e.get(d,"width")?d.width:g.settingsWidth,I=i.getProperty(t,i.PROPERTY_NAMES.LANGUAGE_CODE)||"en",S=p(t),h=t.siteAPI.getCurrentUrl(),P=n.common.utils.getDebuggingParamsFromUrl(h),A=r.data.get(t,a.getComponentById(t,l));let T=new n.common.TPAUrlBuilder(m).addInstance(g.instance).addLocale(I).addOrigCompId(l).addWidth(e.toString(E)).addEndpointType("settings").addViewMode("editor").addCompId("tpaSettings").addMultipleQueryParams(P).addQueryParamsFromFunc(u,e.get(d,"bi")).addExternalId(e.get(A,"referenceId")).addLang(S.lang).addDateNumberFormat(S.dateNumberFormat).addIsPrimaryLanguage(S.isPrimaryLanguage).addCurrency(S.currency).addTimeZone(S.timeZone);return t.siteAPI.isMobileView()&&(T=T.addDeviceType("mobile")),T.build()},getSettingsModalUrl:l}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(131),n(105),n(205),n(206),n(501),n(207),n(208),n(209)],void 0===(i=function(e,t,n,o,i,r,a,s,c){"use strict";return{getSaveTasksConfig:function(e){return{primaryTask:t,secondaryTasks:[i,r,n,a,s,c,o.create(e)]}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";return{getItemsDiff:function(t,n,o,i){const r=[],a=[];return t.forEach(function(t,s){t.forEach(function(t,c){const p=n.getIn([s,c]);if(p){const n=t.toJS(),a=p.toJS();if(!e.isEqual(e.omit(n,o),e.omit(a,o))){const e=i?i(n,a):a;r.push(e)}}else a.push(c)})}),{created:n.reduce(function(e,n,o){const i=t.get(o),r=i?n.filterNot(function(e,t){return i.has(t)}):n;return e.concat(r.toList().toJS())},[]),updated:r,deleted:a}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(58),n(1),n(494),n(21),n(78),n(497)],void 0===(i=function(e,t,n,o,i,r,a){"use strict";function s(e){return[`${n.urlUtils.origin()}/apps/appBuilder/published/${e.applicationInstanceId}`]}function c(e){return[`${n.urlUtils.origin()}/apps/appBuilder/saved/${e.applicationInstanceId}?checkConcurrentModification=true`]}function p(e){return new a(e.event,e.error)}function l(){let e,t;const n=new Promise(function(n,o){e=n,t=o});return{resolve:e,reject:t,promise:n}}function u(t,n){return e(t).filter("success").transform(function(t,o){const a=o.payload.id,s=e.find(n.created,{_iid:a});s&&t.push({path:i.getItemPath(s._type,a,"_state"),value:r.STATES.SAVED})},[]).value()}return{saveRepo:function(o,r,a){const s=p(a);s.beforeSavingRepo(o);const u=l();if(r){e(r.dataSelectors).filter(function(t){return e.isUndefined(t.dataProviderId)}).forEach(function(e){e.dataProviderId="wixdb"});const a={urls:c(o),data:e.assign({applicationInstanceVersion:o.applicationInstanceVersion,dataProviders:{wixdb:{type:"WixDb"}},tags:{},pages:{}},r)};n.requestsUtil.createAndSendRequest(a,function(e,t){if(t||!e.success)u.reject({errorCode:t?e:e.errorCode,changes:null}),s.errorSavingRepo(o,e,t);else{s.successSavingRepo(o,e);let t=null;e.payload.applicationInstanceVersion&&(t=[{path:i.getApplicationInstanceVersionPath(),value:e.payload.applicationInstanceVersion}],o.applicationInstanceVersion=e.payload.applicationInstanceVersion),u.resolve({changes:t})}},t.ajax)}else s.skippedSavingRepo(o),u.resolve(null);return u.promise},saveItems:function(a,s,c){const d=p(c);d.beforeSavingItems(a,s);const g=l();if(e.some(s,function(e){return e.length>0})){const c={urls:[`${n.urlUtils.origin()}/apps/appBuilder/1/editor/Batch?checkConcurrentModification=true`],data:{operations:o.getSaveItemsOperations(a,s)}};n.requestsUtil.createAndSendRequest(c,function(t,n){const o=e.get(t,"payload.results");if(n||!t.success){const c=o?function(t,n){return e(t).filter("success").transform(function(t,o){const a=o.payload.id,s=e.find(n.created,{_iid:a});if(s)return s._state=r.STATES.SAVED,void t.push({path:i.getItemPath(s._type,a),value:s});e.find(n.deleted,a)&&t.push({path:i.getItemPath(s._type,a),undefined:void 0})},[]).value()}(o,s):null;g.reject({errorCode:n?t:t.errorCode,changes:c}),d.errorSavingItems(a,t,n)}else g.resolve({changes:u(o,s)}),d.successSavingItems(a,t)},t.ajax)}else d.skippedSavingItems(a),g.resolve(null);return g.promise},saveRepoAndItems:function(t,n,o,i){const r=[];function a(e){e&&r.push(...e)}const s=l();return this.saveRepo(t,n,i).then(function(n){return a(e.get(n,"changes")),this.saveItems(t,o,i)}.bind(this)).catch(function(t){a(e.get(t,"changes"));const n={changes:r,errorCode:t.errorCode};s.reject(n)}).then(function(t){a(e.get(t,"changes")),s.resolve({changes:r})}).catch(function(t){a(e.get(t,"changes"));const n={changes:r,errorCode:t.errorCode};s.reject(n)}),s.promise},publish:function(e,o){const i=p(o),r=l(),a={urls:s(e),data:{}};return i.beforePublish(e),n.requestsUtil.createAndSendRequest(a,function(t,n){n||!t.success?(r.reject({errorCode:n?t:t.errorCode}),i.errorPublish(e,t,n)):(r.resolve(t.payload),i.successPublish(e))},t.ajax),r.promise}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";const t=[i,r,a,function(e,t){const n=t.created;if(0===n.length)return[];return[{name:"CreateTypes",params:{applicationInstanceId:e.applicationInstanceId,applicationInstanceVersion:e.applicationInstanceVersion,types:n}}]}],n=[i,r,a],o=[function(e,t){if(0===t.length)return[];return[{name:"PublishItems",params:{applicationInstanceId:e.applicationInstanceId,applicationInstanceVersion:e.applicationInstanceVersion,itemIds:t}}]},function(e,t){if(0===t.length)return[];return[{name:"PublishTypes",params:{applicationInstanceId:e.applicationInstanceId,applicationInstanceVersion:e.applicationInstanceVersion,names:t}}]}];function i(t,n){return e.map(n.created,function(e){return{name:"CreateItem",params:{applicationInstanceId:t.applicationInstanceId,applicationInstanceVersion:t.applicationInstanceVersion,item:e}}})}function r(t,n){return e.map(n.updated,function(e){return{name:"UpdateItem",params:{applicationInstanceId:t.applicationInstanceId,applicationInstanceVersion:t.applicationInstanceVersion,item:e}}})}function a(t,n){return e.map(n.deleted,function(e){return{name:"DeleteItem",params:{applicationInstanceId:t.applicationInstanceId,applicationInstanceVersion:t.applicationInstanceVersion,itemId:e}}})}function s(t,n,o){return e(t).map(function(e){return e(n,o)}).flattenDeep().value()}return{getSaveOperations:function(e,n){return s(t,e,n)},getSaveItemsOperations:function(e,t){return s(n,e,t)},getPublishOperations:function(e,t){return s(o,e,t)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(39),n(3),n(1)],void 0===(i=function(e,t,n,o){"use strict";const i=o.linkTypes;return{convertWLinkToWixappsData:function(t){const n={linkId:t.id};switch(t.type){case i.PAGE_LINK:e.assign(n,{_type:"wix:PageLink",pageId:e.isPlainObject(t.pageId)?t.pageId.id:t.pageId});break;case i.DYNAMIC_PAGE_LINK:const o=e.isPlainObject(t.anchorDataId)?t.anchorDataId.id:t.anchorDataId;e.assign(n,{_type:"wix:DynamicPageLink",routerId:t.routerId,innerRoute:t.innerRoute,anchorDataId:o||""});break;case i.EXTERNAL_LINK:let r=t.url.split("://");1===r.length&&(r=["http"].concat(r)),e.assign(n,{_type:"wix:ExternalLink",target:t.target,protocol:r[0],address:r[1]});break;case i.DOCUMENT_LINK:e.assign(n,{_type:"wix:DocLink",docId:t.docId,docName:t.name});break;case i.PHONE_LINK:e.assign(n,{_type:"wix:PhoneLink",phoneNumber:t.phoneNumber});break;case i.EMAIL_LINK:e.assign(n,{_type:"wix:MailLink",email:t.recipient,subject:t.subject});break;case i.ANCHOR_LINK:e.assign(n,{_type:"wix:AnchorLink",anchorName:t.anchorName,anchorDataId:e.isPlainObject(t.anchorDataId)?t.anchorDataId.id:t.anchorDataId,pageId:e.isPlainObject(t.pageId)?t.pageId.id:t.pageId})}return n},convertWixappsDataToWLink:(o,i)=>t.linksConverter(i,function(t,i){return t=e.isString(t)&&t.replace("#",""),i=e.isString(i)&&i.replace("#",""),n.getDataItemById(o,t,i)})}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(21)],void 0===(i=function(e,t){"use strict";function n(e,n){const o=t.getOffsetFromServerTimePath(),i=e.dal.getByPath(o);return new Date(n-i).toISOString()}return{getCurrentTime:t=>n(t,e.now()),normalizeDate:n}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(498),n(499),n(1)],void 0===(i=function(e,t,n,o){"use strict";function i(e,t){this._eventCallback=e,this._errorCallback=t}return i.prototype={sendEvent(e,t){try{this._eventCallback(e,t)}catch(e){o.log.error("Error sending BI event",e)}},sendError(e,t){try{this._errorCallback(e,t)}catch(e){o.log.error("Error sending BI error event",e)}},beforeSavingItems(n,o){this.sendEvent(t.BEFORE_SAVING_ITEMS,{app_instance_id:n.applicationInstanceId,app_instance_version:n.applicationInstanceVersion,item_ids_to_create:e.map(o.created,"_iid").join(","),item_ids_to_update:e.map(o.updated,"_iid").join(","),item_ids_to_delete:o.deleted.join(",")})},successSavingItems(n,o){let i=[];if(e.get(o,"payload.results")){const t=e.isArray(o.payload.results)?e.map(o.payload.results,"payload"):[o.payload.results.payload];i=t&&e.map(t,"id")}this.sendEvent(t.SUCCESS_SAVING_ITEMS,{app_instance_id:n.applicationInstanceId,app_instance_version:n.applicationInstanceVersion,saved_item_ids:i.join(",")})},skippedSavingItems(e){this.sendEvent(t.SKIPPED_SAVING_ITEMS,{app_instance_id:e.applicationInstanceId,app_instance_version:e.applicationInstanceVersion})},errorSavingItems(e,t,o){this.sendError(n.LIST_BUILDER_ERROR_SAVING_ITEMS,{app_instance_id:e.applicationInstanceId,app_instance_version:e.applicationInstanceVersion,error_code:t?t.errorCode:o,error_description:t&&t.errorDescription})},beforeSavingRepo(e){this.sendEvent(t.BEFORE_SAVING_REPO,{app_instance_id:e.applicationInstanceId,app_instance_version:e.applicationInstanceVersion})},successSavingRepo(n,o){this.sendEvent(t.SUCCESS_SAVING_REPO,{app_instance_id:n.applicationInstanceId,old_app_instance_version:n.applicationInstanceVersion,new_app_instance_version:e.get(o,"payload.applicationInstanceVersion")})},skippedSavingRepo(e){this.sendEvent(t.SKIPPED_SAVING_REPO,{app_instance_id:e.applicationInstanceId,app_instance_version:e.applicationInstanceVersion})},errorSavingRepo(e,t,o){this.sendError(n.LIST_BUILDER_ERROR_SAVING_REPO,{app_instance_id:e.applicationInstanceId,app_instance_version:e.applicationInstanceVersion,error_code:t?t.errorCode:o,error_description:t&&t.errorDescription})},beforePublish(e){this.sendEvent(t.BEFORE_PUBLISH,{app_instance_id:e.applicationInstanceId,app_instance_version:e.applicationInstanceVersion})},successPublish(e){this.sendEvent(t.SUCCESS_PUBLISH,{app_instance_id:e.applicationInstanceId,app_instance_version:e.applicationInstanceVersion})},errorPublish(e,t,o){this.sendError(n.LIST_BUILDER_ERROR_PUBLISH,{app_instance_id:e.applicationInstanceId,app_instance_version:e.applicationInstanceVersion,error_code:t?t.errorCode:o,error_description:t&&t.errorDescription})}},i}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{BEFORE_SAVING_ITEMS:{src:59,endpoint:"listim2",evid:201,fields:{app_instance_id:"string",app_instance_version:"string",item_ids_to_create:"string",item_ids_to_update:"string",item_ids_to_delete:"string"}},SUCCESS_SAVING_ITEMS:{src:59,endpoint:"listim2",evid:202,fields:{app_instance_id:"string",app_instance_version:"string",saved_item_ids:"string"}},SKIPPED_SAVING_ITEMS:{src:59,endpoint:"listim2",evid:203,fields:{app_instance_id:"string",app_instance_version:"string"}},BEFORE_SAVING_REPO:{src:59,endpoint:"listim2",evid:211,fields:{app_instance_id:"string",app_instance_version:"string"}},SUCCESS_SAVING_REPO:{src:59,endpoint:"listim2",evid:212,fields:{app_instance_id:"string",old_app_instance_version:"string",new_app_instance_version:"string"}},SKIPPED_SAVING_REPO:{src:59,endpoint:"listim2",evid:213,fields:{app_instance_id:"string",app_instance_version:"string"}},BEFORE_PUBLISH:{src:59,endpoint:"listim2",evid:221,fields:{app_instance_id:"string",app_instance_version:"string"}},SUCCESS_PUBLISH:{src:59,endpoint:"listim2",evid:222,fields:{app_instance_id:"string",app_instance_version:"string"}}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{LIST_BUILDER_ERROR_SAVING_ITEMS:{src:40,endpoint:"trg",errorName:"list_builder_error_saving_items",errorCode:101,params:{p1:"app_instance_id",p2:"app_instance_version",p3:"error_code",p4:"error_description"}},LIST_BUILDER_ERROR_SAVING_REPO:{src:40,endpoint:"trg",errorName:"list_builder_error_saving_repo",errorCode:102,params:{p1:"app_instance_id",p2:"app_instance_version",p3:"error_code",p4:"error_description"}},LIST_BUILDER_ERROR_PUBLISH:{src:40,endpoint:"trg",errorName:"list_builder_error_publish",errorCode:103,params:{p1:"app_instance_id",p2:"app_instance_version",p3:"error_code",p4:"error_description"}}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o;void 0===(o=function(){"use strict";function e(e){return e.getIn(["wixapps","appbuilder","descriptor","applicationInstanceVersion"])}function t(e){const t=e.getIn(["rendererModel","clientSpecMap"]).find(function(e){return"appbuilder"===e.get("type")});return t&&t.get("instanceId")}return{getAppInstance:function(n){return{applicationInstanceId:t(n),applicationInstanceVersion:e(n)}},getAppInstanceId:t,getAppVersion:e}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(0),n(129),n(502)],void 0===(i=function(e,t,n){"use strict";function o(e,o,i,r){t.fullSave(e,o,function(t={changes:[]}){n.fullSave(e,o,function(e={changes:[]}){i({changes:t.changes.concat(e.changes)})},r)},r)}return{partialSave:o,fullSave:o,firstSave:o,saveAsTemplate:o,autosave:(...e)=>t.autosave(...e),publish(e,t){t()},getTaskName:()=>"saveCode",getSnapshotTags(e){switch(e){case"autosave":return["autosave"];default:return["primary","autosave"]}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(20),n(38),n(176)],void 0===(i=function(e,t,n,o){"use strict";function i(e,i,r,a){n.getExistingWixCodeAppFromSnapshot(i)?o.runUsingSnapshot(i).then(function(){i.getIn(t.paths.IS_APP_READ_ONLY)?r():r({changes:[{path:t.paths.IS_APP_READ_ONLY,value:!0}]})}).catch(function(e){a(e)}):r()}return{partialSave:i,fullSave:i,firstSave:i,saveAsTemplate:i,publish(e,t){t()},getTaskName:()=>"markAppImmutable",getSnapshotTags(e){switch(e){case"autosave":return["autosave"];default:return["primary"]}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1)],void 0===(i=function(e,t){"use strict";return{generateRouterId:function(n){let o=t.guidUtils.getUniqueId("routers","-");for(;e(n).keys().includes(o);)o=t.guidUtils.getUniqueId("routers","-");return o}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(505),n(3),n(10)],void 0===(i=function(e,t,n,o,i){"use strict";return{beforeAdd:function(r,a,s,c){if(!e.get(c,"props.menuItemHeight")&&e.get(c,"layout.height")){const a=c.layout.height,p=o.getDataItemById(r,c.data.menuRef.replace("#","")).items,l=e.filter(p,"isVisible").length,u=e.isString(c.style),d=r.pointers.components.getPageOfComponent(s).id,g=u?i.styles.get(r,c.style,d):c.style,f=parseInt(g.style.properties.sepw||g.style.properties.separatorHeight||0,10),m=n[c.skin],y=t.verticalMenuCalculations.getItemHeight(a,f,l,m);c.props.menuItemHeight=y}}}}.apply(t,o))||(e.exports=i)},function(e,t){e.exports=F},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";function t(t,n){const o=t.pointers.data.getDataItem(n,n),i=e.get(t.dal.get(o),"pageBackgrounds",{}),r=i.mobile;r&&!r.mediaSizing&&(r.mediaSizing="viewport",t.dal.merge(o,{pageBackgrounds:i}))}return{setMobileMediaSizing:t,setMobileMediaSizingByPointer:function(e,n){t(e,n.id)},setMediaSizingForDevice:function(e,n,o){"mobile"===o&&t(e,n)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(2),n(36)],void 0===(i=function(e,t,n){"use strict";function o(e){return e?t.VIEW_MODES.MOBILE:t.VIEW_MODES.DESKTOP}return{handleHeaderLayoutChange:function(t,i,r){const a=t.dal.get(i).layout;if(!e.isUndefined(r.fixedPosition)&&a.fixedPosition!==r.fixedPosition&&!1===r.fixedPosition){const e={type:"scrub",viewMode:o(t.siteAPI.isMobileView())};n.removeComponentsBehaviorsWithFilter(t,i,e)}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(73),n(4),n(3),n(7)],void 0===(i=function(e,t,n,o,i,r){"use strict";const a="platform.components.AppController",s="platform.components.AppWidget";function c(t,n){return e.map(n,function(n){const o=e.get(n,"controllerId");return t[o]?e.assign({},n,{controllerId:t[o]}):n})}function p(t,n,o,r){return e(o).filter(o=>(function(t,n,o,r){const a=e.get(r,"controllerId");return e(n).map(n=>e.get(i.getDataItem(t,n),"id")).some(e=>a===e||e===o[a])})(t,n,r,o)).thru(e.partial(c,r)).value()}function l(t,n,i,c,l,u,d={}){const g=e.get(c,"connections.items"),f=e.reject(g,{type:"WixCodeConnectionItem"});if(e.isEmpty(f))return;const m=function(t,n,i,c){const p=n?i:t.pointers.full.components.getPageOfComponent(c).id;return[...r.getAllComponents(t,p,e=>o.getType(t,e)===a),...e.filter([c,...o.getAncestorsFromFull(t,c)],e=>o.getType(t,e)===s)]}(t,u,c.id,i),y=p(t,m,f,d),E=e.difference(g,f);e.set(c,"connections.items",E.concat(y))}return{updateSerializedConnectionsData:function(e,t,n,o,i,r,a){r||l.apply(this,arguments)},updateSerializedConnectionsDataForPage:function(e,t,n,o,r){const a=n.connections;l(e,0,null,n,0,!0,r),a&&i.addSerializedConnectionsItemToPage(e,t.id,a,o)},removeInvalidConnections:function(i,r,a){const s=o.getPage(i,r).id,c=o.getPage(i,a).id;if(s===t.siteConstants.MASTER_PAGE_ID||s===c)return;const p=i.pointers.components.getChildrenRecursivelyRightLeftRootIncludingRoot(r);e.forEach(p,function(t){const r=n.getPlatformAppConnections(i,t);e.forEach(r,function(r){const a=e.get(r,"controllerRef");o.getPage(i,a).id===c||(t=>e.some(p,e=>i.pointers.isSamePointer(e,t)))(a)||n.disconnect(i,t,a)})})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";const t="wysiwyg.viewer.components.ContactForm",n="ContactForm";function o(t,n){const o=t.dal.get(t.pointers.general.getContactFormsMetaData())[n.id];e.merge(n,o)}function i(t,n,o){if(o){const n=t.pointers.general.getContactFormsMetaData(),i=t.dal.get(n)[o.id],r=e.assign({},i,e.pick(o,e.keys(i))),a=t.pointers.getInnerPointer(n,o.id);t.dal.set(a,r)}}return{initContactFromHooks:function(e){e.registerHook(e.HOOKS.DATA.AFTER_GET,o,n),e.registerHook(e.HOOKS.DATA.UPDATE_BEFORE,i,t)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(179),n(4),n(3)],void 0===(i=function(e,t,n,o){"use strict";const i=["width","height"];return{beforeAddHook:function(t,n,o,r){!function(t){if(1!==e.size(t.components))throw new Error("Invalid app widget structure - must have single child")}(r),function(t){const n=t.components[0];e.merge(n,{layout:{x:0,y:0}}),e.forEach(i,o=>{e.has(t,["layout",o])?n.layout[o]=t.layout[o]:e.has(n,["layout",o])&&e.set(t,["layout",o],n.layout[o])})}(r)},handleAppWidgetAddition:function(e,n,o){t.setControllerStateFromSerializedStructure(e,n,o),t.addPlatformAppToPageIfFirstController(e,n,o.data.applicationId)},handleAppWidgetDeletion:function(e,n){t.removePlatformApplicationFromPageIfLastController(e,n),t.removeControllerFromStateMap(e,n)},handleAppWidgetSerialization:function(e,n,o){t.addControllerStateToSerializedStructure(e,n,o)},handleAppWidgetParentChange:function(e,i,r){const a=o.getDataItem(e,i).applicationId;t.removePlatformApplicationFromPageIfLastController(e,i),t.addPlatformAppToPageIfFirstController(e,i,a,n.getPage(e,r))}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(49)],void 0===(i=function(e,t){"use strict";return{removeComponentHook:function(e,n){(t.getComponentPreviewState(e)||{})[n.id]&&t.setComponentPreviewState(e,n.id,null)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(4),n(5),n(8)],void 0===(i=function(e,t,n,o){"use strict";return{setMobileComponentAsDead:function(n,i){if(n.pointers.components.isPage(i)||n.pointers.components.isMobile(i)||n.dal.full.isExist(i))return;const r=n.pointers.full.components.getMobilePointer(i);if(!n.dal.full.isExist(r))return;const a=n.pointers.full.components.getParent(r);a&&function(t,n){const i=e.get(t.pointers.full.components.getPageOfComponent(n),"id",""),r=t.dal.full.get(n);return!o.public.getMobileConversionConfigByName(t,r,"nonLayoutComponent",i)}(n,r)&&function(e,n,o){const i=e.dal.full.get(n),r={id:`dead-${i.id}`,type:"Container",componentType:"to.be.removed.by.MobileMerge",layout:i.layout,components:[]},a=e.pointers.full.components.getChildrenContainer(o),s=t.getComponentToAddRef(e,o,r,r.id);e.dal.full.push(a,r,s)}(n,r,a),n.dal.full.remove(r)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(11),n(3)],void 0===(i=function(e,t,n){"use strict";return{beforeUpdateCheckboxData:function(o,i,r){if(e.isEmpty(r.label)||!e.isEmpty(n.getDataItem(o,i).label))return;const a=o.dal.get(i),s=n.getPropertiesItem(o,i),c=e.clamp(a.layout.height,12,100);n.setPropertiesItem(o,i,e.assign(s,{buttonSize:c})),t.updateCompLayoutAndAdjustLayout(o,i,{width:c+200},!0)},afterUpdateCheckboxData:function(o,i,r){if(!e.isEmpty(n.getDataItem(o,i).label)||e.isEmpty(r.label))return;const a=n.getPropertiesItem(o,i).buttonSize||18;t.updateCompLayoutAndAdjustLayout(o,i,{width:a,height:a},!0)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(11),n(4),n(61)],void 0===(i=function(e,t,n,o){"use strict";return{copyRootComponentDockedLayout:function(i,r){e.forEach(e.filter(r,({id:e})=>o.isWidgetPage(i,e)),o=>{const r=e.head(n.getChildren(i,i.pointers.components.getDesktopPointer(o))),a=t.getDock(i,r);e.isEmpty(a)||t.setDock(i,i.pointers.components.getMobilePointer(r),a)})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(3),n(516)],void 0===(i=function(e,t,n){"use strict";const{minInputHeight:o,defaultInputHeight:i}=n.labelUtils;return{beforeUpdateInputLabelData:function(n,i,r){if(e.isEmpty(r.label)||!e.isEmpty(t.getDataItem(n,i).label))return;const a=n.dal.get(i),s=t.getPropertiesItem(n,i),c=Math.max(a.layout.height,o);t.setPropertiesItem(n,i,e.assign(s,{inputHeight:c}))},beforeUpdateInputLabelLayout:function(n,r,a){if(a.height){const s=n.dal.get(r),c=t.getPropertiesItem(n,r),p=!e.isEmpty(t.getDataItem(n,r).label),l=s.layout,u=(c.inputHeight||i)+a.height-l.height,d=p?u:a.height,g=Math.max(o,d);t.setPropertiesItem(n,r,e.assign(c,{inputHeight:g}))}}}}.apply(t,o))||(e.exports=i)},function(e,t){e.exports=k},function(e,t,n){var o,i;o=[n(0),n(24),n(7),n(62),n(4),n(5)],void 0===(i=function(e,t,n,o,i,r){"use strict";const a="wysiwyg.viewer.components.SiteRegionContainer";return{removeOverridesPointingToMode:function(s,c,p){if(r.isOpen("fixSOSPData")){const r=t.getComponentActiveModeIds(s,c),l=!e.includes(r,p);l&&t.activateComponentMode(s,c,p);const u=n.getComponentByType(s,a,c),d=o.getSOSPModes(s),g=e.map(d,"modeId");e.forEach(u,n=>{const o=t.overrides.getAllOverrides(s,n);if(!function(t,n){return e(t).flatMap("modeIds").includes(n)}(o,p))return;const r=e.reduce(o,(t,n)=>{const o=n.modeIds,i=e.cloneDeep(n);return i.modeIds=e.without(o,p),e.isEmpty(i.modeIds)||t.push(i),t},[]),a=e.flatMap(r,"modeIds");e.isEmpty(r)||e.isEmpty(e.intersection(a,g))?i.remove(s,n):(l&&t.deactivateCompMode(s,c,p),t.overrides.updateComponentOverrides(s,n,r))})}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(25),n(57)],void 0===(i=function(e,t,n){"use strict";return{afterAddInput:function(o,i,r){e.isString(r.props.placeholder)&&r.data.placeholder!==r.props.placeholder&&t.event(o,n.INPUT_WRONG_PLACEHOLDER,{comp_id:i.id})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(6),n(34),n(214),n(522)],void 0===(i=function(e,t,n,o,i){"use strict";const r=i.default,a={beforeUpdateProperties:{hookName:t.HOOKS.PROPERTIES.UPDATE_BEFORE,pluginDataType:"properties"},beforeUpdateData:{hookName:t.HOOKS.DATA.UPDATE_BEFORE,pluginDataType:"data"},beforeUpdateLayout:{hookName:t.HOOKS.LAYOUT.UPDATE_BEFORE,pluginDataType:"layout"}},s=t=>n=>e.merge(t,n),c=(t,i)=>(a,c,p)=>{const l=n.getComponentType(a,c),u=e.get(r,[l,t]);if(e.isFunction(u)){u(o(a,c,{overrides:{[i]:{update:s(p)}},read:!0,write:!0}),e.cloneDeep(p))}};return{createHookDefinition:(t,n)=>{const{hookName:i,pluginDataType:r}=a[t];if(i)return{hookName:i,hook:((t,n)=>(i,r,a)=>{if(!e.isFunction(n))return;const c=o(i,r,{overrides:{[t]:{update:s(a)}},read:!0,write:!0});n(c,e.cloneDeep(a))})(r,n)}},beforeUpdateData:c("beforeUpdateData","data"),beforeUpdateLayout:c("beforeUpdateLayout","layout"),beforeUpdateProperties:c("beforeUpdateProperties","properties")}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(4),n(3)],void 0===(i=function(e,t){"use strict";return(n,o)=>({layout:{get:()=>e.layout.get(n,o)},data:{get:()=>t.getDataItem(n,o)},properties:{get:()=>e.properties.get(n,o)},isMobile:()=>n.pointers.components.isMobile(o)})}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(4),n(11),n(3)],void 0===(i=function(e,t,n,o){"use strict";return(e,i)=>{const r=t=>(...n)=>t(e,i,...n);return{layout:{update:r(n.updateCompLayout)},data:{update:r(o.updateDataItem)},properties:{update:r(t.properties.update)}}}}.apply(t,o))||(e.exports=i)},function(e,t){e.exports=U},function(e,t,n){var o,i;o=[n(0),n(194),n(203),n(1),n(6),n(215),n(216)],void 0===(i=function(e,t,n,o,i,r,a){"use strict";const s="initial state";function c(t){return e.isEqual(t,["runtime"])}function p(t,n,o){this.undoablePaths=m(n),this.nonUndoablePaths=m(o),this.undoStack=[],this.redoStack=[],l(t),function(t){this.undo=function(t){if(!this.canUndo())return null;const n=this.undoStack.pop();this.redoStack.push(n);const o=e.last(this.undoStack);return t.setOperationsQueue.runSetOperation(f,[o,t.dal,this.undoablePaths,this.nonUndoablePaths,t.siteAPI]),E(t),o.label}.bind(this,t),this.redo=function(t){if(!this.canRedo())return null;const n=this.redoStack.pop();this.undoStack.push(n);const o=e.last(this.undoStack);return t.setOperationsQueue.runSetOperation(f,[o,t.dal,this.undoablePaths,this.nonUndoablePaths,t.siteAPI]),E(t),o.label}.bind(this,t),this.add=function(t,n,o,i){y.call(this);const r=this,a={placeHolder:!0,params:o||null,label:n||""},c=this.canUndo()&&(p=i,u=r.undoStack,u[u.length-1].snapshotId===p);var p,u;if(c){const t=r.undoStack.pop();a.params=e.assign({},t.params,o,{label:a.label})}else if(i===function(e){return e.runtimeConfig.nextHistorySnapshotId}(t))return;t.setOperationsQueue.flushQueueAndExecute(function(){c&&t.dal.removeLastSnapshot("undoRedo"),a.historyIndex=t.dal.takeSnapshot("undoRedo"),a.snapshotId=function(e){const t=e.runtimeConfig.nextHistorySnapshotId;return l(e),t}(t),a.placeHolder=!1}),r.undoStack.push(a),n!==s&&E(t)}.bind(this,t),this.applyLatestSnapshot=function(t){const n=e.last(this.undoStack);if(!n)return null;return t.setOperationsQueue.runSetOperation(f,[n,t.dal,this.undoablePaths,this.nonUndoablePaths,t.siteAPI]),n.label}.bind(this,t)}.call(this,t),this.add(s)}function l(e){e.runtimeConfig.nextHistorySnapshotId=o.guidUtils.getGUID()}function u(e,t){a.applyPatchList(e,t)}function d(o,i,r){return e.mapValues(i,function(i){return function(o,i,r){let a,s;i.full.isPathExistInHostModel(o)&&(s=i.full.immutable.getByPath(o));const c=r.getIn(o);let p=!1;return e.isUndefined(s)&&!e.isUndefined(c)?(p=!0,a=t(n.Map(),n.Map([[o[0],c]]))):!e.isUndefined(s)&&e.isUndefined(c)?(p=!0,a=t(n.Map([[o[0],s]]),n.Map())):a=t(s,c),e.map(a.toJS(),function(t){return e.assign({},t,{path:p?o.join("/"):o.join("/").concat(t.path)})})}(i,o,r)})}function g(t,n,o,i){const r=function(t,n){return e(n).filter(t.full.isPathExist).transform(function(e,n){const o=n.join(".");c(n)?e[o]=function(e){return e.displayedJsonDal.jsonData.runtime}(t):e[o]=t.getByPath(n)},{}).value()}(t,i),a=d(t,o,n),s=function(t){return t?e(t).map(function(e){return e.path.split("/")[1]}).uniq().value():[]}(a.pagesData);return t.transaction(()=>{!function(t,n){e.forEach(n,e.partial(u,t))}(t.full,a)}),function(t,n){e.forEach(n,function(e,n){const o=n.split(".");c(o)?function(e,t){e.displayedJsonDal.jsonData.runtime=t}(t,e):t.full.setByPath(o,e)})}(t,r),s}function f(t,n,o,r,a){const s=function(t){const n=e.map(t,e.last);return e.zipObject(n,t)}(o),c=n.full.immutable.getSnapshotByTagAndIndex("undoRedo",t.historyIndex,s),p=g(n,c,s,r);e.forEach(p,function(e){a.createDisplayedPage(e)}),e.isEmpty(p)||i.executeHook(i.HOOKS.UNDO_REDO.AFTER_APPLY_SNAPSHOT)}function m(t){return e.map(t,function(t){return e.isString(t)?[t]:t})}function y(){this.redoStack=[]}function E(e){r.canAutosave(e)&&i.executeHook(i.HOOKS.AUTOSAVE.ACTION)}function I(t){return e.last(t)}function S(t){return e.isEmpty(t)?null:I(t).params}function h(t){return e.isEmpty(t)?null:I(t).label}function P(t){return e.isEmpty(t)?null:I(t).snapshotId}return p.prototype={clear:function(){(function(){this.add(s),this.undoStack=e.takeRight(this.undoStack)}).call(this),y.call(this)},getUndoLastSnapshotParams:function(){return S(this.undoStack)},getRedoLastSnapshotParams:function(){return S(this.redoStack)},getUndoLastSnapshotLabel:function(){return h(this.undoStack)},getRedoLastSnapshotLabel:function(){return h(this.redoStack)},getUndoLastSnapshotId:function(){return P(this.undoStack)},getRedoLastSnapshotId:function(){return P(this.redoStack)},canUndo:function(){return this.undoStack.length>=2},canRedo:function(){return!e.isEmpty(this.redoStack)}},p}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(1),n(3),n(16)],void 0===(i=function(e,t,n){"use strict";const{DATA_TYPES:o}=e.constants,{schemasService:i}=n.services;return{init:()=>{i.registerDataTypeSchema(n.schemas.layoutSchemas,o.layout),i.registerDataTypeSchema(n.schemas.breakpointsSchemas,o.breakpoints)},update:(e,n,o)=>{t.updateComponentLayoutData(e,n,o)},get:(e,n)=>t.getComponentLayoutData(e,n),measure:(e,t)=>e.siteAPI.responsive.getMeasuresByCompId(t.id)}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(526),n(527),n(528),n(529),n(530),n(531),n(532),n(533),n(534),n(536),n(537),n(538),n(539),n(544),n(217),n(546),n(547),n(548),n(549),n(556),n(557)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l,u,d,g,f,m,y,E,I,S,h,P){"use strict";const A=e.compact([t,o,n,i,r,a,s,c,p,l,u,d,g,f,m,y,E,I,S,h,P]);return{fix:function(t){e.forEach(A,function(e){e.exec(t)})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(5),n(7),n(2),n(25),n(48),n(1)],void 0===(i=function(e,t,n,o,i,r,a){"use strict";return{exec:function(s){if(!t.isOpen("removeBadlyDuplicatedPages"))return;const c=a.loggingUtils.performance;c.start("Remove badly duplicated pages");const p=s.dal.getKeys(s.pointers.page.getAllPagesPointer());let l=0;e.forEach(p,e=>{const t=s.pointers.data.getDataItemFromMaster(e);if(!s.dal.get(t)){l++;const t=n.getComponentById(s,e,e,o.VIEW_MODES.DESKTOP),i=n.getComponentById(s,e,e,o.VIEW_MODES.MOBILE);s.dal.full.remove(s.pointers.page.getPagePointer(e)),s.dal.full.isExist(t)&&s.dal.full.remove(t),s.dal.full.isExist(i)&&s.dal.full.remove(i)}});const u=Math.trunc(c.finish("Remove badly duplicated pages").duration);if(l>0){const e={errorReason:"succeed",duration:u,dsOrigin:s.config.origin,numberOfInvalidPages:l};i.event(s,r.REMOVE_BADLY_DUPLICATED_PAGES,e)}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(8),n(11),n(7)],void 0===(i=function(e,t,n,o,i){"use strict";return{exec(t){if(function(t){const n=t.siteAPI.getClientSpecMap(),o=e.find(n,{type:"onboarding"});return!!o&&!1===o.inUse}(t)){const r=i.getAllComponentsFromFull(t,null,function(e){const n=t.dal.get(e);return n&&"wysiwyg.viewer.components.Group"===n.componentType});e.forEach(r,function(i){!function(t,i){const r=t.pointers.components.getChildren(i);e.forEach(r,function(e){n.public.isGroupable(t,e)||o.reparentComponentToPage(t,e,!0)})}(t,i)})}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(7),n(3),n(11)],void 0===(i=function(e,t,n,o){"use strict";return{exec(i){const r=t.getComponentByType(i,"wysiwyg.viewer.components.FiveGridLine");e.forEach(r,function(e){const t=n.getPropertiesItem(i,e);t&&t.fullScreenModeOn&&function(e,t,i){o.setDock(e,t,{left:{vw:0},right:{vw:0}}),i.fullScreenModeOn=!1,n.updatePropertiesItem(e,t,i)}(i,e,t)})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(2),n(5)],void 0===(i=function(e,t,n){"use strict";const o=function(t,n){const o=[n].concat(t.pointers.components.getChildrenRecursively(n)),i=e.filter(o,function(e){const n=t.pointers.getInnerPointer(e,"layout.anchors");return t.dal.isExist(n)}),r=e.map(i,"id");return e.filter(i,function(n){const o=t.pointers.getInnerPointer(n,"layout.anchors"),i=t.dal.get(o);return e.some(i,function(t){return"BOTTOM_PARENT"!==t.type&&!e.includes(r,t.targetComponent)})})};function i(n){const o=n.pointers.page.getNonDeletedPagesPointers(!1);return e(o).map(function(e){return function(e,n){return e.pointers.components.getPage(n.id,t.VIEW_MODES.DESKTOP)}(n,e)}).filter(function(t){return function(t,n){return function n(o){const i=t.pointers.getInnerPointer(o,"layout.anchors");if(!t.dal.isExist(i))return!0;const r=t.pointers.components.getChildren(o);return e.some(r,n)}(n)}(n,t)}).value()}return{exec:function(t){if(n.isOpen("sv_fixBrokenAnchors")){const n=i(t);e.forEach(n,function(n){const i=o(t,n);e.isEmpty(i)||e.forEach(i,function(e){const n=t.pointers.getInnerPointer(e,"layout.anchors");t.dal.full.remove(n)})})}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(59)],void 0===(i=function(e,t){"use strict";const n={MediaContainerDesignData:["background"],BackgroundMedia:["mediaRef","imageOverlay"],MediaTransforms:[],WixVideo:["posterImageRef"],Image:["link","originalImageDataRef"]},o="VALID",i="INVALID",r="ONLY_REFS_INVALID";function a(a,p,l){const u=a.pointers.page.getPageDesignData(p),d=a.dal.full.getKeys(u),g=function(a,p,l,u){const d=function(t,n,o,i){return e.filter(o,function(e){const o=t.pointers.data.getDesignItem(e,n),r=t.pointers.getInnerPointer(o,"type");return i[t.dal.full.get(r)]})}(a,p,l,n),g={},f={};return e.forEach(d,function(l){const d=l,m=function(a,p,l,u,d){const g=function(t,a,p,l){return s(a,p,l)?i:function(t,o,i,r){const a=t.pointers.data.getDesignItem(o,i),p=t.pointers.getInnerPointer(a,"type"),l=n[t.dal.full.get(p)];return e.some(l,function(e){const n=t.pointers.getInnerPointer(a,e),o=c(t.dal.full.get(n));return s(o,i,r)})}(t,a,p,l)?r:o}(a,p,l,d);if(function(e,t,n){if(n.idToPageId[e]){if(n.idToPageId[e]!==t){const t=n.idToPageId[e],o=n.SKIPPED_PAGES_TO_FIX;o[t]=o[t]||{};let i=o[t][e];i||(i={id:e,isReferencedMoreThanOnce:!0},o[t][e]=i)}}else n.idToPageId[e]=t}(p,l,d),g===o)return null;const f=g===r,m=a.pointers.data.getDesignItem(p,l);return function(o,i,r,a){const s=o.dal.full.get(i);return function(o,i){const r=n[o.type];e.forEach(r,function(n){const r=o[n];if(!e.isEmpty(r)){const e=c(r),a=i[e]||t.generateNewDesignId();o[n]=`#${a}`,i[e]=a}})}(s,r),a&&function(e,n){const o=c(e.id),i=n[o]||t.generateNewDesignId();e.id=i,n[o]=i}(s,r),s}(a,m,u,!f)}(a,l,p,g,u);m&&(f[d]=m)}),f}(a,p,d,l);e.forEach(g,function(e,t){const n=a.pointers.data.getDesignItem(t,p);a.dal.full.remove(n);const o=a.pointers.data.getDesignItem(e.id,p);a.dal.full.set(o,e)})}function s(t,n,o){const i=o.idToPageId;return i[t]&&i[t]!==n||e.get(o.SKIPPED_PAGES_TO_FIX,[n,t,"isReferencedMoreThanOnce"])}function c(t){return e.isString(t)?t.replace("#",""):t}return{exec:function(t){const n=e.map(t.pointers.page.getNonDeletedPagesPointers(!0),"id");!function(t,n,o){e.forEach(n,function(e){a(t,e,o)}),e.forEach(o.SKIPPED_PAGES_TO_FIX,function(e,n){a(t,n,o)})}(t,n,{idToPageId:{},SKIPPED_PAGES_TO_FIX:{}})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(4),n(7)],void 0===(i=function(e,t,n){"use strict";function o(o,i,r){const a=n.getComponentByType(o,r);e.forEach(a,n=>{const r=o.dal.full.get(o.pointers.full.components.getParent(n));e.get(r,"componentType")!==i&&(o.dal.isExist(n)?t.remove(o,n):t.removeFromFull(o,n))})}return{exec:function(e){o(e,"wysiwyg.viewer.components.StripContainerSlideShow","wysiwyg.viewer.components.StripContainerSlideShowSlide"),o(e,"wysiwyg.viewer.components.BoxSlideShow","wysiwyg.viewer.components.BoxSlideShowSlide")}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(2),n(3)],void 0===(i=function(e,t,n){"use strict";function o(t,o){const i=t.pointers.getInnerPointer(o,"componentType");return"wysiwyg.viewer.components.StripColumnsContainer"===t.dal.get(i)&&e.every(t.pointers.components.getChildren(o),function(t,o){return e.get(n.getMobileHintsItem(t,o),"hidden",!1)}.bind(null,t))}return{exec(i){const r=i.pointers.page.getNonDeletedPagesPointers(!0);e(r).map(function(e,n){return e.pointers.components.getPage(n.id,t.VIEW_MODES.DESKTOP)}.bind(null,i)).flatMap(function t(n,i){const r=n.pointers.components.getChildren(i),a=e.filter(r,o.bind(null,n)),s=e.flatMap(r,t.bind(null,n));return e.concat(a,s)}.bind(null,i)).forEach(function(e,t){const o=e.pointers.components.getMobilePointer(t);e.dal.isExist(o)&&e.dal.remove(o),n.updateMobileHintsItem(e,t,{hidden:!0})}.bind(null,i))}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(5),n(26)],void 0===(i=function(e,t,n,o){"use strict";function i(e,n){const o=function(e){const n=e.pointers.data.getDataItemFromMaster(t.siteConstants.MASTER_PAGE_ID);return e.pointers.getInnerPointer(n,"smSettings")}(e);e.dal.isExist(o)?e.dal.merge(o,n):e.dal.set(o,n)}return{exec:function(e){o.isFirstSave(e)&&i(e,{socialLoginGoogleEnabled:!0,socialLoginFacebookEnabled:!0})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(12),n(18),n(10),n(7),n(4),n(535)],void 0===(i=function(e,t,n,o,i,r,a){"use strict";const s="wysiwyg.viewer.skins.WRichTextNewSkin",c="txtNew",p="txt1",l="wysiwyg.viewer.skins.WRichTextSkin",u="wysiwyg.viewer.components.WRichText";function d(t,i,a,s){const u=function(e){const t=o.fonts.getAll(e);return function(e){return t[e]}}(t);e(i).filter(e=>r.isExist(t,e)).forEach(e=>(function(e,t,o,i,r){const a=n.style.getId(o,e),s=function(e,t){const n=e.pointers.getInnerPointer(t,"skin");return e.dal.get(n)}(o,e);try{a===c?(r?s===l&&g(e,t,o):i&&g(e,t,o),s===l&&m(e,o)):(n.style.connectToThemeStyle(o,e,c),s===l&&(m(e,o),g(e,t,o)))}catch(t){!function(e,t){n.style.connectToThemeStyle(t,e,p),f(e,l,t)}(e,o)}})(e,u,t,a,s))}function g(e,t,n){if(e){const o=r.data.get(n,e);o&&(o.text=a.utils.textComponentsUtils.applyTextStyleMigrationAdjustments(o.text,t),r.data.update(n,e,o))}}function f(e,t,n){const o=n.pointers.components.getMobilePointer(e);let i=n.pointers.getInnerPointer(e,"skin");n.dal.set(i,t),i=n.pointers.getInnerPointer(o,"skin"),n.dal.get(i)&&n.dal.set(i,t)}function m(e,t){f(e,s,t)}return{exec:function(e){const t=i.getComponentByType(e,u);let r=!1,a=!1;const p=o.styles.get(e,c);p&&p.skin&&p.skin!==l||(p?(r=!0,p.skin||(a=!0)):a=!0,function(e,t){let i;if(t)t.skin=s,i=t;else{n.style.createSystemStyle(e,c,u);const t=o.styles.get(e,c);t&&t.metaData&&(t.metaData.isPreset=!0,i=t)}o.styles.update(e,c,i)}(e,p)),d(e,t,r,a)}}}.apply(t,o))||(e.exports=i)},function(e,t){e.exports=H},function(e,t,n){var o,i;o=[n(0),n(1),n(7),n(3),n(10),n(18)],void 0===(i=function(e,t,n,o,i,r){"use strict";const a=t.vectorImageConversionUtils.vectorImageDefaults;function s(e,n,i){const r=o.getDesignItem(e,n)||{};t.vectorImageConversionUtils.convertStyleToDesignData(r,i),o.updateDesignItem(e,n,r)}return{exec(c){const p=e.unionBy(function(e){return n.getAllComponentsFromFull(e,null,function(t){return"wysiwyg.viewer.components.VectorImage"===e.dal.full.get(e.pointers.getInnerPointer(t,"componentType"))})}(c),function(e){return n.getAllComponents(e,null,function(t){return"wysiwyg.viewer.components.VectorImage"===e.dal.get(e.pointers.getInnerPointer(t,"componentType"))})}(c),"id"),l=[];e.forEach(p,function(n){const p=function(e,t){const n=e.pointers.getInnerPointer(t,"styleId"),o=e.dal.full.get(n),r=e.pointers.full.components.getPageOfComponent(t).id;return o&&i.styles.get(e,o,r)}(c,n);if(p){const t=o.getDataItem(c,n);if(e.isEmpty(p.style.properties)){const i=e.pick(t,["overrideColors","shapeStyle"]);e.isEmpty(i)||(e.defaults(i,{overrideColors:null}),function(t,n,i){const r=e.assign(o.getDesignItem(t,n),{type:"VectorImageDesignData"},i),a=e.omit(o.getDataItem(t,n),e.keys(i));o.updateDesignItem(t,n,r),o.deleteDataItem(t,n),o.updateDataItem(t,n,a)}(c,n,i))}else{const e=c.pointers.full.components.getPageOfComponent(n).id;l.push({styleId:p.id,pageId:e}),s(c,n,p)}}else{const e={type:"TopLevelStyle",style:{properties:a.style,propertiesSource:{}}};t.vectorImageConversionUtils.convertStyle(e,a),r.style.internal.update(c,n,e,!0),s(c,n,e)}!function(n,r,a){const s=n.pointers.full.components.getPageOfComponent(r).id,c=n.pointers.componentStructure.getModesOverrides(r),p=n.dal.full.isExist(c)&&n.dal.full.get(c);let l=!1;e.forEach(p,function(r){if(r.styleId){const c=i.styles.get(n,r.styleId,s);if(!e.isEmpty(e.get(c,["style","properties"]))){const i=o.generateNewDesignItemId(),p={},u=n.pointers.data.getDesignItem(i,s);t.vectorImageConversionUtils.convertStyleToDesignData(p,c),p.id=i,r.designQuery=`#${i}`,n.dal.full.set(u,p),a.push({styleId:r.styleId,pageId:s}),e.unset(r,"styleId"),l=!0}}}),l&&n.dal.full.set(c,p)}(c,n,l)}),e.forEach(e.uniq(l),function(e){const t=e.styleId,n=e.pageId,o=i.styles.get(c,t,n);o.style.properties={},o.style.propertiesSource={},i.styles.update(c,t,o,n)})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(5),n(1)],void 0===(i=function(e,t,n){"use strict";return{exec(o){const i=o.pointers.data.getDataItemFromMaster(n.siteConstants.MASTER_PAGE_ID),r=o.pointers.getInnerPointer(i,"accessibilitySettings");t.isOpen("sv_visualFocus")&&function(t,n){const o=e.get(t.dal.get(n),"visualFocusDisabled");return e.isUndefined(o)}(o,r)&&o.dal.set(r,{visualFocusDisabled:!1})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(26),n(36),n(7),n(3),n(2)],void 0===(i=function(e,t,n,o,i,r,a){"use strict";function s(e){const n=e.pointers.data.getDataItemFromMaster(t.siteConstants.MASTER_PAGE_ID);return e.pointers.getInnerPointer(n,"mobileSettings")}function c(t){return n=t,(!e.has(n,"action")||!e.has(n,"behavior"))&&"animation"===e.get(t,"type","animation");var n}function p(e,t){const n=s(e);e.dal.set(n,{animationsEnabled:t})}return{exec:function(t){const l=s(t);!function(e){return n.isFirstSave(e)}(t)?t.dal.isExist(l)||(p(t,!1),function(t){const n=i.getAllComponents(t);e.forEach(n,n=>{const i=e.map(o.getBehaviors(t,n),t=>(c(t)&&!e.has(t,"viewMode")&&(t.viewMode=a.VIEW_MODES.DESKTOP),t));if(i.length){const e=JSON.stringify(i);r.updateBehaviorsItem(t,n,e)}})}(t)):p(t,!0)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(540),n(541),n(542),n(543),n(142),n(5)],void 0===(i=function(e,t,n,o,i,r,a){"use strict";return{exec(s){e.get(s.config,"runStylesGC")&&(i.exec(s),o.exec(s));const c=r.isSiteMigrated(s),p=!a.isOpen("revertStylesBackToMasterPage")&&s.runtimeConfig.stylesPerPage&&!c,l=a.isOpen("revertStylesBackToMasterPage")&&c;p&&t.exec(s),l&&n.exec(s)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(7),n(18),n(10),n(24),n(25),n(2),n(53),n(48),n(1),n(142)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l){"use strict";const u={},d=(t,r,c,p,l,d,g,f)=>{const m=r===a.VIEW_MODES.DESKTOP,y=g[r];if(!s(p)&&(m||c[d.id]!==p)){y[((t,r,a,s,c)=>{const p=o.styles.get(t,r,a),l=o.styles.internal.fork(t,p,a,!0),d=i.overrides.getAllOverrides(t,s),g=e.find(d,["styleId",r]);return g?(g.styleId=l,i.overrides.updateComponentOverrides(t,s,d)):n.style.internal.setId(t,s,l,null,!0),c[r]||(c[r]=r),u[a]++,l})(t,p,l,d,f)]=d.id}},g=(o,r,c,p)=>{const l=a.VIEW_MODES.DESKTOP,u=t.getAllComponentsFromFull(o,null,(t=>o=>{const r=n.style.internal.get(t,o,!0),a=r&&"custom"===r.styleType,c=e.some(i.overrides.getAllOverrides(t,o),e=>s(e.styleId));return a||c})(o),r),g=e.invert(c[l]),f=e.uniqBy(u,"id");e.forEach(f,t=>{const n=o.pointers.full.components.getPageOfComponent(t).id,a=o.pointers.getInnerPointer(t,"styleId"),s=o.dal.full.get(a),l=i.overrides.getAllOverrides(o,t),u=e.compact(e.map(l,"styleId"));e.includes(u,s)||u.push(s),e.forEach(u,e=>{d(o,r,g,e,n,t,c,p)})})};return{exec(t){const n=p.loggingUtils.performance;n.start("Move Custom style fixer "),l.markSiteAsMigrated(t);const i=o.styles.getAllIds(t,a.MASTER_PAGE_ID).length;(t=>{e(t.pointers.page.getAllPagesPointer()).thru(t.dal.getKeys).reduce((e,t)=>(u[t]=0,e),{})})(t);const s=t.pointers.general.getOrphanPermanentDataNodes();let d=t.dal.get(s);const f={},m={[a.VIEW_MODES.DESKTOP]:{},[a.VIEW_MODES.MOBILE]:{}};[a.VIEW_MODES.DESKTOP,a.VIEW_MODES.MOBILE].forEach(e=>g(t,e,m,f)),d=d.concat(...e.keys(f)),((t,n)=>{e.forEach(e.keys(n),e=>o.styles.remove(t,e,"masterPage"))})(t,f),t.dal.set(s,d);const y=Math.trunc(n.finish("Move Custom style fixer ").duration);((t,n,i)=>{u[a.MASTER_PAGE_ID]=o.styles.getAllIds(t,"masterPage").length;const s=t.dal.getKeys(t.pointers.page.getAllPagesPointer());let p=s.splice(0,100);const l=t.config.origin;for(;p.length;){const o=e.reduce(p,(e,t)=>(e[t]=u[t],e),{}),d={mp_styles_before:n,mp_styles_after:u[a.MASTER_PAGE_ID],page_styles_after:JSON.stringify(o),errorReason:"succeed",duration:i,dsOrigin:l};r.event(t,c.MOVE_STYLE_TO_PAGES_MIGRATION,d),p=s.splice(0,100)}})(t,i,y)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(7),n(18),n(10),n(24),n(2),n(53),n(1),n(142)],void 0===(i=function(e,t,n,o,i,r,a,s,c){"use strict";let p;const l=(t,n)=>{const i=e.pick(o.styles.get(t,n),["skin","style"]),r=s.hashUtils.SHA256.b64_sha256(JSON.stringify(i));p[r]=n},u=(t,c,u,d,g)=>{const f=t.pointers.getInnerPointer(g,"styleId");if(!a(u)){let a=u;const c=o.styles.get(t,u,d);c.type!==r.STYLES.TOP_LEVEL_STYLE&&((a=((t,n)=>{const o=e.pick(n,["skin","style"]),i=s.hashUtils.SHA256.b64_sha256(JSON.stringify(o));return p[i]})(g.id,c))||(a=((e,t,n,i)=>{if(e.dal.full.isExist(t)){const t=e.pointers.data.getThemeItem(n,i),a=e.dal.full.get(t),s=o.styles.internal.fork(e,a,r.MASTER_PAGE_ID,!0);return e.dal.full.remove(t),l(e,s),s}})(t,f,u,d))),((t,o,r,a)=>{const s=i.overrides.getAllOverrides(t,a),c=e.find(s,["styleId",o]);c?(c.styleId=r,i.overrides.updateComponentOverrides(t,a,s)):n.style.internal.setId(t,a,r,null,!0)})(t,u,a,g)}},d=(o,r)=>{const s=t.getAllComponentsFromFull(o,null,(t=>o=>{const r=n.style.internal.get(t,o,!0),s=r&&"custom"===r.styleType,c=e.some(i.overrides.getAllOverrides(t,o),e=>a(e.styleId));return s||c})(o),r),c=e.uniqBy(s,"id");e.forEach(c,t=>{const n=o.pointers.full.components.getPageOfComponent(t).id,r=o.pointers.getInnerPointer(t,"styleId"),a=o.dal.full.get(r),s=i.overrides.getAllOverrides(o,t),c=e.compact(e.map(s,"styleId"));e.includes(c,a)||c.push(a),e.forEach(c,e=>{u(o,0,e,n,t)})})};return{exec(e){c.resetMigratedSiteFlag(e),e.runtimeConfig.stylesPerPage=!1,p={},[r.VIEW_MODES.DESKTOP,r.VIEW_MODES.MOBILE].forEach(t=>d(e,t))}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(10),n(53),n(2)],void 0===(i=function(e,t,n,o){"use strict";return{exec(i){const r=i.pointers.page.getAllPagesPointer(),a=i.dal.getKeys(r),s=e.reduce(a,function(e,t){const n=i.pointers.page.getPagePointer(t);return e[t]=i.dal.full.get(n),e},{}),c=i.siteAPI.collectUsedStylesFromAllPages(s);let p=i.dal.get(i.pointers.general.getOrphanPermanentDataNodes());const l={};e.forEach(a,r=>{const a=((t,i)=>e.reject(e.without(i,o.STYLES.THEME_DATA_ID),e=>n(e)))(0,t.styles.getAllIds(i,r)),s=e.difference(a,e.keys(c));p=p.concat(s),s&&(l[r]=s)}),i.dal.set(i.pointers.general.getOrphanPermanentDataNodes(),p),e.forEach(l,(n,o)=>e.forEach(n,e=>t.styles.remove(i,e,o)))}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(10),n(2),n(53)],void 0===(i=function(e,t,n,o){"use strict";return{exec(i){const r=e(i).thru(()=>t.styles.getAllIds(i,n.MASTER_PAGE_ID)).without(n.STYLES.THEME_DATA_ID).map(function(o){return e.merge(t.styles.get(i,o,n.MASTER_PAGE_ID),{id:o})}).filter(function(e){return e.styleType===n.STYLES.TYPES.SYSTEM&&!o(e.id)}).value();return e.forEach(r,function(e){e.styleType=n.STYLES.TYPES.CUSTOM,e.type=i.runtimeConfig.stylesPerPage?n.STYLES.COMPONENT_STYLE:n.STYLES.TOP_LEVEL_STYLE,i.dal.set(i.pointers.data.getThemeItem(e.id,n.MASTER_PAGE_ID),e)}),e.size(r)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(7),n(3),n(66),n(5)],void 0===(i=function(e,t,n,o,i){"use strict";return{exec(t){const n=t.pointers.data.getDataItemsWithPredicate({type:"BasicMenuItem"});e.forEach(n,function(n){!function(t,n){const o=t.dal.get(n);e.forEach(o.items,function(n){const o=n.replace("#",""),r=i.getMenuDataItemPointer(t,o),a=t.dal.get(r);if(a.items.length>0){const n=e.cloneDeep(a);n.items.length=0,t.dal.set(r,n)}})}(t,n)})}}}.apply(t,o))||(e.exports=i)},function(e,t){e.exports=V},function(e,t,n){var o,i;o=[n(130)],void 0===(i=function(e){"use strict";return{exec:e.meshLayoutReadySiteDataFixer}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(141),n(17)],void 0===(i=function(e,t,n){"use strict";return{exec(o){!function(o){const i=n.getPageIdList(o),r=t.get.all(o);e.forEach(r,n=>{const r=t.getRouterRef.byPrefix(o,n.prefix);e.forEach(n.pages,n=>{e.includes(i,n)||t.pages.removePageFromRouter(o,r,n)})})}(o)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(116),n(62),n(109),n(7),n(4),n(14),n(24),n(5)],void 0===(i=function(e,t,n,o,i,r,a,s,c){"use strict";const p="wysiwyg.viewer.components.SiteRegionContainer";function l(t){const o=t.pointers.components.getMasterPage(a.getViewMode(t)),c=i.getComponentByType(t,p,o),l=e.map(n.getSOSPModes(t),"modeId");e(c).filter(n=>(function(t,n,o){const i=s.overrides.getAllOverrides(t,o);return e(i).flatMap("modeIds").every(t=>!e.includes(n,t))})(t,l,n)).forEach(e=>{s.overrides.applyCurrentToAllModes(t,e),r.remove(t,e)})}return{exec(i){c.isOpen("fixSOSPData")&&(!function(n){const o=t.getAll(n);e(o).filter(o=>e.isEmpty(t.serializePagesGroup(n,o).pages)).forEach(e=>{t.removePagesGroup(n,e)})}(i),function(i){const r=e.keyBy(t.getAll(i),"id"),a=n.getSOSPModes(i);e(a).filter(t=>{const n=e.get(t,"settings.pagesGroupId");return!n||!r[n.replace(/^#/,"")]}).forEach(e=>{o.removeSOSPMode(i,e.modeId)})}(i),l(i))}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(219),n(2),n(16),n(1),n(5)],void 0===(i=function(e,t,n,o,i,r){"use strict";const a="report",s="reportAndFix",c=(n,o)=>{const i=t.validateAllComponentsWithValidators(n,{skin:t.validateComponentSkin},null,o);return e.map(i,({comp:e})=>({componentType:e.componentType,skin:e.skin,compId:e.id,pageId:e.pageId,viewMode:o}))};return{exec:function(t){const p=r.getValue("ds_componentSkinDataFixer");if(p===a||p===s){i.loggingUtils.fedopsLogger.interactionStarted(i.loggingUtils.fedopsLogger.INTERACTIONS.COMPONENT_SKIN_DATA_FIXER);try{e(c(t,n.VIEW_MODES.DESKTOP)).concat(c(t,n.VIEW_MODES.MOBILE)).forEach(({componentType:t,skin:n,compId:r,pageId:a,viewMode:s})=>{const c=o.services.schemasService.getDefinition(t),p=e.head(c.skins);!function(e,t,n,o,r,a,s){i.integrations.ravenUtils.captureError(new Error("Component Skin Mismatch"),{tags:{compSkinMismatch:`${e}|${t}`},extra:{componentType:e,skin:t,compId:n,pageId:o,viewMode:r,defaultStyle:a,defaultSkin:s}})}(t,n,r,a,s,e(c.styles).keys().head(),p)})}catch(e){i.integrations.ravenUtils.captureError(e)}i.loggingUtils.fedopsLogger.interactionEnded(i.loggingUtils.fedopsLogger.INTERACTIONS.COMPONENT_SKIN_DATA_FIXER)}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(18)],void 0===(i=function(e){"use strict";return{validateComponentStyle:function(t,n){!function(e,t){if(e){if(!t)throw new Error(`There is no existing style for styleId [${e}]`);if("object"!=typeof t)throw new Error(`The given style for for styleId [${e}] is not an object`);if(!t.skin)throw new Error(`The given style for for styleId [${e}] does not contain a skin`);if(!t.type)throw new Error(`The given style for for styleId [${e}] does not contain a type`)}}(e.style.getId(t,n),e.style.get(t,n))}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(18),n(552),n(16)],void 0===(i=function(e,t,n,o){"use strict";const i={"wysiwyg.viewer.components.svgshape.SvgShape":!0,"wysiwyg.viewer.components.PopupCloseIconButton":!0},r={"wysiwyg.viewer.components.StripContainerSlideShowSlide":{"wysiwyg.common.components.boxSlideShowSlide.viewer.skins.boxSlideShowSlideSkin":!0}};return{validateComponentSkin:function(a,s){const c=t.skin.get(a,s),p=a.dal.get(a.pointers.getInnerPointer(s,"componentType")),l=function(e){const t=o.schemas.componentTypeAliases.getAlias(e),i=o.services.getComponentSkins(t)||[],r=n[t]||[];return i.concat(r)}(p);if(!(i[p]||e.get(r,[p,c],!1)||e.includes(l,c)))throw new Error(`The skin [${c}] is not valid for component type [${p}]`)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{"core.components.Container":["wysiwyg.viewer.skins.area.ForkedRightRibbon","wysiwyg.viewer.skins.area.CustomRibbonArea","wysiwyg.viewer.skins.area.LinesAreaSkin","wysiwyg.viewer.skins.area.RoundArea","wysiwyg.viewer.skins.area.RoundShadowArea","wysiwyg.viewer.skins.area.BlankAreaSkin","wysiwyg.viewer.skins.area.TransparentArea","wysiwyg.viewer.skins.area.BubbleAreaLeft","wysiwyg.viewer.skins.area.LeftTriangleArea","wysiwyg.viewer.skins.area.RightTriangleArea","wysiwyg.viewer.skins.area.BubbleAreaRight","wysiwyg.viewer.skins.area.IronBox","wysiwyg.viewer.skins.area.PhotoArea"],"wysiwyg.viewer.components.WPhoto":["wysiwyg.viewer.skins.photo.DoubleBorderCirclePhoto","wysiwyg.viewer.skins.photo.VintagePhoto","wysiwyg.viewer.skins.photo.DefaultPhoto","wysiwyg.viewer.skins.photo.RoundShadowPhoto","wysiwyg.viewer.skins.photo.ScotchTapePhoto","wysiwyg.viewer.skins.photo.PaperclipPhoto","wysiwyg.viewer.skins.photo.ScotchDoubleHorizontal","wysiwyg.viewer.skins.photo.ScotchDoubleVertical","wysiwyg.viewer.skins.photo.ScotchTopPhoto","wysiwyg.viewer.skins.photo.IronPhoto","wysiwyg.viewer.skins.photo.GlowLinePhoto","wysiwyg.viewer.skins.photo.NewPolaroidPhoto"],"wysiwyg.viewer.components.mobile.TinyMenu":["wysiwyg.viewer.skins.mobile.TinyMenuSkin","wysiwyg.viewer.skins.mobile.TinyMenuPullFromTopSkin"],"wysiwyg.viewer.components.HorizontalMenu":["wysiwyg.viewer.skins.menu.SeparateArrowDownMenuSkin","wysiwyg.viewer.skins.menu.ArrowsMenuSkin","wysiwyg.viewer.skins.menu.SeparatedArrowsMenuSkin","wysiwyg.viewer.skins.menu.CirclesMenuSkin","wysiwyg.viewer.skins.horizontalmenu.BevelMenu","wysiwyg.viewer.skins.horizontalmenu.ArrowsMenu","wysiwyg.viewer.skins.horizontalmenu.DefaultMenu","wysiwyg.viewer.skins.horizontalmenu.AppleMenu","wysiwyg.viewer.skins.horizontalmenu.RectangleMenu","wysiwyg.viewer.skins.horizontalmenu.TabsMenu","wysiwyg.viewer.skins.horizontalmenu.OverlinesMenu","wysiwyg.viewer.skins.horizontalmenu.Overlines2Menu","wysiwyg.viewer.skins.horizontalmenu.PillMenu","wysiwyg.viewer.skins.horizontalmenu.BaseMenu","wysiwyg.viewer.skins.horizontalmenu.BevelMenu","wysiwyg.viewer.skins.horizontalmenu.CirclesMenu","wysiwyg.viewer.skins.horizontalmenu.Lines2Menu","wysiwyg.viewer.skins.horizontalmenu.LinesMenu","wysiwyg.viewer.skins.horizontalmenu.PointerMenu","wysiwyg.viewer.skins.horizontalmenu.RibbonsMenu","wysiwyg.viewer.skins.horizontalmenu.Ribbons2Menu","wysiwyg.viewer.skins.horizontalmenu.TextOnlyMenu"],"wysiwyg.viewer.components.ScreenWidthContainer":["wysiwyg.viewer.skins.screenwidthcontainer.GridScreen","wysiwyg.viewer.skins.screenwidthcontainer.TransparentHalfScreen","wysiwyg.viewer.skins.screenwidthcontainer.TwoColorScreen","wysiwyg.viewer.skins.screenwidthcontainer.LineBottomScreen","wysiwyg.viewer.skins.screenwidthcontainer.ShadowScreen"],"wysiwyg.viewer.components.HeaderContainer":["wysiwyg.viewer.skins.screenwidthcontainer.IronScreen","wysiwyg.viewer.skins.screenwidthcontainer.BoxScreen","wysiwyg.viewer.skins.screenwidthcontainer.BlankScreen","wysiwyg.viewer.skins.screenwidthcontainer.SolidScreen","wysiwyg.viewer.skins.screenwidthcontainer.NoiseScreen","wysiwyg.viewer.skins.screenwidthcontainer.LineBottomScreen"],"wysiwyg.viewer.components.FooterContainer":["wysiwyg.viewer.skins.screenwidthcontainer.IronScreen","wysiwyg.viewer.skins.screenwidthcontainer.BoxScreen","wysiwyg.viewer.skins.screenwidthcontainer.BlankScreen","wysiwyg.viewer.skins.screenwidthcontainer.SolidScreen","wysiwyg.viewer.skins.screenwidthcontainer.NoiseScreen","wysiwyg.viewer.skins.screenwidthcontainer.LineTopScreen"],"wysiwyg.viewer.components.PagesContainer":["wysiwyg.viewer.skins.screenwidthcontainer.DefaultScreen","wysiwyg.viewer.skins.screenwidthcontainer.BevelScreen","wysiwyg.viewer.skins.screenwidthcontainer.BoxScreen","wysiwyg.viewer.skins.screenwidthcontainer.LiftedShadowScreen","wysiwyg.viewer.skins.screenwidthcontainer.AppleScreen","wysiwyg.viewer.skins.screenwidthcontainer.BlankScreen","wysiwyg.viewer.skins.screenwidthcontainer.GridScreen","wysiwyg.viewer.skins.screenwidthcontainer.TransparentHalfScreen","wysiwyg.viewer.skins.screenwidthcontainer.TwoColorScreen","wysiwyg.viewer.skins.screenwidthcontainer.LineBottomScreen","wysiwyg.viewer.skins.screenwidthcontainer.ShadowScreen"],"wysiwyg.viewer.components.FiveGridLine":["wysiwyg.viewer.skins.line.FadeLine","wysiwyg.viewer.skins.line.DoubleLine2","wysiwyg.viewer.skins.line.DoubleLine3"],"wysiwyg.viewer.components.VerticalLine":["wysiwyg.viewer.skins.VerticalLineSkin"],"wysiwyg.viewer.components.SiteButton":["wysiwyg.viewer.skins.button.ButtonDoubleArrowLeft","wysiwyg.viewer.skins.button.ButtonDoubleArrowRight","wysiwyg.viewer.skins.button.ButtonSandclock","wysiwyg.viewer.skins.button.ButtonForkedRight","wysiwyg.viewer.skins.button.ButtonForkedLeft","wysiwyg.viewer.skins.button.IronButton","wysiwyg.viewer.skins.button.ShineButton","wysiwyg.viewer.skins.button.BorderButton","wysiwyg.viewer.skins.button.PillButton","wysiwyg.viewer.skins.button.ShinyPillButton","wysiwyg.viewer.skins.button.ShinyGradientButton","wysiwyg.viewer.skins.button.SiteButtonSkin","wysiwyg.viewer.skins.button.PlasticButton"],"wysiwyg.viewer.components.MatrixGallery":["wysiwyg.viewer.skins.gallerymatrix.MatrixGalleryTextBelowSkin","wysiwyg.viewer.skins.gallerymatrix.MatrixGalleryPolaroidSkin","wysiwyg.viewer.skins.gallery.CircleMatrixGallery","wysiwyg.viewer.skins.gallerymatrix.MatrixGalleryVintage"],"wysiwyg.viewer.components.SlideShowGallery":["wysiwyg.viewer.skins.gallery.SlideShowGallerySimple","wysiwyg.viewer.skins.gallery.RibbonsSlideShow","wysiwyg.viewer.skins.gallery.FrameShowGallery","wysiwyg.viewer.skins.gallery.RoundSlideShowGallery"],"wysiwyg.viewer.components.SliderGallery":["wysiwyg.viewer.skins.gallery.SliderGalleryMinimal","wysiwyg.viewer.skins.gallery.SliderGalleryBorder","wysiwyg.viewer.skins.galleryslider.SliderGalleryVintageSkin"],"wysiwyg.viewer.components.AudioPlayer":["wysiwyg.viewer.skins.AudioPlayerMinimalSkin"],"core.components.Page":["wysiwyg.viewer.skins.area.RectangleArea","skins.core.VerySimpleSkin"]}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(0),n(3),n(16)],void 0===(i=function(e,t,n){"use strict";const{schemasService:o}=n.services;return{validateCompData:function(i,r){const a=i.dal.get(i.pointers.getInnerPointer(r,"componentType")),s=t.getDataItemPointer(i,r),c=s&&i.dal.get(s);if(!function(t,n){const i=o.getDefinition(t);return e.isArray(i.dataTypes)?e.isPlainObject(n)?n.type&&e.includes(i.dataTypes,n.type):e.isString(n)?e.includes(i.dataTypes,n):e.includes(i.dataTypes,""):!n}(a,c))throw new Error(`Component data type [${c}`&&`${c.type}] is not valid for component type [${a}]`);c&&n.services.dataValidators.validateDataBySchema(c,"data")}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(555)],void 0===(i=function(e,t){"use strict";function n(e){return e.replace(/^#/,"")}function o(e,n,o,i,r){if(!e.dal.full.isPathExistInHostModel(["pagesData",n,"data",i,r]))throw new t.DataPathError({pageId:n,query:r,type:i,compId:o})}return{validateCompJSONpaths:function(e,t){const i=e.dal.full.get(t),r=e.pointers.components.getPageOfComponent(t).id;!function(e,t,i){t.dataQuery&&o(e,i,t.id,"document_data",n(t.dataQuery))}(e,i,r),function(e,t,i){t.propertyQuery&&o(e,i,t.id,"component_properties",n(t.propertyQuery))}(e,i,r),function(e,t,i){t.designQuery&&o(e,i,t.id,"design_data",n(t.designQuery))}(e,i,r),function(e,t,i){t.connectionQuery&&o(e,i,t.id,"connections_data",n(t.connectionQuery))}(e,i,r)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";const t=e.template("Expected comp {id: <%= compId %>} to have {id: <%= query %>} in the <%= type %> map, in page <%= pageId %>");function n(e){this.name="DataPathError",this.message=t(e),this.stack=(new Error).stack}return n.prototype=Object.create(Error.prototype),{DataPathError:n}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(11),n(2)],void 0===(i=function(e,t,n){"use strict";return{exec:function(e){const o=n.VIEW_MODES.MOBILE,i=e.pointers.components.getMasterPage(o),r=e.pointers.components.getComponent(n.MOBILE_ONLY_COMPONENTS.MENU_AS_CONTAINER,i),a=e.dal.isExist(r),s=e.pointers.isSamePointer(e.pointers.components.getParent(r),i);if(!a||!s)return;const c=e.pointers.components.getHeader(o);t.addCompToContainer(e,r,c)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(18),n(2),n(16),n(5)],void 0===(i=function(e,t,n,o,i){"use strict";const r=e.keys(o.services.schemasService.getDefinition("mobile.core.components.Page").styles),a=(e,n)=>{t.style.setId(e,n,r[0])},s=(e,t,o)=>e.dal.isExist(e.pointers.data.getThemeItem(t,o))||e.dal.isExist(e.pointers.data.getThemeItem(t,n.MASTER_PAGE_ID));return{exec:function(o){if(!i.isOpen("enableAddMissingStyleFixer"))return;const r=o.dal.getKeys(o.pointers.page.getAllPagesPointer());e.forEach(r,i=>{e.forEach([n.VIEW_MODES.DESKTOP,n.VIEW_MODES.MOBILE],e=>{const n=o.pointers.components.getPage(i,e),r=t.style.getId(o,n);s(o,r,i)||a(o,n)})})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(12),n(13),n(216),n(19),n(131),n(1),n(2)],void 0===(i=function(e,t,n,o,i,r,a,s){"use strict";const c=a.loggingUtils.performance,p=a.loggingUtils.performanceMetrics,l=a.ajaxLibrary;function u(n,o,i,r){const s=n.dal.getLastSnapshotByTagName("before-autosave-apply");!function(t,n,o){e.forEach(o,function(o){const i=o.split(".");t.dal.full.setByPathToHostModel(i,e.get(n,i))})}(n,s,r.autosavePaths),a.log.error(o,o.patch),t.integrations.ravenUtils.breadcrumb("LOAD & APPLY ERROR",i),c.finish(p.AUTOSAVE.LOAD_APPLY,{additionalData:i,report:!0})}return{applyPatchIfExists(t,d,g,f){!function(e){const t=e.dal.get(e.pointers.general.getAutosaveInfo());return t&&t.shouldRestoreDiffs}(t)||"false"===a.urlUtils.getParameterByName("autosaveRestore")?g(null,{changesApplied:!1}):function(e,t,o){const i=e.pointers.general.getServiceTopology(),r=e.pointers.getInnerPointer(i,"autoSaveUrl"),s=`${`${e.dal.get(r)}get_diffs/`+n.getProperty(e,"SITE_ID")}?metaSiteId=${n.getProperty(e,"META_SITE_ID")}&siteVersion=${n.getProperty(e,"SITE_VERSION")}`;a.loggingUtils.fedopsLogger.interactionStarted(a.loggingUtils.fedopsLogger.INTERACTIONS.AUTOSAVE.LOAD_AJAX),c.start(p.AUTOSAVE.LOAD_AJAX),l.ajax({type:"GET",dataType:"json",url:s,success(e){e.success?t(e.payload):o(new Error(`Failed to fetch diffs. error code: ${e.errorCode}`))},error(e){o(new Error(`Error while fetching diffs. status code: ${e.status}`))}})}(t,function(n){let l=e(n.diffPayloads).map("payload").map(JSON.parse).value();const m=l.length,y={patches:m,patchesSize:e.sumBy(l,"length"),pagesCount:i.getNumberOfPages(t)};a.loggingUtils.fedopsLogger.interactionEnded(a.loggingUtils.fedopsLogger.INTERACTIONS.AUTOSAVE.LOAD_AJAX),c.finish(p.AUTOSAVE.LOAD_AJAX,{additionalData:y,report:!0}),a.loggingUtils.fedopsLogger.interactionStarted(a.loggingUtils.fedopsLogger.INTERACTIONS.AUTOSAVE.LOAD_APPLY),c.start(p.AUTOSAVE.LOAD_APPLY),l=e.flatten(l),t.dal.takeSnapshot("before-autosave-apply"),t.dal.takeSnapshot(s.SNAPSHOT_TAGS.MOBILE_MERGE);try{t.dal.transaction(()=>{o.applyPatchList(t.dal.full,l)});const i=t.dal.full.immutable.getLastSnapshotByTagName("before-autosave-apply");t.dal.takeSnapshot("autosave-apply-validate");const s=t.dal.full.immutable.getLastSnapshotByTagName("autosave-apply-validate"),E=()=>{try{const e=t.pointers.general.getAutoSaveInnerPointer("previousDiffId");t.dal.set(e,n.latestDiffId);const o=t.pointers.general.getAutoSaveInnerPointer("autosaveCount");t.dal.set(o,m),y.success="true",g(null,{changesApplied:!0}),a.loggingUtils.fedopsLogger.interactionEnded(a.loggingUtils.fedopsLogger.INTERACTIONS.AUTOSAVE.LOAD_APPLY),c.finish(p.AUTOSAVE.LOAD_APPLY,{additionalData:y,report:!0})}catch(e){y.success="false",u(t,e,y,d),f(e)}};let I=null;const S=n=>{y.success="false",u(t,n,y,d),f(e.merge(n,I))},h={error:(e,t)=>{I=t}};r.validateSite(i,s,E,S,h)}catch(e){y.success="false",u(t,e,y,d),f(e)}},f)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";const t={START:"start",ON:"on",END:"end"},n={YES:"yes",NO:"no",DONT_CARE:"don't care"},o={NONE:"NONE",INNER:"INNER",FULL:"FULL",DONT_CARE:"DONT_CARE"};function i(e){switch(e){case n.YES:return o.NONE;case n.NO:return o.FULL;default:return o.DONT_CARE}}function r(e,n){return e===t.ON?n:o.NONE}function a(t,n,o){const i=o[1];return function(t,n,o){if(n&&(e.isFunction(o.singleComp)?o.singleComp(t,n):o.singleComp)){if(e.isArray(n)&&1===n.length&&(n=n[0]),n.id)return n.id;if(e.isString(n))return n}return!1}.bind(null,t,i,n)}function s(e,t){const n=t[1];return e.shouldLockComp&&n?n.id:null}function c(e,o,i,r){return r!==t.END?n.NO:p(e,o.updatingAnchorsAfterContinuous,i)}function p(t,o,i){const r=i[1],a=e.isFunction(o)?o(t,r,i):o;return e.isString(a)?a:a?n.YES:n.NO}return{CONTINUOUS_ACTION_TYPES:t,IS_UPDATING_ANCHORS:n,ENFORCE_TYPES:o,getDataManipulationParams:function(e,t,n,o){const r=p(e,t.isUpdatingAnchors,o);return{methodName:n,isContinuousAction:!1,asyncPreDataManipulation:t.asyncPreDataManipulation,noRefresh:t.noRefresh,noBatching:t.noBatching,noBatchingAfter:t.noBatchingAfter,shouldExecOp:t.shouldExecOp,isAsyncOperation:t.isAsyncOperation,waitingForTransition:t.waitingForTransition,lockedComp:s(t,o),singleComp:a(e,t,o),isUpdatingAnchors:r,enforceType:i(r)}},getContinuousActionParams:function(e,t,n,i,s){return{methodName:n,isContinuousAction:!0,continuousActionType:i,enforceType:r(i,t.enforceTypeDuringContinuous),singleComp:a(e,t,s),withOriginalValues:t.enforceTypeDuringContinuous!==o.NONE,isUpdatingAnchors:c(e,t,s,i)}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";const t=e=>e.runtimeConfig.trace.isTracing;return{initialize:function(e){e.runtimeConfig.trace.isTracing=e.siteAPI.getQueryParam("dsQTrace")},startTrace:(e,{shouldLogConsoleTraces:t=!1}={shouldLogConsoleTraces:!1})=>{e.runtimeConfig.trace.isTracing=!0,e.runtimeConfig.trace.shouldLogConsoleTraces=t},endTrace:e=>{e.runtimeConfig.trace.isTracing=!1},get:(e,t)=>t?e.runtimeConfig.trace.readLog:e.runtimeConfig.trace.log,logReadTrace:(n,o)=>{if(t(n)){const t=window.performance?window.performance.now():e.now();n.runtimeConfig.trace.readLog.push(e.assign({type:"Q OPERATION READ",ts:t},o))}},logTrace:(n,o,i)=>{if(t(n)){const t=window.performance?window.performance.now():e.now();n.runtimeConfig.trace.log.push(e.merge({type:o,ts:t},i))}},shouldLogConsoleTrace:e=>e.runtimeConfig.trace.shouldLogConsoleTraces,isTracing:t,cleanTrace:e=>{e.runtimeConfig.trace.log=[],e.runtimeConfig.trace.readLog=[]}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(562),n(168),n(578)],void 0===(i=function(){"use strict";return{}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(6),n(563),n(177),n(565),n(566),n(567),n(568),n(569),n(570),n(571),n(572),n(573),n(213),n(574),n(575),n(576),n(577)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l,u,d,g,f,m,y){"use strict";e.registerHook(e.HOOKS.LAYOUT.UPDATE_BEFORE,t,"wysiwyg.viewer.components.WPhoto"),e.registerHook(e.HOOKS.LAYOUT.UPDATE_BEFORE,i,"wysiwyg.viewer.components.documentmedia.DocumentMedia"),["wysiwyg.viewer.components.BoxSlideShow","wysiwyg.viewer.components.StripContainerSlideShow","wysiwyg.viewer.components.StateBox","wysiwyg.viewer.components.StateStrip"].forEach(t=>e.registerHook(e.HOOKS.LAYOUT.UPDATE_BEFORE,s,t)),e.registerHook(e.HOOKS.LAYOUT.UPDATE_BEFORE,p,"wysiwyg.viewer.components.StripColumnsContainer"),e.registerHook(e.HOOKS.LAYOUT.UPDATE_BEFORE,c,"wysiwyg.viewer.components.mobile.TinyMenu"),e.registerHook(e.HOOKS.LAYOUT.UPDATE_BEFORE,f,"wysiwyg.viewer.components.WRichText"),e.registerHook(e.HOOKS.LAYOUT.UPDATE_BEFORE,r.before,"wysiwyg.common.components.verticalmenu.viewer.VerticalMenu"),e.registerHook(e.HOOKS.LAYOUT.UPDATE_BEFORE,m,"wysiwyg.viewer.components.PopupContainer"),e.registerHook(e.HOOKS.LAYOUT.UPDATE_BEFORE,n.positionBigPlay,"wysiwyg.viewer.components.MediaOverlayControls"),e.registerHook(e.HOOKS.LAYOUT.UPDATE_BEFORE,n.positionControlsBar,"wysiwyg.viewer.components.MediaControls"),e.registerHook(e.HOOKS.LAYOUT.UPDATE_BEFORE,g.updateChildLayout,"wysiwyg.viewer.components.Popover"),e.registerHook(e.HOOKS.LAYOUT.UPDATE_BEFORE,y.applyLayoutToWidgetRootOnLayoutUpdate,"platform.components.AppWidget"),e.registerHook(e.HOOKS.LAYOUT.UPDATE_AFTER,d.afterLayoutChanged,"wysiwyg.viewer.components.Repeater"),e.registerHook(e.HOOKS.LAYOUT.UPDATE_AFTER,o,"wysiwyg.viewer.components.WFacebookComment"),e.registerHook(e.HOOKS.LAYOUT.UPDATE_AFTER,a.after,"wysiwyg.viewer.components.ExpandableMenu"),e.registerHook(e.HOOKS.LAYOUT.UPDATE_AFTER,u,"wysiwyg.common.components.verticalanchorsmenu.viewer.VerticalAnchorsMenu"),e.registerHook(e.HOOKS.LAYOUT.UPDATE_AFTER,l,"wysiwyg.viewer.components.Column"),e.registerHook(e.HOOKS.LAYOUT.UPDATE_AFTER,n.layoutPlayerChildren,"wysiwyg.viewer.components.MediaPlayer")}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(564),n(4),n(18)],void 0===(i=function(e,t,n,o,i){"use strict";function r(e,t){const n=e.width-t.contentPaddingHorizontal,o=e.height-t.contentPaddingVertical;return{width:n>0?n:16,height:o>0?o:16}}return function(a,s,c){if(!function(t,n,o){if(e.isUndefined(o.height)&&e.isUndefined(o.width))return!1;const i=t.pointers.getInnerPointer(n,"layout"),r=t.dal.get(i);return!e.isUndefined(o.height)&&o.height!==r.height||!e.isUndefined(o.width)&&o.width!==r.width}(a,s,c))return;const p=o.properties.get(a,s),l=o.data.get(a,s),u=o.layout.get(a,s);if("fitWidth"===p.displayMode){const e={width:c.width?c.width:u.width,height:c.height?c.height:u.height},o={width:l.width,height:l.height},p=function(e,t,n){const o=parseInt(i.skin.getCompSkinParamValue(e,t,"contentPaddingLeft"),10)||0,r=parseInt(i.skin.getCompSkinParamValue(e,t,"contentPaddingRight"),10)||0,a=parseInt(i.skin.getCompSkinParamValue(e,t,"contentPaddingTop"),10)||0,s=parseInt(i.skin.getCompSkinParamValue(e,t,"contentPaddingBottom"),10)||0,c={},p=o+parseInt(n.contentPaddingLeft||0,10),l=r+parseInt(n.contentPaddingRight||0,10),u=a+parseInt(n.contentPaddingTop||0,10),d=s+parseInt(n.contentPaddingBottom||0,10);return c.contentPaddingHorizontal=p+l,c.contentPaddingVertical=u+d,c}(a,s,i.skin.getComponentSkinExports);if(c.height){const i=t.imageUtils.getContainerSize(n,r(e,p),o,n.fittingTypes.LEGACY_FIT_HEIGHT);c.width=i.width+p.contentPaddingHorizontal}else{const i=t.imageUtils.getContainerSize(n,r(e,p),o,n.fittingTypes.LEGACY_FIT_WIDTH);c.height=i.height+p.contentPaddingVertical}}}}.apply(t,o))||(e.exports=i)},function(e,t){e.exports=W},function(e,t,n){var o,i;o=[n(4),n(14)],void 0===(i=function(e,t){"use strict";return function(n,o,i){i.width&&!t.isMobileView(n)&&e.properties.update(n,o,{width:Math.max(i.width,400)})}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(4)],void 0===(i=function(e,t){"use strict";return function(n,o,i){e.isUndefined(i.height)||t.properties.update(n,o,{height:i.height})}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(3),n(18),n(4)],void 0===(i=function(e,t,n,o,i){"use strict";return{before:function(r,a,s){if(e.isUndefined(s.height))return;const c=i.layout.get(r,a),p=e.get(c,"height");if(e.isEqual(p,s.height))return;const l=n.getDataItem(r,a),u=e.isString(l.menuRef)?l.menuRef.replace("#",""):l.menuRef.id,d=n.getDataItemById(r,u).items,g=e.filter(d,"isVisible").length;if(s.height<3*g)return;const f=o.skin.getComponentSkinExports(r,a),m=parseInt(o.skin.getCompSkinParamValue(r,a,"sepw")||o.skin.getCompSkinParamValue(r,a,"separatorHeight"),10)||0,y=Math.max(t.verticalMenuCalculations.getItemHeight(s.height,m,g,f),1);i.properties.update(r,a,{menuItemHeight:y})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(3),n(18),n(4)],void 0===(i=function(e,t,n,o,i){"use strict";return{after:(r,a,s,c,p,l)=>{if(e.isUndefined(s.height)||l.height===s.height)return;const u=n.getDataItem(r,a),d=e.isString(u.menuRef)?u.menuRef.replace("#",""):u.menuRef.id,g=n.getDataItemById(r,d).items,f=e.filter(g,"isVisible").length,m=o.skin.getComponentSkinExports(r,a),y=o.skin.getCompSkinParamValue(r,a,"brw"),E=parseInt(y,10)||0,I=Math.max(t.verticalMenuCalculations.getItemHeight(s.height,E,f,m),25);i.properties.update(r,a,{menuItemHeight:I})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(4),n(114),n(143)],void 0===(i=function(e,t,n,o){"use strict";return(i,r,a,s)=>{if(!e.isFunction(s))return;const c=t.layout.get(i,r);if(o.isCompResizing(c,a)){const t=n.getNonMasterChildren(i,r),o=e.pick(a,["width","height"]);e.forEach(t,e=>s(i,e,o))}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(4)],void 0===(i=function(e){"use strict";return function(t,n){const o=e.properties.get(t,n)||{};o.metaData=o.metaData||{},o.metaData.schemaVersion="2.0",e.properties.update(t,n,o)}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(165),n(8),n(4)],void 0===(i=function(e,t,n,o){"use strict";function i(e,t){return o.properties.get(e,t).rowMargin}function r(t,n){return e.isNumber(n.height)&&n.height<t.height}return function(a,s,c,p){const l=o.getChildren(a,s),u=o.layout.get(a,s),d=l.length>1;if(!(e.isNumber(c.height)&&c.height!==u.height)||d&&a.pointers.components.isMobile(s))return;const g=r(u,c),f=function(t,n,r){const a=o.layout.get(t,n),s=i(t,n),c={height:r.height-2*s};return e.isNumber(r.y)&&(c.y=r.y-a.y+s),c}(a,s,c);f.y=e.isUndefined(f.y)?o.layout.get(a,l[0]).y:f.y,e.forEach(l,function(e){const o=n.public.isEnforcingContainerChildLimitationsByWidth(a,e),i=n.public.isEnforcingContainerChildLimitationsByHeight(a,e);t.constrainByChildrenLayout(a,e,f,!o,!i)}),e.forEach(l,function(t){if(p(a,t,f),g){const n=i(a,s);!function(t,n){return!(!r(t,n)||e.isNumber(n.y)&&t.y!==n.y)}(u,c)?p(a,t,{y:f.y-n}):p(a,t,{y:f.y+n})}})}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(4)],void 0===(i=function(e,t){"use strict";const n=["layout","y"],o=["layout","height"],i=(e,t,o)=>e.dal.get(e.pointers.getInnerPointer(t,n))+o;return function(n,r,a,s,c,p){if(c||!e.isNumber(a.height)||a.height===p.height)return;const l=t.getContainer(n,r);if(n.pointers.components.isMobile(r)){const t=a.height-p.height,c=n.pointers.components.getChildren(l);e(c).takeRightWhile(e=>e.id!==r.id).forEach(e=>s(n,e,{y:i(n,e,t)},s,!0));const u=e.reduce(c,(e,t)=>((e,t)=>e.dal.get(e.pointers.getInnerPointer(t,o)))(n,t)+e,0);return void n.dal.set(n.pointers.getInnerPointer(l,o),u)}const u=function(e,n){return t.properties.get(e,n).rowMargin}(n,l),d={height:a.height+2*u};s(n,l,d)}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(4)],void 0===(i=function(e,t){"use strict";return function(e,n,o){let i,r,a;o.docked?a=o.docked.right?"right":"left":(r=(i=e.siteAPI.getSiteWidth())/2,a=o.x+o.width/2>r?"right":"left"),t.properties.update(e,n,{orientation:a})}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(143)],void 0===(i=function(e,t){"use strict";return{updateChildLayout:function(n,o,i,r,a,s){const[c]=n.pointers.components.getChildren(o);if(c&&t.isCompResizing(s,i)&&e.isFunction(r)){const t=e.isUndefined(i.x)?0:i.x-s.x,o=e.isUndefined(i.y)?0:i.y-s.y;r(n,c,e.defaults({x:t,y:o},i))}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(4),n(90)],void 0===(i=function(e,t,n){"use strict";return function(o,i,r){(function(t,n){if(t&&!e.isUndefined(t.height)&&n)return t.height!==n.height})(r,t.layout.get(o,i))&&!n.isGroupedComponent(o,i)&&t.properties.update(o,i,{minHeight:r.height,packed:0===r.height})}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(4)],void 0===(i=function(e,t){"use strict";const n={vertical:{names:["top","center","bottom"],offset:"verticalOffset",field:"verticalAlignment"},horizontal:{names:["left","center","right"],offset:"horizontalOffset",field:"horizontalAlignment"}};function o(t,n){const o=e.minBy(t,Math.abs),i=t.indexOf(o),r=n.names[i],a={};return a[n.field]=r,a[n.offset]=o,a}return function(i,r,a){const s=t.layout.get(i,r);if(a.width!==s.width||a.height!==s.height)return;const c=t.properties.get(i,r),p=i.siteAPI.getScreenSize(),l=i.siteAPI.getSiteWidth();"nineGrid"!==c.alignmentType&&"fullWidth"!==c.alignmentType||e.assign(c,function(e,t,i){const r=e+t/2;return o([Math.round(e),Math.round(r-i/2),Math.round(i-(e+t))],n.vertical)}(a.y,a.height,p.height)),"nineGrid"!==c.alignmentType&&"fullHeight"!==c.alignmentType||e.assign(c,function(e,t,i,r){const a=e+t/2,s=Math.round((r-i)/2);return o([Math.max(Math.round(e+s),0),Math.round(a-i/2),Math.max(Math.round(r-(e+t+s)),0)],n.horizontal)}(a.x,a.width,l,p.width)),t.properties.update(i,r,c)}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(4),n(143)],void 0===(i=function(e,t,n){"use strict";return{applyLayoutToWidgetRootOnLayoutUpdate:function(o,i,r,a,s,c){const p=n.isCompResizing(c,r)||n.isCompRescaling(c,r);if(e.isFunction(a)&&p){const[n]=t.getChildren(o,i),s=e.isUndefined(r.x)?0:r.x-c.x,p=e.isUndefined(r.y)?0:r.y-c.y;a(o,n,e.pickBy({x:s,y:p,width:r.width,height:r.height,scale:r.scale},e.isNumber))}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(6),n(579),n(580)],void 0===(i=function(e,t,n){"use strict";e.registerHook(e.HOOKS.METADATA.MOVE_DIRECTIONS,t.setMovableSidesForRepeaterItems),e.registerHook(e.HOOKS.METADATA.REMOVABLE,t.disableRemovalForRepeaterItems),e.registerHook(e.HOOKS.METADATA.DUPLICATABLE,t.disableDuplicationOfRepeaterItem),e.registerHook(e.HOOKS.METADATA.RESIZABLE_SIDES,t.setResizableSidesForRepeaterItems);e.registerHook(e.HOOKS.METADATA.ROTATABLE,n.rotatable,"platform.components.AppWidget"),e.registerHook(e.HOOKS.METADATA.RESIZABLE_SIDES,n.resizableSides,"platform.components.AppWidget"),e.registerHook(e.HOOKS.METADATA.LAYOUT_LIMITS,n.layoutLimits,"platform.components.AppWidget"),e.registerHook(e.HOOKS.METADATA.CONTAINABLE,n.containable)}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(9),n(2),n(3),n(1)],void 0===(i=function(e,t,n,o){"use strict";const i="wysiwyg.viewer.components.Repeater";return{setMovableSidesForRepeaterItems:function(t,n,o){const r=t.pointers.components.getParent(o);return r&&e.getComponentType(t,r)===i?[]:n},disableRemovalForRepeaterItems:function(t,n,o){const r=t.pointers.components.getParent(o);return(!r||e.getComponentType(t,r)!==i)&&n},disableDuplicationOfRepeaterItem:function(t,n,o){const r=t.pointers.components.getParent(o);return(!r||e.getComponentType(t,r)!==i)&&n},setResizableSidesForRepeaterItems:function(r,a,s){const c=r.pointers.components.getParent(s);if(c&&e.getComponentType(r,c)===i){const e=n.getPropertiesItem(r,c);return e&&e.alignment===o.constants.COMP_LAYOUT_OPTIONS.REPEATER.ALIGNMENTS.RIGHT?[t.RESIZE_SIDES.BOTTOM,t.RESIZE_SIDES.LEFT]:[t.RESIZE_SIDES.BOTTOM,t.RESIZE_SIDES.RIGHT]}return a}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(4),n(8),n(51)],void 0===(i=function(e,t,n,o){"use strict";function i(e,n,o){const[i]=t.getChildren(e,n);return o(e,i)}function r(t,n,i){return e.get(o.getControllerStageDataByControllerRef(t,i),["behavior",n])}return{rotatable:function(e,t,o){return i(e,o,n.public.isRotatable)&&!1!==r(e,"rotatable",o)},resizableSides:function(t,o,a){return e.intersection(i(t,a,n.public.getResizableSides),!1===r(t,"resizable",a)?[]:o)},layoutLimits:function(e,t,o){const a=i(e,o,n.public.getLayoutLimits);return!1===r(e,"resizable",o)&&delete a.aspectRatio,a},containable:function(o,i,r,a){if(!1===i)return!1;const s=t.getContainer(o,r);return!!o.pointers.isSamePointer(s,a)||("platform.components.AppWidget"===t.getType(o,a)?n.public.isContainable(o,r,e.head(t.getChildren(o,a))):"platform.components.AppWidget"!==t.getType(o,s))}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(582)],void 0===(i=function(e,t){"use strict";const n=t.siteAspectsRegistry;function o(e){e&&(this.siteAPI=e,this.pageChangeCallbacks=[],this.siteAPI.registerToUrlPageChange(this.handlePageChange.bind(this)))}return o.prototype={handlePageChange(t){e.forEach(this.pageChangeCallbacks,function(e){e(t)}),this.pageChangeCallbacks=[]},registerToUrlPageChange(e){this.pageChangeCallbacks.push(e)}},n.registerSiteAspect("DocumentServicesAspect",o),o}.apply(t,o))||(e.exports=i)},function(e,t){e.exports=G},function(e,t,n){var o,i;o=[n(1),n(0)],void 0===(i=function(e,t){"use strict";function n(t){const n=t.pointers.data.getDataItemFromMaster(e.siteConstants.MASTER_PAGE_ID);return t.pointers.getInnerPointer(n,"accessibilitySettings")}return{get(e){const o=e.dal.get(n(e)),i=t.get(o,"visualFocusDisabled");return!t.isUndefined(i)&&!i},set(e,o){if(!t.isBoolean(o))throw new Error("visualFocus.set accepts only boolean value");const i=n(e),r=e.dal.get(i)||{};e.dal.set(i,t.assign(r,{visualFocusDisabled:!o}))}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(585),n(167)],void 0===(i=function(e,t,n){"use strict";return{loadAndRegisterAppStudioComponents:e=>{if(e.siteAPI.isExperimentOpen("sv_appStudioWithBaseUI")){const o=t.loadAll((()=>`${requirejs.toUrl("wix-ui-santa")}/`)()).then(t=>t.forEach(t=>n.registerComponent(e,t)));return Promise.all([o]).catch(e=>`Error: could not load base ui DS components. ${e}`)}}}}.apply(t,o))||(e.exports=i)},function(e,t){e.exports=Y},function(e,t,n){var o,i;o=[n(0),n(1),n(76),n(17),n(118),n(59),n(3),n(56),n(202),n(10),n(61),n(6),n(19),n(16),n(220),n(588),n(99),n(87),n(5)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l,u,d,g,f,m,y,E,I){"use strict";const S=t.constants.DATA_TYPES,h="AppStudioData",P="WidgetDescriptor",A="Widget",{dataValidators:T}=g.services,{ajaxLibrary:v,urlUtils:C}=t,{fetchJson:_}=E.requestsUtil,{INVALID_VERSION_TYPE:O,NO_GRID_APP_ID:D,NO_STUDIO_APP_APP_ID:w,USER_NOT_AUTHORIZED_FOR_APP:M,UNKNOWN_SERVER_ERROR:b}=n.build,{SAVE_DISABLED_IN_DOCUMENT_SERVICES:R,SESSION_EXPIRED:N,NOT_LOGGED_IN:x,USER_NOT_AUTHORIZED_FOR_SITE:L}=n.save;function B(e,n){const o=e.pointers.data.getDataItemFromMaster(t.siteConstants.MASTER_PAGE_ID),i=e.dal.get(o);i.appStudioData=n,a.addSerializedDataItemToPage(e,t.siteConstants.MASTER_PAGE_ID,i,t.siteConstants.MASTER_PAGE_ID)}function F(e,n){const o=e.pointers.data.getDataItemFromMaster(t.siteConstants.MASTER_PAGE_ID),i=e.dal.get(o),r=l.getAppStudioData(e);r.widgets=n,i.appStudioData=r,a.addSerializedDataItemToPage(e,t.siteConstants.MASTER_PAGE_ID,i,t.siteConstants.MASTER_PAGE_ID)}function k(t,n){let o=l.getAppStudioData(t);e.isUndefined(o)&&(o=function(t,n){const o=a.createDataItemByType(t,h);o.id=H();const i=t.dal.getByPath(["documentServicesModel","metaSiteData","siteName"])||"MyProject1";return o.name=e.replace(i,"mysite","MyProject"),e.defaults(o,n)}(t,n),B(t,o))}function U(t,n){const o=l.getAppStudioData(t);if(e.isUndefined(o))throw new Error("appStudio: there is no app studio to update");const i=e.assign({},o,n);!function(t,n){if(e.isEmpty(n.name))throw new Error("appStudio: name is required")}(0,i),B(t,i)}function H(){return r.generateNewId(S.data)}function V(e,t){const n=l.getAppStudioData(e).widgets;n.push(t),F(e,n)}function W(e,t,n){const r=o.getPageIdToAdd(e),a=function(e,t){const n=i.getBlankPageStructure(e,t.id,o.serializePage),r=i.getBlankBackground();return r.desktop.ref.color="#D9E1E8",r.mobile.ref.color="#D9E1E8",n.data.pageBackgrounds=r,delete n.styleId,n.style=p.styles.createStyleItemToAdd(e,{styleType:"custom",skin:"wysiwyg.viewer.skins.page.BasicPageSkin"}),n.style.style.properties.bg="#D9E1E8",n.data.isLandingPage=!0,n.data.isMobileLandingPage=!0,n}(e,r);return n&&(a.components=a.components.concat(n)),o.add(e,r,t,a),r}function G(e,t,n,o){const i=a.createDataItemByType(e,P);return i.id=t,i.name=n,i.rootCompId=`#${e.dal.get(o).id}`,i}function Y(t,n){if(e.isEmpty(n))throw new Error("appStudio.widgets: name is required");if(e.includes(e.map(l.getAllWidgets(t),"name"),n))throw new Error("appStudio.widgets: widget name already exists")}function z(e){return JSON.parse(JSON.stringify(e))}function K(t,n){const o=t.pointers.getInnerPointer(n,"widgetApi.propertiesSchemas");return e.map(t.dal.get(o),t=>e.assign(t.structure,e.omit(t,["structure","type"])))}function $(t,n,o,i){if("propertiesSchemas"===n){!function(t){if(e.uniqBy(t,e=>f.getSchemaStructureKey(e)).length!==t.length)throw new Error("appStudio.widgets: property name is already in use for this widget")}(i);const n=l.getAppStudioData(t).customDefinitions||[];f.validatePropertyDefaultValue(n,i),i=e.map(i,e=>({structure:e}))}else!function(t){if(!e.every(t,"name"))throw new Error("appStudio.widgets: can not set widget API without a name");if(e.uniqBy(t,"name").length!==t.length)throw new Error("appStudio.widgets: API name is already in use for this widget")}(i);const r=t.dal.get(o);!function(e,t,n,o,i){n.widgetApi[o]=i,T.validateDataBySchema(n,"data"),e.dal.set(t,n)}(t,o,r,n,i)}function q(t,n){const o=e(l.getAllWidgets(t)).map("name").filter(e=>(function(e,t){return!!new RegExp(`^${t}[0-9]*$`).exec(e)})(e,n)).map(t=>e.replace(t,n,"")).map(Number).sortBy().value(),i=e.last(o)||0;return n+(i+1)}function j(e,t,n){const o=Q(e,t),i=d.getPageData(e,o);i.title=n,d.setPageData(e,o,i)}function Q(t,n){const o=t.dal.get(n);if(o&&o.rootCompId)return e.replace(o.rootCompId,"#","")}function X(t,n,o){const i=t.dal.get(n),r=f.getSchemaStructureKey(o),s=l.getAppStudioData(t),c=s.customDefinitions||[];if(f.validateDefinitionHasProperties(o),i){const t=e.findIndex(c,["id",n.id]);f.getSchemaStructureKey(c[t].structure)!==r&&f.validateNewDefinitionName(c,r),c[t]=f.mergeExistingDefinitionWithDefinitionData(i,o),c[t].structure=f.setPropertiesOrder(c[t].structure)}else{f.validateNewDefinitionName(c,r),o=f.setPropertiesOrder(o);const e=f.createNewDefinitionWithData(t,a,o);c.push(e)}f.validateDefinitionDefaultValue(c,o),s.customDefinitions=c,U(t,s),i&&function(t,n,o,i){const r=f.getDefinitionPropertiesDifference(o,i);if(!e.isEmpty(r.addedProperties)||!e.isEmpty(r.removedProperties)||!e.isEmpty(r.restrictedProperties)){const o=Z(t,n);e.forEach(o.definitions,e=>{X(t,e.definition.pointer,f.updateDefinitionDefault(t,e,r))}),e.forEach(o.widgets,e=>{$(t,"propertiesSchemas",e.widget.pointer,f.updateWidgetPropertiesDefault(t,e,r,K))})}}(t,n,i.structure,o)}function Z(t,n){const o=t.dal.get(n),i=f.getSchemaStructureKey(o.structure),r=e.get(o,["structure",i,"$id"]);return{widgets:f.getDefinitionUsagesInWidgets(t,K,r),definitions:f.getDefinitionUsagesInDefinitions(t,r)}}function J(e,t){const n=Z(e,t);if(n.widgets.length>0||n.definitions.length>0)throw new Error("appStudio.definitions: definition is in use, cannot remove")}class ee extends Error{constructor(e){super("Build Error",e),this.errorCode=e.errorCode,this.errorType=e.errorType,this.errorDescription=e.errorDescription}}function te(e,t){return new Promise((n,o)=>{if(!c.canSave())return void o(ie("-1","DocumentServices was created with parameter disableSave=true, so build is disabled.",R));const i=e.dal.full.immutable.getCurrentSnapshot(),r=function(e,t){const n=e.getIn(["serviceTopology","editorServerRoot"]),o=e.getIn(["rendererModel","siteInfo","siteId"]),i=e.getIn(["rendererModel","metaSiteId"]),r=re(e),a=C.toQueryString({metaSiteId:i,editorSessionId:r,esi:r,versionType:t});return`${n}/api/build/${o}?${a}`}(i,t);!function(e,t,n,o){v.ajax({type:"POST",url:t,headers:{"X-Wix-Editor-Version":"new","X-Wix-DS-Origin":e.get("origin"),"X-Editor-Session-Id":re(e)},success:e=>e.success?n():o(ie(e.errorCode,e.errorDescription)),error:e=>o(ie(e.errorCode,e.errorDescription))})}(i,r,n,o)})}const ne={minor:"minor",major:"major",build:"build"};const oe={"-12":N,"-15":x,"-17":L,"-10198":D,"-15053":w,"-15054":M},ie=(e,t,n=b)=>new ee({errorCode:e,errorDescription:t,errorType:oe[e]||n});function re(e){return e.getIn(["documentServicesModel","editorSessionId"])}return{initialize:function(e){e.dal.set(e.pointers.general.getMobileConversionHeuristicStrategy(),"appbuilder");const t=e.pointers.general.getAutosaveInfo(),n=e.dal.get(t)||{};n.shouldAutoSave=!1,e.dal.set(t,n);let o=l.getAppStudioData(e);o&&U(e,o=I.isOpen("se_appBuilderPropertyAsSchema")?m.convertWidgetPropertiesToSchemaProperties(o):m.convertWidgetPropertiesSchemasToProperties(o))},getNewDataId:H,getAppStudioMetaData:l.getAppStudioMetaData,updateAppStudioMetaData:U,build:function(t,n,o,i){!function(e){return!!ne[e]}(i)?o(ie("-1",'Version type should be one of: "build", "minor" "major".',O)):s.runFunctionInSaveQueue(e.partial(te,t,i)).then(n).catch(o)},getDevSiteAppDefId:function(e){const t=e.pointers.general.getDevSiteAppDefIdPointer();return e.dal.get(t)},setWixDataToken:function(n,o,i,r,a,s){(function(e,t){const n=y.getCodeAppInfoFromPS(e);return _("https://www.wix.com/_api/cloud-data-packaging/v1/package-data",{mode:"cors",method:"POST",credentials:"include",body:JSON.stringify({signedInstance:n.signedInstance,gridAppId:n.appId,appMarketingName:t,skipDataFor:[]})}).then(e=>e&&e.packageToken)})(n,r).then(e=>(function(e,n,o,i){_("https://apps.wix.com/app-studio-server/setToken",{mode:"cors",method:"POST",credentials:"include",headers:new Headers({"content-type":"application/json; charset=utf-8","X-XSRF-TOKEN":t.cookieUtils.getCookie("XSRF-TOKEN")}),body:JSON.stringify({token:o,appVersion:n,appDefId:e,appMarketingName:i})})})(i,o,e,r)).then(a).catch(t=>t.json().then(t=>{e.get(t,"message","").contains("No collections to package")?a():s(t)}))},definitions:{getAllCustomDefinitions:l.getAllCustomDefinitions,getAllSerializedCustomDefinitions:l.getAllSerializedCustomDefinitions,getSerializedCustomDefinition:l.getSerializedCustomDefinition,setCustomDefinition:X,removeCustomDefinition:function(t,n){if(!t.dal.get(n))throw new Error("appStudio.definitions: cannot remove non existing definition");J(t,n);const o=l.getAppStudioData(t);e.pullAt(o.customDefinitions,e.findIndex(o.customDefinitions,{id:n.id})),U(t,o)},getAllDefinitionUsages:Z,validateDefinitionHasNoUsages:J,validateNewDefinitionName:f.validateNewDefinitionName},widgets:{createWidget:function(t,n,o,i,r){o=o||q(t,A),k(t),Y(t,o);const a=G(t,n,o,W(t,o,i));V(t,a);const s=t.pointers.data.getDataItemFromMaster(a.id);return e.isFunction(r)&&r(s),s},getAllWidgets:l.getAllWidgets,getAllSerializedWidgets:l.getAllSerializedWidgets,getWidgetFunctions:function(e,t){const n=e.pointers.getInnerPointer(t,"widgetApi.functions");return e.dal.get(n)},getWidgetProperties:function(e,t){const n=e.pointers.getInnerPointer(t,"widgetApi.properties");return e.dal.get(n)},getWidgetPropertiesSchema:K,getWidgetEvents:function(e,t){const n=e.pointers.getInnerPointer(t,"widgetApi.events");return e.dal.get(n)},setWidgetApiPart:$,duplicateWidget:function(t,n,i){const r=t.dal.get(n);if(r){const n=q(t,r.name),a=H(),s=o.getPageIdToAdd(t);o.duplicate(t,s,e.replace(r.rootCompId,"#",""));const c=G(t,a,n,s);c.widgetApi=e.cloneDeep(r.widgetApi),V(t,c);const p=t.pointers.data.getDataItemFromMaster(c.id);return j(t,p,n),e.isFunction(i)&&i(p),p}},setWidgetName:function(e,t,n){Y(e,n);const o=e.dal.get(t);o.name=n,e.dal.set(t,o),j(e,t,n)},getWidgetName:function(t,n){const o=l.getAllWidgets(t);return e.get(e.find(o,{pointer:n}),"name")},displayWidget:function(e,t,n){const i=Q(e,t);i&&o.navigateTo(e,i,n)},removeWidget:function(t,n,i){const r=t.dal.get(n);if(r&&r.rootCompId){const a=l.getAppStudioData(t).widgets;e.pullAt(a,e.findIndex(a,{id:n.id})),F(t,a),o.remove(t,r.rootCompId,i)}},isWidgetPage:l.isWidgetPage,getWidgetByRootCompId:function(e,t){const n=l.findWidgetByPageId(e,t);return n&&n.pointer},getRootCompIdByWidgetPointer:Q,getWidgetById:l.getWidgetPointerByWidgetId,notifyPropertiesUpdateToWorker:function(t,n,o,i){if(!e.isEqual(o,i)){const e=Q(t,n);t.siteAPI.triggerAppStudioWidgetOnPropsChanged(e,z(o),z(i))}}}}}.apply(t,o))||(e.exports=i)},function(e,t){e.exports=z},function(e,t,n){var o,i;o=[n(0),n(220)],void 0===(i=function(e,t){"use strict";const n=["text","number","boolean","image","url","dateTime"],o=o=>{const i=t.getSchemaStructureKey(o.structure),r=e.get(o,["structure",i,"allOf",0,"$ref"],"array");if(!e.includes(n,r))return null;const s=e.last(e.get(o,["structure",i,"allOf"],[]));return{propType:a(r),name:i,displayName:s.title,description:s.description,defaultValue:String(s.default),validations:p(s)}},i=t=>{const n=s(t.propType);return{structure:{[t.name]:{allOf:[{$ref:n},e.assign({title:t.displayName||"",description:t.description||"",default:r(t.defaultValue,n)},l(t.validations,n))]}}}},r=(e,t)=>{if(!e)return c(t);switch(t){case"number":return Number(e);case"boolean":return Boolean(e)}return e},a=e=>{switch(e){case"text":return"string";case"boolean":return"bool"}return e},s=e=>{switch(e){case"string":return"text";case"bool":return"boolean"}return e},c=e=>{switch(e){case"number":return 0;case"boolean":return!1}return""},p=t=>{const n=e.pick(t,["minimum","maximum","multipleOf","maxLength"]),o={};return e.isEmpty(n)||e.forOwn(n,(e,t)=>{o[d(t)]=e}),o},l=(t,n)=>{const o={};return e.isEmpty(t)||e.forOwn(t,(e,t)=>{o[u(t)]=r(e,n)}),o},u=e=>{switch(e){case"min":return"minimum";case"max":return"maximum";case"step":return"multipleOf"}return e},d=e=>{switch(e){case"minimum":return"min";case"maximum":return"max";case"multipleOf":return"step"}return e};return{convertWidgetPropertiesToSchemaProperties:t=>(t.customDefinitions||(t.customDefinitions=[]),e.forEach(t.widgets,t=>{t.widgetApi.propertiesSchemas=e.concat(t.widgetApi.propertiesSchemas?t.widgetApi.propertiesSchemas:[],e.map(t.widgetApi.properties,e=>i(e))),t.widgetApi.properties=[]}),t),convertWidgetPropertiesSchemasToProperties:t=>(t.customDefinitions&&e.unset(t,"customDefinitions"),e.forEach(t.widgets,t=>{e.isEmpty(t.widgetApi.propertiesSchemas)||(t.widgetApi.properties=e.concat(t.widgetApi.properties?t.widgetApi.properties:[],e.without(e.map(t.widgetApi.propertiesSchemas,e=>o(e)),null))),e.unset(t.widgetApi,"propertiesSchemas")}),t)}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";function e(e,t){return t=t?`balatamedia${t}`:"",e[0].id+(t||"")}return{play:function(t,n,o){const i=e(n,o);return t.siteAPI.bgVideo.play(i)},stop:function(t,n,o){const i=e(n,o);return t.siteAPI.bgVideo.stop(i)},isPlaying:function(t,n,o){const i=e(n,o);return t.siteAPI.bgVideo.isPlaying(i)},getReadyState:function(t,n,o){const i=e(n,o);return t.siteAPI.bgVideo.getReadyState(i)},registerToPlayingChange:function(t,n,o,i){const r=e(n,o);return t.siteAPI.bgVideo.registerToPlayingChange(r,i)},unregisterToPlayingChange:function(t,n,o){const i=e(n,o);return t.siteAPI.bgVideo.unregisterToPlayingChange(i)},registerToQualityReady:function(e,t,n){return e.siteAPI.bgVideo.registerToQualityReady(t,n)},unregisterToQualityReady:function(e,t,n){return e.siteAPI.bgVideo.unregisterToQualityReady(t,n)}}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";const t="http://wixfeedbackserver.appspot.com",n="http://localhost:8888",o="/markSiteShared",i="/markAsRead",r="/list",a="/append",s="/delete",c="https://api-ssl.bitly.com/v3/shorten?access_token=6e283dc921f56df2eff5951bd2bf5bab041d8ac2&longUrl=",p="&utm_campaign=vir_wixad_feedback",l=["happy","sad","noMood"];let u=!1,d=!1;function g(){return d?n:t}function f(e,t,n,o){if(this._useMockedData)return void(m(o,"onSuccess")&&o.onSuccess("MOCKED"));const i=window.XDomainRequest;let r=new window.XMLHttpRequest;"withCredentials"in r?r.open(e,t,!0):void 0!==i?(r=new i).open(e,t):r=null,r&&("POST"===e&&r.setRequestHeader("Content-Type","application/json; charset=utf-8"),r.onload=function(){m(o,"onSuccess")&&o.onSuccess(r.responseText)},r.onerror=function(){const e={error:!0};m(o,"onError")&&o.onError(e)},r.send(n||null))}function m(t,n){return e.isFunction(e.get(t,n))}const y={enableMockedData:function(e){u=!0},disableMockedData:function(e){u=!1},enableLocalTestServer:function(e){d=!0},disableLocalTestServer:function(e){d=!1},getUnreadMockedComment:function(e,t){return{pageId:"mainPage",x:parseInt(500*Math.random(),10),y:parseInt(500*Math.random(),10),text:`title [${Date.now()}]`,submitter:t||"anonymous",time:Date.now(),face:l[parseInt(Math.random()*l.length,10)],unread:!0}},__sendCORSRequest:f};return e.merge({generateShareURL:function(t,n,o){const i=t.dal.getByPath(["rendererModel","siteInfo","siteId"]),r=t.dal.getByPath(["rendererModel","metaSiteId"]);n=n||"en",function(e,t,n){f("GET",`http:${`//${window.location.host}`}/html/editor/web/review/createToken/${e}?metaSiteId=${t}`,null,{onSuccess(e){const t=JSON.parse(e);m(n,"onSuccess")&&n.onSuccess(t)},onError(){}})}(i,r,{onSuccess(t){const i=t.payload&&t.payload.url;!function(e,t){f("GET",c+encodeURIComponent(e),null,{onSuccess(e){const n=JSON.parse(e);m(t,"onSuccess")&&t.onSuccess(n)},onError(){}})}(`${i+(e.includes(i,"?")?"&":"?")}feedback=true&lang=${n}${p}`,{onSuccess(e){m(o,"onSuccess")&&o.onSuccess(e.data.url)},onError(){}})},onError(){}})},isSiteShared:function(e,t){const n=e.dal.getByPath(["rendererModel","siteInfo","siteId"]);f("GET",`${g()+o}?siteId=${n}`,{},t)},markSiteAsShared:function(e,t){const n=e.dal.getByPath(["rendererModel","siteInfo","siteId"]);f("POST",g()+o,JSON.stringify({siteId:n}),t)},comments:{create:function(e,t,n,o,i,r,a){return{pageId:t||"mainPage",x:n||"100px",y:o||"100px",text:i||"untitled",submitter:r||"anonymous",time:Date.now(),face:a||l[l.length-1],unread:!0}},add:function(e,t,n,o,i){const r=e.dal.getByPath(["rendererModel","siteInfo","siteId"]),s=e.dal.getByPath(["rendererModel","metaSiteId"]),c=e.dal.getByPath(["rendererModel","userId"]),p=e.dal.getByPath(["rendererModel","siteInfo","siteTitleSEO"]),l=JSON.stringify({siteId:r,data:t,generalComment:n,submitter:o,userGuid:c,metaSiteId:s,siteName:p});f("POST",g()+a,l,i)},get:function(t,n){const o=t.dal.getByPath(["rendererModel","siteInfo","siteId"]);f("GET",`${g()+r}?siteId=${o}`,null,{onSuccess(t){const o=(i=JSON.parse(t),e.forEach(i,function(e){e.commentId=e.key.id,e.x=e.propertyMap.x.value,e.y=e.propertyMap.y.value,e.face=e.propertyMap.face.value,e.submitter=e.propertyMap.submitter.value,e.text=e.propertyMap.text.value.value,e.pageId=e.propertyMap.pageId,e.unread=e.propertyMap.unread,e.time=new Date(e.propertyMap.time)}),e.groupBy(i,"pageId"));var i;m(n,"onSuccess")&&n.onSuccess(o)},onError(){}})},remove:function(e,t,n){f("POST",g()+s,JSON.stringify({commentId:t}),n)},markAsRead:function(e,t,n){f("POST",g()+i,JSON.stringify({commentId:t}),n)}}},y)}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(12),n(10),n(26)],void 0===(i=function(e,t,n){"use strict";const o=e.fonts;return{css:{getCssUrls:function(e){const t=n.getDocumentType(e),i=e.dal.get(e.pointers.general.getServiceTopology());return o.fontUtils.getCssUrls(t,i)}},getSiteFontsOptions:function(e){const i=n.getDocumentType(e),r=t.fonts.getCharacterSet(e);return o.fontUtils.getCurrentSelectablefontsWithParams(i,r)},getAllFontsOptions:function(e){const t=n.getDocumentType(e);return o.fontUtils.getCurrentSelectablefontsWithParams(t,["latin-ext","cyrillic","japanese","korean","arabic","hebrew","latin"])}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(11)],void 0===(i=function(e){"use strict";const t="left",n="right",o="fullScreen",i=(t,n)=>{if(e.setDock(t,n,{top:{px:0},right:{px:0},bottom:{px:0}}),!((t,n)=>{const o=e.getDock(t,n);return o&&o.top&&o.bottom&&o.left})(t,n)){const o=t.siteAPI.getScreenWidth()-200;e.updateCompLayout(t,n,{width:200,x:o})}},r=(t,n)=>{e.setDock(t,n,{top:{px:0},left:{px:0},bottom:{px:0}}),((t,n)=>{const o=e.getDock(t,n);return o&&o.top&&o.bottom&&o.right})(t,n)||e.updateCompLayout(t,n,{width:200})};return{setAlignment:(a,s,c)=>{switch(c){case o:((t,n)=>{e.setDock(t,n,{top:{px:0},left:{px:0},right:{px:0},bottom:{px:0}})})(a,s);break;case t:r(a,s);break;case n:i(a,s)}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(13)],void 0===(i=function(e,t){"use strict";function n(e){return t.getProperty(e,t.PROPERTY_NAMES.SITE_META_DATA)}function o(e){return n(e).browserThemeColor}function i(e,o){const i=n(e);i.browserThemeColor=o,t.setProperty(e,t.PROPERTY_NAMES.SITE_META_DATA,i)}return{getBrowserThemeColor:o,setBrowserThemeColor:function(e,t){!function(e){if(!/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e))throw new Error("invalid color, should be an hex code")}(t),i(e,t)},resetBrowserThemeColor:e=>i(e,null),isBrowserThemeColorSet:function(t){return!e.isEmpty(o(t))}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(3)],void 0===(i=function(e,t){"use strict";const n="IMAGE_QUALITY",o="GlobalImageQuality";function i(e){return e.pointers.data.getDataItem(n,"masterPage")}return{get:function(e){const t=i(e);return e.dal.get(t)},update:function(n,r){const a=i(n);if(!n.dal.isExist(a)){const e=t.createDataItemByType(n,o);t.setDataItemByPointer(n,a,e,"data")}!function(t){const n=e.get(t,"unsharpMask.radius");if(e.isNumber(n)&&n<.1&&(0!==t.unsharpMask.radius||0!==t.unsharpMask.amount||0!==t.unsharpMask.threshold))throw new Error("radius value must be in 0.1-500.0 range, unless all radius, amount and threshold values are 0")}(r);const s=n.dal.get(a);t.setDataItemByPointer(n,a,e.assign(s,r),"data")},reset:function(e){const n=i(e);if(e.dal.isExist(n)){const i=t.createDataItemByType(e,o);t.setDataItemByPointer(e,n,i,"data")}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";const t=[{name:"kennedy"},{name:"darken"},{name:"blur"},{name:"lighten"},{name:"faded"},{name:"kerouac"},{name:"orca"},{name:"sangria"},{name:"gotham"},{name:"nightrain"},{name:"whistler"},{name:"feathered"},{name:"soledad"},{name:"goldie"},{name:"3d"},{name:"ink"},{name:"manhattan"},{name:"greenwash"},{name:"organic"},{name:"elmo"},{name:"neptune"},{name:"candyfloss"},{name:"neonsky"},{name:"hulk"},{name:"bauhaus"},{name:"seaweed"},{name:"midnight"},{name:"unicorn"},{name:"blueray"},{name:"malibu"},{name:"redrum"},{name:"flamingo"},{name:"hydra"},{name:"koolaid"},{name:"pinkrinse"},{name:"pixie"},{name:"yellowstreak"},{name:"lucille"}];return{getNames:function(){return e.map(t,"name")},getDefinitions:function(){return t}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(7),n(22),n(3),n(66)],void 0===(i=function(e,t,n,o,i){"use strict";const r="CUSTOM_MAIN_MENU",a=["wysiwyg.viewer.components.menus.DropDownMenu","wysiwyg.common.components.verticalmenu.viewer.VerticalMenu","wysiwyg.viewer.components.mobile.TinyMenu"],s=e.template(`Cannot link a menu data item to a component that is not one of: ${a.join(", ")}. Given component type was <%= compType %>.`);function c(t){return t.items&&e.some(t.items,e=>e.items&&e.items.length>0)}const p="Currently, components do not support menus which are more than 2 levels deep.";function l(t){if(t.items&&e.some(t.items,c))throw new Error(`You cannot add a menu which is more than 2 levels deep (a subitem cannot have subitems). ${p}`)}function u(t){e.forEach(t.items,function(t){!function t(n,o){e.forEach(n,function(e){e(o)}),o.items&&e.forEach(o.items,function(e){t(n,e)})}([d,g,f],t)})}const d=e.partialRight(e.unset,"id"),g=e.partialRight(e.unset,["link","id"]),f=e.partialRight(e.set,"type","BasicMenuItem");function m(e,t,n){l(n),y(e,t);o.addSerializedDataItemToPage(e,"masterPage",n,t,!0),i.updateTranslatedMenuItems(e,n)}function y(e,t){const n=e.pointers.data.getDataItemFromMaster(t);if(!t||!e.dal.full.isExist(n))throw new Error(`Menu with id ${t} does not exist.`)}function E(e,t,n=!1){const i=e.pointers.data.getDataItemFromMaster(t);return e.dal.isExist(i)?o.getDataItemById(e,t,void 0,void 0,n):null}function I(n,i){const r=t.getComponentByType(n,"wysiwyg.viewer.components.menus.DropDownMenu"),a=t.getComponentByType(n,"wysiwyg.common.components.verticalmenu.viewer.VerticalMenu");if(e.some(r.concat(a),function(e,t){return function(n){return o.getDataItem(e,n).menuRef===`#${t}`}}(n,i)))throw new Error(`Cannot remove menu with id ${i}, there are components connected to this menu. Please connect the other components to a differnt menu first.`)}return{update:m,create:function(t,n,i){if(E(t,n))throw new Error(`Menu with id ${n} already exist.`);const r=o.createDataItemByType(t,"CustomMenu");u(i=e.assign(r,i,{id:n})),l(i),o.addSerializedDataItemToPage(t,"masterPage",i,n);const a=t.pointers.getInnerPointer(t.pointers.data.getDataItem("CUSTOM_MENUS","masterPage"),"menus");return t.dal.push(a,`#${n}`),n},getMenuIdToCreate:function(e,t,n){return n||o.generateNewDataItemId()},getAll:function(e){return o.getDataItemById(e,"CUSTOM_MENUS","masterPage").menus},getById:E,remove:function(t,n){if(n===r)throw new Error("You cannot delete the CUSTOM_MAIN_MENU.");y(t,n),I(t,n);const i=t.pointers.data.getDataItemFromMaster("CUSTOM_MENUS"),a=t.dal.full.get(i);e.pull(a.menus,`#${n}`),t.dal.set(i,a),o.removeDataItemRecursively(t,t.pointers.data.getDataItemFromMaster(n))},connect:function(t,i,r){!function(t,o,i){const r=n.getType(t,o);if(!e.includes(a,r))throw new Error(s({compType:r}));y(t,i)}(t,i,r),o.updateDataItem(t,i,{menuRef:`#${r}`,type:"CustomMenuDataRef"})},addItem:function(t,n,i,r){const a={items:[r]};l(a),u(a);const s=o.createDataItemByType(t,"BasicMenuItem");o.addSerializedDataItemToPage(t,"masterPage",e.assign(s,r,{id:n}),n);const c=t.pointers.data.getDataItemFromMaster(i),p=t.pointers.getInnerPointer(c,"items");t.dal.push(p,`#${n}`)},removeItem:function(t,n,o,i){y(t,n);const r=E(t,n);r.items=e.reduce(r.items,function(t,n){return n.id!==o?(n.items&&e.remove(n.items,{id:o}),t.push(n)):n.items&&i&&(t=t.concat(n.items)),t},[]),m(t,n,r)},updateItem:function(t,n,i,r){y(t,n);const a=t.pointers.data.getDataItemFromMaster(i);if(!t.dal.isExist(a))throw new Error(`Menu item with id ${i} does not exist.`);if(r.items&&r.items.length){const o=E(t,n);if(!e.find(o.items,{id:i}))throw new Error(`Updating menu item with id ${i} with items will cause the menu to be more than 2 levels deep. ${p}`)}o.addSerializedDataItemToPage(t,t.pointers.data.getPageIdOfData(a),e.assign(r,{id:i,type:"BasicMenuItem"}),i)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(115)],void 0===(i=function(e,t){"use strict";return{initialize:function(e){t.setSiteMetaData(e,t.getSiteMetaData(e))},PRELOADER_PROPS:{COMPANEY_NAME:"companyName",LOGO_URL:"logoUrl"},enableOptimizedView:function(e,n){const o=t.getSiteMetaData(e);o.adaptiveMobileOn=n,t.setSiteMetaData(e,o)},isOptimized:function(e){return t.getSiteMetaData(e).adaptiveMobileOn},preloader:{enable:function(e,n){const o=t.getSiteMetaData(e);o.preloader.enabled=n,t.setSiteMetaData(e,o)},isEnabled:function(e){return t.getSiteMetaData(e).preloader.enabled},update:function(n,o){!function(t){const n=e.difference(e.keys(t),["companyName","logoUrl"]);if(e.some(n))throw new Error(`"[${n}]" are unsupported.`)}(o);const i=t.getSiteMetaData(n);i.contactInfo.companyName=e.get(o,"companyName",i.contactInfo.companyName),i.preloader.uri=e.get(o,"logoUrl",i.preloader.uri),t.setSiteMetaData(n,i)},get:function(e){const n=t.getSiteMetaData(e);return{companyName:n.contactInfo.companyName,logoUrl:n.preloader.uri}}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(68),n(115),n(599),n(95)],void 0===(i=function(e,t,n,o,i){"use strict";return{revert:function(e){t.removeQuickActionBar(e)},upgrade:function(r){const a=n.getSiteMetaData(r);let s=o.createFromSiteMetaData(a);e.isEmpty(s)&&(s=i.defaultQuickActionItems),t.addQuickActionBar(r,i.defaultSerializedMAB,s)},getVersion:function(e){return t.hasQuickActionBar(e)?2:1}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(95),n(1)],void 0===(i=function(e,t,n){"use strict";const o=n.linkTypes;function i(n){return e.isEmpty(n.contactInfo.phone)?null:{itemType:"phone",link:{type:o.PHONE_LINK,phoneNumber:n.contactInfo.phone},text:"Phone",icon:e.get(t.quickActionIconsData,"phone.hash"),color:e.get(t.quickActionIconsData,"phone.color")}}function r(n){return e.isEmpty(n.contactInfo.email)?null:{itemType:"email",link:{type:o.EMAIL_LINK,recipient:n.contactInfo.email,subject:""},text:"Email",icon:e.get(t.quickActionIconsData,"email.hash"),color:e.get(t.quickActionIconsData,"email.color")}}function a(n){return e.isEmpty(n.contactInfo.address)?null:{itemType:"address",link:{type:o.EXTERNAL_LINK,target:"_blank",url:`http://www.google.co.il/maps/search/${encodeURI(n.contactInfo.address)}`},text:"Address",icon:e.get(t.quickActionIconsData,"address.hash"),color:e.get(t.quickActionIconsData,"address.color")}}function s(n){return e(n.quickActions.socialLinks).filter(n=>e.includes(t.actionTypesMap,n.id)).map(n=>({itemType:n.id,link:{type:o.EXTERNAL_LINK,target:"_blank",url:n.url},text:e.get(t.socialLinkTexts,n.id,n.id),icon:e.get(t.quickActionIconsData,`${n.id}.hash`),color:e.get(t.quickActionIconsData,`${n.id}.color`)})).value()}return{createFromSiteMetaData:function(t){return e([i(t),r(t),a(t),s(t)]).flatten().compact().value()}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0)],void 0===(i=function(e){"use strict";return{setConnectedComponents:function(t,n,o){const i=e.cloneDeep(n);return e.isEmpty(o)?function(t){const n=e.omit(e.get(t,"custom"),"relatedConnections");return e.isEmpty(n)?e.omit(t,"custom"):e.assign({},t,{custom:n})}(i):(e.set(i,"custom.relatedConnections",o),i)},getConnectedComponents:function(t,n){return e.get(n,"custom.relatedConnections")}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(35)],void 0===(i=function(e,t){"use strict";const n={};function o(e){return n[e.siteAPI.getSiteId()]||[]}return{register:function(t,i,r){const a=function(t,o,i){const r=t.siteAPI.getSiteId(),a={appId:o,callback:i};return n[r]=e.compact([a].concat(n[r])),a}(t,i,r);return function(){e.pull(o(t),a)}},emit:function(e,n){o(e).forEach(function(e){e.callback({eventType:t.MessageTypes.VIEWER_INFO_CHANGED,eventPayload:n})})}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1)],void 0===(i=function(e,t){"use strict";function n(e,t,n){const o=e.pointers.general.getRenderFlag(t);e.dal.set(o,n)}return{setCompsToShowWithOpacity:function(e,t,n){const o=e.pointers.general.getRenderRealtimeConfigItem("compsToShowWithOpacity");e.dal.set(o,{opacity:n,compIds:t})},setCompsToShowOnTop:function(e,t){const n=e.pointers.general.getRenderRealtimeConfigItem("compsToShowOnTop");e.dal.set(n,t)},checkCompsToShowOnTop:function(e,n){const o=e.pointers.general.getRenderRealtimeConfigItem("compsToShowOnTop");return t.objectUtils.isDifferent(n,e.dal.get(o))},hideComp:({pointers:e,dal:t},n)=>{const o=e.components.getViewMode(n),i=e.general.getIsCompHiddenPointer(n.id,o);t.set(i,!0)},showComp:({pointers:e,dal:t},n)=>{const o=e.components.getViewMode(n),i=e.general.getIsCompHiddenPointer(n.id,o);t.isExist(i)&&t.remove(i)},isCompHidden:({pointers:e,dal:t},n)=>!!t.get(e.general.getIsCompHiddenPointer(n.id,e.components.getViewMode(n))),setCompsToHide:function(e,t){const n=e.pointers.general.getRenderRealtimeConfigItem("compsToHide_deprecated"),o=t.length>0?t[0]:"";e.dal.set(n,o)},setHideTextComponent:function(e,t){const n=e.pointers.general.getRenderRealtimeConfigItem("hideTextComponent");e.dal.set(n,t)},checkHideTextComponent:function(e,n){const o=e.pointers.general.getRenderRealtimeConfigItem("hideTextComponent");return t.objectUtils.isDifferent(n,e.dal.get(o))},allowSiteOverflow:function(e,t){n(e,"allowSiteOverflow",t)},setExtraSiteHeight:function(e,t){n(e,"extraSiteHeight",t)},setPreviewTooltipCallback:function(e,t){e.siteAPI.setPreviewTooltipCallback(t)},setErrorPagesPopUp:function(e,t){e.siteAPI.setErrorPagesPopUp(t)},setBlockingLayer:function(e,t){n(e,"blockingLayer",t)},setBlockingPopupLayer:function(e,t){n(e,"blockingPopupLayer",t)},setPremiumNavigationHandler:function(e,t){e.siteAPI.setPremiumNavigationHandler(t)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(50),n(212)],void 0===(i=function(e,t){"use strict";const n="routers",o=e.pointerGeneratorsRegistry;o.registerPointerType(n,function(){return null},function(){return!0});const i={getRoutersPointer:(e,o)=>o.getPointer("routers",n,t.paths.ROUTERS_PATH),getRoutersConfigMapPointer:(e,o)=>o.getPointer("routers_config_map",n,t.paths.ROUTERS_CONFIG_MAP),getRouterPointer:(e,o,i)=>o.getPointer(i,n,t.paths.ROUTERS_CONFIG_MAP.concat(i))};o.registerDataAccessPointersGenerator(n,i)}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(6),n(25),n(1),n(56),n(190),n(101),n(605),n(75),n(175),n(222)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l){"use strict";const u=o.integrations.ravenUtils;function d(e,t,n){const o=c.getVirtualDescriptor(e,t,!1);return c.writeFile(e,o,n).catch(e=>u.captureError(e,{tags:{localMode:!0}}))}const g=e=>p.createNewWriteableApp(e),f=r(s);function m(t){return{event:e.partial(n.event,t),error:e.partial(n.error,t)}}const y=e=>Promise.all([e.socketAPI.getCodeFiles(),g(e)]).then(([t])=>(function(e,t){return Promise.all(t.map(({path:t,content:n})=>d(e,t,n)))})(e,t)).then(()=>{const{resolve:t,reject:n,promise:o}=(()=>{let e,t;return{promise:new Promise((n,o)=>{e=n,t=o}),resolve:e,reject:t}})();return f.save(e,t,n),o}),E=(e,t)=>{const{modifiedFiles:n,deletedFiles:o}=t,i=n.map(({path:t,content:n})=>d(e,t,n)),r=o.map(({path:t})=>(function(e,t){const n=c.getVirtualDescriptor(e,t,!1);return c.deleteItem(e,n).catch(e=>u.captureError(e,{tags:{localMode:!0}}))})(e,t));return Promise.all([...i,...r])},I=e=>console.error(`[CORVID]: ${e.message}`);f.asyncInitMethod=(n=>n.socketAPI.isCloneMode().then(e=>e?l.clone(n):y(n)).then(()=>{t.registerHook(t.HOOKS.WIX_CODE.FLUSH,(t=>()=>{const n={primaryTask:s.getSaveTasksConfig(t).primaryTask,secondaryTasks:[]},o=e.noop,r=e.noop,a=[n,t.dal,o,r,m(t)];i.runPartialSaveTasks.apply(i,a)})(n)),n.socketAPI.registerToMessages(e=>{"LOCAL_CODE_UPDATED"===e.event&&E(n,e.data)})}).catch(I));const S=f.initMethod;f.initMethod=((e,t)=>{S(e,t),(e=>{const t=e.pointers.general.getAutosaveInfo(),n=e.dal.get(t)||{};n.shouldAutoSave=!1,e.dal.set(t,n)})(e)});return f.localMode={push:(e,t,n,o,i={})=>{const r=()=>f.save(e,t,n,!1,i);if(o)return a.save(e,r,n,!0,i);const s=Object.assign(i,{fullPayload:!0});return a.save(e,r,n,!1,s)},publish:a.publish,registerToMessages:(e,t)=>{e.socketAPI.registerToMessages((e=>t=>{(e=>["SOCKET_DISCONNECT","LOCAL_DOCUMENT_UPDATED","SOCKET_RECONNECTING","SOCKET_RECONNECTED"].includes(e))(t.event)&&e(t)})(t))},isConnected:e=>e.socketAPI.isConnected()},f}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(606),n(105),n(205),n(129),n(206),n(207),n(208),n(209)],void 0===(i=function(e,t,n,o,i,r,a,s,c){"use strict";return{getSaveTasksConfig:function(e){return{primaryTask:t(e),secondaryTasks:[i,r,n,a,s,c,o.create(e)]}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(12),n(222),n(195)],void 0===(i=function(e,t,n,o){"use strict";const{getSaveableSnapshot:i,extendSavableSnapshotWithFullSnapshot:r}=o,a=e=>i(e).set("wixCode",e.get("wixCode")),s=(e,t=!1)=>(e=>(t,n,...o)=>e(r(a(t),t),r(a(n),n),...o))((o,i,r,a)=>{n.save(e,t?null:o,i).then(r).catch(a)}),c=(e,n,o)=>{if("partialSave"===o){const o=a(e),i=!a(n).equals(o);return t.integrations.ravenUtils.breadcrumb("shouldRun",{didSnapShotsChangeFromLastSave:i}),i}return!0};return e=>({partialSave:s(e),fullSave:s(e,!0),firstSave(e,t,n,o){o(new Error("no first save in local mode!"))},saveAsTemplate(e,t,n){n()},publish(e,t){t()},autosave(e,t,n){n()},getTaskName:()=>"localSave",shouldRun:c,getSnapshotTags:()=>["primary"]})}.apply(t,o))||(e.exports=i)},function(e,t){e.exports=K},function(e,t,n){var o,i;o=[n(0),n(1),n(13),n(33),n(3)],void 0===(i=function(e,t,n,o,i){"use strict";const r={google:"socialLoginGoogleEnabled",facebook:"socialLoginFacebookEnabled"},a={termsOfUse:"termsOfUse",privacyPolicy:"privacyPolicy",codeOfConduct:"codeOfConduct"},s="joinCommunityCheckedByDefault",c="customSignUpPageId",p="customNoPermissionsPageId";function l(e){return`/_api/wix-contacts-webapp/dashboard/metasites/${n.generalInfo.getMetaSiteId(e)}/settings`}function u(t){return e.head(o.filterAppsDataByType(t,"sitemembers"))}function d(e){const n=e.pointers.data.getDataItemFromMaster(t.siteConstants.MASTER_PAGE_ID);return e.pointers.getInnerPointer(n,"smSettings")}function g(n,o){const r=n.pointers.data.getDataItemFromMaster(t.siteConstants.MASTER_PAGE_ID),a=n.dal.get(r);a.smSettings=e.merge(a.smSettings,o),i.addSerializedDataItemToPage(n,"masterPage",a,"masterPage")}return{setAutoApproval:function(n,i,r,a){t.ajaxLibrary.ajax({type:"POST",url:l(n),dataType:"json",data:{autoApprove:i},success:function(){const t=u(n);t.collectionType=i?"Open":"ApplyForMembership",o.registerAppData(n,t),e.isFunction(r)&&r()},error:a||e.noop})},isAutoApproval:function(e){return"Open"===u(e).collectionType},setLoginDialogFirst:function(e,t){g(e,{smFirstDialogLogin:!!t})},isLoginDialogFirst:function(e){const t=e.dal.get(d(e));return!(!t||!t.smFirstDialogLogin)},setSocialLoginVendorStatus:function(t,n,o){const i=r[n];i&&g(t,e.set({},i,!!o))},isSocialLoginEnabled:function(t,n){const o=r[n],i=t.dal.get(d(t));return!!e.get(i,o)},setJoinCommunityStatus:function(t,n){g(t,e.set({},s,!!n))},isJoinCommunityEnabled:function(t){const n=t.dal.get(d(t));return!(!1===e.get(n,s))},isSignupPoliciesFieldEnabled:function(t,n){const o=a[n],i=t.dal.get(d(t));return!!e.get(i,[o,"enabled"])},setSignupPoliciesFieldStatus:function(t,n,o){const i=a[n];i&&g(t,e.set({},[i,"enabled"],!!o))},getSignupPoliciesLink:function(t,n){const o=a[n],i=t.dal.get(d(t));return e.get(i,[o,"link"],null)},setSignupPoliciesLink:function(t,n,o){const r=a[n];if(r){const n=i.addLink(t,o.type,o);g(t,e.set({},[r,"link"],`#${n}`))}},setCustomSignupPageId:function(t,n){g(t,e.set({},c,n))},getCustomSignupPageId:function(t){const n=t.dal.get(d(t));return e.get(n,c,null)},setCustomNoPermissionsPageId:function(t,n){g(t,e.set({},p,n))},getCustomNoPermissionsPageId:function(t){const n=t.dal.get(d(t));return e.get(n,p,null)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(14),n(2)],void 0===(i=function(e,t,n){"use strict";function o(e,n){return n||t.getViewMode(e)}const i={pagesToFooterGap:0,headerToPagesGap:0},r=e.keys(i);function a(t,n){const o=function(t){return e(t).pick(r).defaults(i).value()}(t);return e(n).pick(r).mapValues(function(e,t){return Math.min(o[t],Math.max(e,0))}).defaults(o).pickBy(e.identity).value()}return{getGaps(t){const n=t.pointers.getInnerPointer(t.pointers.data.getDataItemFromMaster("masterPage"),"layoutSettings"),o=t.dal.get(n);return o?e.pick(o,r):{}},updateGaps(t,n){const o=t.pointers.getInnerPointer(t.pointers.data.getDataItemFromMaster("masterPage"),"layoutSettings"),i=t.dal.get(o);if(!i)return;const s=a(i,n),c=e(i).omit(r).assign(s).value();t.dal.set(o,c),t.siteAPI.createPageAnchors("masterPage")},isUsingSectionsLayout(t){const n=t.pointers.getInnerPointer(t.pointers.data.getDataItemFromMaster("masterPage"),"layoutSettings"),o=t.dal.get(n);return e.get(o,"useDesktopSectionsLayout",!1)},getFooter:(e,t)=>e.pointers.components.getFooter(o(e,t)),getHeader:(e,t)=>e.pointers.components.getHeader(o(e,t)),getPagesContainer:(e,t)=>e.pointers.components.getPagesContainer(o(e,t)),getSiteStructure:(e,t)=>e.pointers.components.getMasterPage(o(e,t)),getSiteStructureId:()=>n.MASTER_PAGE_ID}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(4),n(11),n(144),n(8),n(17)],void 0===(i=function(e,t,n,o,i,r){"use strict";return{alignInContainer:function(e,n,a){if(!i.public.isAlignable(e,n))throw new Error("cannot align component");let s;const c=t.getContainer(e,n);let p;if(t.isPageComponent(e,c))p=r.getLayout(e,c.id),s=!0;else if("masterPage"!==c.id)p=t.layout.get(e,c),s=!0;else{const o=e.pointers.components.getViewMode(n),i=e.pointers.components.getPagesContainer(o);p=t.layout.get(e,i),s=!1}o.alignComponentsToOuterLayout(e,[n],p,a,s)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(6),n(4),n(11),n(144),n(90),n(117),n(83)],void 0===(i=function(e,t,n,o,i,r,a,s,c){"use strict";const p=["wysiwyg.viewer.components.HoverBox"];function l(e,t,n,i,r,s,c){if(n)return;if(i&&i.isReplacingComp)return;if(!c)return;if(!e.dal.isExist(c))return;if(!a.isGroup(e,c))return;if(o.getChildren(e,c).length>=2)return;u(e,o.getChildren(e,c),c)}function u(t,n,r){const a=o.getContainer(t,r),p=e.findIndex(o.getChildren(t,a),{id:r.id});e.forEach(n,function(e){i.setContainer(t,void 0,e,a)}),e.forEach(n.reverse(),function(e){c.moveToIndex(t,e,p)}),t.pointers.components.isMobile(r)?s.hiddenComponents.hide(t,r):o.deleteComponent(t,r,!1)}return{initialize:function(){n.registerHook(n.HOOKS.REMOVE.AFTER,l)},groupComponents:function(t,n,s){if(!s||s.length<2)return;if(e.some(s,a.isGroupedComponent.bind(this,t)))return;const c=e.clone(s);e.forEach(c,function(n){if(a.isGroup(t,n)){const i=o.getChildren(t,n);s=s.concat(i),u(t,o.getChildren(t,n),n),s=e.reject(s,{id:n.id})}});const l=r.getSnugLayout(t,s),d=function(t,n){let i=o.getContainer(t,e.head(n));for(;i&&e.includes(p,o.getType(t,i));)i=o.getContainer(t,i);return i}(t,s);!function(t,n,i,r){const s={type:"Container",components:[],skin:"wysiwyg.viewer.components.GroupSkin",layout:{width:void 0,height:void 0,x:void 0,y:void 0,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:a.getGroupComponentType(),id:"i5zga2e4"};e.assign(s.layout,n),o.add(t,r,i,s)}(t,l,d,n),s=r.sortComponentsByZOrder(t,s),e.forEach(s,function(e){i.setContainer(t,void 0,e,n)})},addToGroup:function(t,n,o){e.forEach(n,function(e){i.setContainer(t,void 0,e,o)})},ungroup:u,genGroupPointer:function(n,i){const r=o.generateNewComponentId(),a=n.pointers.components,s=t.displayedOnlyStructureUtil,c=e.head(i),p=a.getViewMode(c);if(s.isDisplayedComponent(c.id)){const e=s.getItemId(c.id);return n.pointers.components.getUnattached(s.getUniqueDisplayedId(r,e),p)}return a.getUnattached(r,p)},getUngroupedComponents:function(e,t){return o.getChildren(e,t)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(2),n(17),n(4),n(221),n(49),n(130),n(217),n(37),n(5)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l){"use strict";const u=["wysiwyg.viewer.components.BoxSlideShow","wysiwyg.viewer.components.StripContainerSlideShow"],d={CANCELLED:"CANCELLED",DONE:"DONE",INIT:"INIT",RUNNING:"RUNNING"};let g=d.INIT;function f(t,n,o){return function(e,t,n){return new Promise(o=>{r.executeBehavior(e,t,"moveToSlide",{slide:n},o)})}(t,n,o.pop()).then(i=>e.isEmpty(o)?i:f(t,n,o))}const m=(t,n,o)=>{const i=t.pointers.components.getChildrenRecursively(n),r=o?i:i.filter(e.partial(S,t));return e.isEmpty(r)?[]:r.map(e=>{const n=y(t,e);return{pointer:e,hasSlides:n,slides:n?E(t,e):null}})},y=(t,n)=>e.includes(u,i.getType(t,n)),E=(t,n)=>{const o=t.pointers.components.getChildren(n),i=e.map(o,e.partial(S,t));return I(i)},I=t=>e.reduce(t,(e,t,n)=>(t&&e.push(n),e),[]),S=(t,n)=>{const o=t.pointers.getInnerPointer(n,"layout"),i=t.dal.full.get(o);return!e.isEmpty(e.get(i,"anchors"))||e.some(t.pointers.components.getChildren(n),e.partial(S,t))},h=(t,n)=>Promise.all(n.map(function(t,n){const o=n.slides;return e.isEmpty(o)?Promise.resolve():f(t,n.pointer,o)}.bind(null,t))),P=e=>new Promise(t=>e.setOperationsQueue.waitForChangesApplied(t));const A=t=>e.filter(t,{hasSlides:!0}),T=()=>new Promise((e,t)=>{g===d.RUNNING?e():t(g)});function v(e,t){return e.setOperationsQueue.runSetOperation(o.navigateTo,[e,t],{methodName:"page.navigateTo",allowInReadOnly:!0,waitingForTransition:!0,noBatchingAfter:!0}),P(e)}function C(t,n,o,i){return a.setViewMode(t,n),P(t).then(()=>T()).then(()=>i({status:"view-mode",viewMode:n})).then(()=>P(t)).then(()=>(function(t,n,o){const i=(r,a)=>v(t,e.head(a)).then(()=>h(t,A(n[e.head(a)]))).then(()=>o({status:"page-migrated",pageId:e.head(a)})).then(()=>P(t)).then(()=>a.shift()).then(()=>T()).then(()=>e.isEmpty(a)?Promise.resolve():i(r,a));return e.isEmpty(n)?Promise.resolve():i(e.size(n),e.keys(n))})(t,o,i))}function _(e,{pageId:t,viewMode:n}){return a.setViewMode(e,n),P(e).then(()=>v(e,t))}const O=(e,t)=>(a.enableRenderTPAsIframe(e,t),P(e)),D=(e,t)=>(a.enableComponentTransitions(e,t),a.enableStubifyComponents(e,t),a.enablePlaying(e,t),a.enablePageTransitions(e,t),P(e)),w=(e,t)=>(a.enableFetchDynamicPageInnerRoutes(e,t),P(e)),M=n=>e.get((e=>e.dal.get(e.pointers.getInnerPointer((e=>e.pointers.data.getDataItemFromMaster("masterPage"))(e),"layoutSettings")))(n),"mechanism")===t.constants.LAYOUT_MECHANISMS.MESH,b=e=>!M(e),R=e=>(e=>O(e,!0))(e).then(()=>(e=>D(e,!0))(e)).then(()=>(e=>w(e,!0))(e)),N=(e,t,n,o)=>_(e,t).then(()=>R(e)).then(()=>o(n)),x=e=>{return{viewMode:n.VIEW_MODES.DESKTOP,pageId:e.siteAPI.getFocusedRootId()}},L=t=>{a.isMobileView(t)||((t=>{const o=t.pointers.full.components.getMasterPage(n.VIEW_MODES.MOBILE),i=o&&t.pointers.full.components.getComponent(n.MOBILE_ONLY_COMPONENTS.TINY_MENU,o),r=i&&t.pointers.full.components.getParent(i),a=t.pointers.full.components.getHeader(n.VIEW_MODES.MOBILE);if(t.dal.full.isExist(i)&&r&&a&&!e.isEqual(r,a)){const e=t.pointers.full.components.getChildrenContainer(a),n=t.dal.full.get(i);t.dal.full.remove(i),t.dal.full.push(e,n,i)}})(t),p.runPartialConversionAllPages(t,!0))},B=(i,r,a,p,u,f)=>{g=d.RUNNING,t.loggingUtils.fedopsLogger.interactionStarted(t.loggingUtils.fedopsLogger.INTERACTIONS.MESH_SITE_MIGRATION);const y=((t,i=!1)=>e.reduce(o.getPageIdList(t,!1,!0),(o,r)=>([n.VIEW_MODES.DESKTOP,n.VIEW_MODES.MOBILE].forEach(n=>{const a=t.pointers.components.getPage(r,n),s=m(t,a,i);e.isEmpty(s)||(o[n][r]=s)}),o),{[n.VIEW_MODES.DESKTOP]:{},[n.VIEW_MODES.MOBILE]:{}}))(i,u);(e=>D(e,!1))(i).then(()=>(e=>O(e,!1))(i)).then(()=>(e=>w(e,!1))(i)).then(()=>(function(t,o,i){return Promise.resolve().then(()=>i({status:"init",maxValue:e.size(o[n.VIEW_MODES.DESKTOP])+e.size(o[n.VIEW_MODES.MOBILE]),value:0})).then(()=>C(t,n.VIEW_MODES.DESKTOP,o[n.VIEW_MODES.DESKTOP],i)).then(()=>C(t,n.VIEW_MODES.MOBILE,o[n.VIEW_MODES.MOBILE],i)).then(()=>P(t))})(i,y,f)).then(()=>_(i,r)).then(()=>(e=>c.exec(e))(i)).then(()=>L(i)).then(()=>R(i)).then(()=>(e=>new Promise((t,n)=>{s.meshLayoutReadySiteDataFixerAfterMeshWizard(e,t,n)}))(i)).then(()=>((e,t)=>{t.forEach(e.siteAPI.createPageAnchors.bind(e.siteAPI))})(i,["masterPage",r.pageId])).then(()=>(e=>{if(l.isOpen("sv_meshcors")&&!M(e))throw new Error("Failed to migrate to mesh")})(i)).then(()=>f({status:"done"})).then(()=>t.loggingUtils.fedopsLogger.interactionEnded(t.loggingUtils.fedopsLogger.INTERACTIONS.MESH_SITE_MIGRATION)).then(()=>(g=d.DONE,a("migration finished successfully"))).catch(e=>{N(i,r,e,p)})};return{migrateSiteToMesh:function(t,n,o,{isMigrationForced:i,updateCallback:r=e.noop}={}){if(g===d.RUNNING)return;const a=x(t);try{b(t)||i?B(t,a,n,o,i,r):n("site is already mesh or mesh eligible")}catch(e){N(t,a,e,o)}},cancel:()=>(g=d.CANCELLED,!0)}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(50),n(200),n(15),n(31),n(199)],void 0===(i=function(e,t,n,o,i){"use strict";return{handlers:function(e,n,o){t.callHandler(e,n,o)},initEditor:function(e,t,o){n.setIsInDevMode(t),i.setExperiments(o)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(78),n(46),n(65),n(106),n(224),n(616),n(228),n(617),n(230),n(105),n(620),n(156),n(621),n(625),n(626),n(88)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l,u,d,g,f,m){"use strict";return{items:e,types:t,lists:n,selection:o,listTemplates:i,fieldsLayout:r,appbuilder:a,classics:s,clientSpecMap:c,savePublish:p,listsLayout:l,metadata:u,initializer:d,repoFixer:g,migrationUtils:f,blogUtils:m}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o;void 0===(o=function(){"use strict";return{LIST_VERSION:"2.0"}}.apply(t,[]))||(e.exports=o)},function(e,t,n){var o,i;o=[n(0),n(1),n(46),n(79),n(65),n(225),n(226),n(227)],void 0===(i=function(e,t,n,o,i,r,a,s){"use strict";const c="View definition not found",p="Type definition not found",l="Field schema not found",u="Field not found in view",d="Given value is invalid",g=["name","displayName","type"],f="wysiwyg.viewer.components.WRichText";function m(e){throw new Error(e)}function y(e){return e.comp&&("Field"===e.comp.name||"TextField"===e.comp.name)}function E(t,n){const o=s.getCompProxyClass(t).getPropDefs(n),i="compProp"===n?t.comp:t;return e.mapValues(o,function(e,t){return i[t]||e.defaultValue})}function I(e){return t.objectUtils.resolvePath(e,["comp","items","0"])}function S(t){const n=E(t,"viewProp"),o=E(t,"compProp");return e.assign({},o,n)}function h(n,o){return e.head(t.objectUtils.filter(n,function(e){return e&&e.data===o&&y(e)}))||m(u)}function P(t,n,o){const i=S(o),a=I(o),c=e.omit(S(a),"hidden"),p=e.pick(n,g),l=e.assign({},p,i,c,{componentType:s.getCompProxyClass(a).componentType,style:s.getStyle(t,a)});return l.componentType===f?r.convertViewDefPropsToFieldProps(t,l):l}function A(t,n,o){const i=s.getCompProxyClass(t),r=e.difference(e.keys(i.getPropDefs("viewProp")),o),a=e.difference(e.keys(i.getPropDefs("compProp")),o);e.assign(t,e.pick(n,r)),e.assign(t.comp,e.pick(n,a))}function T(t,n,o,r){const a=i.getItemView(t,n,r);return a?P(t,function(t,n,o){const r=i.getType(t,n)||m(p);return e.find(r.fields,{name:o})||m(l)}(t,n,o),h(a,o)):null}return{getField:T,getAll:function(n,o,r){const a=i.getItemView(n,o,r);if(!a)return null;const s=i.getType(n,o)||m(p),c=e.map(s.fields,"name"),l=t.objectUtils.filter(a,function(t){return t&&e.includes(c,t.data)&&y(t)}),u=e.map(l,function(t){const o=e.find(s.fields,{name:t.data});return P(n,o,t)});return e.sortBy(u,function(e){return c.indexOf(e.name)})},set:function(n,s,l,u,g){const E=u.name||m(d),S=T(n,l,E,g);let P=e.omitBy(u,function(t,n){return e.isEqual(t,S[n])});S.componentType===f&&(P=r.convertFieldPropsToViewDefProps(P,S));const v=i.getItemView(n,l,g)||m(c),C=h(v,E),_=i.getType(n,l)||m(p);A(C,P,["layout","style"]);const O=I(C);A(O,P,["hidden","style"]),e.isUndefined(P.style)||(O.comp.style=P.style);const D=function(e,n){return t.objectUtils.findPath(e,function(e){return e&&e.data===n&&y(e)})}(v,E);o.setValueInView(n,_.name,v.name,D,C,g),a.updateAppPart2MinWidth(n,s,P,v),i.markDataAsUpdated(n,l)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(39),n(108),n(3),n(2),n(33),n(13),n(104),n(618),n(145),n(133),n(229),n(7),n(4),n(17),n(19),n(6),n(619),n(155),n(88),n(10),n(5)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p,l,u,d,g,f,m,y,E,I,S,h,P,A){"use strict";const T=n.FunctionLibrary,v=t.blogAppPartNames,C=n.expression;function _(t,n){const o=t.pointers.general.getClientSpecMap(),i=t.dal.get(o),r=e.findLast(i,{packageName:n});return r?`${r.applicationId}`:null}function O(e,t,n,o){const i=G.getApplicationId(e,t);i?o({applicationId:i}):w(e)?c.provisionAppAfterSave(e,n,o):c.provisionAppBeforeSave(e,n,o),H(e,"true")}function D(e,t,n,o,i,r){const a=G.getApplicationId(e,t);a?i({applicationId:a}):w(e)?c.provisionAppFromSourceTemplate(e,n,o,i,r):r({success:!1}),H(e,"true")}function w(e){return!s.generalInfo.isFirstSave(e)}function M(t){t.setOperationsQueue.runSetOperation(function(){const n=function(t){const n=m.getPagesDataItems(t);return e(n).compact().reject({appPageType:"AppPage"}).value()}(t);e.forEach(n,function(n){const o=m.getPage(t,n.id),i=g.getComponentByType(t,"wixapps.integration.components.AppPart",o);e(i).union(g.getComponentByType(t,"wysiwyg.common.components.rssbutton.viewer.RSSButton",o)).forEach(function(e){f.remove(t,e)})});const o=m.getPage(t,"masterPage"),i=g.getComponentByType(t,"wixapps.integration.components.AppPart",o);e(i).union(g.getComponentByType(t,"wysiwyg.common.components.rssbutton.viewer.RSSButton",o)).forEach(function(e){f.remove(t,e)}),H(t,"false")})}function b(t,n){const o=i.getDataItem(t,n),r=[v.FEED,v.SINGLE_POST];if(A.isOpen("sv_blogHeroImage")&&r.push(v.HERO_IMAGE),A.isOpen("sv_blogStudioExperiment")&&e.pull(r,v.HERO_IMAGE),e.includes(r,o.appPartName))return!1}function R(t,n,o){const i=e.isString(n)?S.getDescriptor(t,n):n;return e.find(i.viewDescriptions,{id:o}).comps.filter(function(e){return void 0===e.experiment||e.experiment.value==={}[e.experiment.name]})}function N(t,n,o){return t.views.filter(function(t){const i=e.isArray(t.name)?t.name:[t.name];return e.includes(i,n)&&e.includes([t.format||"","*"],o)})}function x(t,n,o,i,r){const a=S.getDescriptor(t,n),s=e(N(a,o,i)).map(function(t){return e.map(t.customizations,function(n){return e.merge({},n,{view:o,forType:n.forType||t.forType,format:n.format||i})})}).flattenDeep().filter(function(e){return r?e.panelType===r:e}).value();return"design"!==r?s:s.concat(function(t,n,o,i){return e.flattenDeep(R(t,n,o).map(function(t){let n;return n=t.hasNoStyleCustomization||!e.isUndefined(t.format)&&t.format!==i?[]:t.rules?e(t.rules).filter(function(t){return""===i||e.isUndefined(t.format)||t.format===i}).map(function(e){return{fieldId:e.fieldId,forType:e.forType,format:i,key:"comp.style",view:e.view}}).value():[{fieldId:t.compId||t.id,forType:"Post",format:i,key:"comp.style",view:o}]}))}(t,a,o,i))}function L(t){if(void 0===t||e.includes([t.view,t.forType,t.format,t.fieldId,t.key],void 0))throw new Error("illegal rule")}function B(t,n,o){return L(o),e.find(n,function(t){return function(t,n){return(t.format===n.format||"*"===n.format&&e.isUndefined(t.format))&&["fieldId","forType","key","view"].every(function(e){return t[e]===n[e]})}(t,o)})}function F(t,n,o){const i=S.getDescriptor(t,n).customizations,r=B(0,i,o)||B(0,i,e.merge({},o,{format:"*"}));return r&&r.value}function k(t,n,o){let i;return N(S.getDescriptor(t,n),o.view,o.format).some(function(t){return"vars"===o.fieldId?void 0!==(i=t.vars&&t.vars[o.key]):void 0!==(i=function t(n,o){let i;return n.id===o.fieldId&&void 0!==(i=e.get(n,o.key))?i:void 0!==n.comp?(e([n.comp.items,e.values(n.comp.cases),e.values(n.comp.templates)]).flattenDeep().compact().some(function(e){return void 0!==(i=t(e,o))}),i):void 0}(t,o))}),i}function U(t,n,o){const i=x(t,n,o.view,o.format),r=e.find(i,{fieldId:o.fieldId,key:o.key});if(void 0!==r)return r.input.defaultVal}function H(t,n){let o=t.pointers.page.getPageData("masterPage");const i=["appVars_61f33d50-3002-4882-ae86-d319c1a249ab","vars","applicationActiveState"];for(;!e.isEmpty(i);)o=t.pointers.getInnerPointer(o,i.splice(0,1)[0]),t.dal.isExist(o)||t.dal.set(o,{});t.dal.set(o,{type:"AppPartParam",value:n})}function V(e){return C.evaluate(function(){},e,function(){W||(W=new T);return W}())}let W=null;const G={blog:{addBlog:function(t,n,o,i,r){const a=function(n){const a=m.getPageIdToAdd(t),s=p.getBlogFeedPageJson(t,o,n.applicationId);s.data.pageUriSEO=y.getValidPageUriSEO(t,"",s.data.pageUriSEO);const c=p.getSinglePostPageJson(t,i,n.applicationId);c.data.pageUriSEO=y.getValidPageUriSEO(t,"",c.data.pageUriSEO),t.setOperationsQueue.runSetOperation(m.add,[t,a,"Blog",s],{isUpdatingAnchors:!0}),t.setOperationsQueue.runSetOperation(m.add,[t,m.getPageIdToAdd(t),"Single Post",c],{isUpdatingAnchors:!0}),e.isFunction(r)&&r(a.id)};n?D(t,"blog","61f33d50-3002-4882-ae86-d319c1a249ab",n,function(){c.provisionAppAfterSave(t,"61f33d50-3002-4882-ae86-d319c1a249ab",a)}):O(t,"blog","61f33d50-3002-4882-ae86-d319c1a249ab",a)},deleteAllAppParts:M,getBlogSinglePostPageData:function(t){const n=m.getPageIdList(t);let o;return e.forEach(n,function(e){G.blog.isSinglePost(t,e)&&(o=y.getPageData(t,e))}),o},isFeed:h.isFeed,isSinglePost:h.isSinglePost,replaceBlogPages:function(t,n,o,i){const r=t.pointers.page.getNonDeletedPagesPointers(),a=e(r).chain().find(function(e){return h.isSinglePost(t,e.id)}).thru(t.pointers.components.getDesktopPointer).value(),s=i||e(r).chain().find(function(e){return h.isFeed(t,e.id)}).thru(t.pointers.components.getDesktopPointer).value(),c=e(a.id).thru(t.pointers.data.getDataItem).thru(t.dal.get).get("appInnerID"),l=p.blogComponentBuilder(c);return u(a,o.map(l)),u(s,n.map(l));function u(e,n){const o=[];return t.pointers.components.getChildren(e).forEach(function(e){t.setOperationsQueue.runSetOperation(f.remove,[t,e],{isUpdatingAnchors:!0})}),n.forEach(function(n){const i=f.getComponentToAddRef(t,e,n);o.push(i),t.setOperationsQueue.runSetOperation(f.add,[t,i,e,n],{isUpdatingAnchors:!0})}),o}}},blogFeedOrCustomFeedHasPagination:I.blogFeedOrCustomFeedHasPagination,canDeleteComp:b,findCustomizationDefaultValueFromDescriptor:function(e,t,n){let o;return L(n),[F,k,U].some(function(i){return void 0!==(o=i(e,t,n))}),C.isExpression(o)?V(o.$expr):o},findCustomizationOverride:B,getAllAppPartComps:function(t,n){const o=n&&_(t,n);return e.isNull(o)?[]:g.getComponentByType(t,"wixapps.integration.components.AppPart").map(function(e){return i.getDataItem(t,e)}).filter(function(e){return e.appInnerID===o||!o})},getApplicationId:_,getAppPartExtraData:function(e,t){const n=`${e.dal.get(t).dataQuery.replace("#","")}_extraData`,o=u.getAppPartDataPath("blog",n);return e.dal.getByPath(o)},getAppPartRole:S.getAppPartRole,getAppPartViewFieldKeyValue:function(t,o,r,a,s,c){const p=i.getDataItem(t,o),l=S.getDescriptor(t,S.getPackageName(t,p.appInnerID)),u=n[A.isOpen("wixappsViewsCaching")?"memoizedViewsUtils":"viewsUtils"].findViewInDescriptorByNameTypeAndFormat(l,p.viewName,r,a),d=e.cloneDeep(u);let g;d.name=p.viewName,n.viewsCustomizer.customizeView(d,l.customizations,p.appLogicCustomizations),"vars"===s?g=d.vars[c]:n.viewsUtils.traverseViews(d,function(t){if(t.id===s)return g=e.get(t,c),!1});const f=C.isExpression(g)?V(g.$expr):g;if(void 0!==f)return f.toString()},getAvailableCustomizations:x,getAvailableViewNames:function(e,t,n){return S.getAppPartDefinition(e,t,n).views},getBlogCategories:function(t,n){const o=u.getCategoriesPath("blog"),i=t.dal.getByPath(o)||[],r=[];e.forEach(i,function(t){r.push({name:t.name}),e.forEach(t.subcategories,function(e){r.push({isSubcategory:!0,name:e.name})})}),n&&!e.find(r,{name:n})&&r.unshift({name:n});return r},getBlogInstanceId:function(e){return function(e){return a.getAppData(e,_(e,"blog"))}(e).datastoreId},getBlogNewSocialShareButtonsCustomizationForView:(e,t)=>d(t),getBlogPaginationCustomizationsByAppPartName:function(e,t){return l.getBlogPaginationCustomizationsByAppPartName(t)},getComponentTypeByProxyName:function(e,t){return o.componentTypeUtil.getComponentTypeByProxyName(t)},getDataStoreId:function(e,t){return a.getAppData(e,_(e,t)).datastoreId},getInnerComps:R,getPackageName:S.getPackageName,getSinglePostId:function(e,t){const n=u.getAppPartDataPath("blog",t),o=e.dal.getByPath(n);return o?o[1]:""},getStyleCustomizations:function(t,n,o,i){const r=S.getDescriptor(t,n);return e.filter(r.customizations,function(e){return!("comp.style"!==e.key||void 0!==o&&e.fieldId!==o||void 0!==i&&e.view!==i)})},getTagNames:function(e){const t=u.getBlogTagNamesPath();return e.dal.getByPath(t)},getUserId:function(){return""},invalidateComponentViewCache:function(e,t){e.setOperationsQueue.waitForChangesApplied(function(){o.viewCacheUtils.removeComponentViewDefs(t)})},isBlogPage:h.isBlogPage,isRTLAllowed:function(e,t,n){return S.getAppPartDefinition(e,t,n).allowRtl},loadTagNames:function(){return[]},provision:O,provisionFromTemplate:D,registerHooks:function(){E.registerHook(E.HOOKS.REMOVE.AFTER,M,"wixapps.integration.components.AppPage"),E.registerHook(E.HOOKS.REMOVE.IS_OPERATION_ALLOWED,b,"wixapps.integration.components.AppPart"),E.registerHook(E.HOOKS.DUPLICATE.IS_OPERATION_ALLOWED,b,"wixapps.integration.components.AppPart")},reloadApp:function(t,n){if(e.size(G.getAllAppPartComps(t,n))>0){const e=u.getPackageDescriptorPath(n),o=t.dal.getByPath(e),i=u.getPackagePath(n);t.dal.full.setByPath(i,{}),t.dal.full.setByPath(e,o),"blog"===n&&G.loadTagNames(t)}},styleMapping:{fontClassToStyle:function(e,t){return n.styleMapping.fontClassToStyle(t)},styleToFontClass:function(e,t){return n.styleMapping.styleToFontClass(t)}},style:{createItemToFork:(t,n)=>{const o={styleType:r.STYLES.TYPES.CUSTOM,type:r.STYLES.TOP_LEVEL_STYLE},i=e(n).omit(["id"]).assign(o).value();return P.styles.createStyleItemToAdd(t,i)}}};return G}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(17),n(145),n(12),n(0)],void 0===(i=function(e,t,n,o){"use strict";return{getBlogFeedPageJson:function(t,n,o){const r=i(o);return{type:"Page",components:n.map(r),skin:"wysiwyg.viewer.skins.page.BasicPageSkin",layout:{width:980,height:968,x:0,y:0,scale:1,rotationInDegrees:0,anchors:[],fixedPosition:!1},componentType:"wixapps.integration.components.AppPage",data:{type:"AppPage",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},title:"Blog",hideTitle:!0,icon:"",descriptionSEO:"",metaKeywordsSEO:"",pageTitleSEO:"",pageUriSEO:"blog",hidePage:!1,underConstruction:!1,tpaApplicationId:0,pageSecurity:{requireLogin:!1},indexable:!0,isLandingPage:!1,pageBackgrounds:e.serializePage(t,t.siteAPI.getPrimaryPageId()).data.pageBackgrounds,appPageId:"79f391eb-7dfc-4adf-be6e-64434c4838d9",appPageType:"AppPage",appInnerID:o.toString(),repeaterPage:!1},style:"p2"}},getSinglePostPageJson:function(t,n,o){const r=i(o);return{type:"Page",components:n.map(r),skin:"wysiwyg.viewer.skins.page.BasicPageSkin",layout:{width:980,height:895,x:0,y:0,scale:1,rotationInDegrees:0,anchors:[],fixedPosition:!1},componentType:"wixapps.integration.components.AppPage",data:{type:"AppPage",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},title:"Single Post",hideTitle:!0,descriptionSEO:"",metaKeywordsSEO:"",pageTitleSEO:"",pageUriSEO:"single-post",hidePage:!0,mobileHidePage:!0,underConstruction:!1,tpaApplicationId:0,pageSecurity:{requireLogin:!1,passwordDigest:""},indexable:!0,isLandingPage:!1,pageBackgrounds:e.serializePage(t,t.siteAPI.getPrimaryPageId()).data.pageBackgrounds,appPageId:"7326bfbb-4b10-4a8e-84c1-73f776051e10",appPageType:"AppPage",appInnerID:o.toString(),repeaterPage:!0},style:"p2"}},blogComponentBuilder:i};function i(e){return function t(n){const i=function(t){if("wixapps.integration.components.AppPart"===t.componentType)return n=t,o.merge(n,{data:{appInnerID:e.toString()}});var n;return t}(n);return o.isArray(n.components)&&(i.components=n.components.map(t)),i}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(3),n(133),n(0),n(1),n(108)],void 0===(i=function(e,t,n,o,i){"use strict";const r=o.blogAppPartNames,a=i.numberOfPostsPerPageGetter;return{blogFeedOrCustomFeedHasPagination(o,i){const s=e.getDataItem(o,i);switch(s.appPartName){case r.FEED:return function(e,o){const i=t.getAppPartExtraDataPath("blog",o.id),r=e.dal.getByPath(i);return n.get(r,"totalCount")>10}(o,s);case r.CUSTOM_FEED:return function(e,o){const i=t.getAppPartDataPath("blog",o.id),r=e.dal.getByPath(i),s=a.getNumberOfPostsPerPage(o);return n.get(r,"length")>s}(o,s)}}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(1),n(46),n(79),n(65),n(10),n(39),n(225),n(226),n(227)],void 0===(i=function(e,t,n,o,i,r,a,s,c,p){"use strict";const l=["comp","name"],u=["comp","hidden"],d=["comp","hidePagination"],g=["comp","itemsPerPage"],f=["comp","style"],m=["vars","itemSpacing"],y={itemSpacing:()=>m,hidePagination:e=>E(e).concat(d),itemsPerPage:e=>E(e).concat(g),hideSeparator:e=>I(e).concat(u),separatorStyle:e=>I(e).concat(f)};function E(n){return t.objectUtils.findPath(n,function(t){return"PaginatedList"===e.get(t,l)})}function I(n){return t.objectUtils.findPath(n,function(t){return"HorizontalLine"===e.get(t,l)})}return{get:function(t,n,r){const s=i.getListDef(t,n).viewName,c=o.getView(t,"Array",s,r),l=I(c),u=e.get(c,l);return{itemSpacing:a.convertStringToPrimitive(e.get(c,y.itemSpacing(c))),hidePagination:a.convertStringToPrimitive(e.get(c,y.hidePagination(c))),itemsPerPage:a.convertStringToPrimitive(e.get(c,y.itemsPerPage(c))),hideSeparator:a.convertStringToPrimitive(e.get(c,y.hideSeparator(c)))||!1,separatorStyle:p.getStyle(t,u),separatorComponentType:p.getCompProxyClass(u).componentType}},set:function(t,n,r,a){const s=i.getListDef(t,n).viewName,c=o.getView(t,"Array",s,a);e(y).pick(e.keys(r)).forEach(function(e,n){o.setValueInView(t,"Array",s,e(c),r[n].toString(),a)}),i.markDataAsUpdated(t,n)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(13),n(622),n(623),n(21),n(624)],void 0===(i=function(e,t,n,o,i){"use strict";return{initialize:function(r){o.initBasePaths(r),t.registerHooks(),n.switchOnBlogPaginationIfSiteIsNew(r),e.generalInfo.isFirstSave(r)&&i(r)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(21),n(6),n(3),n(224),n(65),n(230)],void 0===(i=function(e,t,n,o,i,r,a){"use strict";const s="wixapps.integration.components.AppPart2",c="template";function p(e,n,r){const s=i.createListFromTemplate(e,r.custom[c]),p=a.getApplicationId(e);return e.dal.full.pushByPath(t.getAppbuilderMetadataPath("requestedPartNames"),s),e.dal.full.setByPath(t.getAppPart2MetadataPath(s),{loading:!1}),o.updateDataItem(e,n,{appPartName:s,appInnerID:p}),{success:!0,description:`New list was added with id [${s}]`}}function l(t,n,r){const a=o.getDataItem(t,n);return e.isEmpty(a)?{success:!0,description:"compData is empty"}:(r[c]=i.generateTemplate(t,a.appPartName),{success:!0,description:"Added template to the custom component structure"})}function u(n,o,i,a,s,c){if("MOBILE"===o.type)return{success:!0,description:"Skipped deleting part views when deleting mobile component"};const p=c.appPartName,l=r.getListDef(n,p);if(!l)return{success:!0,description:"Missing Part definition: views were not deleted"};const u=n.dal.getByPath(t.getBaseViewsPath());return e(u).pickBy({name:l.viewName}).forEach(function(e,o){n.dal.full.removeByPath(t.getViewPath(o))}),{success:!0,description:"Deleted Part views"}}return{registerHooks:function(){n.registerHook(n.HOOKS.ADD.AFTER,p,s),n.registerHook(n.HOOKS.SERIALIZE.SET_CUSTOM,l,s),n.registerHook(n.HOOKS.REMOVE.AFTER,u,s)},afterDeleteList:u}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(7),n(3),n(13),n(145),n(1)],void 0===(i=function(e,t,n,o,i,r){"use strict";return{switchOnBlogPaginationIfSiteIsNew(e){(function(e){return o.generalInfo.isFirstSave(e)})(e)&&(function(e){a(e,r.blogAppPartNames.FEED)}(e),function(e){a(e,r.blogAppPartNames.CUSTOM_FEED)}(e))}};function a(o,i){e.forEach(function(o,i){return e.filter(function(e){return t.getComponentByType(e,"wixapps.integration.components.AppPart")}(o),function(e){const t=n.getDataItem(o,e);return t.appPartName===i})}(o,i),e.partial(s,o,i))}function s(e,t,o){const r=n.getDataItem(e,o);r.appLogicCustomizations=r.appLogicCustomizations.concat(i.getBlogPaginationCustomizationsByAppPartName(t)),n.updateDataItem(e,o,r)}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(7),n(3),n(229),n(0),n(1)],void 0===(i=function(e,t,n,o,i){"use strict";return function(r){o(e.getComponentByType(r,"wixapps.integration.components.AppPart")).filter(function(e){const n=t.getDataItem(r,e);return n.appPartName===i.blogAppPartNames.SINGLE_POST}).forEach(function(e){const o=t.getDataItem(r,e),i=n(o.viewName);o.appLogicCustomizations.push(i),t.updateDataItem(r,e,o)})}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(4),n(7),n(21),n(228)],void 0===(i=function(e,t,n,o,i){"use strict";return{cleanRepoViews:function(r,a,s){const c=r.dal.full.getByPath(o.getRepoPath()),p=e(c.parts).pick(function(o){const i=n.getAllComponents(o,null,function(e){return"wixapps.integration.components.AppPart2"===t.getType(o,e)});return e.map(i,function(e){return t.data.get(o,e).appPartName})}(r)).map("viewName").transform(function(t,n){const o=e.pickBy(c.views,{name:n});return e.assign(t,o)},{}).value();e.keys(p).length!==e.keys(c.views).length?(r.dal.full.removeByPath(o.getBaseViewsPath()),r.dal.full.setByPath(o.getBaseViewsPath(),p),i.save(r,a,s)):a&&a()}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(39),n(1),n(627),n(21),n(78),n(79),n(65)],void 0===(i=function(e,t,n,o,i,r,a,s){"use strict";const c={"wix:RichText":o};function p(n){const o={};return t.viewsUtils.traverseViews(n,function(t){const n=e.get(t,"comp.name");"TextField"!==n&&"Field"!==n||(o[t.data]=t)}),o}function l(e,t){return n.objectUtils.findPath(e,function(e){return e&&e.data===t})}function u(t,n,o,i,r){const a=p(t),s=p(n),u=e(i).filter(function(t){return e.has(c,t.type)}).groupBy("type").value(),d=e.map(u,function(t,n){return e.map(t,function(t){const i=t.name,p=a[i],l=s[t.name],u=e.mapValues(o,function(t){return e.pick(t,i)});return{fieldName:i,result:c[n].migrate(p,l,u,r)}})});return e(d).flatten().reduce(function(t,n){const o=l(t.viewDef,n.fieldName),i=l(t.mobileViewDef,n.fieldName);return{viewDef:e.set(t.viewDef,o,n.result.viewDef),mobileViewDef:e.set(t.mobileViewDef,i,n.result.mobileViewDef),items:e.defaultsDeep(n.result.data,t.items)}},{viewDef:t,mobileViewDef:n,items:o})}return{migrate:u,migrateList:function(e,t){const n=s.getItemView(e,t),o=s.getItemView(e,t,"Mobile"),i=s.getType(e,t),c=r.getAllItemsOfType(e,i.name),p=s.getVersion(e,t),l=u(n,o,c,i.fields,p);a.setValueInView(e,i.name,n.name,[],l.viewDef),a.setValueInView(e,i.name,n.name,[],l.mobileViewDef,"Mobile"),r.setAllItemsOfType(e,i.name,l.items)}}}.apply(t,o))||(e.exports=i)},function(e,t,n){var o,i;o=[n(0),n(39)],void 0===(i=function(e,t){"use strict";const n=["color","backgroundColor","bold","italic","lineThrough","underline","fontSize","line-height","fontFamily"],o="comp.items.0.layout".split(".");function i(t){return function(t){const o=e.get(t,"comp.items[0].comp");e.forEach(n,function(e){delete o[e]})}(t),function(t){const n=e.get(t,o);n&&delete n["text-align"]}(t),t}return{compPropsToRemove:n,migrate:function(n,r,a,s){const c=e.get(n,o.concat("text-align")),p=c?`text-align:${c}`:"";return{data:e.mapValues(a,function(o){return e.mapValues(o,function(o){const i=function(n,o,i,r){return t.richTextUtils.getDataWithDefaultStyleForRichText(e.partialRight(t.viewsUtils.getCompProp,n),o,void 0,i,r)}(e.get(n,"comp.items[0]"),o,s,p);return e.defaults({text:i},o)})}),viewDef:i(n),mobileViewDef:i(r)}}}}.apply(t,o))||(e.exports=i)}])});
//# sourceMappingURL=document-services-implementation.js.map