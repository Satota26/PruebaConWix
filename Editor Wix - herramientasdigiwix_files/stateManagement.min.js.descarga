var _slicedToArray=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}define("stateManagement/topBar/topBarActionTypes",[],function(){"use strict";return{OVERRIDE_TOP_BAR:"override-top-bar",SET_ADI_TOOLTIP_VISIBILITY:"set-adi-tooltip-visibility",SET_BANNER_TITLE:"set-banner-title"}}),define("stateManagement/store/initialEditorState",["constants","util"],function(e,t){"use strict";return{addPanel:{overridden:void 0},designPanel:{overridden:{}},featuresOverridden:_defineProperty({},e.FEATURES.CONNECT_TO_DATA,{isDisabled:!1}),linkPanel:{overridden:void 0},snapComponent:{verticalEqualDistance:!1,horizontalEqualDistance:!1},componentsStore:{},gridLines:{overrides:_defineProperty({},e.GRID_LINES_TYPES.PAGE,null)},editorIsInit:!1,previewReady:!1,config:{topBarHeight:e.UI.TOPBAR_HEIGHT,previewHeight:null,previewWidth:null,languages:["latin"],extraSiteHeight:40},navControlsSize:null,editingAreaPosition:{top:0,left:0,height:0,width:0,right:0,bottom:0},wixCodeLoaded:!1,wixCodeIDE:{overridden:{showTabs:!0,shouldShow:!0}},developerToolBar:{overrides:{showOnlySavedEvents:!1,isReadOnlyEvents:!1,disableLinkToCode:!1}},devModeContext:{type:e.DEVELOPER_MODE.CONTEXT_TYPES.PAGE,data:void 0},localMode:{enabled:!1,pushingStatus:e.PROGRESS_STATUS.IDLE,isLocalPushInProgress:!1,isReconnecting:!1},contextMenu:null,hoverBox:{hoveredComp:null,hoverBoxOverlay:!1},googleMap:{panel:"single",locationIndex:0},mouseActions:{performingMouseMoveAction:!1,usingWindowMouseEvents:!1},selection:{selectedComponents:[],compRestrictions:{},lastSelectionClickPos:null,focusedContainer:null,focusBoxTabsDef:null,appContainer:null},inlinePopup:{openedInlinePopup:null},userProfile:{},layers:{spotlight:null},stage:{highlights:[]},permanentBorder:{component:void 0},uploadedFonts:{list:[],queue:[],uploadedItems:{},timeOutTokens:[]},domMeasurements:{stageLayout:{bottom:0,height:0,left:0,right:0,top:0,width:0,x:0,y:0},editorContentLayout:{bottom:0,height:0,left:0,right:0,top:0,width:0,x:0,y:0},scroll:{scrollLeft:0,scrollTop:0,scrollHeight:0,scrollWidth:0},stageRect:{top:0,bottom:0,left:0,right:0},previewPosition:{top:e.UI.TOPBAR_HEIGHT,left:0,height:0,width:0}},previewMode:!1,isMobileEditor:!1,snapData:null,lassoLayout:null,candidates:null,clipboard:{},site:{premiumPackage:void 0},topBar:{openedDropPanel:null,dropPanelDisabled:!1,shouldDropPanelRemainOpen:!1,overridden:{menuItems:_defineProperty({},e.ROOT_COMPS.TOPBAR.MENU_BAR_ITEMS.TOOLS,{}),overrideGetters:{}},adiTooltipVisibility:!1,isMac:t.browserUtil.isMacintosh(),bannerTitle:void 0},text:{isTextEditorOpen:!1},viewTools:{toolbarEnabled:void 0,developerToolBarEnabled:void 0,guidelinesEnabled:void 0,sectionsHandlesEnabled:void 0,snapToEnabled:void 0,rulersEnabled:void 0},rulers:{guidesState:{desktop:{verticalGuides:[],horizontalGuides:[]},mobile:{verticalGuides:[],horizontalGuides:[]}},selectedGuide:void 0,isHovered:void 0,isDragging:null,history:{stack:[],currentIndex:0}},hasDatabaseCollections:null,helpProps:null,attachCandidate:null,constraintArea:null,panelData:{openPanels:[],panelFilters:{}},previewingStatus:e.PROGRESS_STATUS.IDLE,savingStatus:e.PROGRESS_STATUS.IDLE,publishingStatus:e.PROGRESS_STATUS.IDLE,savePublish:{isSaveInProgress:!1,isPublishInProgress:!1,isBuildInProgress:!1,isDiffSaveInProgress:!1,publishPanelPromotionIndex:0,isForceSaveInBackground:!1,overridden:{siteWasSavedPanel:null,domainPanel:null,saveAndPublish:null,saveReminderPanel:null,siteDefaultName:null,shouldCheckForConcurrentUsers:void 0},isDealerLoaded:!1},sitePremiumState:null,portalComps:{},mobile:{introsEnabled:!0,isHiddenItemsCounterVisible:!0,reAddedHiddenElement:{compRef:null,addingPhase:e.LEFT_BAR.MOBILE_HIDDEN_ELEMENTS.PROGRESS.IDLE},hiddenItems:{isAddingHiddenItemInProgress:!1,hoveredComponent:{},masterPageHiddenComponents:[],currentPageHiddenComponents:[]},mobileWizard:{enabled:!1,openingState:e.MOBILE.MOBILE_WIZARD.OPENING_STATE.BEFORE,currentStep:"",stepsToShow:[],userSelections:{tinyMenu:void 0,header:void 0,qab:void 0,backToTop:void 0},lastSaved:{tinyMenu:void 0,header:void 0,qab:void 0,backToTop:void 0},tinyMenu:{availableSkins:[]},header:{animationInProgress:!1},qab:{availablePresets:[]}}},applyModeFromClipboardSuggestion:null,leftBar:{isCollapsed:!1,isMobileCollapsed:!1,notifications:{},superApps:{desktop:[],mobile:[]},buttonsBoundingRect:{},overriddenButtons:{desktop:void 0,mobile:void 0}},leftTree:{overridden:{overriddenItems:void 0,shouldShow:!0}},spotlightStage:{color:null,shouldShowGridLines:!1},wixAd:{overridden:{alwaysHidden:!1}},sectionedPanel:{openDockedSections:[],shouldShow:!0},topBarPagesFilter:"",topBarCustomization:{tooltipOverrides:{UNDO:null,SAVE:null}},pageSections:{sections:null,selectedSection:null},siteScale:1,pinMode:{isOpen:!1,pinPreviewRectStyle:{opacity:0}},hideTools:!1,hideToolsAndMaintainStagePosition:!1,shouldHideToolsBtnBlink:!1,halfOpacityTools:!1,unreadComments:0,isOpenTextEditor:!1,imageCrop:{isOn:!1,cropArea:null,cropOriginArea:null},shouldOverlayUpdate:!0,tabIndicationState:{indication:"INACTIVE",activeMode:void 0},floatingBubble:{value:null,targetLayout:null,bubbleProps:{},shouldNotHideOnMouseLeaveTarget:!1},notifications:[],tpa:{appsIdsToRefreshOnDashboardClose:[],trackedAppsForUpgrade:{}},scrollTo:null,animateScrollTo:null,eventCounters:{focus:0,clearTextSelection:0,forceOpenPagesQuickNavigation:0,forceOpenPagesPanel:0},userPreferences:{siteId:null,dontSaveUserPrefs:!1,session:{},site:{},global:null},dynamicPages:{innerRoutes:[],selectedInnerRoute:null,preventFetch:!1,routerData:null,inInnerRoutesFetchProcess:!1},pages:{focusedPage:null,focusedPageTitle:""},easterEggs:{flyingMusa:null},siteDisplayName:null,multilingual:{supportedLanguages:[],loading:{isLoading:!1,producer:null},isChanging:!1,nextLanguage:null,error:null},platform:{availableApps:[],freshAppsData:[],installationInProgress:!1,importPanel:{isLoading:!1,isLoadingAppsError:!1},packagesView:{isRootExpanded:!0,isImportingApp:!1}},applicationStudio:{packageAndPublish:{appVersion:void 0,currBuildVersion:e.APP_STUDIO.BUILD_VERSION_TYPES.MINOR,currTask:null,errorMessage:"",isFirstAppBuild:!0,isPackaging:!1,numOfTasksDone:0,packageStep:e.APP_STUDIO.PACKAGE_STEPS.FIRST_PUBLISH,totalNumOfPackageTasks:0},appLink:{link:void 0,fail:!1,creating:!1},appInfo:{appDefId:null,appName:void 0,namespace:void 0}},appInstaller:{finishedCounter:0,totalApps:0,done:!1,installingAppName:""},__renderCounter:0,viewerRendersCounter:0,appsStore:{},rightClickMenu:{overridden:{copyDesign:{isHidden:!1}}},wixData:{isLoading:null,hasError:!1,userCollections:[],dbDriverSections:[],externalDbDriverSections:[],appSections:[]},welcomeScreen:null,externalLinks:{overridden:{}},meshMigration:{}}}),define("stateManagement/topBar/topBarReducer",["lodash","stateManagement/topBar/topBarActionTypes","stateManagement/store/initialEditorState"],function(a,e,r){"use strict";var i=e.OVERRIDE_TOP_BAR,o=e.SET_ADI_TOOLTIP_VISIBILITY,s=e.SET_BANNER_TITLE;return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:r.topBar,t=arguments[1];switch(t.type){case i:var n=a.assign({},e.overridden,a.get(t,"overridden"));return a.assign({},e,{overridden:n});case o:return a.assign({},e,{adiTooltipVisibility:t.visibility});case s:return a.assign({},e,{bannerTitle:t.bannerTitle});default:return e}}}),define("stateManagement/topBar/topBarSelectors",["constants"],function(e){"use strict";var t=e.OVERRIDDEN,n=function(e){return e.topBar.bannerTitle};return{getOverriddenButtons:function(e){return e.topBar.overridden.buttons},getOverriddenMenus:function(e){return e.topBar.overridden.menus},getOverriddenMenuItems:function(e){return e.topBar.overridden.menuItems},getOverriddenQuickNavigation:function(e){return e.topBar.overridden[t.TOP_BAR.QUICK_NAVIGATION.KEY]},getBackToAdiTooltipVisibility:function(e){return e.topBar.adiTooltipVisibility},getOverrideGetters:function(e){return e.topBar.overridden.overrideGetters},getBannerTitle:n,getBannerVisibility:function(e){return!!n(e)}}}),define("stateManagement/topBar/topBarActions",["stateManagement/topBar/topBarActionTypes"],function(t){"use strict";return{overrideItems:function(e){return{type:t.OVERRIDE_TOP_BAR,overridden:e}},setAdiTooltipVisibility:function(e){return{type:t.SET_ADI_TOOLTIP_VISIBILITY,visibility:e}},setBannerTitle:function(e){return{type:t.SET_BANNER_TITLE,bannerTitle:e}}}}),define("stateManagement/topBar/topBar",["stateManagement/topBar/topBarReducer","stateManagement/topBar/topBarSelectors","stateManagement/topBar/topBarActions"],function(e,t,n){"use strict";return{reducer:e,selectors:t,actions:n}}),define("stateManagement/externalLinks/externalLinksActionTypes",[],function(){"use strict";return{OVERRIDE_EXTERNAL_LINK:"override-external-link"}}),define("stateManagement/externalLinks/externalLinksReducer",["lodash","stateManagement/externalLinks/externalLinksActionTypes","stateManagement/store/initialEditorState"],function(a,e,r){"use strict";var i=e.OVERRIDE_EXTERNAL_LINK;return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:r.externalLinks,t=arguments[1];switch(t.type){case i:var n=a.defaultsDeep({},t.override,e.overriden);return a.assign({},e,{overridden:n});default:return e}}}),define("stateManagement/externalLinks/externalLinksSelectors",[],function(){"use strict";return{getOverriddenExternalLinks:function(e){return e.externalLinks.overridden}}}),define("stateManagement/externalLinks/externalLinksActions",["stateManagement/externalLinks/externalLinksActionTypes"],function(t){"use strict";return{overrideExternalLinks:function(e){return{type:t.OVERRIDE_EXTERNAL_LINK,override:e}}}}),define("stateManagement/externalLinks/externalLinks",["stateManagement/externalLinks/externalLinksReducer","stateManagement/externalLinks/externalLinksSelectors","stateManagement/externalLinks/externalLinksActions"],function(e,t,n){"use strict";return{reducer:e,selectors:t,actions:n}}),define("stateManagement/leftBar/leftBarData",["util","coreBi","lodash","constants","experiment"],function(e,t,n,a,r){"use strict";var i={panelName:a.ROOT_COMPS.LEFTBAR.MY_UPLOADS_PANEL_NAME,panelProps:{},label:"LEFTBAR_MY_UPLOADS_LABEL",className:"my-uploads-panel",symbolName:"leftBarMyUploadsPanel"},o={panelName:a.ROOT_COMPS.LEFTBAR.MEDIA_MANAGER_PANEL_NAME,panelProps:{},label:a.ROOT_COMPS.LEFTBAR.MEDIA_LABEL,className:"media-manager-panel",symbolName:"leftBarMyUploadsPanel"};return{desktop:n.concat({key:a.ROOT_COMPS.LEFTBAR.MENUS_AND_PAGES_ID,panelName:a.ROOT_COMPS.LEFTBAR.MENUS_AND_PAGES_PANEL_NAME,panelProps:{openPanelBiEvent:t.events.pages.click_on_pages_panel_open,openPanelBiParams:{origin:"left_bar"}},label:a.ROOT_COMPS.LEFTBAR.MENUS_AND_PAGES_LABEL,className:"pages-panel-pp",symbolName:"leftBarPagesPanelManager"},r.isOpen("removeBGButton")?[]:{key:a.ROOT_COMPS.LEFTBAR.BACKGROUND_ID,panelName:a.ROOT_COMPS.LEFTBAR.BACKGROUND_PANEL_NAME,panelProps:{},label:a.ROOT_COMPS.LEFTBAR.BACKGROUND_LABEL,className:"bg-panel",symbolName:"leftBarBackgroundPanel",hintProps:{id:"ChangeBackgrounds"}},{key:a.ROOT_COMPS.LEFTBAR.ADD_ID,panelName:a.ROOT_COMPS.LEFTBAR.ADD_PANEL_NAME,panelProps:{},label:a.ROOT_COMPS.LEFTBAR.ADD_LABEL,className:"add-panel",symbolName:"leftBarAddPanel",hintProps:{id:"AddPanel"}},{key:a.ROOT_COMPS.LEFTBAR.ADD_APPS_ID,panelName:a.ROOT_COMPS.LEFTBAR.ADD_APPS_PANEL_NAME,panelProps:{urlParams:{openMarketOrigin:"market_button"},openPanelBiEvent:e.bi.events.OPEN_MARKET_CLICK,openPanelBiParams:{referral_info:"market_button"}},label:a.ROOT_COMPS.LEFTBAR.ADD_APPS_LABEL,className:"app-market-panel",symbolName:"leftBarAppMarketPanel",hintProps:{id:"AppMarket"}},{key:a.ROOT_COMPS.LEFTBAR.MY_UPLOADS_ID,panelName:a.ROOT_COMPS.LEFTBAR.MY_UPLOADS_PANEL_NAME,panelProps:{},label:a.ROOT_COMPS.LEFTBAR.MY_UPLOADS_LABEL,className:"my-uploads-panel",symbolName:"leftBarMyUploadsPanel"}),mobile:n.concat({key:a.ROOT_COMPS.LEFTBAR.MENUS_AND_PAGES_ID,panelName:a.ROOT_COMPS.LEFTBAR.MENUS_AND_PAGES_PANEL_NAME,panelProps:{},label:a.ROOT_COMPS.LEFTBAR.MENUS_AND_PAGES_LABEL,className:"pages-panel-pp",symbolName:"leftBarPagesPanelManager"},r.isOpen("removeBGButton")?[]:{panelName:a.ROOT_COMPS.LEFTBAR.BACKGROUND_PANEL_NAME,panelProps:{},label:a.ROOT_COMPS.LEFTBAR.BACKGROUND_LABEL,className:"bg-panel",symbolName:"leftBarBackgroundPanel",hintProps:{id:"ChangeBackgrounds"}},{panelName:a.ROOT_COMPS.LEFTBAR.MOBILE_TOOLS_PANEL_NAME,panelProps:{},label:a.ROOT_COMPS.LEFTBAR.MOBILE_TOOLS_LABEL,className:"mobile-elements-panel",symbolName:"mobileView",tooltips:[{id:"mobileElementsPanel_quickActionBar_afterRemove",value:"mobile_quick_actions_hide_tooltip",width:"240px"},{id:"BacktoTop_Button_MobileTools_Postdelete_Tooltip",value:"BacktoTop_Button_MobileTools_Postdelete_Tooltip",width:"240px"}]},{panelName:a.ROOT_COMPS.LEFTBAR.HIDDEN_ELEMENTS_PANEL_NAME,panelProps:{},label:a.ROOT_COMPS.LEFTBAR.HIDDEN_ELEMENTS_LABEL,className:"hidden-items-panel",symbolName:"hiddenComp",hintProps:{id:"MobileEditorHiddenElements"}},{panelName:a.ROOT_COMPS.LEFTBAR.PAGE_LAYOUT_OPTIMIZER_PANEL_NAME,panelProps:{},label:a.ROOT_COMPS.LEFTBAR.PAGE_LAYOUT_OPTIMIZER_LABEL,className:"layout-optimizer-panel",symbolName:"mobile_left_bar_optimize_layout",hintProps:{id:"MobileLayoutOptimizer"}}),myUploadsButton:i,mediaManagerPanelButton:o}}),define("stateManagement/leftBar/leftBarSelectors",["lodash","reduxLibs","coreUtilsLib","stateManagement/leftBar/leftBarData","constants","experiment"],function(c,e,l,d,p,g){"use strict";var t=e.reselect.createSelector,n=function(e){return e.leftBar},a=function(e){return e.isMobileEditor},r=t(a,function(e){return e?"mobile":"desktop"}),i=t(n,a,function(e,t){return c.get(e,t?"isMobileCollapsed":"isCollapsed")}),f=t(n,function(e){return e.collapseOnClick});return{getLeftBar:n,isCollapsed:i,getCollapseOnClick:f,isMobileEditor:a,getDeviceType:r,getDesktopSuperAppsCount:function(e){return e.leftBar.superApps.desktop.length},getMenuItems:function(r,e){var t,n,a=[],i=r.leftBar.superApps,o=[],s=g.isOpen("se_showMediaManagerPanel")&&(g.isOpen("specs.media.MediaManager3")||g.isOpen("specs.media.MediaManager3Migrate")),u={A:{symbolName:"leftBarMediaPanel",className:"media-manager-panel"},B:{symbolName:"leftBarMediaPanelB",className:"media-manager-panel-icon-b"},C:{symbolName:"leftBarMediaPanelC",className:"media-manager-panel-icon-c"}}[g.getValue("se_mediaPanelIcon")]||{symbolName:"leftBarMediaPanel",className:"media-manager-panel"};"lapis"===g.getValue("se_mediaPanelColor")&&(u=c.assign(u,{className:u.className+" "+p.MEDIA_PANEL_COLOR_EXPERIMENT_CLASS})),g.isOpen("se_mediaPanelNewTexts")&&(u=c.assign(u,{label:p.ROOT_COMPS.LEFTBAR.MEDIA_NEW_LABEL})),g.isOpen("enableMyUploadsButton")&&o.push(d.myUploadsButton),a=r.isMobileEditor?c.map(d.mobile,c.clone).concat(o,c.sortBy(l.objectUtils.cloneDeep(i.mobile),"order")):c.map(d.desktop,c.clone).concat(o,c.sortBy(l.objectUtils.cloneDeep(i.desktop),"order")),(a=e?(t=a,n=[p.ROOT_COMPS.LEFTBAR.BLOG_PANEL_NAME,p.ROOT_COMPS.LEFTBAR.BACKGROUND_PANEL_NAME],c.filter(t,function(e){return!c.includes(n,e.panelName)})):a).forEach(function(e,t){var n,a;e.panelProps=e.panelProps||{},e.panelProps.panelIndex=t,e.collapseOnClick=(n=f(r),a=e.panelName,c.includes(n||[],a))});return s&&(a=c.map(a,function(e){return"LEFTBAR_MY_UPLOADS_LABEL"===e.label?c.merge({},e,d.mediaManagerPanelButton,u):e})),c.compact(a).map(function(e){return"tpa.compPanels.appMarketPanel"===e.panelName&&(e.symbolName="leftBarAppMarketPanel-D",e.label="app_market_button_text_experiment_add_apps"),e})},getNotifications:function(e){return e.leftBar.notifications},getNotificationsCount:function(e,t){return e.leftBar.notifications[t]},getOverrideItems:function(e,t){return c.get(e.leftBar.overriddenButtons,t?"mobile":"desktop")}}}),define("stateManagement/userPreferences/constants",[],function(){"use strict";return{EDITOR_APP_ID:"editorAppId"}}),define("stateManagement/userPreferences/getKeyFromAppId",["lodash","stateManagement/userPreferences/constants"],function(n,a){"use strict";return function(e,t){return n.defaultTo(e,a.EDITOR_APP_ID)+"_"+t}}),define("stateManagement/userPreferences/userPreferencesSelectors",["lodash","coreUtilsLib","stateManagement/userPreferences/constants","stateManagement/userPreferences/getKeyFromAppId"],function(i,a,o,s){"use strict";var u=function(e){return e.userPreferences.site},r=function(e){return e.userPreferences.global},n=function(e){return e.userPreferences.session},t=function(a,r){return function(e){if(r=r||o.EDITOR_APP_ID,!i.isString(a))throw new Error("Getting a user preference for the site expects a key of type string but received: "+a);var t=s(r,a),n=u(e);return n[t]&&n[t].value}},c=function(n){return function(e){var t=r(e);if(null===t)return a.log.error("Global user preferences failed to load!"),null;if(!i.isString(n))throw new Error("Getting a global user preference expects a key of type string but received: "+n);return t[n]}},l=function(t){return function(e){if(!i.isString(t))throw new Error("Getting a session user preference expects a key of type string but received: "+t);return n(e)[t]}};return{getSiteId:function(e){return e.userPreferences.siteId},getPreferences:function(t){return function(e){return e.userPreferences[t]}},arePreferencesEmpty:function(t){return function(e){return i.isEmpty(e.userPreferences[t])}},dontSaveUserPrefs:function(e){return e.userPreferences.dontSaveUserPrefs},getAllGlobalUserPreferences:function(e){var t=r(e);return null===t?(a.log.error("Global user preferences failed to load!"),null):t},getGlobalUserPreferences:c,getAllSiteUserPreferences:function(e){return r=o.EDITOR_APP_ID,t=e,i.transform(u(t),function(e,t,n){var a=n.split("_");a[0]===r&&(e[a[1]]=t.value)},{});var t,r},getSiteUserPreferences:t,getAllSessionUserPreferences:function(e){return n(e)},getSessionUserPreferences:l,getUserPreferences:function(e){switch(e){case"site":return t;case"session":return l;case"global":return c}},getMediaPath:function(t){return function(e){return l("last_media_path_"+t)(e)||""}}}}),define("stateManagement/userPreferences/userPreferencesActionTypes",[],function(){"use strict";return{SET_SITE_ID:"set-site-id",SET_PREFERENCES:"set-preferences",SET_PREFERENCE:"set-preference",MARK_SITE_PREFERENCES_NOT_DIRTY:"mark-site-preferences-not-dirty",DONT_SAVE_USER_PREFERENCES:"dont-save-user-preferences"}}),define("stateManagement/userPreferences/userPreferencesActions",["lodash","coreUtilsLib","util","stateManagement/userPreferences/userPreferencesActionTypes","stateManagement/userPreferences/userPreferencesSelectors","stateManagement/userPreferences/constants","stateManagement/userPreferences/getKeyFromAppId"],function(l,d,u,p,g,e,c){"use strict";var t,f=e.EDITOR_APP_ID,n=u.serviceTopology.premiumStateApiUrl,a=n?n.replace(/\/getTpaPremiumState/,"-user-preferences-webapp/"):"https://editor.wix.com/_api/wix-user-preferences-webapp/",m="site",S="global",s=(_defineProperty(t={},m,{load:function(e){return a+"getVolatilePrefsForSite/htmlEditor/"+e},SAVE:a+"bulkSet",DELETE:a+"delete"}),_defineProperty(t,S,{load:function(){return a+"getVolatilePrefForKey/htmlEditor/global_preferences"},SAVE:a+"set"}),t),E=function(e,t){return{type:p.SET_PREFERENCES,typeId:e,preferences:t}},_=function(e,t,n){return{type:p.SET_PREFERENCE,typeId:e,key:t,value:n}},T=function(){return u.url.isTrue("fakeUserPrefs")},P=function(e){return g.getSiteId(e())},A=function(e,t){switch(t){case S:return{nameSpace:"htmlEditor",key:"global_preferences",blob:g.getPreferences(S)(e())};case m:return n=e,a=g.getPreferences(m)(e()),r={nameSpace:"htmlEditor",siteId:P(n),data:{}},l.forEach(a,function(e,t){e.isDirty&&(r.data[t]=e.value)}),r.data.version=3,r}var n,a,r},i=function(e,t){var n,a;T()||d.requestsUtil.fetch(s[m].DELETE,{method:"POST",credentials:"same-origin",headers:new Headers({"content-type":"application/json; charset=utf-8"}),body:JSON.stringify((n=e,a=t,{nameSpace:"htmlEditor",key:a,siteId:P(n)}))}).catch(l.noop)},I=function(e,t,n){return l.mapValues(e,function(e){return{value:l.isUndefined(n)?e:n,isDirty:t}})},M=function(e,t){if(3===t.version)return I(t,!0);var n,a,r=l.assign({},l.omit(t,f,"version"),t[f]);return n=e,a=t,l.forEach(a,function(e,t){return i(n,t)}),(r=l.transform(r,function(e,t,n){e[c(f,n)]=t},{})).version=3,I(r,!0)},v=function(e,t){t===m&&e({type:p.MARK_SITE_PREFERENCES_NOT_DIRTY})},O=function(t,e,n,a,r){if(null!==g.getPreferences(n)(e())){if(T()){var i=function(e,t){switch(t){case S:return{global_preferences:g.getPreferences(S)(e())};case m:var n={};return l.forEach(g.getPreferences(m)(e()),function(e,t){n[t]=e.value}),n.version=3,n;default:return d.log.error("unknown type ID"),{}}}(e,n);return window.sessionStorage.setItem("user_prefs_"+n,JSON.stringify(i)),v(n),void(a&&a())}if(!g.dontSaveUserPrefs(e())){var o=A(e,n);o?d.requestsUtil.fetch(s[n].SAVE,{method:"POST",credentials:"same-origin",headers:new Headers({"content-type":"application/json; charset=utf-8"}),body:JSON.stringify(o)}).then(function(){v(n),a&&a()}).catch(function(e){413===e.status&&t({type:p.DONT_SAVE_USER_PREFERENCES}),r&&r(e)}).catch(l.noop):a&&a()}}else r&&r("saving "+n+" preferences failed since they were not loaded")},h=function(e,t,n,a,r){switch(n){case S:return l=t,d=a,p=r,(c=e)(E(S,{})),void O(c,l,S,d,p);case m:return o=t,s=a,u=r,(i=e)(E(m,I(g.getPreferences(m)(o()),!0,null))),void O(i,o,m,s,u)}var i,o,s,u,c,l,d,p},R=function(e,t,n,a,r,i){var o,s;e(E(n,a?function(e,t,n){switch(t){case S:return n.global_preferences;case m:return M(e,n);default:return d.log.error("unknown type ID"),{}}}(t,n,a):{})),o=n,"all"===(s=u.url.getParameterByName("resetUserPrefs").toLowerCase())||s===o?h(e,t,n,r,i):r&&r()},y=function(t,n,a,r,i){if(T()){var e=window.sessionStorage.getItem("user_prefs_"+a);R(t,n,a,JSON.parse(e),r,i)}else{var o=s[a].load(P(n));d.requestsUtil.fetch(o,{contentType:"application/json",credentials:"same-origin",method:"GET"}).then(function(e){return e.json().catch()}).then(function(e){R(t,n,a,e,r,i)}).catch(i||l.noop)}},r=function(r,i){return function(n,a){if(!l.isString(r))throw new Error("Setting a global user preference expects a key of type string but received: "+r);return new Promise(function(e,t){null===g.getPreferences(S)(a())?(d.log.error("Global user preferences failed to load!"),t("Global user preferences failed to load!")):(l.isUndefined(i)&&(i=null),n(_(S,r,i)),O(n,a,S,e,t))})}},o=function(i,o,s){return function(a,r){if(!l.isString(i))throw new Error("Setting a user preference for the site expects a key of type string but received: "+i);return new Promise(function(e,t){s=s||f,l.isUndefined(o)&&(o=null);var n={value:o,isDirty:!0};i=c(s,i),a(_(m,i,n)),P(r)?O(a,r,m,e,t):e()})}},N=function(t,n){return function(e){if(!l.isString(t))throw new Error("Setting a session user preference expects a key of type string but received: "+t);return e(_("session",t,n)),n}};return{loadGlobalPreferences:function(){return function(r,e){return new Promise(function(n,a){y(r,e,S,n,function(e){var t=function(){r(E(S,null)),d.log.error("Global preferences failed to load!"),a("Global preferences failed to load!")};Promise.resolve().then(function(){return e.json()}).then(function(e){3001===e.errorCode?(r(E(S,{})),n()):t()}).catch(function(){return t()})})})}},loadSitePreferences:function(u,c){return function(o,s){return new Promise(function(e,t){var n,a=g.arePreferencesEmpty(m)(s());o((n=u,{type:p.SET_SITE_ID,siteId:n}));var r=l.partial(O,o,s,m,e,t);if(c)a||r();else if(a)y(o,s,m,r,function(){d.log.error("Site preferences failed to load!"),t("Site preferences failed to load!")});else{var i=g.getPreferences(m)(s());y(o,s,m,function(){o(E(m,l.merge(g.getPreferences(m)(s()),i))),r()},function(){d.log.error("Site preferences failed to load!"),r()})}})}},setGlobalUserPreferences:r,setSiteUserPreferences:o,setSessionUserPreferences:N,updateSessionUserPreferences:function(r,i){return function(e,t){var n=g.getSessionUserPreferences(r)(t()),a=l.assign({},n,i);e(N(r,a))}},setSitePreferences:function(e){switch(e){case"site":return o;case"session":return N;case"global":return r}},setPreferences:E}}),define("stateManagement/userPreferences/userPreferencesReducer",["lodash","stateManagement/userPreferences/userPreferencesActionTypes","stateManagement/store/initialEditorState"],function(n,e,a){"use strict";var r=e.SET_SITE_ID,i=e.SET_PREFERENCES,o=e.SET_PREFERENCE,s=e.MARK_SITE_PREFERENCES_NOT_DIRTY,u=e.DONT_SAVE_USER_PREFERENCES;return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.userPreferences,t=arguments[1];switch(t.type){case r:return n.assign({},e,{siteId:t.siteId});case i:return n.assign({},e,_defineProperty({},t.typeId,t.preferences));case o:return n.assign({},e,_defineProperty({},t.typeId,n.assign({},e[t.typeId],_defineProperty({},t.key,t.value))));case s:return n.assign({},e,{site:n.mapValues(e.site,function(e){return n.assign({},e,{isDirty:!1})})});case u:return n.assign({},e,{dontSaveUserPrefs:!0});default:return e}}}),define("stateManagement/userPreferences/userPreferences",["stateManagement/userPreferences/userPreferencesSelectors","stateManagement/userPreferences/userPreferencesActions","stateManagement/userPreferences/userPreferencesReducer"],function(e,t,n){"use strict";return{selectors:e,actions:t,reducer:n}}),define("stateManagement/panels/panelsSelectors",["lodash","reduxLibs"],function(t,e){"use strict";var n=function(e){return e.panelData.openPanels};return{selectOpenPanels:n,selectPanelFilters:function(e){return e.panelData.panelFilters},selectOpenPlatformPanels:e.reselect.createSelector(n,function(e){return t.filter(e,{type:"platform"})}),selectHelpProps:function(e){return e.helpProps},isColorPickerClosed:e.reselect.createSelector(n,function(e){return!t.some(e,{name:"panels.toolPanels.colorPicker.colorPickerPanel"})}),isLinkDialogClosed:e.reselect.createSelector(n,function(e){return!t.some(e,{name:"panels.toolPanels.linkPanel"})}),isMobileHiddenItemsPanelOpen:e.reselect.createSelector(n,function(e){return!!t.find(e,{name:"mobileEditor.hiddenItemsPanel"})})}}),define("stateManagement/devMode/devModeActionTypes",[],function(){"use strict";return{RESET_CONTEXT:"resetContext"}}),define("stateManagement/devMode/devModeActions",["stateManagement/devMode/devModeActionTypes"],function(e){"use strict";var t=e.RESET_CONTEXT;return{resetDevModeContext:function(){return{type:t}}}}),define("stateManagement/devMode/devModeSelectors",[],function(){"use strict";return{selectDevModeContext:function(e){return e.devModeContext}}}),define("stateManagement/devMode/devMode",["stateManagement/devMode/devModeActions","stateManagement/devMode/devModeSelectors"],function(e,t){"use strict";return{actions:e,selectors:t}}),define("stateManagement/helpPanel/helpPanelActionTypes",[],function(){"use strict";return{OPEN_HELP_CENTER:"openHelpCenter",CLOSE_HELP_CENTER:"closeHelpCenter"}}),define("stateManagement/helpPanel/helpPanelReducer",["lodash","stateManagement/helpPanel/helpPanelActionTypes"],function(e,t){"use strict";var n=t.OPEN_HELP_CENTER,a=t.CLOSE_HELP_CENTER;return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=arguments[1];switch(t.type){case n:return t.helpPanelProps;case a:return null;default:return e}}}),define("stateManagement/helpPanel/helpPanelActions",["stateManagement/helpPanel/helpPanelActionTypes"],function(e){"use strict";var t=e.OPEN_HELP_CENTER,n=e.CLOSE_HELP_CENTER;return{openHelpCenter:function(e){return{type:t,helpPanelProps:e}},closeHelpCenter:function(){return{type:n}}}}),define("stateManagement/helpPanel/helpPanel",["stateManagement/helpPanel/helpPanelReducer","stateManagement/helpPanel/helpPanelActions"],function(e,t){"use strict";return{reducer:e,actions:t}}),define("stateManagement/dynamicPages/dynamicPagesActionTypes",[],function(){"use strict";return{SET_INNER_ROUTES:"set-inner-routes",RESET_INNER_ROUTES:"reset-inner-routes",SET_ROUTER_DATA:"set-router-data",RESET_ROUTER_DATA:"reset-router-data",SET_SELECTED_INNER_ROUTE:"set-selected-inner-route",RESET_SELECTED_INNER_ROUTE:"reset-selected-inner-route",SET_INNER_ROUTES_FETCH_PROCESS:"set-inner-routes-fetch-process",SET_PREVENT_FETCH:"set-prevent-fetch",RESET_INNER_ROUTES_FETCH_PROCESS:"reset-inner-routes-fetch-process"}}),define("stateManagement/dynamicPages/dynamicPagesSelectors",["lodash"],function(t){"use strict";return{getRouterData:function(e){return e.dynamicPages.routerData},getRouterId:function(e){return t.get(e.dynamicPages.routerData,"routerId")},getInnerRoutes:function(e){return e.dynamicPages.innerRoutes},shouldPreventFetch:function(e){return e.dynamicPages.preventFetch},getSelectedInnerRoute:function(e){return e.dynamicPages.selectedInnerRoute},isInInnerRoutesFetchProcess:function(e){return e.dynamicPages.inInnerRoutesFetchProcess}}}),define("stateManagement/dynamicPages/dynamicPagesActions",["lodash","stateManagement/dynamicPages/dynamicPagesActionTypes","stateManagement/dynamicPages/dynamicPagesSelectors"],function(m,t,S){"use strict";var E=function(e){return{type:t.SET_INNER_ROUTES,innerRoutes:e}},n=function(){return{type:t.RESET_INNER_ROUTES}},_=function(e){return{type:t.SET_ROUTER_DATA,routerData:e}},a=function(){return{type:t.RESET_ROUTER_DATA}},T=function(e){return{type:t.SET_SELECTED_INNER_ROUTE,selectedInnerRoute:e}},r=function(){return{type:t.RESET_SELECTED_INNER_ROUTE}},i=function(){return{type:t.SET_INNER_ROUTES_FETCH_PROCESS}},P=function(){return{type:t.RESET_INNER_ROUTES_FETCH_PROCESS}},o=function(c,l){return function(e,t,n){var a,r,i,o=n.dsRead,s=n.dsActions,u=(a=c,r=l,i=o.data.createItem("DynamicPageLink"),m.assign(i,{innerRoute:a||"",routerId:r}));s.pages.navigateTo(u)}},A=function(){return function(e){e(n()),e(a()),e(r())}},I=function(n,a){return function(e,t){a=a||S.getRouterId(t()),e(o(n,a)),e(T(n))}},M=function(n,a){return function(d,e,t){var p=t.dsRead,g=n||p.pages.getPrimaryPageId(),f=a||p.routers.getRouterDataForPageIfExist(g);f?(d(i()),p.routers.getRouterInnerRoutes(f.routerId,g,function(e){d(P()),e=m.sortBy(e,["title"]);var t=p.pages.getPrimaryPageId(),n=t!==g,a=p.routers.getRouterDataForPageIfExist(t);if(!n&&m.isEqual(f,a)){if(1===e.length&&"/"===e[0].url)return d(E([])),d(_(a)),void d(T(null));var r,i,o,s=p.routers.getCurrentInnerRoute(),u=m.get(s,"innerRoute"),c=u?(r=u,i=e,-1===(o=m.findIndex(i,["url",r]))?0:o):0,l=e[c]?e[c].url:null;d(E(e)),d(_(a)),d(u&&u===l?T(l):l?I(l,a.routerId):T(u))}else d(A())})):d(A())}};return{setInnerRoutes:E,resetInnerRoutes:n,setRouterData:_,setPreventFetch:function(e){return{type:t.SET_PREVENT_FETCH,shouldPrevent:e}},resetRouterData:a,setSelectedInnerRoute:T,resetSelectedInnerRoute:r,setInnerRouteFetchProcess:i,resetInnerRouteFetchProcess:P,fetchInnerRoutes:M,resetAllDynamicPageData:A,updateDynamicPagesState:function(){return function(e,t,n){var a=n.dsRead,r=a.routers.getCurrentInnerRoute();if(r.isDynamic){var i=S.getRouterId(t()),o=S.isInInnerRoutesFetchProcess(t()),s=!S.shouldPreventFetch(t()),u=r.routerId!==i;if(!s||(o||!u)&&r.innerRoute&&(c=t,d=(l=a).pages.getPrimaryPageId(),p=S.getRouterData(c()),g=l.routers.getRouterDataForPageIfExist(d),m.isEqual(p,g))){var c,l,d,p,g,f=S.getSelectedInnerRoute(t());r.innerRoute!==f&&e(T(r.innerRoute))}else e(M())}else e(A())}},setSelectedInnerRouteAndNavigate:I}}),define("stateManagement/dynamicPages/dynamicPagesReducer",["lodash","stateManagement/dynamicPages/dynamicPagesActionTypes","stateManagement/store/initialEditorState"],function(n,e,a){"use strict";var r=e.SET_INNER_ROUTES,i=e.RESET_INNER_ROUTES,o=e.SET_ROUTER_DATA,s=e.RESET_ROUTER_DATA,u=e.SET_SELECTED_INNER_ROUTE,c=e.RESET_SELECTED_INNER_ROUTE,l=e.SET_INNER_ROUTES_FETCH_PROCESS,d=e.SET_PREVENT_FETCH,p=e.RESET_INNER_ROUTES_FETCH_PROCESS;return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.dynamicPages,t=arguments[1];switch(t.type){case r:return n.assign({},e,{innerRoutes:t.innerRoutes});case i:return n.assign({},e,{innerRoutes:[]});case o:return n.assign({},e,{routerData:t.routerData});case s:return n.assign({},e,{routerData:null,innerRoutes:[],selectedInnerRoute:null});case u:return n.assign({},e,{selectedInnerRoute:t.selectedInnerRoute});case c:return n.assign({},e,{selectedInnerRoute:null});case l:return n.assign({},e,{inInnerRoutesFetchProcess:!0});case d:return n.assign({},e,{preventFetch:t.shouldPrevent});case p:return n.assign({},e,{inInnerRoutesFetchProcess:!1});default:return e}}}),define("stateManagement/dynamicPages/dynamicPages",["stateManagement/dynamicPages/dynamicPagesActions","stateManagement/dynamicPages/dynamicPagesReducer","stateManagement/dynamicPages/dynamicPagesSelectors"],function(e,t,n){"use strict";return{actions:e,reducer:t,selectors:n}}),define("stateManagement/bi/biActions",["lodash","util"],function(l,d){"use strict";return{event:function(u,c){return function(e,t,n){var a=n.dsActions;if(a){if(!u||!u.evid){var r=Error("invalid bi event");d.ravenUtils.captureError(r,{tags:{invalidEvent:!0},extra:{biEvent:u}})}u=38===(u=l.defaults({},u,{src:38,endpoint:"editor",sampleRatio:0,esi:d.editorModel.editorSessionId})).src?l.assign({ds_origin:d.dsOrigin.getDsOrigin()},u):u,u=d.localModeUtils.isLocalModeEnabled()?l.assign(d.localModeUtils.getLocalModeFieldsExtraBiFields(),u):u,c=[].concat(c)||[{}];var i=d.editorModel.permissionsInfo;if(i){var o=i.ownerId,s=l.map(i.loggedInUserRoles,"role").join(",");c=l.map(c,function(e){return l.assign({},e,{ownerId:o,roles:s})})}l.forEach(c,function(e){a.bi.event(u,e)})}}},error:function(a,r){return function(e,t,n){n.dsActions.bi.error(a,r)}}}}),define("stateManagement/bi/reportBiEventOnUiChange",["lodash","reduxLibs","prop-types","coreUtilsLib","util"],function(u,e,t,c,l){"use strict";var n=l.hoc,a=n.connect,r=n.STORES.EDITOR_API,i=e.recompose.withContext,o=function(e){return{sendSelectedComponentBI:function(){return e(function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(e,t,n){var a;(a=n.editorAPI.selectedComponent).sendSelectedComponentBI.apply(a,r)}}.apply(void 0,arguments))}}},d={reportUIChange:t.func};return function(s){return a(r,void 0,o)(i(d,function(o){return{reportUIChange:function(e,t,n){var a=l.uiControlsBIUtil.getEventDefinition(e);if(a){var r=l.uiControlsBIUtil.getParams(e,n),i=u.assign({panel_name:s.displayName,control_name:t},r);o.sendSelectedComponentBI(a,i)}else c.log.warn("There is no BI event for the control [%s], in [%s] panel.\n\tDear developer, Please add the control mapping to core/bi/controlsToEvents and the event to core/bi/events.json .",e,s.displayName)}}})(s))}}),define("stateManagement/bi/bi",["stateManagement/bi/biActions","stateManagement/bi/reportBiEventOnUiChange"],function(e,t){"use strict";return{actions:e,hoc:{reportBiEventOnUiChange:t}}}),define("stateManagement/panels/panelsActionTypes",[],function(){"use strict";return{OPEN_PANEL:"openPanel",UPDATE_PANEL:"updatePanel",CLOSE_ALL_PANELS:"closeAllPanels",CLOSE_PANEL_BY_NAME:"closePanelByName",CLOSE_PANEL_BY_PROP:"closePanelByProp",STAGE_MOUSE_DOWN:"STAGE_MOUSE_DOWN",ADD_PANEL_FILTER:"ADD_PANEL_FILTER",REMOVE_PANEL_FILTER:"REMOVE_PANEL_FILTER"}}),define("stateManagement/panels/panelsActions",["lodash","util","stateManagement/panels/panelsSelectors","stateManagement/devMode/devMode","stateManagement/helpPanel/helpPanel","stateManagement/dynamicPages/dynamicPages","stateManagement/bi/bi","coreUtilsLib","constants","coreBi","experiment","stateManagement/panels/panelsActionTypes"],function(d,t,e,n,a,r,p,u,g,f,m,i){"use strict";var o=n.selectors,c=n.actions,S=a.actions,l=r.actions,s=i.OPEN_PANEL,E=i.UPDATE_PANEL,_=i.CLOSE_ALL_PANELS,T=i.CLOSE_PANEL_BY_NAME,P=i.CLOSE_PANEL_BY_PROP,A=i.STAGE_MOUSE_DOWN,I=i.ADD_PANEL_FILTER,M=i.REMOVE_PANEL_FILTER,v=function(e){return{type:s,panelDescriptor:e}},O=function(e){return{type:E,panelDescriptor:e}},h=function(){return{type:_}},R=function(e,t){return{type:P,prop:e,propValue:t}},y=o.selectDevModeContext,N=e.selectOpenPanels,C=e.selectOpenPlatformPanels,D=e.selectPanelFilters;function L(e,t){return d.defaults({},t,{panelName:e,key:e+d.uniqueId()})}function b(e,t){e&&d.isFunction(e.resolve)&&e.resolve(t)}function B(){var e=t.editorModel.permissionsInfo;return e?"ownerId="+e.ownerId+"&roles="+d.map(e.loggedInUserRoles,"role").join(","):""}var w=function(u){return function(e,t,n){var a=n.dsRead,r=t(),i=N(r),o=d.difference(u,i),s=d.filter(o,{name:"platformPanels.fullStagePanel"});d.isEmpty(s)||y(r).type!==g.DEVELOPER_MODE.CONTEXT_TYPES.COLLECTION||(e(c.resetDevModeContext()),a.routers.getCurrentInnerRoute().isDynamic&&e(l.fetchInnerRoutes()))}},U=function(r,i,o,s){return function(e,t){o||e(x()),d.includes(r,"help")&&u.log.error("openPanel method is deprecated for help panels. Use openHelpCenter instead");var n=N(t()),a=d.find(n,{name:r});a&&a.singleInstance?e(O({name:r,props:i})):e(k(r,i,s))}},k=function(i){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:d.noop;return function(e,t){var n={name:i,props:L(i,o)};d.get(o,"token")&&d.assign(n,{token:d.get(o,"token")});var a=t(),r=D(a);d.some(r,function(e){return e(n)})?s():(e(v(n)),e(p.actions.event(f.events.panels.PANEL_OPENED,{panel_name:i})))}},x=function(){return function(t,e){var n,a=e(),r=N(a);d.forEach(r,function(e){t(p.actions.event(f.events.panels.PANEL_CLOSED,{panel_name:e.name}))}),n=C(a),d.forEach(n,function(e){b(e)}),t(h()),t(w(r))}},F=function(o,s,u){return function(t,e){var n=e(),a=N(n);d(n).thru(C).filter(function(e){return e.props[o]===s}).forEach(function(e){b(e)}),t(R(o,s));var r=N(e()),i=d.difference(a,r);d.forEach(i,function(e){t(p.actions.event(f.events.panels.PANEL_CLOSED,{panel_name:e.props.panelName,origin:u}))}),t(w(a))}},G=function(t,n){return function(e){e(F("panelName",t,n))}},H=function(n){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(e){e(x());var t={name:n,props:d.assign({},L(n,a),{useLastPanelPosition:!!a.useLastPanelPosition}),frameType:g.PANEL_TYPES.COMP};e(v(t)),e(p.actions.event(f.events.panels.PANEL_OPENED,{panel_name:n}))}},V=function(a,r,i){return new Promise(function(n){require(["compPanels"],function(e){var t="compPanels.panels."+a+"."+r;d.get(e,["panels",a,r])||(i.tpa.isTpaByCompType(a)?r===g.componentPanels.settings&&(t="tpa.compPanels.tpaSettings"):r===g.componentPanels.animation?t="compPanels.dynamicPanels."+g.componentPanels.animation:r===g.componentPanels.mobileAnimation?t="compPanels.dynamicPanels."+g.componentPanels.mobileAnimation:r===g.componentPanels.stretching?t="compPanels.dynamicPanels."+g.componentPanels.stretching:r===g.componentPanels.filters?t="compPanels.dynamicPanels."+g.componentPanels.filters:r===g.componentPanels.effects?t="compPanels.dynamicPanels."+g.componentPanels.effects:r===g.componentPanels.apply?t="compPanels.dynamicPanels."+g.componentPanels.apply:r===g.componentPanels.design?t="designPanel."+g.componentPanels.design:r===g.componentPanels.customizeDesign?t="advancedStylePanel."+g.componentPanels.customizeDesign:r===g.componentPanels.mobileBackgroundSettings?t="compPanels.dynamicPanels."+g.componentPanels.mobileBackgroundSettings:r===g.componentPanels.stylable&&(t="compPanels.dynamicPanels."+g.componentPanels.stylable)),n(t)})})};return{openPanelAction:v,updatePanelAction:O,closeAllPanels:h,closePanelByNameAction:function(e){return{type:T,panelName:e}},closePanelByPropKeyAction:R,stageMouseDown:function(){return{type:A}},setPanelType:function(e,t,n){return{type:E,panelDescriptor:{name:e,frameType:t,singleInstance:n}}},addPanelFilter:function(e,t){return{type:I,name:e,predicate:t}},removePanelFilter:function(e){return{type:M,name:e}},updateOrOpenPanel:U,openComponentPanel:H,openComponentPanelFromType:function(r,i,o){return function(t,e,n){var a=n.dsRead;return V(r,i,a).then(function(e){return t(H(e,o))})}},openPlatformPanel:function(n){return function(e){if(!m.isOpen("se_platform_modal_native_panel")&&n.nativePanelData)throw new Error("Error trying to use new native panel when experiment is closed.");var t=d.assign({name:n.panelName,props:L(n.panelName,n.panelProps),type:g.PANEL_TYPES.PLATFORM,token:n.panelProps.token},d.get(n,"panelMetaData",{}));e(U(t.name,t.props,!t.closeAllOtherPanels,t.resolve)),e(O(t))}},closeOpenedPanels:x,closePanelByPropKey:F,closePanelByName:G,openHelpCenter:function(u,c,l){return function(e){var t=[],n=B();n&&t.push(n),l&&l.component&&t.push("selectedCompType="+l.component);var a=m.isOpen("se_wixAnswersIntegration")?"":g.GENERAL_HELP_KEY,r=u||a,i=t.length?r+"?"+t.join("&"):r,o=d.assign({},c,{helpUrl:i,biHelpParams:l,panelName:"panels.helpPanels.helpPanel"});e(S.openHelpCenter(o));var s=d.assign({learn_more:!1},l);e(p.actions.event(f.events.help.HELP_CLICK,s))}},openHelpCenterHome:function(o,s,u){return function(e){var t=[],n=B();n&&t.push(n),u&&u.component&&t.push("selectedCompType="+u.component),t.push("type="+o);var a="?"+t.join("&"),r=d.assign({},s,{helpUrl:a,biHelpParams:u,panelName:"panels.helpPanels.helpPanel"});e(S.openHelpCenter(r));var i=d.assign({learn_more:!1},u);e(p.actions.event(f.events.help.HELP_CLICK,i))}},closeAllPanelsOfType:function(a){return function(e,t){var n=N(t());d(n).filter({frameType:a}).map("name").map(G).forEach(e)}},closePlatformPanel:function(r,i){return function(e,t){var n=N(t()),a=d.find(n,{token:r});a&&(b(a,i),e(G(a.name)))}},openFirstTimePanel:function(n){return function(e){if(d.includes(g.FIRST_TIME_PANEL_COMPONENTS,n)){var t="compPanels.panels."+n+".firstTime";e(H(t,{panelName:t,title:"firstTime"}))}}},updatePanel:function(t,n){return function(e){e(O({name:t,props:n}))}},openOrganizeImagesPanel:function(r){return function(e,t,n){var a=n.editorAPI;e(U("panels.focusPanels.organizeImagesPanel",a.panelHelpers.getImagePanelsProps("images",r),!0))}}}}),define("stateManagement/panels/panelsReducer",["lodash","stateManagement/panels/panelsActionTypes","stateManagement/store/initialEditorState","constants"],function(r,e,i,t){"use strict";var o=e.OPEN_PANEL,s=e.UPDATE_PANEL,u=e.CLOSE_ALL_PANELS,c=e.CLOSE_PANEL_BY_NAME,l=e.CLOSE_PANEL_BY_PROP,d=e.STAGE_MOUSE_DOWN,p=e.ADD_PANEL_FILTER,g=e.REMOVE_PANEL_FILTER,f=[t.PANEL_TYPES.LEFT,t.PANEL_TYPES.TPA_SETTINGS];return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:i.panelData,t=arguments[1],n=e.openPanels,a=e.panelFilters;switch(t.type){case o:return{openPanels:n.concat(t.panelDescriptor),panelFilters:a};case s:return{openPanels:r.map(n,function(e){return e.name===t.panelDescriptor.name?r.assign({},e,t.panelDescriptor,{props:r.assign({},e.props,t.panelDescriptor.props)}):e}),panelFilters:a};case c:return{openPanels:r.reject(n,{name:t.panelName}),panelFilters:a};case l:return{openPanels:r.reject(n,function(e){return e.props[t.prop]===t.propValue}),panelFilters:a};case u:return{openPanels:n.length?[]:n,panelFilters:a};case d:return{openPanels:r.reject(n,function(e){return r.includes(f,e.frameType)}),panelFilters:a};case p:return{openPanels:n,panelFilters:r.assign({},a,_defineProperty({},t.name,t.predicate))};case g:return{openPanels:n,panelFilters:r.omit(a,t.name)};default:return e}}}),define("stateManagement/domMeasurements/domMeasurementsSelectors",["constants","util"],function(c,n){"use strict";var l=function(e){return e.domMeasurements.stageLayout},a=function(e){return e.domMeasurements.previewPosition},d=function(e){return e.domMeasurements.scroll},r=function(e){return e.siteScale};return{getDomMeasurements:function(e){return e.domMeasurements},getPreviewPosition:a,getSiteScale:r,getStageLayout:l,getScrollMeasurements:d,getStageRect:function(e){return e.domMeasurements.stageRect},getViewPort:function(e,t,n){var a={top:c.UI.VIEWPORT_VERTICAL_MARGINS,bottom:c.UI.VIEWPORT_VERTICAL_MARGINS,left:72,right:60},r=l(e);if(!r)return null;var i=d(e),o={y:a.top,minY:a.top,bottomY:r.height-a.bottom,maxBottomY:i.scrollHeight-a.bottom,marginBottom:a.bottom,x:a.left,rightX:r.width-a.right,height:r.height-(a.top+a.bottom),width:r.width-(a.left+a.right),scrollTop:i.scrollTop,scrollLeft:i.scrollLeft,stageLayout:r};t&&(o.y+=i.scrollTop,o.bottomY+=i.scrollTop,o.x+=i.scrollLeft,o.rightX+=i.scrollLeft);var s=n&&n.right+10;if(s&&s>o.x){var u=s-o.x;o.x=s,o.width-=u}return o},translateToViewerCoordinates:function(e,t){return n.mouseCoordinatesHandler.fitMouseCoordinatesToViewer(r(e),l(e),d(e),a(e),t)},getEditorContentLayout:function(e){return e.domMeasurements.editorContentLayout}}}),define("stateManagement/domMeasurements/domMeasurementsActionTypes",[],function(){"use strict";return{SET_MEASURED_DOM:"setMeasuredDom",CLEAR_MEASURED_DOM:"clearMeasuredDom",SET_STAGE_LAYOUT:"setStageLayout",SET_MEASURED_SCROLL:"setMeasuredScroll",SET_STAGE_RECT:"setStageRect",SET_PREVIEW_POS:"setPreviewPos",SET_EDITOR_CONTENT_LAYOUT:"setEditorContentLayout"}}),define("stateManagement/domMeasurements/domMeasurementsActions",["lodash","stateManagement/domMeasurements/domMeasurementsActionTypes","stateManagement/domMeasurements/domMeasurementsSelectors"],function(o,e,s){"use strict";var n=e.SET_MEASURED_DOM,t=e.CLEAR_MEASURED_DOM,a=e.SET_STAGE_LAYOUT,r=e.SET_MEASURED_SCROLL,i=e.SET_STAGE_RECT,u=e.SET_PREVIEW_POS,c=e.SET_EDITOR_CONTENT_LAYOUT,l=function(e){return{type:a,stageLayout:e}},d=function(e){return{type:c,editorContentLayout:e}},p=function(e){return{type:r,scroll:e}},g=function(e){return{type:i,stageRect:e}};return{clearMeasuredDOM:function(e){return{type:t,measureKey:e}},initDomMeasurements:function(){return function(e){e(function(e,t){var n={top:0,right:0,bottom:0,left:0,x:0,y:0,width:0,height:0},a=window.document.getElementById("stageContainer");if(a){var r=a.getBoundingClientRect();n=o.pick(r,o.keys(n))}var i=s.getStageLayout(t());o.isEqual(i,n)||e(l(n))}),e(function(e,t){var n={top:0,right:0,bottom:0,left:0,x:0,y:0,width:0,height:0},a=window.document.querySelector(".editor-content-wrapper");if(a){var r=a.getBoundingClientRect();n=o.pick(r,o.keys(n))}var i=s.getEditorContentLayout(t());o.isEqual(i,n)||e(d(n))}),e(function(e,t){var n=window.document.getElementById("scrollableEditorStage"),a=o.pick(n,["scrollLeft","scrollTop","scrollHeight","scrollWidth"]);o.isEqual(a,s.getScrollMeasurements(t()))||e(p(a))}),e(function(e,t){var n=t(),a=s.getStageLayout(n),r=s.getScrollMeasurements(n),i={top:r.scrollTop,bottom:r.scrollTop+a.height,left:r.scrollLeft,right:r.scrollLeft+a.width};o.isEqual(i,s.getStageRect(n))||e(g(i))})}},setMeasuredDOM:function(e,t){return{type:n,measureKey:e,measuredRes:t}},setMeasuredScroll:p,setStageLayout:l,setStageRect:g,updatePreviewPos:function(r){return function(e,t){var n=t(),a=s.getPreviewPosition(n);o.isEqual(r,a)||e({type:u,previewPos:r})}},setEditorContentLayout:d}}),define("stateManagement/domMeasurements/panelPosition",["lodash","reactDOM","react","zepto","create-react-class","reduxLibs","santa-editor-utils","prop-types"],function(e,n,a,r,i,o,t,s){"use strict";var u=t.hoc.measuring;return function(){return function(e){var t=i({displayName:o.recompose.wrapDisplayName(e,"panelPosition"),propTypes:{style:s.object,measurements:s.object.isRequired,reportMeasurements:s.func.isRequired},childContextTypes:{panelPosition:s.object},getChildContext:function(){return{panelPosition:this.props.measurements}},componentDidMount:function(){this.measurePanel()},componentDidUpdate:function(){this.measurePanel()},measurePanel:function(){var e=r(n.findDOMNode(this));this.props.reportMeasurements(e.position())},render:function(){return a.createElement(e,this.props)}});return u(t)}}}),define("stateManagement/domMeasurements/domMeasurements",["stateManagement/domMeasurements/domMeasurementsSelectors","stateManagement/domMeasurements/domMeasurementsActions","stateManagement/domMeasurements/panelPosition"],function(e,t,n){"use strict";return{selectors:e,actions:t,hoc:{panelPosition:n}}}),define("stateManagement/panels/panelFrame",["lodash","react","create-react-class","reduxLibs","prop-types","constants","stateManagement/panels/panelsActions","stateManagement/domMeasurements/domMeasurements","util"],function(r,i,o,s,u,c,e,t,l){"use strict";var n=e.openHelpCenter,a=e.setPanelType,d=e.closePanelByName,p=t.selectors,g=p.getStageLayout,f=p.getEditorContentLayout;var m=function(e){var t=e.state;return{editorContentLayout:f(t),stageLayout:g(t)}},S={setPanelType:a,closePanelByName:d,openHelpCenter:n};return function(a){return function(e){return l.hoc.connect(l.hoc.STORES.STATE_ONLY,m,S)((t=e,n=a,o({displayName:s.recompose.wrapDisplayName(t,"PanelFrame"),propTypes:{selectedComponentType:u.string,onHelpClicked:u.func,panelName:u.string.isRequired,helpId:u.string,isSingleInstance:u.bool,setPanelType:u.func.isRequired,closePanelByName:u.func.isRequired,openHelpCenter:u.func,stageLayout:u.object.isRequired},getDefaultProps:function(){return{isSingleInstance:!1}},componentWillMount:function(){this.props.setPanelType(this.props.panelName,n,this.props.isSingleInstance)},blockOuterScroll:function(e){var t=e.currentTarget,n=e.currentTarget.scrollHeight-e.currentTarget.offsetHeight,a=e.deltaY%3?e.deltaY:10*e.deltaY;t.scrollTop+a<=0?(t.scrollTop=0,e.preventDefault()):t.scrollTop+a>=n&&(t.scrollTop=n,e.preventDefault()),e.stopPropagation()},close:function(e){this.props.closePanelByName(this.props.panelName,e)},openHelpCenter:function(e){if(this.props.helpId){var t={learn_more:!1,origin:c.BI.HELP.ORIGIN.PANEL,panel_name:this.props.panelName,component:this.props.selectedComponentType};this.props.selectedComponentType||r.merge(t,r.pick(e,"component")),this.props.openHelpCenter(this.props.helpId,null,t)}this.props.onHelpClicked&&this.props.onHelpClicked()},render:function(){return i.createElement(t,r.assign({},this.props,{blockOuterScroll:this.blockOuterScroll,openHelpCenter:this.openHelpCenter,close:this.close}))}})));var t,n}}}),define("stateManagement/panels/panelDragLimits",["lodash","react","reactDOM","reduxLibs","prop-types","create-react-class","util","stateManagement/domMeasurements/domMeasurementsSelectors"],function(n,a,r,i,o,s,u,c){"use strict";var l=u.elementUtils;return function(){return function(e){var t=s({displayName:i.recompose.wrapDisplayName(e,"panelDragLimits"),propTypes:{editorContentLayout:o.object.isRequired,stageLayout:o.object.isRequired},getDragLimits:function(){var e=r.findDOMNode(this),t=l.getOuterHeight(e),n=l.getOuterWidth(e);return u.panelUtils.getPanelDragLimits(t,n,this.props.stageLayout,this.props.editorContentLayout)},render:function(){return a.createElement(e,n.defaults({getPanelDragLimits:this.getDragLimits},this.props))}});return u.hoc.connect(u.hoc.STORES.STATE_ONLY,function(e){var t=e.state;return{editorContentLayout:c.getEditorContentLayout(t),stageLayout:c.getStageLayout(t)}})(t)}}}),define("stateManagement/panels/panels",["stateManagement/panels/panelsActions","stateManagement/panels/panelsReducer","stateManagement/panels/panelsSelectors","stateManagement/panels/panelFrame","stateManagement/panels/panelDragLimits"],function(e,t,n,a,r){"use strict";return{actions:e,reducer:t,selectors:n,hoc:{panelFrame:a,panelDragLimits:r}}}),define("stateManagement/leftBar/leftBarActionTypes",[],function(){"use strict";return{COLLAPSE_DESKTOP_MENU:"collapse-desktop-menu",COLLAPSE_MOBILE_MENU:"collapse-mobile-menu",EXPAND_BUTTON:"expand-button",COLLAPSE_BUTTON:"collapse-button",UPDATE_BUTTONS_BOUNDING_RECT:"update-buttons-bounding-rect",SET_NOTIFICATION_COUNT:"set-notification-count",INCREASE_NOTIFICATION_COUNT:"increase-notification-count",DECREASE_NOTIFICATION_COUNT:"decrease-notification-count",REMOVE_PANEL_NOTIFICATIONS:"removePanelNotifications",UPDATE_DESKTOP_SUPERAPP_BUTTON:"updateDesktopSuperappButton",UPDATE_MOBILE_SUPERAPP_BUTTON:"updatemobileSuperappButton",REMOVE_SUPERAPP_BUTTON:"removeSuperAppButton",OVERRIDE_LEFT_BAR:"override-left-bar"}}),define("stateManagement/leftBar/leftBarActions",["lodash","coreBi","constants","stateManagement/leftBar/leftBarSelectors","stateManagement/userPreferences/userPreferences","stateManagement/panels/panels","stateManagement/bi/bi","stateManagement/leftBar/leftBarActionTypes"],function(c,l,p,d,g,e,t,a){"use strict";var n=e.actions,r=function(){return{type:a.COLLAPSE_DESKTOP_MENU}},i=function(){return{type:a.COLLAPSE_MOBILE_MENU}},f=function(e){return{type:a.EXPAND_BUTTON,panelName:e}},o=function(e){return{type:a.REMOVE_PANEL_NOTIFICATIONS,panelName:e}},m=function(e){return{type:a.UPDATE_DESKTOP_SUPERAPP_BUTTON,buttonParams:e}},S=function(e){return{type:a.UPDATE_MOBILE_SUPERAPP_BUTTON,buttonParams:e}},E=t.actions.event,s=function(){return function(e,t){e(d.isMobileEditor(t())?i():r())}},_=function(e,t,n,a,r,i){return{panelName:e,panelProps:t,label:n,className:a,symbolName:r,order:(o=e,c.indexOf(p.LEFT_BAR.SUPER_APPS_ORDER.DESKTOP,o)),isButtonOpen:i};var o},u={collapseDesktopMenu:r,collapseMobileMenu:i,expandButton:f,updateButtonsBoundingRect:function(e){return{type:a.UPDATE_BUTTONS_BOUNDING_RECT,boundingRect:e}},setNotificationsCount:function(e,t){return{type:a.SET_NOTIFICATION_COUNT,panelName:e,count:t}},increaseNotificationsCount:function(e,t){return{type:a.INCREASE_NOTIFICATION_COUNT,panelName:e,count:t}},decreaseNotificationsCount:function(e,t){return{type:a.DECREASE_NOTIFICATION_COUNT,panelName:e,count:t}},removePanelNotifications:o,updateDesktopSuperAppButton:m,updateMobileSuperAppButton:S,removeSuperAppButton:function(e){return{type:a.REMOVE_SUPERAPP_BUTTON,panelName:e}},overrideItems:function(e){return{type:a.OVERRIDE_LEFT_BAR,overriddenButtons:e}},collapseMenu:s,collapseButton:function(n){return function(e){var t;e((t=n,{type:a.COLLAPSE_BUTTON,panelName:t})),e(g.actions.setSiteUserPreferences(n+p.LEFT_BAR.WAS_BUTTON_CLICKED_KEY,!0))}},openAddPanel:function(){return function(e){e(s()),e(n.updateOrOpenPanel("addPanelInfra.addPanel"))}},sendBIButtonsCount:function(u){return function(e,t,n){var a=n.dsRead,r=d.getMenuItems(t(),u),i=a&&a.generalInfo.getSiteId();if(i){var o=c.map(r,"panelName"),s={count:r.length,site_id:i,shoutout_bool:c.includes(o,p.SUPER_APPS.SHOUTOUT_PANEL_NAME),blog_bool:c.includes(o,p.SUPER_APPS.BLOG_PANEL_NAME),social_blog_bool:c.includes(o,p.SUPER_APPS.NEW_BLOG_PANEL_NAME),booking_bool:c.includes(o,p.SUPER_APPS.BOOKINGS_PANEL_NAME),ecomm_bool:c.includes(o,p.SUPER_APPS.WIX_STORE_PANEL_NAME),rest_bool:!1};e(E(l.events.leftBar.LEFT_BAR_NUMBER_OF_BUTTONS,s))}}},addSuperAppsButton:function(r,i,o,s,u,c,l,d){return function(e,t){var n=_(r,i,o,s,u,d);e(m(n)),c&&e(S(n));var a=g.selectors.getSiteUserPreferences(r+p.LEFT_BAR.WAS_BUTTON_CLICKED_KEY)(t());l&&!a&&e(f(r))}},removeSuperAppsButton:function(t){return function(e){e(u.removeSuperAppButton(t)),e(o(t)),e(n.closePanelByNameAction(t))}}};return u}),define("stateManagement/leftBar/leftBarReducer",["lodash","stateManagement/leftBar/leftBarActionTypes"],function(s,e){"use strict";var u=e.COLLAPSE_DESKTOP_MENU,c=e.COLLAPSE_MOBILE_MENU,l=e.EXPAND_BUTTON,d=e.COLLAPSE_BUTTON,p=e.UPDATE_BUTTONS_BOUNDING_RECT,g=e.SET_NOTIFICATION_COUNT,f=e.INCREASE_NOTIFICATION_COUNT,m=e.DECREASE_NOTIFICATION_COUNT,S=e.REMOVE_PANEL_NOTIFICATIONS,E=e.UPDATE_DESKTOP_SUPERAPP_BUTTON,_=e.UPDATE_MOBILE_SUPERAPP_BUTTON,T=e.REMOVE_SUPERAPP_BUTTON,P=e.OVERRIDE_LEFT_BAR,i=function(n){return function(e,t){return s.defaults({superApps:s.defaults(_defineProperty({},n,t),e.superApps)},e)}},A=function(r){return function(e,t){var n=s.find(e.superApps[r],{panelName:t.panelName});if(n){var a=s.map(e.superApps[r],function(e){return e===n?s.defaults(t,e):e});return i(r)(e,a)}return i(r)(e,e.superApps[r].concat(t))}};return function(e,t){switch(t.type){case u:return s.assign({},e,{isCollapsed:!0});case c:return s.assign({},e,{isMobileCollapsed:!0});case l:return s.defaults({collapseOnClick:s.union(e.collapseOnClick,[t.panelName])},e);case d:return s.assign({},e,{collapseOnClick:s.without(e.collapseOnClick,t.panelName)});case p:var n=["left","right","top","bottom"],a=s.pick(e.buttonsBoundingRect,n),r=s.pick(t.boundingRect,n);return s.isEqual(a,r)?e:s.assign({},e,{buttonsBoundingRect:r});case g:return s.assign({},e,{notifications:s.assign({},e.notifications,_defineProperty({},t.panelName,t.count))});case f:return s.assign({},e,{notifications:s.assign({},e.notifications,_defineProperty({},t.panelName,e.notifications[t.panelName]+(t.count||1)))});case m:return s.assign({},e,{notifications:s.assign({},e.notifications,_defineProperty({},t.panelName,e.notifications[t.panelName]-(t.count||1)))});case T:var i={desktop:s.reject(e.superApps.desktop,{panelName:t.panelName}),mobile:s.reject(e.superApps.mobile,{panelName:t.panelName})};return s.defaults({superApps:i},e);case S:return s.defaults({notifications:s.omit(e.notifications,t.panelName)},e);case E:return A("desktop")(e,t.buttonParams);case _:return A("mobile")(e,t.buttonParams);case P:var o=s.get(t,"overriddenButtons");return s.assign({},e,{overriddenButtons:o});default:return e}}}),define("stateManagement/leftBar/leftBar",["stateManagement/leftBar/leftBarActions","stateManagement/leftBar/leftBarReducer","stateManagement/leftBar/leftBarSelectors"],function(e,t,n){"use strict";return{actions:e,reducer:t,selectors:n}}),define("stateManagement/leftTree/leftTreeActionTypes",[],function(){"use strict";return{OVERRIDE_LEFT_TREE:"override-left-tree"}}),define("stateManagement/leftTree/leftTreeActions",["stateManagement/leftTree/leftTreeActionTypes"],function(t){"use strict";return{overrideItems:function(e){return{type:t.OVERRIDE_LEFT_TREE,overridden:e}}}}),define("stateManagement/leftTree/leftTreeReducer",["lodash","stateManagement/leftTree/leftTreeActionTypes","stateManagement/store/initialEditorState"],function(a,e,r){"use strict";var i=e.OVERRIDE_LEFT_TREE;return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:r.leftTree,t=arguments[1];switch(t.type){case i:var n=a.get(t,"overridden",e.overridden);return a.defaultsDeep({},{overridden:n},e);default:return e}}}),define("stateManagement/leftTree/leftTreeSelectors",[],function(){"use strict";return{getOverriddenItems:function(e){return e.leftTree.overridden.overriddenItems},getOverriddenVisibility:function(e){return e.leftTree.overridden.shouldShow}}}),define("stateManagement/leftTree/leftTree",["stateManagement/leftTree/leftTreeActions","stateManagement/leftTree/leftTreeReducer","stateManagement/leftTree/leftTreeSelectors"],function(e,t,n){"use strict";return{actions:e,reducer:t,selectors:n}}),define("stateManagement/linkPanel/linkPanelActionTypes",[],function(){"use strict";return{OVERRIDE_LINK_PANEL_SECTIONS:"override-link-panel-sections"}}),define("stateManagement/linkPanel/linkPanelReducer",["lodash","stateManagement/linkPanel/linkPanelActionTypes"],function(a,e){"use strict";var r=e.OVERRIDE_LINK_PANEL_SECTIONS;return function(e,t){switch(t.type){case r:var n=a.get(t,"overridden",e.overridden);return a.merge({},e,{overridden:n});default:return e}}}),define("stateManagement/linkPanel/linkPanelSelectors",[],function(){"use strict";return{getOverridden:function(e){return e.linkPanel.overridden}}}),define("stateManagement/linkPanel/linkPanelActions",["stateManagement/linkPanel/linkPanelActionTypes"],function(t){"use strict";return{setOverridden:function(e){return{type:t.OVERRIDE_LINK_PANEL_SECTIONS,overridden:e}}}}),define("stateManagement/linkPanel/linkPanel",["stateManagement/linkPanel/linkPanelReducer","stateManagement/linkPanel/linkPanelSelectors","stateManagement/linkPanel/linkPanelActions"],function(e,t,n){"use strict";return{reducer:e,selectors:t,actions:n}}),define("stateManagement/addPanel/addPanelActionTypes",[],function(){"use strict";return{OVERRIDE_ADD_PANEL:"override-add-panel",ADD_EXTRA_SECTION:"add-extra-section"}}),define("stateManagement/addPanel/addPanelReducer",["lodash","stateManagement/addPanel/addPanelActionTypes"],function(n,e){"use strict";var a=e.OVERRIDE_ADD_PANEL,r=e.ADD_EXTRA_SECTION;return function(e,t){switch(t.type){case a:return n.assign({},e,{overridden:t.overridden});case r:return n.assign({},e,{extraSections:t.extraSections});default:return e}}}),define("stateManagement/addPanel/addPanelSelectors",[],function(){"use strict";return{getOverriddenCategories:function(e){return e.addPanel.overridden}}}),define("stateManagement/addPanel/addPanelActions",["stateManagement/addPanel/addPanelActionTypes"],function(t){"use strict";return{overrideItems:function(e){return{type:t.OVERRIDE_ADD_PANEL,overridden:e}}}}),define("stateManagement/addPanel/addPanel",["stateManagement/addPanel/addPanelReducer","stateManagement/addPanel/addPanelSelectors","stateManagement/addPanel/addPanelActions"],function(e,t,n){"use strict";return{reducer:e,selectors:t,actions:n}}),define("stateManagement/designPanel/designPanelActionTypes",[],function(){"use strict";return{OVERRIDE_DESIGN_PANEL:"OVERRIDE_DESIGN_PANEL"}}),define("stateManagement/designPanel/designPanelActions",["stateManagement/designPanel/designPanelActionTypes"],function(t){"use strict";return{overrideSections:function(e){return{type:t.OVERRIDE_DESIGN_PANEL,overridden:e}}}}),define("stateManagement/designPanel/designPanelSelectors",[],function(){"use strict";return{getOverriddenSections:function(e){return e.designPanel.overridden}}}),define("stateManagement/designPanel/designPanelReducer",["lodash","stateManagement/designPanel/designPanelActionTypes","stateManagement/store/initialEditorState","constants"],function(r,i,o,n){"use strict";var s=r.map(n.OVERRIDDEN.DESIGN_PANEL,"ID"),u=function(e){return r.values((t=e,r.find(n.OVERRIDDEN.DESIGN_PANEL,["ID",t])));var t};return function(){var e,t,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:o.designPanel,a=arguments[1];switch(a.type){case i.OVERRIDE_DESIGN_PANEL:return r.defaultsDeep({overridden:(e=a,t=e.overridden,r(t).pick(s).mapValues(function(e,t){return r.pick(e,u(t))}).value())},n);default:return n}}}),define("stateManagement/designPanel/designPanel",["stateManagement/designPanel/designPanelActions","stateManagement/designPanel/designPanelSelectors","stateManagement/designPanel/designPanelReducer"],function(e,t,n){"use strict";return{actions:e,selectors:t,reducer:n}}),define("stateManagement/componentsStore/componentsStoreActionTypes",[],function(){"use strict";return{UPDATE_COMPONENT_STORE:"update-component-store",REMOVE_COMPONENTS_STORE:"remove-components-store"}}),define("stateManagement/componentsStore/componentsStoreReducer",["lodash","stateManagement/componentsStore/componentsStoreActionTypes","stateManagement/store/initialEditorState"],function(u,e,c){"use strict";var l=e.UPDATE_COMPONENT_STORE,d=e.REMOVE_COMPONENTS_STORE;return function(){var e,t,n,a,r,i,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:c.componentsStore,s=arguments[1];switch(s.type){case l:return e=o,a=(t=s).comp,r=t.key,i=t.value,u.defaultsDeep(_defineProperty({},a.id,(_defineProperty(n={},r,i),_defineProperty(n,"compRef",a),n)),e);case d:return u.omit(o,u.map(s.comps,"id"));default:return o}}}),define("stateManagement/componentsStore/componentsStoreSelectors",["lodash"],function(r){"use strict";return{getComponentStore:function(e,t){var n=t.comp;return n?e.componentsStore[n.id]:null},getComponentStoreData:function(e,t){var n=t.comp,a=t.key;return n?r.get(e,["componentsStore",n.id,a],null):null},getComponentsList:function(e){return r.map(e.componentsStore,"compRef")}}}),define("stateManagement/componentsStore/componentsStoreActions",["stateManagement/componentsStore/componentsStoreActionTypes"],function(a){"use strict";return{updateComponentStore:function(e,t,n){return{type:a.UPDATE_COMPONENT_STORE,comp:e,key:t,value:n}},removeComponentsStore:function(e){return{type:a.REMOVE_COMPONENTS_STORE,comps:e}}}}),define("stateManagement/componentsStore/componentsStore",["stateManagement/componentsStore/componentsStoreReducer","stateManagement/componentsStore/componentsStoreSelectors","stateManagement/componentsStore/componentsStoreActions"],function(e,t,n){"use strict";return{reducer:e,selectors:t,actions:n}}),define("stateManagement/gridLines/gridLinesActionTypes",[],function(){"use strict";return{SET_GRID_LINES_OVERRIDES:"set-grid-lines-overrides"}}),define("stateManagement/gridLines/gridLinesReducer",["lodash","stateManagement/gridLines/gridLinesActionTypes","stateManagement/store/initialEditorState"],function(n,e,a){"use strict";var r=e.SET_GRID_LINES_OVERRIDES;return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.gridLines,t=arguments[1];switch(t.type){case r:return n.defaultsDeep({overrides:_defineProperty({},t.gridLinesType,t.overrides)},e);default:return e}}}),define("stateManagement/gridLines/gridLinesSelectors",[],function(){"use strict";return{getGridLinesOverrides:function(e,t){var n=t.gridLinesType;return e.gridLines.overrides[n]}}}),define("stateManagement/gridLines/gridLinesActions",["stateManagement/gridLines/gridLinesActionTypes"],function(n){"use strict";return{setGridLinesOverrides:function(e,t){return{type:n.SET_GRID_LINES_OVERRIDES,gridLinesType:e,overrides:t}}}}),define("stateManagement/gridLines/gridLines",["stateManagement/gridLines/gridLinesReducer","stateManagement/gridLines/gridLinesSelectors","stateManagement/gridLines/gridLinesActions"],function(e,t,n){"use strict";return{reducer:e,selectors:t,actions:n}}),define("stateManagement/selection/selectionActionTypes",[],function(){"use strict";return{SELECT_COMPONENTS:"selectComponents",ADD_TO_SELECTION:"addToSelection",REMOVE_FROM_SELECTION:"removeFromSelection",CLEAR_SELECTED_COMPONENTS:"clearSelectedComponents",SET_SELECTED_COMPS_RESTRICTIONS:"setSelectedCompsRestrictions",SET_LAST_SELECTION_CLICK_POS:"setLastSelectionClickPos",SET_FOCUSED_CONTAINER:"setFocusedContainer",SET_SELECTED_COMPS_DISPLAY_NAME:"setSelectedCompsDisplayName",SET_APP_CONTAINER:"setAppContainer",SET_FOCUSED_TABS_DEF:"setFocusedTabsDefs"}}),define("stateManagement/selection/selectionReducer",["lodash","coreUtilsLib","stateManagement/selection/selectionActionTypes"],function(a,t,e){"use strict";var r=e.SET_FOCUSED_CONTAINER,i=e.SET_LAST_SELECTION_CLICK_POS,o=e.SELECT_COMPONENTS,s=e.ADD_TO_SELECTION,u=e.REMOVE_FROM_SELECTION,c=e.CLEAR_SELECTED_COMPONENTS,l=e.SET_SELECTED_COMPS_RESTRICTIONS,d=e.SET_SELECTED_COMPS_DISPLAY_NAME,p=e.SET_APP_CONTAINER,g=e.SET_FOCUSED_TABS_DEF,f={selectedComponents:[],compRestrictions:{},compDisplayName:""};return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:f,n=arguments[1];switch(n.type){case o:return a.isArray(n.compRefs)?a.defaults({selectedComponents:n.compRefs},e):(t.log.error("selected comps must be an array"),e);case s:return a.isArray(n.compRefs)?a.defaults({selectedComponents:e.selectedComponents.concat(n.compRefs)},e):(t.log.error("selected comps must be an array"),e);case u:return a.isArray(n.compRefs)?a.defaults({selectedComponents:a.reject(e.selectedComponents,function(t){return a.find(n.compRefs,function(e){return a.isEqual(e,t)})})},e):(t.log.error("selected comps must be an array"),e);case c:return a.defaults({selectedComponents:[]},e);case l:return a.defaults({compRestrictions:n.restrictions},e);case d:return a.defaults({compDisplayName:n.compDisplayName},e);case i:return a.defaults({lastSelectionClickPos:n.pos},e);case r:return a.defaults({focusedContainer:n.focusedContainer||null},e);case p:return a.defaults({appContainer:n.appContainer||null},e);case g:return a.defaults({focusBoxTabsDef:n.tabsDef},e);default:return e}}}),define("stateManagement/boxSlideShow/boxSlideShowSelectors",[],function(){"use strict";var n=function(e,t){return e.components.behaviors.getRuntimeState(t).currentIndex},a=function(e,t){return e.layouters.getNonMasterChildren(t)};return{getCurrentSlideIndex:n,getTotalSlidesLength:function(e,t){return a(e,t).length},getAllSlides:a,findCurrentSlide:function(e,t){return a(e,t)[n(e,t)]}}}),define("stateManagement/boxSlideShow/boxSlideShow",["stateManagement/boxSlideShow/boxSlideShowSelectors"],function(e){"use strict";return{selectors:e}}),define("stateManagement/selection/focusBoxDefinitions",["lodash","util","constants","stateManagement/boxSlideShow/boxSlideShow"],function(s,u,c,e){"use strict";var t=e.selectors,n=t.getCurrentSlideIndex,a=t.getTotalSlidesLength,r=function(e,t){return{label:"gfpp_action_navigation_label",labelParams:{curr_slide:n(t,e)+1,total_slides:a(t,e)},type:c.UI.NAVIGATION_TYPES.PAGINATION}};return{containerTypeToFocusBoxTabs:{AppWidget:function(e,t,n){var a=[],r=(0,n.getDisplayName)(e);return r&&a.push({id:"appWidget",label:r,active:!0}),{tabs:a,translate:!1,type:c.UI.NAVIGATION_TYPES.TABS}},StripContainerSlideShow:r,BoxSlideShow:r,Repeater:function(){return{tabs:[{id:"repeater",label:"Component_label_listsandgrids",active:!0}],type:c.UI.NAVIGATION_TYPES.TABS,translate:!0}},MenuContainer:function(){return{tabs:[{id:"menu",label:"Menu",active:!0}],type:c.UI.NAVIGATION_TYPES.TABS,translate:!0}},Column:function(t,e){var n,a=s.template(u.translate("gfpp_column_navigation_slide_number")),r=e.components.getContainer(t),i=e.components.getChildren(r),o=s.findIndex(i,function(e){return s.isEqual(e,t)});return{tabs:[{id:"item_"+o,label:(n=t,e.components.getSiblings(n).length?a({curr_column:o+1}):u.translate("component_label_stripColumnsContainer")),active:!0}],type:c.UI.NAVIGATION_TYPES.TABS,translate:!1}},PopupContainer:function(){return{tabs:[{id:"item",label:"component_label_PopupContainer_Popupmode",active:!0}],type:c.UI.NAVIGATION_TYPES.TABS,translate:!0}},SiteRegionContainer:function(){return{tabs:[{id:"siteRegion",label:"component_label_member_bar",active:!0}],type:c.UI.NAVIGATION_TYPES.TABS,translate:!0}},StripColumnsContainer:function(){return{tabs:[{id:"item_component_label_stripColumnsContainer",label:"component_label_stripColumnsContainer",active:!0}],type:c.UI.NAVIGATION_TYPES.TABS,translate:!0}}},getModefulContainerTabsDef:function(){return{type:c.UI.NAVIGATION_TYPES.TABS}}}}),define("stateManagement/components/componentsSelectors",["lodash","constants","util","coreUtilsLib","stateManagement/boxSlideShow/boxSlideShowSelectors"],function(s,r,a,i,n){"use strict";var e=a.array,o=e.asArray,u=e.applyForFirstAndThrowIfMulti,c=r.UI,l=function(e,t){if(e&&(s.isArray(e)&&e.length||e.id)){var n=o(e);if(1<n.length)return r.MULTISELECT.TYPE;var a=s.head(n);return t.components.is.exist(a)?t.components.getType(a):null}return null},d=function(e,t){var n=o(e);return t.components.getContainer(n[0])},p=function(e,t){return"platform.components.AppWidget"===t.components.getType(e)},g=function(e,t){for(var n=t.components.getContainer(e);n&&!p(n,t);)n=t.components.getContainer(n);return!!n},f=function(e,t){for(var n=t.components.getContainer(e);n&&!p(n,t);)n=t.components.getContainer(n);return p(n,t)?n:null},m=function(e,t){return t.components.code.getNickname(e)||null},S=function(e,t){return s.filter(e,t.components.is.visible)},E=function(e,t,n){return S(n.components.get.byType(e,t),n)},_=function(e,t,n,a,r){return S(r.components.get.byXYRelativeToScreen(e,t,n,a),r)},T=function(e,t){var n=o(e);return 1<n.length?t.components.layout.getSnugLayoutRelativeToScreenConsideringScroll(n):t.components.layout.getRelativeToScreenConsideringScroll(s.head(n))},P=function(e,t,n){var a=e,r=t,i=n.pages.getReference(n.pages.getFocusedPageId()),o=E("wysiwyg.common.components.anchor.viewer.Anchor",i,n);return s.filter(o,function(e){var t=T(e,n);return t.y+=c.ANCHOR_OFFSET_TOP,a>=t.x&&a<=t.x+c.ANCHOR_WIDTH&&r>=t.y&&r<=t.y+c.ANCHOR_HEIGHT})};return{getCompType:l,getCompTypeSuffix:function(e,t){var n=l(e,t);return n&&a.path.suffix(n)},getContainer:d,isStylable:function(e,t){var n=l(e,t);if(n){var a=t.components.getDefinition(n);return!!a&&!!a.isStylableComp}return!1},isRepeaterItem:function(e,t){if(!e)return!1;var n=d(e,t);return"wysiwyg.viewer.components.Repeater"===l(n,t)},isPopoverItem:function(e,t){if(!e)return!1;var n=d(e,t);return"wysiwyg.viewer.components.Popover"===l(n,t)},getCompsData:function(e,t){var n=o(e);return s.map(n,t.components.data.get)},getCompsDataOrRuntime:function(e,t){var n=o(e);return s.map(n,function(e){return t.components.data.get(e)||t.components.data.getRuntime(e)})},getLayoutRelativeToScreen:function(e,t,n){var a=o(t);return 1<a.length?e.components.layout.getSnugLayoutRelativeToScreen(a):e.components.layout.getRelativeToScreen(s.head(a),n)},getBehaviors:function(e,t){var n=o(e);return s(n).flatMap(t.components.behaviors.get).compact().value()},getProperties:function(e,t){var n=o(e),a=s.map(n,t.components.properties.get);return 1<n.length?a:s.head(a)},getData:function(e,a){var t=o(e),n=s(t).map(function(e){var t=a.components.data.get(e);if(t||!a.platform.livePreview.isActive())return t;var n=a.components.data.getRuntime(e);return i.wSpy.log("ComponentSelector",["ComponentSelector.getData using runtime",e,n]),n}).compact().value();return n.length<=1?s.head(n):n},getSkin:function(e,t){return u("getSkin",t.components.skin.get,e)},getComponentSkinExports:function(e,t){return u("getComponentSkinExports",t.components.skin.getComponentSkinExports,e)},getStyleId:function(e,t){return u("getStyleId",t.components.style.getId,e)},getPlatformDisplayName:function(e,t){var n=t.platform.controllers.getConnectedComponentStageData(e);return s.get(n,["displayName"])},isDescendantOfAppWidget:g,someDescendantIsPrimaryConnectedToAppWidget:function(e,r){var t=o(e),n=s.concat(t,s.flatMap(t,function(e){return r.components.getChildrenFromFull(e,!0)}));return s.some(n,function(e){return t=e,!!(a=(n=r).platform.controllers.connections.getPrimaryConnection(t))&&p(a.controllerRef,n);var t,n,a})},isAppWidget:p,isDirectDescendantOfAppWidget:function(e,t){var n=t.components.getContainer(e);if(n){var a=t.components.getContainer(n);return p(n,t)||p(a,t)}return!1},getFirstAppContainerIfNeeded:function(e,t,n){return g(e,n)&&!p(t,n)?f(t,n):null},getFirstAppWidget:f,resolveSelectedComponentForBackgroundSettings:function(e,t){return t.components.is.nestedBackgroundDesign(e)?t.components.is.slidesContainer(e)?n.findCurrentSlide(t,e):s.head(t.components.getChildren(e)):s.head(e)},getNickname:m,getSecondaryNickname:function(e,t){if(p(e,t)){var n=t.components.getChildren(e);if(1===s.size(n))return m(n[0],t)}return null},filterVisibleComponents:S,getComponentsByType:E,getComponentsByXYRelativeToScreen:_,getRelativeToScreenConsideringScroll:T,getAnchorsUnderClick:P,getComponentsByXY:function(e,t,n){var a={x:e,y:t},r=_(a.x,a.y,0,n.pages.getFocusedPageId(),n);return P(e,t,n).concat(r)}}}),define("stateManagement/platform/platformSelectors",["lodash","stateManagement/components/componentsSelectors"],function(i,n){"use strict";var o=function(e,t){var n=e.platform.getAppManifest(t);return i.get(n,"widgets")};return{isConnectedToDataBindingController:function(e,t){return i(e).thru(t.platform.controllers.connections.get).map("controllerRef").thru(function(e){return n.getCompsData(e,t)}).some({applicationId:"dataBinding"})},isDataBindingAppProvisioned:function(e){var t=e.platform.editorApps.WIX_CODE.appDefId;return!!e.platform.getAppDataByAppDefId(t)},getIsLoading:function(e){return e.platform.importPanel.isLoading},getIsLoadingAppsError:function(e){return e.platform.importPanel.isLoadingAppsError},getAvailableApps:function(e){return e.platform.availableApps},getFreshAppsData:function(e){return e.platform.freshAppsData},getWidgetsDataFromManifest:o,getAddPanelCategoryDefinitionFromManifest:function(e,t){var n=e.platform.getAppManifest(t);return i.get(n,"addPanelSectionDefinition")},getInstalledPackages:function(r){var e=r.platform.getInstalledEditorApps();return i.isEmpty(e)?[]:i.filter(e,function(e){return t=r,n=e.appDefinitionId,a=o(t,n),!i.isEmpty(a);var t,n,a})},getIsApplicationInstallationStatus:function(e){return e.platform.appInstallationInProcess},packagesView:{getIsImportingApp:function(e){return e.platform.packagesView.isImportingApp},getIsRootExpanded:function(e){return e.platform.packagesView.isRootExpanded}}}}),define("stateManagement/platform/platformActionTypes",[],function(){"use strict";return{SET_AVAILABLE_APPS:"SET_AVAILABLE_APPS",SET_FRESH_APPS_DATA:"SET_FRESH_APPS_DATA",SET_IS_LOADING:"SET_IS_LOADING",SET_IS_APP_INSTALLATION_IN_PROGRESS:"SET_IS_APP_INSTALLATION_IN_PROGRESS",SET_IS_IMPORTING_APP:"SET_IS_IMPORTING_APP",SET_IS_LOADING_APPS_ERROR:"SET_IS_LOADING_APPS_ERROR",TOGGLE_PACKAGES_VIEW_ROOT:"TOGGLE_PACKAGES_VIEW_ROOT"}}),define("stateManagement/platform/platformActions",["lodash","util","coreUtilsLib","stateManagement/platform/platformSelectors","stateManagement/platform/platformActionTypes","stateManagement/panels/panelsActions"],function(u,o,t,e,s,c){"use strict";var l=e.getFreshAppsData,n=function(e){return{type:s.SET_AVAILABLE_APPS,apps:e}},a=function(e){return{type:s.SET_IS_LOADING,isLoading:e}},r=function(){return t.requestsUtil.fetchJson("https://editor.wix.com/_api/app-service/v1/apps",{credentials:"include"}).then(function(e){if(!e||!e.apps)throw Error("Fetching apps from dev center failed");return e.apps.map(function(e){return{appDefinitionId:e.appId,appDefinitionName:e.name,latestVersion:e.latestVersion}})})},d=function(e){return t.requestsUtil.fetchJson("https://dev.wix.com/_api/app-service/v1/apps-info?apps-id="+u.join(e,"&apps-id="),{credentials:"include"})},i=function(e){return{type:s.SET_IS_LOADING_APPS_ERROR,isLoadingAppsError:e}};return{installApp:function(e){var a=e.appDefinitionId,r=e.appVersion;return function(e,t,n){n.dsActions.platform.provisionp(a,{appVersion:r})}},updateApp:function(e){var i=e.applicationId,o=e.appVersion,s=e.payload;return function(e,t,n){var a=n.dsActions,r=n.editorAPI;return a.platform.update(i,o,s).then(function(){return r.saveManager.saveInBackground(u.noop,u.noop),!0}).catch(function(){return e(c.updateOrOpenPanel("tpa.panels.updateErrorPanel")),!1})}},notifyAddWidget:function(a,r){return function(e,t,n){return n.dsActions.platform.notifyApplication(a,{eventType:"addWidget",eventPayload:{widgetType:r}})}},fetchAvailableApps:function(){return function(t){t(i(!1)),t(a(!0)),r().then(function(e){t(n(e)),t(a(!1))}).catch(function(e){t(a(!1)),t(i(!0)),o.ravenUtils.captureError(e,{tags:{appImportPanel:!0}})})}},fetchAvailableAppsFromDevCenter:r,fetchMultipleAppsFromDevCenter:d,fetchFreshAppsData:function(){return function(r,i,e){var n=e.dsRead;return u.get(n,["platform","getInstalledEditorApps"])?new Promise(function(a,t){var e=u(n.platform.getInstalledEditorApps()).filter("version").map("appDefinitionId").value();u.isEmpty(e)?a():d(e).then(function(e){var t,n=e.apps;u.isEqual(n,l(i()))||r((t=n,{type:s.SET_FRESH_APPS_DATA,appsData:t})),a()}).catch(function(e){o.ravenUtils.captureError(e),t(e)})}):null}},setAvailableApps:n,setIsImportingApp:function(e){return{type:s.SET_IS_IMPORTING_APP,isImportingApp:e}},setIsLoading:a,setIsAppInstallationInProgress:function(e){return{type:s.SET_IS_APP_INSTALLATION_IN_PROGRESS,installationInProgress:e}},setIsLoadingAppsError:i,togglePackagesViewRoot:function(){return{type:s.TOGGLE_PACKAGES_VIEW_ROOT}}}}),define("stateManagement/platform/platformReducer",["lodash","reduxLibs","stateManagement/store/initialEditorState","stateManagement/platform/platformActionTypes"],function(n,e,a,r){"use strict";return e.redux.combineReducers({availableApps:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.platform.availableApps,t=arguments[1];switch(t.type){case r.SET_AVAILABLE_APPS:return t.apps;default:return e}},importPanel:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.platform.importPanel,t=arguments[1];switch(t.type){case r.SET_IS_LOADING:return n.defaults({isLoading:t.isLoading},e);case r.SET_IS_LOADING_APPS_ERROR:return n.defaults({isLoadingAppsError:t.isLoadingAppsError},e);default:return e}},freshAppsData:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.platform.freshAppsData,t=arguments[1];switch(t.type){case r.SET_FRESH_APPS_DATA:return t.appsData||e;default:return e}},packagesView:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.platform.packagesView,t=arguments[1];switch(t.type){case r.TOGGLE_PACKAGES_VIEW_ROOT:return n.defaults({isRootExpanded:!e.isRootExpanded},e);case r.SET_IS_IMPORTING_APP:return n.defaults({isImportingApp:t.isImportingApp},e);default:return e}},appInstallationInProcess:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.platform.installationInProgress,t=arguments[1];switch(t.type){case r.SET_IS_APP_INSTALLATION_IN_PROGRESS:return t.installationInProgress;default:return e}}})}),define("stateManagement/platform/platform",["stateManagement/platform/platformActions","stateManagement/platform/platformSelectors","stateManagement/platform/platformReducer"],function(e,t,n){"use strict";return{actions:e,selectors:t,reducer:n}}),define("stateManagement/componentMetaData/componentMetaDataSelectors",["lodash"],function(s){"use strict";var e=s.curryRight(s.every),t=function(n){return function(e,t){return!s.isEmpty(e)&&s.every(e,function(e){return n(e,t)})}},a=function(e){return!s.isUndefined(e.docked)&&e.fixedPosition},n=function(e,t){var n=t.components.layout.get(e);return n.docked=t.components.layout.getDock(e),a(n)};return{isHorizontallyMovable:t(function(e,t){return t.components.is.horizontallyMovable(e)&&!n(e,t)&&!t.components.layout.isHorizontallyStretchedToScreen(e)}),isPinnedBySerializedLayout:e(a),isPinned:t(n),isPlatformShowFocusBox:function(e,o){var t=o.platform.controllers.connections.get(e);if(!s.isEmpty(t))return s(t).map(function(e){return t=o,a=(n=e).controllerRef,r=n.role,i=t.platform.controllers.getStageData(a),s.get(i,["connections",r,"showFocusBox"]);var t,n,a,r,i}).find(s.isBoolean)}}}),define("stateManagement/selection/selectionSelectors",["lodash","constants","stateManagement/selection/focusBoxDefinitions","stateManagement/platform/platform","stateManagement/components/componentsSelectors","stateManagement/componentMetaData/componentMetaDataSelectors"],function(u,c,l,e,d,t){"use strict";var p=t.isPlatformShowFocusBox,a=e.selectors.isConnectedToDataBindingController,r=function(e){return e.selection.selectedComponents},i=function(e){return u.includes(["DEFAULT","HOVER"],e.type)},g=function(e,t){var n=t.components.modes.getModes(e);return!u.isEmpty(n)&&u.every(n,i)};return{getSelectedCompsRefs:r,getSelectedComponentType:function(e,t){var n=r(e);return d.getCompTypeSuffix(n,t)},getSelectedCompRestrictions:function(e){return u.isEmpty(r(e))?{}:e.selection.compRestrictions},getLastSelectionClickPos:function(e){return e.selection.lastSelectionClickPos},getFocusedContainer:function(e){return e.selection.focusedContainer},getSelectedCompsData:function(e,t){var n=r(e);return d.getCompsData(n,t)},isSelectedCompConnectedToDataBindingController:function(e,t){var n=r(e);return 1===n.length&&a(u.head(n),t)},getSelectedCompsDisplayName:function(e){return e.selection.compDisplayName},getAppContainer:function(e){return e.selection.appContainer},getFocusedContainerTabDefinition:function(e){return e.selection.focusBoxTabsDef},isFocusableModeContainer:g,getContainerTabDefinition:function(e,t,n,a){if(p(e,t)){var r=a(e);return{tabs:[{id:"platform-tab",label:r,active:!0}],type:c.UI.NAVIGATION_TYPES.TABS,translate:!1}}var i=d.getCompTypeSuffix(e,t),o=l.containerTypeToFocusBoxTabs[i],s=null;return u.isFunction(o)?s=o(e,t,{getDisplayName:a}):g(e,t)&&(s=l.getModefulContainerTabsDef()),s},getSingleSelectedComponent:function(e){var t=r(e);return 1===u.size(t)?u.head(t):null}}}),define("stateManagement/highlights/highlightsActionTypes",[],function(){"use strict";return{ADD_TO_HIGHLIGHTS:"addToHighlights",REMOVE_COMPS_FROM_HIGHLIGHTS:"removeCompsFromHighlights",SET_HIGHLIGHTS:"setHighlights",CLEAR_HIGHLIGHTS:"clearHighlights",REMOVE_FROM_HIGHLIGHTS_BY_HIGHLIGHT_TYPE:"removeFromHighlightsByHighlightType"}}),define("stateManagement/highlights/highlightsReducer",["lodash","coreUtilsLib","stateManagement/highlights/highlightsActionTypes"],function(n,a,e){"use strict";var r=e.ADD_TO_HIGHLIGHTS,i=e.REMOVE_COMPS_FROM_HIGHLIGHTS,o=e.SET_HIGHLIGHTS,s=e.CLEAR_HIGHLIGHTS,u=e.REMOVE_FROM_HIGHLIGHTS_BY_HIGHLIGHT_TYPE;return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case r:return n.isArray(t.highlightsDefs)?e.concat(t.highlightsDefs):(a.log.error("highlights must be an array"),e);case i:return n.isArray(t.compRefs)?n.reject(e,function(e){return n.find(t.compRefs,e.compRef)}):(a.log.error("highlights must be an array"),e);case u:return n.isArray(t.highlightTypes)?n.reject(e,function(e){return n.includes(t.highlightTypes,e.type)}):(a.log.error("highlightTypes must be an array"),e);case o:return n.isArray(t.highlightsDefs)?t.highlightsDefs:(a.log.error("highlights must be an array"),e);case s:return[];default:return e}}}),define("stateManagement/highlights/highlightsSelectors",[],function(){"use strict";return{getHighlights:function(e){return e.stage.highlights}}}),define("stateManagement/mouseActions/mouseActionsSelectors",[],function(){"use strict";return{isPerformingMouseMoveAction:function(e){return e.mouseActions.performingMouseMoveAction},isUsingWindowMouseEvents:function(e){return e.mouseActions.usingWindowMouseEvents}}}),define("stateManagement/mouseActions/mouseActionsActionTypes",[],function(){"use strict";return{SET_USING_WINDOW_MOUSE_EVENTS:"setUsingWindowMouseEvents",SET_PERFORMING_MOUSE_ACTION:"setPerformingMouseAction"}}),define("stateManagement/mouseActions/mouseActionsActions",["stateManagement/mouseActions/mouseActionsActionTypes"],function(t){"use strict";return{setUsingWindowMouseEvents:function(e){return{type:t.SET_USING_WINDOW_MOUSE_EVENTS,usingWindowMouseEvents:e}},setPerformingMouseAction:function(e){return{type:t.SET_PERFORMING_MOUSE_ACTION,performingMouseMoveAction:e}}}}),define("stateManagement/mouseActions/mouseActions",["stateManagement/mouseActions/mouseActionsSelectors","stateManagement/mouseActions/mouseActionsActions"],function(e,t){"use strict";return{selectors:e,actions:t}}),define("stateManagement/highlights/highlightsActions",["lodash","constants","stateManagement/highlights/highlightsSelectors","stateManagement/selection/selectionSelectors","stateManagement/mouseActions/mouseActions","stateManagement/highlights/highlightsActionTypes"],function(l,d,s,p,e,t){"use strict";function g(e,t,n){return{compRef:t,layout:e.components.layout.getRelativeToScreen(t),type:n?d.UI.HIGHLIGHTS.TYPES.THICK_WITH_OPACITY:d.UI.HIGHLIGHTS.TYPES.THICK}}var n=t.ADD_TO_HIGHLIGHTS,a=t.REMOVE_COMPS_FROM_HIGHLIGHTS,r=t.SET_HIGHLIGHTS,i=t.CLEAR_HIGHLIGHTS,o=t.REMOVE_FROM_HIGHLIGHTS_BY_HIGHLIGHT_TYPE,f=function(e){return{type:n,highlightsDefs:e}},u=function(e){return{type:r,highlightsDefs:e}},m=function(e){return{type:o,highlightTypes:e}},c=e.selectors.isPerformingMouseMoveAction;return{addToHighlights:f,addExternalHighlight:function(r){return function(e,t,n){var a=n.dsRead;return e(f([{compRef:r,layout:a.components.layout.getRelativeToScreen(r),type:d.UI.HIGHLIGHTS.TYPES.EXTERNAL}]))}},clearExternalHighlights:function(){return function(e){return e(m([d.UI.HIGHLIGHTS.TYPES.EXTERNAL]))}},removeCompsFromHighlights:function(e){return{type:a,compRefs:e}},removeFromHighlightsByHighlightType:m,setHighlights:u,clearHighlights:function(){return{type:i}},clearOverlayHighlights:function(){return function(e){return e(m([d.UI.HIGHLIGHTS.TYPES.OVERLAY]))}},handleSelectionHighlights:function(){return function(e,t,n){var a=n.dsRead,r=[],i=p.getSelectedCompsRefs(t()),o=l.head(i);if(e(m([d.UI.HIGHLIGHTS.TYPES.THICK_WITH_OPACITY,d.UI.HIGHLIGHTS.TYPES.THICK])),o){var s=function(r,e){var t=r.platform.controllers.connections.get(e);if(l.isArray(t)){var n=l.find(t,function(e){var t=e.controllerRef,n=e.role,a=r.platform.controllers.getStageData(t);return l.get(a,["connections",n,"relatedToRole"])});if(n){var a=n.controllerRef,i=n.role,o=r.platform.controllers.connections.getConnectedComponents(a),s=r.platform.controllers.getStageData(a).connections[i];return l.filter(o,function(e){return l.head(r.platform.controllers.connections.get(e)).role===s.relatedToRole&&r.components.is.rendered(e)&&r.components.is.visible(e)})}}}(a,o);if(!l.isEmpty(s))return s.forEach(function(e){return r.push(g(a,e,!1))}),void e(f(r));if("wysiwyg.viewer.components.Repeater"===a.components.getType(a.components.getContainer(o)))return r.push(g(a,o,!1)),void e(f(r));var u=a.components.getAncestors(o),c=l.find(u,function(e){return"wysiwyg.viewer.components.Repeater"===a.components.getType(a.components.getContainer(e))});c&&(r.push(g(a,c,!0)),e(f(r)))}}},handleComponentHighlight:function(a,r,i){return function(e){var t=[],n=i?d.UI.HIGHLIGHTS.TYPES.OVERLAY_WITH_OPACITY:d.UI.HIGHLIGHTS.TYPES.OVERLAY;e(m([n])),t.push({compRef:a,layout:r,type:n}),e(f(t))}},updateHighlights:function(){return function(e,t,n){var a=n.dsRead,r=t(),i=s.getHighlights(r);if(!l.isEmpty(i)&&!c(r)){var o=l(i).filter(function(e){var t=e.compRef;return a.components.is.exist(t)}).map(function(e){return l.defaults({layout:a.components.layout.getRelativeToScreen(e.compRef)},e)}).value();e(u(o))}}}}}),define("stateManagement/highlights/highlights",["stateManagement/highlights/highlightsReducer","stateManagement/highlights/highlightsSelectors","stateManagement/highlights/highlightsActions"],function(e,t,n){"use strict";return{reducer:e,selectors:t,actions:n}}),define("stateManagement/selection/selectionActions",["lodash","coreBi","stateManagement/selection/selectionSelectors","stateManagement/highlights/highlights","stateManagement/selection/selectionActionTypes","stateManagement/bi/bi","stateManagement/components/componentsSelectors","util"],function(u,i,e,t,n,a,c,r){"use strict";var o=a.actions.event,l=t.actions,d=r.array.isMultiselect,s=n.SET_FOCUSED_CONTAINER,p=n.SET_FOCUSED_TABS_DEF,g=n.SET_LAST_SELECTION_CLICK_POS,f=n.SELECT_COMPONENTS,m=n.ADD_TO_SELECTION,S=n.REMOVE_FROM_SELECTION,E=n.CLEAR_SELECTED_COMPONENTS,_=n.SET_SELECTED_COMPS_RESTRICTIONS,T=n.SET_SELECTED_COMPS_DISPLAY_NAME,P=n.SET_APP_CONTAINER,A=e.getSelectedCompsRefs,I=e.getFocusedContainer,M=e.getContainerTabDefinition,v=function(e){return{type:s,focusedContainer:e}},O=function(e){return{type:f,compRefs:e}},h=function(e){return{type:_,restrictions:e}},R=function(){return function(e,t,n){var a=n.dsRead,r=n.editorAPI,i=t(),o=I(i);if(!o)return e(y(null));var s=M(o,a,t(),r.components.getDisplayName);return e(y(s))}},y=function(e){return{type:p,tabsDef:e}};return{addToSelection:function(e){return{type:m,compRefs:e}},removeFromSelection:function(e){return{type:S,compRefs:e}},selectComponentsAction:O,clearSelectedComponents:function(){return{type:E}},setSelectedCompsRestrictions:h,selectComponents:function(o,s){return function(e,t,n){var a=n.dsRead,r=A(t());if(!u.isEqual(r,o)){e(O(o)),e(l.handleSelectionHighlights()),e(h(s));var i=d(o)?"":c.getPlatformDisplayName(u.head(o),a)||"";e({type:T,compDisplayName:i})}}},setLastSelectionClickPos:function(e){return{type:g,pos:e}},setFocusedContainer:function(r,i,o){return function(e,t,n){var a=n.dsRead;e(v(r)),e(R()),u.isFunction(o)&&o(a,r,i)}},setAppContainer:function(e){return{type:P,appContainer:e}},setFocusedTabDefinition:R,sendBiOnSelectPopupOverlay:function(r){return function(e,t,n){var a=n.dsRead;r&&1===r.length&&a.pages.popupPages.isPopup(r[0].id)&&e(o(i.events.popups.pop_up_overlay_clicked))}}}}),define("stateManagement/selection/selection",["stateManagement/selection/selectionReducer","stateManagement/selection/selectionSelectors","stateManagement/selection/selectionActions"],function(e,t,n){"use strict";return{reducer:e,selectors:t,actions:n}}),define("stateManagement/pages/pagesActionTypes",[],function(){"use strict";return{SET_FOCUSED_PAGE:"set-focused-page",SET_FOCUSED_PAGE_TITLE:"set-focused-page-title"}}),define("stateManagement/pages/pagesActions",["stateManagement/pages/pagesActionTypes"],function(i){"use strict";return{setFocusedPage:function(r){return function(e,t,n){var a=n.editorAPI.pages.getPageTitle(r.id);e({type:i.SET_FOCUSED_PAGE,focusedPage:r}),e({type:i.SET_FOCUSED_PAGE_TITLE,focusedPageTitle:a})}}}}),define("stateManagement/pages/pagesReducer",["lodash","stateManagement/pages/pagesActionTypes","stateManagement/store/initialEditorState"],function(n,e,a){"use strict";var r=e.SET_FOCUSED_PAGE,i=e.SET_FOCUSED_PAGE_TITLE;return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.pages,t=arguments[1];switch(t.type){case r:return n.assign({},e,{focusedPage:t.focusedPage});case i:return n.assign({},e,{focusedPageTitle:t.focusedPageTitle});default:return e}}}),define("stateManagement/pages/pagesSelectors",["lodash"],function(t){"use strict";var n=function(e){return e.pages.focusedPage};return{getFocusedPage:n,getFocusedPageId:function(e){return t.get(n(e),"id")},getFocusedPageTitle:function(e){return e.pages.focusedPageTitle}}}),define("stateManagement/pages/pages",["stateManagement/pages/pagesActions","stateManagement/pages/pagesReducer","stateManagement/pages/pagesSelectors"],function(e,t,n){"use strict";return{actions:e,reducer:t,selectors:n}}),define("stateManagement/inlinePopup/inlinePopupActionTypes",[],function(){"use strict";return{SET_OPEN_INLINE_POPUP:"set-open-inline-popup"}}),define("stateManagement/inlinePopup/inlinePopupActions",["lodash","util","stateManagement/selection/selectionActions","stateManagement/inlinePopup/inlinePopupActionTypes","constants"],function(i,o,s,t,u){"use strict";var c=function(e){return{type:t.SET_OPEN_INLINE_POPUP,inlinePopupRef:e}},l=function(i){var o=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return function(t,e,n){var a=n.dsRead,r=n.dsActions;return p({dsRead:a,dsActions:r},i,!0),new Promise(function(e){return r.components.behaviors.execute(i,"open",{immediate:o,callbacks:{onComplete:function(){t(c(i)),e()}}})})}},d=function(i){var o=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return function(t,e,n){var a=n.dsRead,r=n.dsActions;return new Promise(function(e){return r.components.behaviors.execute(i,"close",{immediate:o,callbacks:{onComplete:function(){p({dsRead:a,dsActions:r},i,!1),t(s.setFocusedContainer(null)),t(s.removeFromSelection([i])),t(c(null)),e()}}})})}};function p(e,t,n){var a=e.dsRead,r=e.dsActions,i=n?r.renderPlugins.showComp:r.renderPlugins.hideComp;i(t),a.components.getChildren(t,!0).forEach(function(e){return i(e)})}return{open:l,close:d,toggle:function(r){return function(e,t,n){var a=n.editorAPI;return e((o.inlinePopupUtils.isOpen(a,r)?d:l)(r))}},closeAll:function(){var r=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return function(t,e,n){var a=n.dsRead;return Promise.all(i(u.INLINE_POPUP.TYPES).flatMap(function(e){return a.components.get.byType(e)}).map(function(e){return t(d(e,r))}).value())}}}}),define("stateManagement/mobile/hiddenItems/hiddenItemsActionTypes",[],function(){"use strict";return{SET_IS_ADDING_COMPONENT_IN_PROGRESS:"hidden-items-set-is-adding-component-in-progress",SET_HIDDEN_ITEMS_HOVERED_COMPONENT:"hidden-items-set-hidden-items-hovered-component",SET_HIDDEN_ITEMS_MASTER_PAGE_COMPS:"hidden-items-set-master-page-hidden-comps",SET_HIDDEN_ITEMS_CURRENT_PAGE_COMPS:"hidden-items-set-current-page-hidden-comps",REMOVE_HIDDEN_ITEM_FROM_MASTER_PAGE_LIST:"hidden-items-remove-component-from-master-page-list",REMOVE_HIDDEN_ITEM_FROM_CURRENT_PAGE_LIST:"hidden-items-remove-component-from-current-page-list"}}),define("stateManagement/mobile/hiddenItems/hiddenItemsSelectors",[],function(){"use strict";return{getIsAddingHiddenItemInProgress:function(e){return e.mobile.hiddenItems.isAddingHiddenItemInProgress},getHoveredComponent:function(e){return e.mobile.hiddenItems.hoveredComponent},getMasterPageHiddenComponents:function(e){return e.mobile.hiddenItems.masterPageHiddenComponents},getCurrentPageHiddenComponents:function(e){return e.mobile.hiddenItems.currentPageHiddenComponents}}}),define("stateManagement/mobile/hiddenItems/hiddenItemsActions",["lodash","constants","coreBi","coreUtilsLib","stateManagement/bi/bi","stateManagement/highlights/highlightsActions","stateManagement/inlinePopup/inlinePopupActions","stateManagement/mobile/hiddenItems/hiddenItemsActionTypes","stateManagement/mobile/hiddenItems/hiddenItemsSelectors","stateManagement/selection/selectionSelectors","stateManagement/panels/panelsSelectors","stateManagement/pages/pagesSelectors"],function(f,d,g,c,e,m,l,S,E,p,t,_){"use strict";var T=void 0,P=e.actions.event,A=function(e){return"masterPage"===e},i=function(){return function(e,t,n){var a=n.editorAPI;if(T){var r=t(),i=_.getFocusedPageId(r),o=E.getHoveredComponent(r),s=T.getHiddenCompsForPage(a,"masterPage"),u=T.getHiddenCompsForPage(a,i),c=["desktopLayout.y","desktopLayout.x","compId"],l=A(o.pageId)?s:u;f.isEmpty(o)||f.find(l,o.hiddenComp)||l.push(o.hiddenComp),e({type:S.SET_HIDDEN_ITEMS_MASTER_PAGE_COMPS,hiddenComponents:f.sortBy(s,c)}),e({type:S.SET_HIDDEN_ITEMS_CURRENT_PAGE_COMPS,hiddenComponents:f.sortBy(u,c)})}}},I=function(e){return t.isMobileHiddenItemsPanelOpen(e)},n=function(){return function(e,t,n){n.editorAPI.mobile.hideHiddenItemsCounter()}},M=function(c,l){return function(e,t,n){var a=n.dsRead;if(I(t())){var r,i,o,s,u=(r=c,i=l,s=(o=a).components.getRepeatedComponents(r),f.map(s,function(e){return{compRef:e,layout:o.components.layout.getRelativeToScreen(e),type:d.UI.HIGHLIGHTS.TYPES.OVERLAY}})||[{compRef:r,layout:i,type:d.UI.HIGHLIGHTS.TYPES.OVERLAY}]);e(m.setHighlights(u))}}},v=function(){return{type:S.SET_HIDDEN_ITEMS_HOVERED_COMPONENT,hoveredComponent:{}}},O=function(o,s){var u=2<arguments.length&&void 0!==arguments[2]?arguments[2]:f.noop;return function(e,t,n){var a=n.dsActions,r=n.editorAPI;if(I(t())){var i=function(e){return e&&r.components.is.exist(e)};a.mobile.hiddenComponents.show(o,s),a.waitForChangesApplied(function(){var e=r.components.get.byId(o);if(i(e)){var t=r.components.layout.getRelativeToScreen(e).y-50,n=c.scrollUtils.calcScrollDuration(r.site.getScroll().y,t,!0);r.scroll.animateScrollTo({y:t},n,function(){i(e)&&u()})}})}}},h=function(t){return function(e){e({type:S.SET_IS_ADDING_COMPONENT_IN_PROGRESS,isAddingHiddenItemInProgress:t})}},o=function(){return function(e,t,n){var a=n.dsActions;E.getIsAddingHiddenItemInProgress(t())||(e(m.clearHighlights()),e(v()),a.history.applyLatestSnapshot())}},R=function(c,l,d,p){return function(e,t,n){var a=n.dsRead,r=n.editorAPI,i={current_page_name:l,component_type:d,section:p};if(r.isTpa(d)){var o=r.components.get.byId(c,l,r.dsRead.viewMode.VIEW_MODES.DESKTOP),s=r.components.data.get(o),u=a.tpa.app.getData(s.applicationId);i.app_id=u.appDefinitionId,i.app_site_id=u.instanceId,i.instance_id=c}e(P(g.events.mobileEditor.hiddenElements.HIDDEN_ELEMENTS_SHOW,i))}};return{initHiddenItemsPanel:function(r){return function(e,t,n){var a=n.editorAPI;T=void 0!==T?T:r,e(i()),e(function(e,t,n){n.editorAPI.mobile.hideHiddenItemsCounter()}),a.selection.deselectComponents()}},clearHiddenItems:function(){return function(e,t){var n=E.getHoveredComponent(t()),a=f.get(n,["hiddenComp","compId"]),r=f.get(n,"pageId");a&&r&&e(o()),e(m.clearHighlights()),e(v())}},stopPreviewReAddComponent:o,previewReAddComponent:function(p,g){return function(u,c,e){var s,l,d=e.editorAPI;E.getIsAddingHiddenItemInProgress(c())||(u((s=p,l=g,function(e,t){var n=t(),a=E.getMasterPageHiddenComponents(n),r=E.getCurrentPageHiddenComponents(n),i=A(l)?a:r,o=f.find(i,{compId:s});e({type:S.SET_HIDDEN_ITEMS_HOVERED_COMPONENT,hoveredComponent:{hiddenComp:o,pageId:l}})})),d.selection.deselectComponents(),u(m.clearHighlights()),u(O(p,g,function(){var e,t,n,a,r,i,o=d.components.get.byId(p);if(d.components.is.exist(o)&&(e=c(),t=p,n=g,a=E.getMasterPageHiddenComponents(e),r=E.getCurrentPageHiddenComponents(e),i=A(n)?a:r,f.find(i,{compId:t}))){var s=d.components.layout.getRelativeToScreen(o);u(M(o,s))}})))}},refreshMobileHiddenComponentsIfPanelIsOpen:function(){return function(e,t){I(t())&&e(i())}},reAddComponent:function(i,o,s,u){return function(n,a,e){var r=e.editorAPI;n(h(!0));var t=A(o)?S.REMOVE_HIDDEN_ITEM_FROM_MASTER_PAGE_LIST:S.REMOVE_HIDDEN_ITEM_FROM_CURRENT_PAGE_LIST;window.setTimeout(function(){n(m.clearHighlights()),n(v()),n({type:t,compId:i}),n(O(i,o,function(){var e=r.components.get.byId(i,o);r.components.is.exist(e)&&r.selection.selectComponentByCompRef(e);var t=p.getFocusedContainer(a());r.components.is.inlinePopup(t)&&n(l.open(t)),n(h(!1))})),r.history.add("unhide mobile component")},1e3),n(R(i,o,s,u))}},hideHiddenItemsCounter:n,sendReAddBiEvent:R,highlightComp:M}}),define("stateManagement/mobile/mobileWizard/mobileWizardSelectors",["lodash"],function(n){"use strict";var a=function(e){return e.mobile.mobileWizard.currentStep},t=function(e){return e.mobile.mobileWizard.userSelections},e=function(e){return t(e).tinyMenu},r=function(e){return t(e).header},i=function(e){return t(e).qab},o=function(e){return t(e).backToTop},s={TINY_MENU:e,SITE_HEADER:r,QUICK_ACTION_BAR:i,BACK_TO_TOP_BUTTON:o};return{getIsMobileWizardEnabled:function(e){return e.mobile.mobileWizard.enabled},getMobileWizardOpeningState:function(e){return e.mobile.mobileWizard.openingState},getCurrentStep:a,getCurrentStepSelectedValue:function(e){var t=a(e);return(s[t]||n.noop)(e)},getStepsToShow:function(e){return e.mobile.mobileWizard.stepsToShow},getUserSelections:t,getLastSaved:function(e,t){return e.mobile.mobileWizard.lastSaved[t]},tinyMenu:{getSelectedSkin:e,getAvailableSkins:function(e){return e.mobile.mobileWizard.tinyMenu.availableSkins}},header:{getSelectedHeaderType:r,getAnimationProgress:function(e){return e.mobile.mobileWizard.header.animationInProgress}},qab:{getAvailablePresets:function(e){return e.mobile.mobileWizard.qab.availablePresets},getSelectedQab:i},backToTop:{getSelectedBackToTop:o}}}),define("stateManagement/components/componentDataResolver",["lodash","stateManagement/components/componentsSelectors","experiment","wix-ui-santa/editorComponentsData.bundle"],function(o,e,s,t){"use strict";var n=t.editorDataResolver,u=n.ENVIRONMENT,c=n.EXPERIMENT,l=n.COMPONENT_INSTANCE_DATA,d=e.getSkin,p=e.getData,g=e.getProperties;return{getEditorData:function(e,t){for(var n=arguments.length,a=Array(2<n?n-2:0),r=2;r<n;r++)a[r-2]=arguments[r];var i=o.map(e.parameters,function(e){switch(e.type){case u:return function(e,t){switch(e){case"isMobileEditor":return t.isMobileEditor();case"supportedFeatures":return t.media.mediaState.getSupportedFeatures();case"qabActions":return t.mobile.qab.getActions();default:throw new Error("Unknown environment key: "+e)}}(e.key,t);case c:return s.isOpen(e.name);case l:return function(e,t,n,a){var r=n.dsRead;switch(e){case"componentProperties":return g(a,r);case"componentData":return p(a,r);case"skin":return d(a,r);case"isWidgetPage":return!!a&&!r.pages.isWidgetPage(a.id);case"isMultiColumnsStrip":return n.columns.isMultiColumnsStrip(a);case"isColumn":return n.columns.isColumn(a);case"tpaAppData":var i=(n.components.data.get(a)||{}).applicationId;return r.tpa.app.getData(i)||{};case"appPartExtraData":return r.wixapps.classics.getAppPartExtraData(a);case"isComponentSelected":return n.selection.isComponentSelected(a);case"isRepeaterItem":return n.components.is.repeaterItem(a);case"activeModeIds":return n.components.modes.getComponentActiveModeIds(a);case"isPopup":return r.pages.popupPages.isPopup(a.id);default:throw new Error("Unknown metadata key: "+e)}}.apply(void 0,[e.key,e.param,t].concat(a));default:throw new Error("Unknown metadata parameter type "+e.type)}});return e.apply(void 0,_toConsumableArray(i))}}}),define("stateManagement/components/componentsActions",["lodash","stateManagement/selection/selectionSelectors"],function(l,e){"use strict";var r=e.getSelectedCompsRefs,d=function(e,n,a){return l.filter(e,function(e){var t=a(e);return l.get(t,n)})},i=function(u,c){return function(e,t,n){var a=n.dsRead,r=n.dsActions,i=c?l.constant(c):a.components.properties.get,o=d(u,"isHidden",i),s=l.map(o,"id");r.documentMode.ignoreComponentsHiddenProperty(s)}},o=function(u,c){return function(e,t,n){var a=n.dsRead,r=n.dsActions,i=c?l.constant(c):a.components.properties.get,o=d(u,"isCollapsed",i),s=l.map(o,"id");r.documentMode.ignoreComponentsCollapsedProperty(s)}};return{updateFixedPosition:function(o,s){return function(e,t,n){var a=n.dsRead,r=n.editorAPI,i=l.set(a.components.layout.getRelativeToStructure(o),"fixedPosition",s);r.components.layout.updateRelativeToStructure(o,i)}},setPreviewState:function(a,r){return function(e,t,n){n.dsActions.documentMode.setComponentPreviewState(a,r)}},updateComponentProperties:function(a,r){return function(e,t,n){return n.dsActions.components.properties.update(a,r)}},updateComponentLayout:function(a,r){return function(e,t,n){return n.dsActions.components.layout.update(a,r)}},updateComponentsStyle:function(a,r){return function(e,t,n){return n.dsActions.components.style.update(a,r)}},ignoreComponentsHiddenProperty:i,ignoreComponentsCollapsedProperty:o,onSelectedCompPropertiesChange:function(e,a){return function(e,t){var n=r(t());e(i(n,a)),e(o(n,a))}}}}),define("stateManagement/mobile/intros/introsSelectors",[],function(){"use strict";return{areEnabled:function(e){return e.mobile.introsEnabled}}}),define("stateManagement/mobile/mobileSelectors",["lodash","reduxLibs","stateManagement/mobile/hiddenItems/hiddenItemsSelectors","stateManagement/mobile/mobileWizard/mobileWizardSelectors","stateManagement/mobile/intros/introsSelectors"],function(e,t,n,a,r){"use strict";var i=t.reselect.createSelector,o=function(e){return e.isMobileEditor};return{isMobileEditor:o,isDesktopEditor:e.negate(o),getDeviceType:i(o,function(e){return e?"mobile":"desktop"}),hiddenItems:n,mobileWizard:a,intros:r}}),define("stateManagement/components/compPanel",["react","lodash","create-react-class","prop-types","util","reduxLibs","stateManagement/bi/bi","stateManagement/components/componentsSelectors","stateManagement/selection/selection","stateManagement/mobile/mobileSelectors","stateManagement/panels/panels","constants"],function(n,c,a,r,o,i,e,t,s,u,l,d){"use strict";var p=e.hoc.reportBiEventOnUiChange,g=u.isMobileEditor,f=u.isDesktopEditor,m=t.getBehaviors,S=t.getProperties,E=t.getStyleId,_=t.getSkin,T=t.getData,P=s.selectors.getSelectedCompsRefs,A=e.actions,I=A.event,M=A.error,v=l.actions,O=v.openHelpCenter,h=v.openComponentPanelFromType,R=function(e,t,n){var a=void 0;if(c.isUndefined(t))a=n;else if(c.isArray(t)&&c.isObject(n)){var r=c.pick(n,t);a=c.assign({},e,r)}else a=c.isObject(t)?c.assign({},e,t):c.defaults(_defineProperty({},t,n),e);return a},y=function(e,t){var n=e.editorAPI,a=e.state,r=e.dsRead,i=t.selectedComponents||P(a);if(c.isEmpty(i))return{};var o=E(i,r),s=n.components.style.get(c.head(i)),u=t.selectedComponentType||n.selection.getSelectedComponentType();return{selectedComponents:i,compData:T(i,r),compProperties:S(i,r),compLayout:n.components.layout.getRelativeToStructure(i),compDesign:n.components.design.get(i),compStyleId:o,compStyle:s,compSkin:_(i,r),selectedComponentType:u,compBehaviors:m(i,r),isMobileEditor:g(a),isDesktopEditor:f(a),isDeveloperModeEnabled:n.developerMode.isEnabled()}},N=function(a,e){var n=e.selectedComponentType;return{validateDataItem:function(){return a(function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(e,t,n){var a;return(a=n.dsRead.data).isItemValid.apply(a,r)}}.apply(void 0,arguments))},updateStyle:function(){return a(function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(e,t,n){var a;return(a=n.editorAPI.components.style).update.apply(a,r)}}.apply(void 0,arguments))},openHelpCenter:function(e,t,n){return a(O(e,t,n))},updateProperties:function(){return a(function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(e,t,n){var a;return(a=n.editorAPI.components.properties).update.apply(a,r)}}.apply(void 0,arguments))},updateData:function(){return a(function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(e,t,n){var a;return(a=n.editorAPI.components.data).update.apply(a,r)}}.apply(void 0,arguments))},updateDesign:function(){return a(function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(e,t,n){var a;return(a=n.editorAPI.components.design).update.apply(a,r)}}.apply(void 0,arguments))},updateLayout:function(){return a(function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(e,t,n){var a;return(a=n.editorAPI.components.layout).updateRelativeToStructure.apply(a,r)}}.apply(void 0,arguments))},updateDock:function(){return a(function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(e,t,n){var a;return(a=n.editorAPI.components.layout).updateDock.apply(a,r)}}.apply(void 0,arguments))},setDock:function(){return a(function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(e,t,n){var a;return(a=n.editorAPI.components.layout).setDock.apply(a,r)}}.apply(void 0,arguments))},updateBehavior:function(){return a(function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(e,t,n){var a;return(a=n.editorAPI.components.behaviors).update.apply(a,r)}}.apply(void 0,arguments))},removeBehavior:function(){return a(function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(e,t,n){var a;return(a=n.editorAPI.components.behaviors).remove.apply(a,r)}}.apply(void 0,arguments))},getLinkValueAsString:function(){return a(function(){for(var e=arguments.length,i=Array(e),t=0;t<e;t++)i[t]=arguments[t];return function(e,t,n){var a,r=n.editorAPI;return(a=o.link).getLinkValueAsString.apply(a,[r].concat(i))}}.apply(void 0,arguments))},bi:{event:function(e,t){return a(I(e,t))},error:function(e,t){return a(M(e,t))}},replaceComponentPanel:function(e,t){return a((r=n,i=e,o=t,function(e,t,n){var a=n.editorAPI;return e(h(r||a.selection.getSelectedComponentType(),i,o))}));var r,i,o}}};return function(e){return o.hoc.connect(o.hoc.STORES.EDITOR_API,y,N)((t=p(e),a({displayName:i.recompose.wrapDisplayName(t,"compPanel"),propTypes:{compData:r.object,compDesign:r.object,compLayout:r.object.isRequired,compProperties:r.object,selectedComponentType:r.string.isRequired,openHelpCenter:r.func.isRequired,updateProperties:r.func.isRequired,updateData:r.func.isRequired,panelName:r.string.isRequired,updateDesign:r.func.isRequired,updateLayout:r.func.isRequired,updateDock:r.func.isRequired,setDock:r.func.isRequired,updateStyle:r.func.isRequired,updateBehavior:r.func.isRequired,removeBehavior:r.func.isRequired,compBehaviors:r.arrayOf(r.object),replaceComponentPanel:r.func.isRequired,isDeveloperModeEnabled:r.bool.isRequired,selectedComponents:r.arrayOf(r.object).isRequired},openHelpCenter:function(e,t){if(e){var n=!c.isNil(t),a={component:this.props.selectedComponentType,learn_more:n?!!t:null,panel_name:this.props.panelName,origin:d.BI.HELP.ORIGIN.PANEL};this.props.openHelpCenter(e,null,a)}},updateProperties:function(e,t,n){var a=R(this.props.compProperties,e,t);a.id=a&&a.id?a.id:this.props.compProperties&&this.props.compProperties.id,this.props.updateProperties(this.props.selectedComponents,a,n)},updateData:function(e,t,n){var a=R(this.props.compData,e,t);a.id=a&&a.id?a.id:this.props.compData&&this.props.compData.id,this.props.updateData(this.props.selectedComponents,a,n)},updateDesign:function(e,t,n){var a=R(this.props.compDesign,e,t);a.id=a&&a.id?a.id:this.props.compDesign&&this.props.compDesign.id,this.props.updateDesign(this.props.selectedComponents,a,!1,n)},updateLayout:function(e,t){var n=c.merge({},this.props.compLayout,e);this.props.updateLayout(this.props.selectedComponents,n,t)},updateDock:function(e){this.props.updateDock(this.props.selectedComponents,e)},setDock:function(e){this.props.setDock(this.props.selectedComponents,e)},updateStyle:function(e){this.props.updateStyle(this.props.selectedComponents,e)},updateBehavior:function(e,t,n){this.props.updateBehavior(this.props.selectedComponents,e,t,n)},removeBehavior:function(e,t,n){this.props.removeBehavior(this.props.selectedComponents,e,t,n)},hasLabel:function(){return!!this.props.compData.label},render:function(){var e=c.defaults({frameProps:o.panelUtils.getFrameProps(this.props),updateProperties:this.updateProperties,updateData:this.updateData,updateDesign:this.updateDesign,updateStyle:this.updateStyle,updateLayout:this.updateLayout,updateDock:this.updateDock,setDock:this.setDock,updateBehavior:this.updateBehavior,removeBehavior:this.removeBehavior,hasLabel:this.hasLabel,translate:o.translate},this.props);return n.createElement(t,e)}})));var t}}),define("stateManagement/components/components",["lodash","stateManagement/components/componentDataResolver","stateManagement/components/componentsSelectors","stateManagement/components/componentsActions","stateManagement/components/compPanel"],function(e,t,n,a,r){"use strict";return{selectors:e.assign({getEditorData:t.getEditorData},n),actions:a,hoc:{compPanel:r}}}),define("stateManagement/siteSegments/siteSegmentsActions",["lodash","stateManagement/components/components"],function(E,_){"use strict";return{setHeaderScrollBehavior:function(g,f){var m=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],S=arguments[3];return function(e,t,n){var a,r,i,o,s,u,c=n.editorAPI,l=E.find(m,{type:"scrub",viewMode:S});if(g.behaviorName){var d=c.behaviors.getDefinition(g.behaviorName),p=(a=d,r=f,i=g.animationName,o=S,s=r.id,u=E(a).pick(["name","type","params"]).assign({targetId:s,action:"scrollScrub",viewMode:o}).value(),i&&E.isArray(E.get(u,["params","animations"]))&&u.params.animations.push({name:i}),u);c.components.behaviors.update(f,p,p.action,p.viewMode)}else l&&c.components.behaviors.remove(f,l);e(_.actions.updateFixedPosition(f,!!g.fixedPosition))}}}}),define("stateManagement/siteSegments/siteSegmentsReducer",[],function(){"use strict";return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return arguments[1].type,e}}),define("stateManagement/siteSegments/siteSegmentsSelectors",["stateManagement/components/components"],function(e){"use strict";var n=e.selectors;return{getPagesContainerAbsLayout:function(e){var t=e.siteSegments.getPagesContainer();return n.getLayoutRelativeToScreen(e,t)}}}),define("stateManagement/siteSegments/siteSegments",["stateManagement/siteSegments/siteSegmentsActions","stateManagement/siteSegments/siteSegmentsReducer","stateManagement/siteSegments/siteSegmentsSelectors"],function(e,t,n){"use strict";return{actions:e,reducer:t,selectors:n}}),define("stateManagement/mobile/mobileWizard/mobileWizardActionTypes",[],function(){"use strict";return{SET_MOBILE_WIZARD_IS_ENABLED:"mobile-wizard-set-is-enabled",SET_MOBILE_WIZARD_IS_EXPANDED:"mobile-wizard-set-is-expanded",SET_MOBILE_WIZARD_OPENING_STATE:"mobile-wizard-set-opening-state",NEXT_STEP:"mobile-wizard-next-step",PREVIOUS_STEP:"mobile-wizard-previous-step",SET_TINY_MENU_AVAILABLE_SKINS:"mobile-wizard-set-tiny-menu-available-skins",SET_HEADER_ANIMATION_PROGRESS:"mobile-wizard-set-header-animation-progress",SET_BACK_TO_TOP:"mobile-wizard-set-back-to-top",SET_CURRENT_STEP:"mobile-wizard-set-current-step",SET_STEPS_TO_SHOW:"mobile-wizard-set-steps-to-show",SET_USER_SELECTIONS:"mobile-wizard-set-user-selections",SET_LAST_SAVED:"mobile-wizard-set-last-saved",SET_QAB_AVAILABLE_PRESETS:"mobile-wizard-set-qab-available-presets"}}),define("stateManagement/mobile/mobileWizard/mobileWizardActions",["lodash","constants","util","coreUtilsLib","stateManagement/mobile/mobileWizard/mobileWizardSelectors","stateManagement/siteSegments/siteSegments","stateManagement/panels/panels","coreBi","stateManagement/bi/bi","stateManagement/mobile/mobileWizard/mobileWizardActionTypes","experiment"],function(f,e,s,u,m,S,t,c,l,d,p){"use strict";var g=t.actions,E=function(e){return{type:d.SET_MOBILE_WIZARD_IS_ENABLED,enabled:e}},_=function(e){return{type:d.SET_MOBILE_WIZARD_OPENING_STATE,openingState:e}},T=function(e){return{type:d.SET_HEADER_ANIMATION_PROGRESS,animationInProgress:e}},P=function(e){return{type:d.SET_CURRENT_STEP,currentStep:e}},A=function(e,t){return{type:d.SET_USER_SELECTIONS,stepName:e,stepValue:t}},I=function(e,t){return{type:d.SET_LAST_SAVED,stepName:e,value:t}},o=function(e){return e.push({id:"NONE",structure:{}}),{type:d.SET_QAB_AVAILABLE_PRESETS,availablePresets:e}},M=s.headerScrollTypes,v="MOBILE",O=e.MOBILE.MOBILE_WIZARD.OPENING_STATE,n="TINY_MENU",i={id:n,type:v},h=["wysiwyg.viewer.skins.mobile.TinyMenuPullFromTopSkin","wysiwyg.viewer.skins.mobile.TinyMenuSkin"],R="wysiwyg.viewer.skins.mobile.TinyMenuFullScreenSkin",y="SITE_HEADER",N={id:y,type:v},C=void 0,D={id:"QUICK_ACTION_BAR",type:v},L=["QuickActionBar_Preset6","QuickActionBar_Preset4"],b=["QuickActionBar_Preset4"],B=["QuickActionBar_Preset4"],w={id:"BACK_TO_TOP_BUTTON",type:v},a=function(){return function(e,t,n){var a,r=n.dsRead,i=m.tinyMenu.getAvailableSkins(t());i.length||(i=r.theme.skins.getComponentSkins("wysiwyg.viewer.components.mobile.TinyMenu")),i=f.difference(i,h),e((a=i,{type:d.SET_TINY_MENU_AVAILABLE_SKINS,availableSkins:a}))}},U=function(e){var t=e.components.get.byType("wysiwyg.viewer.components.BackToTopButton")[0];if(t){var n=e.components.layout.getDock(t),a=e.mobile.qab.isEnabled()?87:20;f.get(n,["bottom","px"])!==a&&e.components.layout.updateDock(t,{bottom:{px:a}})}},k=function(){return function(e,t,n){var a=n.editorAPI,r=f.get(a.addPanel.getSectionsByComponentType("wysiwyg.viewer.components.QuickActionBar")[0],"props.items"),i=f.filter(r,function(e){return f.includes(L,e.id)});e(o(i))}},x=function(){return function(e,t,n){n.editorAPI.mobile.qab.isEnabled()||e(I("qab","NONE"))}},F=function(u){var n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return function(r,e,t){var i=t.dsRead,o=t.editorAPI,s=e();if(r(Y(D.id,void 0)),n&&(r(A("qab",u.id)),r(W(D.id,u.id))),"NONE"===u.id)return o.mobile.actionBar.version.revert(),void o.waitForChangesApplied(function(){U(o)});o.mobile.qab.isEnabled()||o.mobile.actionBar.version.upgrade(),o.waitForChangesApplied(function(){var e=m.qab.getAvailablePresets(s),t=f.find(e,{id:u.id}),n=f.cloneDeep(t.structure),a=f.pick(i.components.layout.get(D),["x","y","width","height"]);o.components.layout.update(D,a,!0),o.components.style.update(D,n.style),o.components.properties.update(D,n.props),f.includes(b,u.id)&&r(Y(D.id,"open")),U(o)})}},r=function(){return function(e,t,n){return n.editorAPI.documentMode.enableRenderFixedPositionContainers(!0)}},G=function(){return function(e,t,n){return n.editorAPI.documentMode.enableRenderFixedPositionContainers(!1)}},H=function(){return function(t,e,n){var a=n.dsRead,r=a.components.layout.getRelativeToStructure(N),i=a.components.behaviors.get(N)||[],o=M.getSelectedHeaderType(r,i,"MOBILE")||M.getDefaultHeaderType(),s=f.get(o,["value","scrollType"]);t(I("header",s)),t(j(function(){var e=f.get(o,["value","animationName"]);t(V(e))}))}},V=function(c){return function(e,t,n){var a=n.dsActions,r=n.dsRead,i=n.editorAPI,o=function(){e(T(!1))};C&&i.components.behaviors.stopPreviewAnimation([C],0);var s=r.components.layout.get(N).height;if(a.site.animateScroll(0,0,0),c){var u={action:"",duration:1.5,name:c,params:{compMeasures:{height:s},yoyo:!0,repeat:1}};C=i.components.behaviors.previewAnimation(N,u)}a.site.animateScroll(0,2*s,1.5,function(){a.site.animateScroll(0,0,1.5,o)})}},W=function(t,n){return function(e){e(l.actions.event(c.events.mobileEditor.mobileWizard.MOBILE_WIZARD_CHOOSE_OPTION,{current_step:t,selected_value:n}))}},K=function(u){return function(e,t){var n=t(),a=m.getStepsToShow(n),r=m.getCurrentStep(n),i=f.indexOf(a,r),o=a[i+u]||a[i],s=m.getCurrentStepSelectedValue(n);e(P(o)),e(l.actions.event(c.events.mobileEditor.mobileWizard.MOBILE_WIZARD_NAVIGATE,{current_step:r,selected_value:s,next_or_previous:0<u?"NEXT":"PREVIOUS"}))}},Y=function(a,r){return function(e,t,n){n.dsActions.documentMode.setComponentPreviewState(a,r)}},z=function(i){return function(e,t){var n=t(),a=m.getCurrentStep(n),r=m.getUserSelections(n);e(l.actions.event(c.events.mobileEditor.mobileWizard.MOBILE_WIZARD_FINISH,{current_step:a,tiny_menu_option:r.tinyMenu,site_header_option:r.header,quick_action_bar_option:r.qab,back_to_top_button_option:r.backToTop,finish_method:i}))}},q=function(){return function(e,t,n){var a=n.editorAPI;m.getIsMobileWizardEnabled(t())&&(e(_(O.FINISH)),window.setTimeout(function(){e(E(!1)),a.toolsControl.toggleHideTools(!1,!1),s.keyboardShortcuts.enable()},1700),window.setTimeout(function(){e(_(O.BEFORE))},3400))}},j=function(){var o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:f.noop;return function(e,t,n){var a=n.dsActions,r=n.dsRead.site.getScroll().y,i=u.scrollUtils.calcScrollDuration(r,0,!0);a.site.animateScroll(0,0,i,o)}},X=function(e,t,n){var a=e&&n.mobile.qab.isEnabled()?{bottom:{px:87}}:{};t.mobile.mobileOnlyComponents.toggleBackToTopButton(e,a)},Q=function(e){return e?"open":"close"},Z=function(t,n){var a=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];return function(e){t(n),a&&(e(A("tinyMenu",n)),e(W(i.id,n)))}};return{enableMobileWizard:function(){return function(e,t,n){var a=n.editorAPI,r=m.getIsMobileWizardEnabled(t()),i=a.isDesktopEditor(),o=a.preview.isInPreviewMode();i||r||o||function(e,t){if(e.isCurrentPageLandingPage()){var n=e.pages.getCurrentPageId(),a=f.reject(e.pages.getPagesData(),"isLandingPage"),r=e.homePage.get(),i=!!f.find(a,{id:r}),o=f.get(f.head(a),"id"),s=i?r:o;e.pages.navigateTo(s,t),e.store.dispatch(l.actions.event(c.events.mobileEditor.mobileWizard.MOBILE_WIZARD_NAVIGATE_TO_NONE_LANDING_PAGE,{current_page_id:n,next_page_id:s}))}else t()}(a,function(){s.keyboardShortcuts.disable(),e(E(!0)),a.toolsControl.toggleHideTools(!0,!1),window.setTimeout(function(){e(_(O.IN_PROGRESS))},100),e(l.actions.event(c.events.mobileEditor.mobileWizard.MOBILE_WIZARD_START))})}},disableMobileWizard:q,firstStepSkipClicked:function(){return function(e){e(q()),e(l.actions.event(c.events.mobileEditor.mobileWizard.MOBILE_WIZARD_FIRST_STEP_SKIP))}},scrollToTop:j,setCurrentStep:P,setNextStep:function(){return K(1)},setPreviousStep:function(){return K(-1)},skipWizard:function(){return function(e){e(z("SKIP")),e(q())}},setPreviewState:Y,buildWizardSteps:function(){return function(e,t,n){var a,r=n.editorAPI,i=n.dsActions,o=["MOBILE_WIZARD_FIRST_STEP","TINY_MENU","SITE_HEADER","QUICK_ACTION_BAR","BACK_TO_TOP_BUTTON","MOBILE_WIZARD_LAST_STEP"];n.dsRead.mobile.menuContainer.isExist()&&(o=f.without(o,"TINY_MENU")),e((a=o,{type:d.SET_STEPS_TO_SHOW,stepsToShow:a})),e(P(o[0])),e(g.closeAllPanels()),r.panelManager.closeAllPanels(),r.selection.deselectComponents(),i.renderPlugins.allowSiteOverflow(!0)}},clearAfterMobileWizardCloses:function(){return function(e,t,n){n.dsActions.renderPlugins.allowSiteOverflow(!1)}},setUserSelections:A,finishWizard:function(){return function(e){e(z("FINISH")),e(q())}},sendVideoCloseBiEvent:function(n){return function(e){var t=f.assign({origin:"go_to_mobile_editor",panel_name:"mobile_wizard_mobileEditorFirstTimeVideoPanel"},n);e(l.actions.event(c.events.mobileEditor.mobileWizard.MOBILE_WIZARD_VIDEO_CLOSE,t))}},setStepFromProgressBar:function(i){return function(e,t){var n=t(),a=m.getCurrentStep(n),r=m.getCurrentStepSelectedValue(n);e(P(i)),e(l.actions.event(c.events.mobileEditor.mobileWizard.MOBILE_WIZARD_PROGRESS_BAR_NAVIGATE,{current_step:a,next_step:i,selected_value:r}))}},wixLogoClick:function(){return function(e){e(l.actions.event(c.events.mobileEditor.mobileWizard.MOBILE_WIZARD_TOP_BAR_WIX_LOGO_CLICK))}},initTinyMenuStep:function(){return function(e,t){e(a()),e(function(e,t,n){var a=n.dsRead.components.skin.get(i);e(I("tinyMenu",a))}),e(j(function(){m.getCurrentStep(t())===n&&e(Y(i.id,"open"))}))}},setSelectedTinyMenu:Z,overrideDeprecatedTinyMenuSkinsIfNeeded:function(r){return function(e,t,n){var a=n.dsRead.components.skin.get(i);f.includes(h,a)&&(e(Z(r,R,!1)),e(I("tinyMenu",R)))}},initHeaderStep:function(){return function(e){e(H()),e(r())}},clearHeaderStep:function(){return function(e,t,n){var a=n.dsActions,r=n.editorAPI;e(G()),a.site.animateScroll(0,0,0),C&&r.components.behaviors.stopPreviewAnimation([C],0)}},setSelectedHeaderType:function(g){return function(e,t,n){var a=n.dsRead,r=n.dsActions,i=t(),o=m.header.getSelectedHeaderType(i),s=f.isEqual(o,g);if(!m.header.getAnimationProgress(i)||!s){e(T(!0));var u,c,l=(u=M.headerScrollTypesModel,c=g,f.find(u,function(e){return f.get(e,"value.scrollType")===c})),d=a.components.behaviors.get(N)||[],p=f.get(l,["value","animationName"]);e(A("header",g)),e(S.actions.setHeaderScrollBehavior(l.value,N,d,v)),e(W(y,g)),r.waitForChangesApplied(function(){e(V(p))})}}},initQabStep:function(){return function(e,t,n){var a=n.editorAPI,r=t();e(k()),e(x());var i=m.qab.getSelectedQab(r);i?f.includes(b,i)&&e(Y(D.id,"open")):(e(function(e,t){var n=t(),a=m.qab.getAvailablePresets(n),r=f.find(a,{id:"QuickActionBar_Preset4"});r&&(e(F(r,!1)),e(I("qab",r.id)))}),U(a))}},setSelectedQabPreset:F,setAvailableQabPresets:o,initBackToTopStep:function(){return function(e,t,n){var a=n.dsActions,r=n.dsRead,i=n.editorAPI,o=t(),s=m.backToTop.getSelectedBackToTop(o)||m.getLastSaved(o,"backToTop"),u=void 0;s?u="true"===s:(u=!!i.mobile.mobileOnlyComponents.isMobileOnlyComponentExistOnStructure(w.id),e(I("backToTop",f.toString(u)))),p.isOpen("se_backToTopButton")?(u&&r.mobile.mobileOnlyComponents.isLegacyBackToTopButton(w)&&a.mobile.mobileOnlyComponents.toggleBackToTopButton(!1),X(u,a,i)):(e(Y(w.id,Q(u))),e(function(e,t,n){var a=n.dsActions;a.documentMode.enableBackToTopButton(!0);var r=m.qab.getSelectedQab(t());f.includes(B,r)&&a.renderPlugins.hideComp(D)}))}},clearBackToTopStep:function(){return function(e){p.isOpen("se_backToTopButton")||(e(function(e,t,n){var a=n.dsActions;a.documentMode.enableBackToTopButton(!1),a.renderPlugins.showComp(D)}),e(Y(w.id,void 0)))}},setSelectedBackToTop:function(o){return function(e,t,n){var a=n.dsActions,r=n.editorAPI,i=f.toString(o);e(A("backToTop",i)),p.isOpen("se_backToTopButton")?X(o,a,r):(r.mobile.mobileOnlyComponents.enableBackToTopButton(o),r.waitForChangesApplied(function(){e(Y(w.id,Q(o)))})),e(W(w.id,i))}}}}),define("stateManagement/mobile/intros/introsActionTypes",[],function(){"use strict";return{ENABLE_MOBILE_INTROS:"enable-mobile-intros",DISABLE_MOBILE_INTROS:"disable-mobile-intros"}}),define("stateManagement/mobile/intros/introsActions",["stateManagement/mobile/intros/introsActionTypes"],function(e){"use strict";return{enable:function(){return{type:e.ENABLE_MOBILE_INTROS}},disable:function(){return{type:e.DISABLE_MOBILE_INTROS}}}}),define("stateManagement/mobile/mobileActions",["stateManagement/mobile/hiddenItems/hiddenItemsActions","stateManagement/mobile/mobileWizard/mobileWizardActions","stateManagement/mobile/intros/introsActions"],function(e,t,n){"use strict";return{setMobileOptimizedSite:function(a){return function(e,t,n){return n.dsActions.mobile.enableOptimizedView(a)}},hiddenItems:e,mobileWizard:t,intros:n}}),define("stateManagement/mobile/hiddenItems/hiddenItemsReducer",["lodash","reduxLibs","stateManagement/store/initialEditorState","stateManagement/mobile/hiddenItems/hiddenItemsActionTypes"],function(n,e,a,r){"use strict";return e.redux.combineReducers({isAddingHiddenItemInProgress:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.mobile.hiddenItems.isAddingHiddenItemInProgress,t=arguments[1];switch(t.type){case r.SET_IS_ADDING_COMPONENT_IN_PROGRESS:return t.isAddingHiddenItemInProgress;default:return e}},hoveredComponent:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.mobile.hiddenItems.hoveredComponent,t=arguments[1];switch(t.type){case r.SET_HIDDEN_ITEMS_HOVERED_COMPONENT:return t.hoveredComponent;default:return e}},masterPageHiddenComponents:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.mobile.hiddenItems.masterPageHiddenComponents,t=arguments[1];switch(t.type){case r.SET_HIDDEN_ITEMS_MASTER_PAGE_COMPS:return t.hiddenComponents;case r.REMOVE_HIDDEN_ITEM_FROM_MASTER_PAGE_LIST:return n.reject(e,{compId:t.compId});default:return e}},currentPageHiddenComponents:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.mobile.hiddenItems.currentPageHiddenComponents,t=arguments[1];switch(t.type){case r.SET_HIDDEN_ITEMS_CURRENT_PAGE_COMPS:return t.hiddenComponents;case r.REMOVE_HIDDEN_ITEM_FROM_CURRENT_PAGE_LIST:return n.reject(e,{compId:t.compId});default:return e}}})}),define("stateManagement/mobile/mobileWizard/mobileWizardTinyMenuReducer",["lodash","stateManagement/store/initialEditorState","stateManagement/mobile/mobileWizard/mobileWizardActionTypes"],function(n,a,r){"use strict";return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.mobile.mobileWizard.tinyMenu,t=arguments[1];switch(t.type){case r.SET_TINY_MENU_AVAILABLE_SKINS:return n.assign({},e,{availableSkins:t.availableSkins});default:return e}}}),define("stateManagement/mobile/mobileWizard/mobileWizardHeaderReducer",["lodash","stateManagement/store/initialEditorState","stateManagement/mobile/mobileWizard/mobileWizardActionTypes"],function(n,a,r){"use strict";return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.mobile.mobileWizard.header,t=arguments[1];switch(t.type){case r.SET_HEADER_ANIMATION_PROGRESS:return n.assign({},e,{animationInProgress:t.animationInProgress});default:return e}}}),define("stateManagement/mobile/mobileWizard/mobileWizardQabReducer",["lodash","stateManagement/store/initialEditorState","stateManagement/mobile/mobileWizard/mobileWizardActionTypes"],function(n,a,r){"use strict";return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.mobile.mobileWizard.qab,t=arguments[1];switch(t.type){case r.SET_QAB_AVAILABLE_PRESETS:return n.assign({},e,{availablePresets:t.availablePresets});default:return e}}}),define("stateManagement/mobile/mobileWizard/mobileWizardReducer",["lodash","reduxLibs","stateManagement/store/initialEditorState","stateManagement/mobile/mobileWizard/mobileWizardActionTypes","stateManagement/mobile/mobileWizard/mobileWizardTinyMenuReducer","stateManagement/mobile/mobileWizard/mobileWizardHeaderReducer","stateManagement/mobile/mobileWizard/mobileWizardQabReducer"],function(n,e,a,r,t,i,o){"use strict";return e.redux.combineReducers({enabled:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.mobile.mobileWizard.enabled,t=arguments[1];switch(t.type){case r.SET_MOBILE_WIZARD_IS_ENABLED:return t.enabled;default:return e}},openingState:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.mobile.mobileWizard.openingState,t=arguments[1];switch(t.type){case r.SET_MOBILE_WIZARD_OPENING_STATE:return t.openingState;default:return e}},currentStep:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.mobile.mobileWizard.currentStep,t=arguments[1];switch(t.type){case r.SET_CURRENT_STEP:return t.currentStep;default:return e}},stepsToShow:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.mobile.mobileWizard.stepsToShow,t=arguments[1];switch(t.type){case r.SET_STEPS_TO_SHOW:return t.stepsToShow;default:return e}},userSelections:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.mobile.mobileWizard.userSelections,t=arguments[1];switch(t.type){case r.SET_USER_SELECTIONS:return n.assign({},e,_defineProperty({},t.stepName,t.stepValue));default:return e}},lastSaved:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.mobile.mobileWizard.lastSaved,t=arguments[1];switch(t.type){case r.SET_LAST_SAVED:return n.assign({},e,_defineProperty({},t.stepName,t.value));default:return e}},tinyMenu:t,header:i,qab:o})}),define("stateManagement/mobile/intros/introsReducer",["stateManagement/store/initialEditorState","stateManagement/mobile/intros/introsActionTypes"],function(t,e){"use strict";var n=e.ENABLE_MOBILE_INTROS,a=e.DISABLE_MOBILE_INTROS;return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:t.mobile.introsEnabled;switch(arguments[1].type){case n:return!0;case a:return!1;default:return e}}}),define("stateManagement/mobile/mobileReducer",["lodash","reduxLibs","stateManagement/store/initialEditorState","stateManagement/mobile/hiddenItems/hiddenItemsReducer","stateManagement/mobile/mobileWizard/mobileWizardReducer","stateManagement/mobile/intros/introsReducer"],function(e,t,n,a,r,i){"use strict";return t.redux.combineReducers({isHiddenItemsCounterVisible:function(){return 0<arguments.length&&void 0!==arguments[0]?arguments[0]:n.mobile.isHiddenItemsCounterVisible},reAddedHiddenElement:function(){return 0<arguments.length&&void 0!==arguments[0]?arguments[0]:n.mobile.reAddedHiddenElement},hiddenItems:a,mobileWizard:r,introsEnabled:i})}),define("stateManagement/mobile/mobile",["stateManagement/mobile/mobileActions","stateManagement/mobile/mobileReducer","stateManagement/mobile/mobileSelectors"],function(e,t,n){"use strict";return{actions:e,reducer:t,selectors:n}}),define("stateManagement/applicationStudio/applicationStudioPresets.json",[],function(){return{DEFAULT_WIDGET_ROOT_STRUCTURE:{componentType:"wysiwyg.viewer.components.MediaBox",components:[],style:"mc1",type:"Container",layout:{docked:{top:{px:45},hCenter:{px:0}},x:0,y:0,width:600,height:400},design:{type:"MediaContainerDesignData",background:{type:"BackgroundMedia",color:"#FFF",alignType:"center",fittingType:"fill",scrollType:"none",colorOverlay:"",colorOverlayOpacity:0},cssStyle:{},themeMappings:{}}}}}),define("stateManagement/sectionedPanel/sectionedPanelSelectors",[],function(){"use strict";return{openDockedSections:function(e){return e.sectionedPanel.openDockedSections},shouldShow:function(e){return e.sectionedPanel.shouldShow}}}),define("stateManagement/sectionedPanel/sectionedPanelActionTypes",[],function(){"use strict";return{TOGGLE_SECTION:"toggleSection",OPEN_SECTION:"openSection",CLOSE_SECTION:"closeSection",DISPLAY_PANEL:"displayPanel"}}),define("stateManagement/sectionedPanel/sectionedPanelActions",["stateManagement/sectionedPanel/sectionedPanelActionTypes","stateManagement/bi/bi","stateManagement/userPreferences/userPreferences","constants","coreBi","lodash"],function(o,e,t,n,a,i){"use strict";var r,s,u=e.actions.event,c=t.actions.setSiteUserPreferences,l=n.DOCKED_PANEL_SECTIONS,d=(_defineProperty(r={},l.PROPERTIES,n.USER_PREFS.VIEW_TOOLS.DEVELOPER_TOOLBAR_ENABLED),_defineProperty(r,l.WIDGET_PUBLIC_API,n.USER_PREFS.DOCKED_PANEL_SECTIONS.WIDGET_PUBLIC_API_ENABLED),r),p=(_defineProperty(s={},l.PROPERTIES,a.events.PROPERTIES_SECTION_TOGGLE),_defineProperty(s,l.WIDGET_PUBLIC_API,a.events.WIDGET_PUBLIC_API),s),g=function(e,t,n,a){if(i.isUndefined(p[t])||i.isUndefined(d[t]))throw new Error("Docked section "+t+" should have BiEvent and Preferences definition");var r=!i.includes(e,t);a(u(p[t],{site_id:n,state:r?"open":"close"})),a(c(d[t],r))};return{toggleSection:function(i){return function(e,t,n){var a,r=n.dsRead;g(t().openDockedSections,i,r.generalInfo.getSiteId(),e),e((a=i,{type:o.TOGGLE_SECTION,sectionName:a}))}},openSection:function(i){return function(e,t,n){var a,r=n.dsRead;g(t().openDockedSections,i,r.generalInfo.getSiteId(),e),e((a=i,{type:o.OPEN_SECTION,sectionName:a}))}},displayPanel:function(e){return{type:o.DISPLAY_PANEL,shouldShow:e}},closeSection:function(i){return function(e,t,n){var a,r=n.dsRead;g(t().openDockedSections,i,r.generalInfo.getSiteId(),e),e((a=i,{type:o.CLOSE_SECTION,sectionName:a}))}}}}),define("stateManagement/applicationStudio/applicationStudioOverrideHelpers",["lodash","experiment","constants","stateManagement/sectionedPanel/sectionedPanelSelectors","stateManagement/sectionedPanel/sectionedPanelActions","stateManagement/panels/panelsActions","addPanelDataConsts","util"],function(M,v,O,h,R,y,e,N){"use strict";var C=function(e,t,n){var a=e.KEY;return _defineProperty({},a,M.assign({},M.get(t,[a],{}),n))},D=O.OVERRIDDEN,L=O.APP_STUDIO,a=e.CATEGORIES_ID,r=function(e){return t(e,a.REPEATER,"oneItemRepeaterSection",0),e},t=function(e,t,n,a){var r,i,o,s=M.find(e,{id:t});return s.overriddenSections=(r=s.overriddenSections,o={sectionName:n,__isRef:!0,__isExtraItem:!0,id:"categoryId"+(i=a)},[].concat(_toConsumableArray(r.slice(0,i)),[o],_toConsumableArray(r.slice(i)))),e};return{getOverriddenTopBarItems:function(e,r){var t,n,a,i,o=D.TOP_BAR,s=o.MENU_ITEMS,u=o.QUICK_NAVIGATION,c=e.topBar.overridden,l=O.ROOT_COMPS.TOPBAR,d=l.TOOLS_MENU_ITEMS,p=l.SITE_MENU_ITEMS,g=l.CODE_MENU_ITEMS,f=l.MENU_BAR_ITEMS,m=O.ROOT_COMPS.TOPBAR.MENU_BAR_ITEMS.TOOLS,S=M.assign({},c.menuItems,_defineProperty({},m,M.assign((t=s.TOOLS_PROPERTIES_PANEL,n=c.menuItems[m],a=t.KEY,i=t.SHOULD_OPEN_AS_SECTION,C({KEY:a},n,_defineProperty({},i,!0)))))),E=M.assign({},c[u.KEY],_defineProperty({},u.IS_HIDDEN,!0)),_=[{key:f.SITE,title:"AppStudio_TopBar_App",condition:function(){return v.isOpen("se_appStudioAppMenu")}},{key:f.TOOLS},{key:f.CODE,title:"AppStudio_TopBar_Resources",getOverrides:function(){var e;return _defineProperty(e={},g.CODE_HEADER,N.translate("AppStudio_TopBar_Resources_Title")),_defineProperty(e,g.CODE_SUB_HEADER,N.translate("AppStudio_TopBar_Resources_Subtitle")),_defineProperty(e,g.CODE_ON_LIST_ITEMS,[{item_name:"Documentation",url:"http://wix.to/wcBqAF8",text:"AppStudio_TopBar_Resources_Link1"},{item_name:"Forum",url:"http://wix.to/yMCyAGA",text:"AppStudio_TopBar_Resources_Link2"},{item_name:"Code",url:"http://wix.to/dMC0AGA",text:"AppStudio_TopBar_Resources_Link3"}]),_defineProperty(e,g.CODE_SYMBOL,"appStudioWixCodeMenu"),e},devToolsButtonEnabled:!1},{key:f.HELP}],T=[{key:p.SAVE,leftTitle:"AppStudio_TopBar_App_Save_Label",rightTitle:"AppStudio_TopBar_App_Save_Promotion_Title",description:"AppStudio_TopBar_App_Save_Promotion_Text"},{key:p.PREVIEW,leftTitle:"AppStudio_TopBar_App_Preview_Label",rightTitle:"AppStudio_TopBar_App_Preview_Promotion_Title",description:"AppStudio_TopBar_App_Preview_Promotion_Text"},{key:p.PUBLISH,leftTitle:"AppStudio_TopBar_App_Build_Label",rightTitle:"AppStudio_TopBar_App_Build_Promotion_Title",description:"AppStudio_TopBar_App_Build_Promotion_Text",symbolName:"appStudioTopBarBuild"},{key:"separator",isSeparator:!0,__isExtraItem:!0},{key:"namespace",automationId:"list-item-namespace",leftTitle:"AppStudio_TopBar_App_Namespace_Label",rightTitle:"AppStudio_TopBar_App_Namespace_Promotion_Title",description:"AppStudio_TopBar_App_Namespace_Promotion_Text",symbolName:"appStudioTopBarNamespace",__isExtraItem:!0,onClick:function(){r(y.updateOrOpenPanel("appStudio.panels.appSettingsPanel",{initialTab:L.SETTINGS_PANEL.OPTIONS.NAMESPACE},!0))},condition:function(){return!!v.isOpen("se_appBuilderCollections")}},{key:"AppLink",automationId:"list-item-app-link",leftTitle:"AppStudio_TopBar_App_AppLink_Label",rightTitle:"AppStudio_TopBar_App_AppLink_Promotion_Title",description:"AppStudio_TopBar_App_AppLink_Promotion_Text",symbolName:"appStudioTopBarShareLink",__isExtraItem:!0,onClick:function(){r(y.updateOrOpenPanel(L.SETTINGS_PANEL.NAME,{initialTab:L.SETTINGS_PANEL.OPTIONS.APP_LINK},!0))}}],P=[{key:O.ROOT_COMPS.TOPBAR.HELP_MENU_ITEMS.HELP_CENTER},{key:O.ROOT_COMPS.TOPBAR.HELP_MENU_ITEMS.HELP_KB_SHORTCUTS},{key:"separator",isSeparator:!0},{key:O.ROOT_COMPS.TOPBAR.HELP_MENU_ITEMS.HELP_TERMS_OF_USE},{key:O.ROOT_COMPS.TOPBAR.HELP_MENU_ITEMS.HELP_PRIVACY_POLICY}],A=[{key:O.ROOT_COMPS.TOPBAR.DROP_PANELS.CUSTOM.MOBILE_OPTIMIZE_LAYOUT_UNDO},{key:O.ROOT_COMPS.TOPBAR.DROP_PANELS.CUSTOM.AUTO_SAVE,dropPanelData:{title:"AppStudio_TopBar_AppSaved_Tooltip_Title",linkText:null,linkAction:null}},{key:O.ROOT_COMPS.TOPBAR.DROP_PANELS.CUSTOM.BACK_TO_ADI},{key:O.ROOT_COMPS.TOPBAR.DROP_PANELS.CUSTOM.DISABLE_AUTO_SAVE},{key:O.ROOT_COMPS.TOPBAR.DROP_PANELS.CUSTOM.ENABLE_AUTO_SAVE}],I={getMenuOverrides:function(){return _},getSiteMenuOverrides:function(){return M.reject(T,function(e){return e.condition&&!e.condition()})},getToolsMenuOverrides:function(e){var t=h.openDockedSections,n=M.some(t(e),function(e){return e===O.DOCKED_PANEL_SECTIONS.WIDGET_PUBLIC_API}),a=O.DOCKED_PANEL_SECTIONS.WIDGET_PUBLIC_API;return[{key:d.TOOLBAR},{key:d.RULERS},{key:"separator",isSeparator:!0,__isExtraItem:!0},{key:d.DEVELOPER_MODE_TITLE},{key:d.PROPERTIES_TOOLBAR},{key:d.HIDDEN_ELEMENTS},{key:d.WIDGET_PUBLIC_API,automationId:"list-item-widget-public-api",isCheckbox:!0,checkboxValue:n,leftTitle:"TOPBAR_VIEW_API",rightTitle:"TOPBAR_VIEW_API",description:"TOPBAR_VIEW_API_BODY",symbolName:"appStudioTopBarWidgetAPI",onClick:function(){r(R.toggleSection(a))},__isExtraItem:!0}]},getHelpMenuOverrides:function(){return P},getRightButtonsOverrides:function(){return[{key:O.ROOT_COMPS.TOPBAR.BUTTONS.UNDO},{key:O.ROOT_COMPS.TOPBAR.BUTTONS.REDO},{key:O.ROOT_COMPS.TOPBAR.BUTTONS.SAVE,dropPanelData:{title:"TOPBAR_SAVE_TOOLTIP_TITLE",body:"AppStudio_TopBar_Save_Tooltip_Text",linkText:null,linkAction:null}},{key:O.ROOT_COMPS.TOPBAR.BUTTONS.PREVIEW,tooltipData:{text:"AppStudio_TopBar_Preview_Tooltip_Text"}},{key:O.ROOT_COMPS.TOPBAR.BUTTONS.PUBLISH,label:N.translate("AppStudio_Package_Button"),dropPanelData:{title:"AppStudio_Package_Button",body:"AppStudio_TopBar_Package_Tooltip_Text",linkText:null,linkAction:null},extraClassName:"app-studio-package"},{key:O.ROOT_COMPS.TOPBAR.BUTTONS.BACK_TO_EDITOR,label:N.translate("AppStudio_TopBar_Preview_BacktoBuilder")}]},getLeftButtonsOverrides:function(){return[{key:O.ROOT_COMPS.TOPBAR.BUTTONS.DESKTOP_MODE,tooltipData:{text:"AppStudio_TopBar_Desktop_Tooltip_Text"}},{key:O.ROOT_COMPS.TOPBAR.BUTTONS.MOBILE_MODE,tooltipData:{text:"AppStudio_TopBar_Mobile_Tooltip_Text"}}]},getCustomDropPanelsOverrides:function(){return A}};return M.assign({},c,{menuItems:S,quickNavigation:E,overrideGetters:I})},getOverriddenAddPanelItems:function(){var e=[{categoryId:a.TEXT,sectionName:["section_1","titlesSection","paragraphsSection"]},{categoryId:a.IMAGE,sectionName:["myUploadsSection","imageCollectionsSection","mySocialImagesSection"]},{categoryId:a.GALLERY,sectionName:["gridGalleriesSection","sliderGalleriesSection"]},{categoryId:a.VECTOR_ART,sectionName:["campaign_featuredSection","featuredSection","iconsSection","animalNatureSection","logosBadgesSection","charactersSection"]},{categoryId:a.VECTOR_SHAPE,sectionName:["section_1","section_2","basicShapesSection","arrowsSection","horizontalLinesSection","verticalLinesSection"]},{categoryId:a.BOX_SLIDE_SHOW,sectionName:["boxSlideShow980Section","boxSlideShowSection","hoverBoxSection"]},{categoryId:a.BUTTON,sectionName:["cashierButtons","section_1","section_2","textButtonsSection","iconButtonsSection"]},{categoryId:a.BOX,sectionName:["section_1","section_2","containerBoxesSection","hoverBoxSection"]},{categoryId:a.REPEATER,sectionName:["gridSection"]},{categoryId:a.VIDEO,sectionName:["socialVideoSection","videoBoxSection","videoBoxTransparentSection"]},{categoryId:a.MUSIC,sectionName:["section_1","section_2","singleTrackPlayerSection","singleTrackPlayerSection2","iTunesDownloadButtonSection"]},{categoryId:a.SOCIAL,sectionName:["section_1","section_2","socialBarSection","facebookSection","twitterSection","pinterestSection","youtubeSocialSection","vkSection","spotifySocialSection"]},{categoryId:a.DEVELOPER,sectionName:["textInputSection","textAreaSection","richTextBoxSection","radioGroupSection","checkboxGroupSection","selectionSection","checkboxSectionOld","checkboxSection","ratingsInputSection","ratingsDisplaySection","sliderSection","paginationSection","toggleSwitchSection","fileUploaderSection","datePickerSection","timePickerSection","addressInputSection"]},{categoryId:a.OTHER,sectionName:["htmlFlashSection","paypalButtonsSection","googleMapsSquareSection","googleMapsGenericSection","fileDownloadButtonsSection"]}],t=function(e){return{sectionName:e,sectionFooter:null}},n=M(e).map(function(e){return{id:e.categoryId,overriddenSections:M.map(e.sectionName,t)}}).thru(r).value();return v.isOpen("se_appBuilderAllAddPanel")?void 0:n},getOverriddenLetfBarButtons:function(){return{desktop:[{key:O.ROOT_COMPS.LEFTBAR.ADD_ID}],mobile:[]}},getOverriddenLeftTreeItems:function(){var e=D.LEFT_TREE,t=O.ROOT_COMPS.LEFTTREE;return{overriddenItems:[{key:e.APP_BUILDER_LEFT_TREE_HEADER.KEY,moduleName:"appStudio.components.appBuilderLeftTreeHeader",__isExtraItem:!0},{key:e.WIDGETS_VIEW.KEY,moduleName:"appStudio.components.widgetsView",__isExtraItem:!0},{key:e.CUSTOM_TYPES_VIEW.KEY,moduleName:"appStudio.components.customTypesView",shouldShow:!!v.isOpen("se_appBuilderPropertyAsSchema"),__isExtraItem:!0},{key:t.COLLECTIONS,shouldShow:!!v.isOpen("se_appBuilderCollections")}]}},getOverriddenDesignPanelSections:function(e){var t,n,a,r,i=D.DESIGN_PANEL.MORE_GALLERIES,o=i.ID,s=i.IS_HIDDEN;return M.defaultsDeep((a=(t={KEY:o,IS_HIDDEN:s}).KEY,r=t.IS_HIDDEN,C({KEY:a},n,_defineProperty({},r,!0))),e.designPanel.overridden)},getOverriddenLinkPanelSections:function(){return[{key:O.LINK_PANEL.noLinkTabLabel},{key:O.LINK_PANEL.externalLinkTabLabel},{key:O.LINK_PANEL.edgeAnchorLinksLabel},{key:O.LINK_PANEL.docLinkTabLabel},{key:O.LINK_PANEL.emailLinkTabLabel},{key:O.LINK_PANEL.phoneLinkTabLabel},{key:O.LINK_PANEL.whatsAppLinkTabLabel},{key:O.LINK_PANEL.addressLinkTabLabel}]},getOverriddenDomainPenelData:function(){return{panelName:"appStudio.panels.namePanel"}},getOverriddenSiteDefaultName:function(){return"AppStudio_Publish_App_Default_Name"},getOverriddenWixCodeIdeData:function(){return{showTabs:!1,topBarTitleTemplate:"WixCode_CodePanel_TopBar_Widget_Title"}},getOverrideExternalLinks:function(){var e,t=D.EXTERNAL_LINKS,n=t.TERM_OF_USE,a=t.PRIVACY;return _defineProperty(e={},n.KEY,_defineProperty({},n.LINK,"app-builder/home/terms-of-use")),_defineProperty(e,a.KEY,_defineProperty({},a.LINK,"about/privacy")),e}}}),define("stateManagement/applicationStudio/applicationStudioActionTypes",[],function(){"use strict";return{SET_CURR_PACKAGE_TASK:"SET_CURR_PACKAGE_TASK",SET_APP_DEF_ID:"SET_APP_DEF_ID",SET_APP_NAME:"SET_APP_NAME",SET_APP_VERSION:"SET_APP_VERSION",SET_APP_NAMESPACE:"SET_APP_NAMESPACE",SET_CURR_BUILD_VERSION:"SET_CURR_BUILD_VERSION",SET_IS_FIRST_APP_BUILD:"SET_IS_FIRST_APP_BUILD",SET_IS_PACKAGING:"SET_IS_PACKAGING",SET_NUM_OF_TASKS_DONE:"SET_NUM_OF_TASKS_DONE",SET_PACKAGE_ERROR:"SET_IS_PACKAGE_ERROR",SET_PACKAGE_STEP:"SET_PACKAGE_STEP",SET_TOTAL_NUM_OF_PACKAGE_TASKS:"SET_TOTAL_NUM_OF_PACKAGE_TASKS",SET_APP_LINK:"SET_APP_LINK",SET_IS_CREATING_APP_LINK:"SET_IS_CREATING_APP_LINK",SET_IS_CREATE_LINK_FAIL:"SET_IS_CREATE_LINK_FAIL",SET_IS_REVOKING_APP_LINK:"SET_IS_REVOKING_APP_LINK",SET_IS_REVOKE_LINK_FAIL:"SET_IS_REVOKE_LINK_FAIL"}}),define("stateManagement/applicationStudio/applicationStudioSelectors",[],function(){"use strict";return{getCurrBuildVersion:function(e){return e.applicationStudio.packageAndPublish.currBuildVersion},getCurrTaskDisplayName:function(e){return e.applicationStudio.packageAndPublish.currTask},isFirstAppBuild:function(e){return e.applicationStudio.packageAndPublish.isFirstAppBuild},isPackageInProgress:function(e){return e.applicationStudio.packageAndPublish.isPackaging},getNumOfTasksDone:function(e){return e.applicationStudio.packageAndPublish.numOfTasksDone},getPackageErrorMessage:function(e){return e.applicationStudio.packageAndPublish.errorMessage},getPackageStep:function(e){return e.applicationStudio.packageAndPublish.packageStep},getTotalNumOfPackageTasks:function(e){return e.applicationStudio.packageAndPublish.totalNumOfPackageTasks},getAppLink:function(e){return e.applicationStudio.appLink.link},isCreatingAppLink:function(e){return e.applicationStudio.appLink.creating},isCreateAppLinkFail:function(e){return e.applicationStudio.appLink.fail},isRevokingAppLink:function(e){return e.applicationStudio.appLink.revoking},isRevokeAppLinkFail:function(e){return e.applicationStudio.appLink.failRevoke},getAppName:function(e){return e.applicationStudio.appInfo.appName},getAppVersion:function(e){return e.applicationStudio.packageAndPublish.appVersion},getNamespace:function(e){return e.applicationStudio.appInfo.namespace},getAppDefId:function(e){return e.applicationStudio.appInfo.appDefId}}}),define("stateManagement/applicationStudio/packageAndPublish/packageAndPublishActions",["lodash","experiment","stateManagement/applicationStudio/applicationStudioActionTypes","stateManagement/applicationStudio/applicationStudioSelectors","stateManagement/panels/panelsActions","app-studio-code-parser","util","constants"],function(s,u,t,c,i,e,l,n){"use strict";var a=e.parser,r=n.APP_STUDIO,o=r.PACKAGE_STEPS,d=r.PACKAGE_ERRORS,p=r.BUILD_VERSION_TYPES,g=r.PACKAGE,f=function(e){function a(e,t){_classCallCheck(this,a);var n=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,t));return n.originalError=e,n.packageStep=t,n}return _inherits(a,Error),a}(),m=function(){return function(e){e(F(o.PACKAGE_TASKS)),e(S()),e(i.updateOrOpenPanel("appStudio.panels.packagePanel"))}},S=function(){return function(t,e){t(B(0)),t(U(null));var n=c.isFirstAppBuild(e());return function(t){var e=b();t(w(e.length));var n=Promise.resolve();return s.forEach(e,function(e){n=n.then(function(){return t(U(e.displayName)),t(e.performTask())}).then(function(){return t(_())})}),n}(t).then(function(){l.fedopsLogger.interactionEnded(l.fedopsLogger.INTERACTIONS.APP_STUDIO_PACKAGE),E(n,t)}).catch(function(e){l.ravenUtils.captureError(e.originalError,{tags:{packageStep:e.packageStep,packagePublishTasks:!0}}),t(x(e.packageStep)),t(V(!1))})}},E=function(e,t){var n=function(){return t(V(!1))},a=g.DURATION_TO_SHOW_RESULT;e&&(n=function(){t(F(o.FIRST_PUBLISH_RESULT)),t(V(!1))},a=g.DURATION_TO_SHOW_FIRST_RESULT),t(U("AppStudio_Publish_Popup_Loader_Text5")),window.setTimeout(n,a)},_=function(){return function(e,t){var n=c.getNumOfTasksDone(t());e(B(n+1))}},T=function(){return function(r,e,t){var i=t.dsActions,o=t.dsRead;return new Promise(function(e,t){try{var n=i.wixCode.fileSystem.getRoots().pages;i.wixCode.fileSystem.getChildren(n).then(function(e){var a=A(e,o),t=s.map(a,function(e){return i.wixCode.fileSystem.readFile(e)});return Promise.all(t).then(function(e){return s.forEach(e,function(e,t){var n=P(e);I(a[t],Object.values(n),r,o)}),new Promise(function(e){return i.waitForChangesApplied(e)})})}).then(e).catch(function(e){t(new f(e,d.PARSE_CODE_ERROR))})}catch(e){t(new f(e,d.PARSE_CODE_ERROR))}})}},P=function(e){var t=a.parse(e);if(null===t)throw l.fedopsLogger.interactionEnded(l.fedopsLogger.INTERACTIONS.APP_STUDIO_PACKAGE),new Error("user syntax error");return t},A=function(e,n){return s.filter(e,function(e){var t=v(e.name);return n.pages.isWidgetPage(t)})},I=function(e,t,n,a){var r=v(e.name),i=a.appStudio.widgets.getByRootCompId(r);i&&n(M(i,t))},M=function(a,r){return function(e,t,n){n.dsActions.appStudio.widgets.functions.set(a,r)}},v=function(e){return e.endsWith(".js")?e.substring(0,e.length-3):e},O=function(){return function(e,t,n){var o=n.dsRead,s=n.dsActions;return new Promise(function(e,t){try{var n=s.wixCode.fileSystem.getRoots().public.location+"app-metadata.json",a=s.wixCode.fileSystem.getVirtualDescriptor(n,!1),r=o.appStudio.widgets.getAllSerialized(),i={};r.forEach(function(e){var t=h(e);i[t]=R(e.widgetApi)}),s.wixCode.fileSystem.writeFile(a,JSON.stringify(i)).then(e).catch(function(e){t(new f(e,d.SAVE_TO_VFS))})}catch(e){t(new f(e,d.SAVE_TO_VFS))}})}},h=function(e){return"#"===e.rootCompId[0]?e.rootCompId.substring(1):e.rootCompId},R=function(e){var t=s(e).pick(["functions","properties","events"]).mapValues(function(e){return s.map(e,"name")}).value();if(s.isEmpty(e.propertiesSchemas))return t;var n=s.flatMap(e.propertiesSchemas,function(e){return s.keys(e.structure)});return s.defaults({properties:n},t)},y=function(){return function(a,e,t){var r=t.editorAPI;return new Promise(function(e,t){var n=u.isOpen("se_refreshOnConcurrentEditing")?{}:{rejectOnConcurrentSaveCancel:!0};r.saveManager.saveInBackground(e,function(e){a(i.closePanelByNameAction("appStudio.panels.packagePanel")),t(new f(e,d.SAVE))},"top_bar_publish",n)})}},N=function(){return function(n,a,e){var t=e.editorAPI,r=c.getCurrBuildVersion(a());return t.savePublish.build(r).then(function(){D(n,a(),r);var e=c.getAppVersion(a()),t=e?C(e):"0.1.0";n(G(t))}).catch(function(e){throw new f(e,d.BUILD_PACKAGE)})}},C=function(e){var t=s.split(e,".");return t[1]=Number(t[1])+1,t[2]=0,s.join(t,".")},D=function(e,t,n){c.isFirstAppBuild(t)&&(n!==p.MINOR&&n!==p.MAJOR||e(H(!1)))},L=[{performTask:T,displayName:"AppStudio_Publish_Popup_Loader_Text"},{performTask:O,displayName:"AppStudio_Publish_Popup_Loader_Text2"},{performTask:y,displayName:"AppStudio_Publish_Popup_Loader_Text3"},{performTask:N,displayName:"AppStudio_Publish_Popup_Loader_Text4"},{performTask:function(){return function(e,i,t){var o=t.dsActions;return new Promise(function(e,t){var n=c.getAppVersion(i()),a=c.getAppDefId(i()),r=c.getAppName(i());o.appStudio.setWixDataToken(n,a,r,e,function(e){t(new f(e,d.COLLECTIONS))})})}},displayName:"AppStudio_Publish_Popup_Loader_Text5",condition:function(){return!!u.isOpen("se_appBuilderCollections")}}],b=function(){return s.reject(L,function(e){return e.condition&&!e.condition()})},B=function(e){return{type:t.SET_NUM_OF_TASKS_DONE,numOfTasksDone:e}},w=function(e){return{type:t.SET_TOTAL_NUM_OF_PACKAGE_TASKS,totalNumOfPackageTasks:e}},U=function(e){return{type:t.SET_CURR_PACKAGE_TASK,displayName:e}},k=function(e){return{type:t.SET_PACKAGE_ERROR,errorMessage:e}},x=function(t){return function(e){e(k(t)),e(F(o.ERROR))}},F=function(e){return{type:t.SET_PACKAGE_STEP,packageStep:e}},G=function(e){return{type:t.SET_APP_VERSION,appVersion:e}},H=function(e){return{type:t.SET_IS_FIRST_APP_BUILD,isFirstAppBuild:e}},V=function(e){return{type:t.SET_IS_PACKAGING,isPackageInProgress:e}};return{getTasks:b,parsePagesCode:T,build:N,runPackageLogic:S,save:y,saveWidgetApiToVFS:O,saveAndPackage:function(){return function(t,e,n){var a=n.editorAPI,r=n.dsRead;if(a.savePublish.canPackage())if(l.fedopsLogger.interactionStarted(l.fedopsLogger.INTERACTIONS.APP_STUDIO_PACKAGE),t(V(!0)),r.generalInfo.isFirstSave()){var i={overrideTitle:"PUBLISH_BEFORE_PACKAGE_CHOOSE_DOMAIN_TITLE",overrideSubtitle:"PUBLISH_BEFORE_PACKAGE_CHOOSE_DOMAIN_SUBTITLE",callback:function(){return t(m())},origin:"publish",isPublish:!0,onError:function(e){l.ravenUtils.captureError(e,{tags:{firstSaveBeforeBuild:!0,packagePublishTasks:!0}}),t(V(!1))},overrideOnCancel:function(){l.fedopsLogger.interactionEnded(l.fedopsLogger.INTERACTIONS.APP_STUDIO_PACKAGE),t(V(!1))}};a.saveManager.save(i)}else{var o=u.isOpen("se_refreshOnConcurrentEditing")?{}:{rejectOnConcurrentSaveCancel:!0};a.saveManager.saveInBackground(function(){return t(m())},function(e){t(V(!1)),s.get(e,"message")===r.errors.save.CONCURRENT_SAVE?l.fedopsLogger.interactionEnded(l.fedopsLogger.INTERACTIONS.APP_STUDIO_PACKAGE):l.ravenUtils.captureError(e,{tags:{saveBeforeBuild:!0,packagePublishTasks:!0}})},"top_bar_publish",o)}else l.ravenUtils.captureError(new Error("Save or Package is in progress"),{tags:{packagePublishTasks:!0}})}},setAppVersion:G,setCurrBuildVersion:function(e){return{type:t.SET_CURR_BUILD_VERSION,currBuildVersion:e}},setCurrTaskDisplayName:U,setIsFirstAppBuild:H,setIsPackageInProgress:V,setNumOfTasksDone:B,setPackageError:x,setPackageErrorMessage:k,setPackageStep:F,setTotalNumOfPackageTasks:w}}),define("stateManagement/savePublish/savePublishActionTypes",[],function(){"use strict";return{OVERRIDE_SITE_WAS_SAVED_PANEL:"OVERRIDE_SITE_WAS_SAVED_PANEL",OVERRIDE_DOMAIN_PANEL:"OVERRIDE_DOMAIN_PANEL",OVERRIDE_SAVE_AND_PUBLISH:"OVERRIDE_SAVE_AND_PUBLISH",OVERRIDE_SAVE_REMINDER_PANEL:"OVERRIDE_SAVE_REMINDER_PANEL",OVERRIDE_SITE_DEFAULT_NAME:"OVERRIDE_SITE_DEFAULT_NAME",OVERRIDE_SHOULD_CHECK_FOR_CONCURRENT_USERS:"OVERRIDE_SHOULD_CHECK_FOR_CONCURRENT_USERS",SET_IS_FORCE_SAVE_IN_BACKGROUND:"SET_IS_FORCE_SAVE_IN_BACKGROUND",SET_IS_DIFF_SAVE_IN_PROGRESS:"SET_IS_DIFF_SAVE_IN_PROGRESS",SET_IS_BUILD_IN_PROGRESS:"SET_IS_BUILD_IN_PROGRESS",SET_IS_PUBLISH_IN_PROGRESS:"SET_IS_PUBLISH_IN_PROGRESS",SET_IS_SAVE_IN_PROGRESS:"SET_IS_SAVE_IN_PROGRESS",SET_PUBLISH_PANEL_PROMOTION_INDEX:"SET_PUBLISH_PANEL_PROMOTION_INDEX",SET_IS_DEALER_LOADED:"SET_IS_DEALER_LOADED"}}),define("stateManagement/savePublish/savePublishActions",["stateManagement/savePublish/savePublishActionTypes"],function(t){"use strict";return{overrideSiteWasSavedPanel:function(e){return{type:t.OVERRIDE_SITE_WAS_SAVED_PANEL,overrides:e}},overrideDomainPanel:function(e){return{type:t.OVERRIDE_DOMAIN_PANEL,overrides:e}},overrideSaveAndPublish:function(e){return{type:t.OVERRIDE_SAVE_AND_PUBLISH,overridingFunc:e}},overrideSaveReminderPanel:function(e){return{type:t.OVERRIDE_SAVE_REMINDER_PANEL,overrides:e}},overrideSiteDefaultName:function(e){return{type:t.OVERRIDE_SITE_DEFAULT_NAME,overridingDefaultName:e}},overrideShouldCheckForConcurrentUsers:function(e){return{type:t.OVERRIDE_SHOULD_CHECK_FOR_CONCURRENT_USERS,shouldCheckForConcurrentUsers:e}},setIsForceSaveInBackground:function(e){return{type:t.SET_IS_FORCE_SAVE_IN_BACKGROUND,isForceSaveInBackground:e}},setIsDiffSaveInProgress:function(e){return{type:t.SET_IS_DIFF_SAVE_IN_PROGRESS,isDiffSaveInProgress:e}},setIsBuildInProgress:function(e){return{type:t.SET_IS_BUILD_IN_PROGRESS,isBuildInProgress:e}},setIsPublishInProgress:function(e){return{type:t.SET_IS_PUBLISH_IN_PROGRESS,isPublishInProgress:e}},setIsSaveInProgress:function(e){return{type:t.SET_IS_SAVE_IN_PROGRESS,isSaveInProgress:e}},setPublishPanelPromotionIndex:function(e){return{type:t.SET_PUBLISH_PANEL_PROMOTION_INDEX,publishPanelPromotionIndex:e}},setIsDealerLoaded:function(e){return{type:t.SET_IS_DEALER_LOADED,isDealerLoaded:e}}}}),define("stateManagement/applicationStudio/appLink/appLinkActions",["lodash","stateManagement/applicationStudio/applicationStudioActionTypes","coreUtilsLib"],function(e,t,a){"use strict";var r="https://dev.wix.com/_api/app-service/v1/",i=function(e){return{type:t.SET_IS_REVOKE_LINK_FAIL,isRevokeFail:e}},o=function(e){return{type:t.SET_IS_REVOKING_APP_LINK,isRevoking:e}},s=function(e){return{type:t.SET_IS_CREATE_LINK_FAIL,isCreateFail:e}},u=function(e){return{type:t.SET_IS_CREATING_APP_LINK,isCreating:e}},c=function(e){return{type:t.SET_APP_LINK,link:e}};return{fetchAppLink:function(n){return function(t){return(e=n,a.requestsUtil.fetchJson(""+r+e+"/shareUrl").then(function(e){if(!e||!e.url)throw Error("Fetching apps from dev center failed");return e})).then(function(e){t(c(e.url))}).catch(function(e){404===e.status&&t(c(""))});var e}},createAppLink:function(n){return function(t){return t(s(!1)),t(u(!0)),(e=n,a.requestsUtil.fetchJson(""+r+e+"/shareUrl",{method:"POST",credentials:"same-origin",headers:new Headers({"content-type":"application/json; charset=utf-8"}),body:""}).then(function(e){if(!e||!e.url)throw Error("Fetching apps from dev center failed");return e})).then(function(e){t(c(e.url)),t(u(!1))}).catch(function(){t(u(!1)),t(s(!0))});var e}},setAppLink:c,setIsCreating:u,setIsCreateLinkFail:s,revokeAppLink:function(n){return function(e){return e(i(!1)),e(o(!0)),(t=n,a.requestsUtil.fetchJson(""+r+t+"/shareUrl/revoke",{method:"POST",credentials:"same-origin",headers:new Headers({"content-type":"application/json; charset=utf-8"}),body:""})).then(function(){return e(c("")),e(o(!1)),!0},function(){return e(o(!1)),e(i(!0)),!1});var t}},setIsRevokeLinkFail:i,setIsRevoking:o}}),define("stateManagement/wixAd/wixAdActionTypes",[],function(){"use strict";return{OVERRIDE_WIX_AD:"override-wix-ad"}}),define("stateManagement/wixAd/wixAdActions",["stateManagement/wixAd/wixAdActionTypes"],function(t){"use strict";return{overrideWixAdsBanner:function(e){return{type:t.OVERRIDE_WIX_AD,overrides:e}}}}),define("stateManagement/rightClickMenu/rightClickMenuActionTypes",[],function(){"use strict";return{OVERRIDE_RIGHT_CLICK_MENU:"override-right-click-menu"}}),define("stateManagement/rightClickMenu/rightClickMenuActions",["stateManagement/rightClickMenu/rightClickMenuActionTypes"],function(t){"use strict";return{overrideRightClickMenu:function(e){return{type:t.OVERRIDE_RIGHT_CLICK_MENU,overrides:e}}}}),define("stateManagement/sectionedPanel/sectionedPanelReducer",["lodash","reduxLibs","constants","stateManagement/sectionedPanel/sectionedPanelActionTypes","stateManagement/store/initialEditorState"],function(u,e,t,n,c){"use strict";var l=n.TOGGLE_SECTION,d=n.OPEN_SECTION,a=n.DISPLAY_PANEL,p=n.CLOSE_SECTION,g=[t.DOCKED_PANEL_SECTIONS.WIDGET_PUBLIC_API,t.DOCKED_PANEL_SECTIONS.PROPERTIES];return e.redux.combineReducers({openDockedSections:function(){var e,t,n,a,r,i,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:c.sectionedPanel.openDockedSections,s=arguments[1];switch(s.type){case l:return r=o,i=s.sectionName,u.filter(g,function(e){return e===i^u.includes(r,e)});case d:return n=o,a=s.sectionName,u.filter(g,function(e){return e===a||u.includes(n,e)});case p:return e=o,t=s.sectionName,u.reject(e,function(e){return e===t});default:return o}},shouldShow:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:c.sectionedPanel.shouldShow,t=arguments[1];return t.type===a?t.shouldShow:e}})}),define("stateManagement/sectionedPanel/sectionedPanel",["stateManagement/sectionedPanel/sectionedPanelActions","stateManagement/sectionedPanel/sectionedPanelReducer","stateManagement/sectionedPanel/sectionedPanelSelectors"],function(e,t,n){"use strict";return{actions:e,reducer:t,selectors:n}}),define("stateManagement/wixCodeIDE/wixCodeIDEActionTypes",[],function(){"use strict";return{OVERRIDE_WIX_CODE_IDE:"override-wix-code-ide"}}),define("stateManagement/wixCodeIDE/wixCodeIDEActions",["stateManagement/wixCodeIDE/wixCodeIDEActionTypes"],function(t){"use strict";return{overrideWixCodeIDE:function(e){return{type:t.OVERRIDE_WIX_CODE_IDE,overrides:e}}}}),define("stateManagement/featuresOverridden/featuresOverriddenActionTypes",[],function(){"use strict";return{DISABLE_FEATURE:"disable-feature"}}),define("stateManagement/featuresOverridden/featuresOverriddenActions",["stateManagement/featuresOverridden/featuresOverriddenActionTypes","constants"],function(e,t){"use strict";return{disableConnectToData:function(){return{type:e.DISABLE_FEATURE,featureName:t.FEATURES.CONNECT_TO_DATA}}}}),define("stateManagement/welcomeScreen/welcomeScreenActionTypes",[],function(){"use strict";return{SET_CONFIG:"set-config",FETCH_CONFIG:"fetch-config",SET_OVERRIDE:"set-override"}}),define("stateManagement/domain/domainSelectors",["lodash","util"],function(a,t){"use strict";var r=function(e){return e.generalInfo.urlFormat.isSlash()?"wixsite.com":"wix.com"},n=function(e,t){return t.generalInfo.isHttpsEnabled()?"https":"http"};return{getSiteProtocol:n,isDomainConnected:function(e,t){var n=t.generalInfo.getPublicUrl();return!a.isNil(n)&&!a.includes(n,r(t))},getFreeDomainPrefix:function(e,t){return n(0,t)+"://"+t.generalInfo.getUserInfo().name+"."+r(t)+"/"},doesUserOwnGoogleDomain:function(){var e=t.cookie.getCookie("wixClient");return 0<e.indexOf("GOOGLE_DOMAIN")||0<e.indexOf("REGRU")}}}),define("stateManagement/notifications/notificationsActionTypes",[],{ADD_NOTIFICATION:"ADD_NOTIFICATION",CLOSE_NOTIFICATION:"CLOSE_NOTIFICATION",CLOSE_ALL_NOTIFICATIONS:"CLOSE_ALL_NOTIFICATIONS",RESET_NOTIFICATION_TIMER:"RESET_NOTIFICATION_TIMER",CLEAR_NOTIFICATION_TIMER:"CLEAR_NOTIFICATION_TIMER"}),define("stateManagement/notifications/notificationsSelectors",[],function(){"use strict";return{selectNotifications:function(e){return e.notifications}}}),define("stateManagement/notifications/notificationsActions",["lodash","stateManagement/notifications/notificationsActionTypes","stateManagement/notifications/notificationsSelectors","coreBi","stateManagement/bi/bi","constants","util","experiment"],function(p,g,f,m,S,E,e,l){"use strict";var d=new window.Audio(e.media.getMediaUrl("notificationSounds/Note06.mp3"));function _(e,t,n){if(p.findKey(e().notifications,["message",n]))return!1;if(3===e().notifications.length){var a=e().notifications,r=p.minBy(a,"startTime");t(S.actions.event(m.events.notifications.editor_notification_close,{time_since_load:p.now()-r.startTime,finish_method:"oldest_from_three_on_screen",topic:r.title})),p.invoke(r,"onClose"),t(P(r.id))}return!0}function T(n,a,r){return window.setTimeout(function(){var e=a().notifications,t=p.findKey(e,["id",r.id]);void 0!==t&&(n(S.actions.event(m.events.notifications.editor_notification_close,{time_since_load:p.now()-e[t].startTime,finish_method:"time_out",topic:r.title})),p.invoke(r,"onClose"),n(P(r.id)))},E.NOTIFICATIONS.TIMEOUT)}var P=function(e){return{type:g.CLOSE_NOTIFICATION,id:e}},A=function(e){return{type:g.ADD_NOTIFICATION,notification:e}};return{closeNotification:P,closeAllNotifications:function(){return{type:g.CLOSE_ALL_NOTIFICATIONS}},addNotification:A,clearNotificationTimer:function(e,t){return{type:g.CLEAR_NOTIFICATION_TIMER,notification:e,notificationState:p.clone(t)}},resetNotificationTimer:function(c,l,d){return function(a,r){var t,n,i,o,s,e=window.setTimeout(function(){var e=r(),t=f.selectNotifications(e),n=p.findKey(t,["id",c.id]);void 0!==n&&(a(S.actions.event(m.events.notifications.editor_notification_close,{time_since_load:p.now()-t[n].startTime,finish_method:"time_out",topic:c.title})),p.invoke(c,"onClose"),a(P(c.id)))},E.NOTIFICATIONS.TIMEOUT),u=p.now();a((t=c,n=l,i=e,o=d,s=u,function(e){e({type:g.RESET_NOTIFICATION_TIMER,timerId:i,notification:t,index:o,startTime:s,notificationState:p.cloneDeep(n)})}))}},showUserActionNotification:function(e){var o=e.title,s=e.message,u=e.type,c=e.link;return function(e,t){if(_(t,e,s)){var n=(r=c,i={name:"notifications.editorNotification",title:o,message:s,type:u,id:p.uniqueId("notification-")},r&&r.caption&&(i.linkAction={caption:r.caption,onClick:r.onNotificationLinkClick,param:r.param}),i);n.timerId=T(e,t,n),n.startTime=p.now();var a=l.getValue("se_notificationCenter");"oneLineNotificationWithSound"!==a&&"twoLineNotificationWithSound"!==a||d.cloneNode(!0).play(),e(A(n))}var r,i}},showTPAUserActionNotification:function(a){return function(e,t){if(_(t,e,a.message)){a.timerId=T(e,t,a),a.startTime=p.now();var n=l.getValue("se_notificationCenter");"oneLineNotificationWithSound"!==n&&"twoLineNotificationWithSound"!==n||d.cloneNode(!0).play(),e(A(a))}}}}}),define("stateManagement/welcomeScreen/welcomeScreenActions",["zepto","lodash","stateManagement/welcomeScreen/welcomeScreenActionTypes","stateManagement/domain/domainSelectors","stateManagement/notifications/notificationsActions"],function(u,c,n,l,r){"use strict";var i="editor.wix.com/_api/wix-html-live-site-data-webapp/html-site-properties",a=function(e,t){return{type:n.SET_CONFIG,welcomeScreen:{config:e,isDirty:t}}},e=function(s){return function(e,t,n){var a=n.dsRead,r=l.getSiteProtocol(t(),a),i=a.generalInfo.getSiteId(),o={Accept:"application/json",Authorization:"MSID."+a.platform.getAppDataByApplicationId(-666).metaSiteId};u.ajax(c.assign({headers:o},s({dispatch:e,getState:t,siteId:i,siteProtocol:r})))}};return{setLocalWelcomeScreenConfig:a,getRemoteWelcomeScreenConfig:function(){return e(function(e){var n=e.dispatch,t=e.siteId;return{type:"GET",url:e.siteProtocol+"://"+i+"/"+t+"?property_types=welcomeScreen",dataType:"json",success:function(e){var t=c.get(e,"properties[0].content",null);t&&n(a(JSON.parse(t),!0))},error:function(){n(a({error:!0}))}}})},setRemoteWelcomeScreenConfig:function(a){return e(function(e){var t=e.dispatch,n=e.siteId;return{type:"PUT",url:e.siteProtocol+"://"+i+"/save/"+n,contentType:"application/json",data:JSON.stringify({property:{propertyType:"welcomeScreen",content:JSON.stringify(a)}}),error:function(){t(r.showUserActionNotification({message:"Notifications_Error_Welcome_Screen_Not_Saved",type:"error"}))}}})},deleteRemoteWelcomeScreenConfig:function(a){return e(function(e){var t=e.dispatch,n=e.siteId;return{type:"DELETE",url:e.siteProtocol+"://"+i+"/delete/"+n+"?property_types=welcomeScreen",success:function(){a()},error:function(){t(r.showUserActionNotification({message:"Notifications_Error_Welcome_Screen_Unavailable",type:"error"}))}}})},publishRemoteWelcomeScreenConfig:function(){return e(function(e){var t=e.siteId;return{type:"POST",url:e.siteProtocol+"://"+i+"/publish/welcome-screen/"+t}})},setOverrideItem:function(e){return{type:n.SET_OVERRIDE,overrides:e}}}}),define("stateManagement/permanentBorder/permanentBorderActionTypes",[],function(){"use strict";return{SET_COMPONENT:"SET_COMPONENT"}}),define("stateManagement/permanentBorder/permanentBorderActions",["stateManagement/permanentBorder/permanentBorderActionTypes"],function(t){"use strict";return{setComponent:function(e){return{type:t.SET_COMPONENT,compRef:e}}}}),define("stateManagement/applicationStudio/applicationStudioActions",["lodash","constants","util","stateManagement/topBar/topBar","stateManagement/externalLinks/externalLinks","stateManagement/leftBar/leftBar","stateManagement/leftTree/leftTree","stateManagement/linkPanel/linkPanel","stateManagement/addPanel/addPanel","stateManagement/designPanel/designPanel","stateManagement/componentsStore/componentsStore","stateManagement/gridLines/gridLines","stateManagement/selection/selection","stateManagement/pages/pages","stateManagement/mobile/mobile","stateManagement/applicationStudio/applicationStudioPresets.json","stateManagement/applicationStudio/applicationStudioOverrideHelpers","stateManagement/applicationStudio/packageAndPublish/packageAndPublishActions","stateManagement/savePublish/savePublishActions","stateManagement/applicationStudio/appLink/appLinkActions","stateManagement/wixAd/wixAdActions","stateManagement/rightClickMenu/rightClickMenuActions","stateManagement/sectionedPanel/sectionedPanel","stateManagement/userPreferences/userPreferences","stateManagement/wixCodeIDE/wixCodeIDEActions","stateManagement/featuresOverridden/featuresOverriddenActions","stateManagement/bi/bi","stateManagement/panels/panels","coreBi","experiment","stateManagement/applicationStudio/applicationStudioActionTypes","stateManagement/applicationStudio/applicationStudioSelectors","coreUtilsLib","stateManagement/welcomeScreen/welcomeScreenActions","stateManagement/permanentBorder/permanentBorderActions","wix-json-schema-utils"],function(S,s,c,e,t,n,a,r,i,o,u,l,d,p,g,f,m,E,_,T,P,A,I,M,v,O,h,R,y,N,C,D,L,b,B,w){"use strict";var U=e.actions,k=t.actions,x=n.actions,F=a.actions,G=i.actions,H=o.actions,V=u.actions,W=l.actions,K=d.actions,Y=g.actions,z=I.actions,q=M.selectors,j=r.actions,X=R.actions,Q=s.APP_STUDIO,Z=s.COMPONENTS_STORE_KEYS.META_DATA_OVERRIDES,J=y.events.AppBuilder,$=function(r){return new Promise(function(t){var e=r.store,n=e.dispatch,a=e.getState;r.registerInitUserPrefsCallback(function(){var e=q.getSiteUserPreferences(s.USER_PREFS.DOCKED_PANEL_SECTIONS.WIDGET_PUBLIC_API_ENABLED)(a());(S.isUndefined(e)||e)&&n(z.openSection(s.DOCKED_PANEL_SECTIONS.WIDGET_PUBLIC_API)),t()})})},ee=function(a){return new Promise(function(e){var t=function(){a.developerMode.isEnabled()||a.developerMode.toggle({showWelcomePanel:!1,notifyApps:!1}),a.developerMode.ui.idePane.unMinimize()},n=window.setTimeout(function(){t(),e()},5e3);a.registerInitUserPrefsCallback(function(){t(),window.clearTimeout(n),e()})})},te=function(g){return function(e,t,n){var a=n.editorAPI,r={},i={};if(N.isOpen("se_appBuilderPropertyAsSchema")){var o=S.assign.apply(S,[{}].concat(_toConsumableArray(a.dsRead.appStudio.definitions.getAllSerialized())));r=w.propertiesSchemaToTern(o,g),i=w.propertiesSchemaToTern(o,o,w.baseDefinitions)}else r=ne(g);var s={definitions:{"!define":{props:r}}},u={definitions:{"!define":i}},c=S.defaultsDeep(s,u,Q.DEFINITIONS),l=c.definitions["!name"],d=a.wixCode.codeEditorApi;if(d&&d.getApi()){var p=d.getApi();p.removeDefinitions({definitionsName:l}),p.addDefinitions(c)}}},ne=function(e){return e.map(function(e){return _defineProperty({},e.name,{"!type":e.propType,"!doc":e.description})}).reduce(function(e,t){return S.assign(e,t)},{})},ae=function(){return function(e,t,n){var a=n.dsRead,r=n.editorAPI,i=se(r);if(i){var o=N.isOpen("se_appBuilderPropertyAsSchema")?a.appStudio.widgets.propertiesSchemas.get(i):a.appStudio.widgets.properties.get(i);e(te(o))}}},re=function(e){return{type:C.SET_APP_DEF_ID,appDefId:e}},ie=function(e){return{type:C.SET_APP_NAME,appName:e}},oe=function(e){return{type:C.SET_APP_NAMESPACE,namespace:e}},se=function(e){var t=e.dsRead.pages.getFocusedPageId();return e.dsRead.appStudio.widgets.getByRootCompId(t)},ue=function(e){return function(t){return L.requestsUtil.fetchJson("https://dev.wix.com/_api/app-service/v1/"+e+"/namespace",{credentials:"include"}).then(function(e){if(!e||!e.nameSpace)throw Error("Fetching namespace from dev center failed");t(oe(e.nameSpace))})}},ce=function(e){e.store.dispatch(M.actions.setGlobalUserPreferences("didPassAppBuilderVideoCheck",!0)).catch(S.noop),e.panelManager.openPanel("appStudio.panels.appBuilderWelcomePanel")},le=function(e){return!M.selectors.getGlobalUserPreferences("didPassAppBuilderVideoCheck")(e.store.getState())},de=function(r){return function(t,e,n){var a=n.dsRead;r&&(t(V.updateComponentStore(r,Z,{movable:!1,verticallyMovable:!1,horizontallyMovable:!1,resizableWithAnchors:!1,duplicatable:!1,pinnable:!1,rotatable:!1,groupable:!1,alignable:!1,draggable:!1,multiselectable:!1,proportionallyResizable:!1,removable:!1,disabledKnobs:[a.components.layout.RESIZE_SIDES.TOP]})),S.forEach(function t(n,e){var a=n.components.getChildren(e);return S(a).flatMap(function(e){return t(n,e)}).union(a).value()}(a,r),function(e){t(V.updateComponentStore(e,Z,{pinnable:!1,stretchable:!1,groupable:!1}))}))}},pe=function(a,r){return function(e,t,n){n.dsActions.appStudio.widgets.display(a,r)}},ge=function(){return function(t,e,n){var a=n.dsActions,r=n.dsRead,i=n.editorAPI,o=a.appStudio.widgets.create(null,f.DEFAULT_WIDGET_ROOT_STRUCTURE,function(e){t(pe(e,function(){var e=r.pages.getCurrentPageId(),t=i.wixCode.fileSystem.getFileIdFromPageId(e),n=i.wixCode.fileSystem.getVirtualDescriptor(t,!1);return i.wixCode.fileSystem.writeFile(n,Q.CODE.INITIAL_CONTENT)})),t(fe(J.add_widget,{widget_id:e.id,widget_name:me(r,e),origin:"leftBar"}))});return i.history.add("created widget"),o}},fe=function(n,a){return function(e,t){e(h.actions.event(n,S.defaults({app_id:D.getAppDefId(t())},a)))}},me=function(e,t){return e.appStudio.widgets.name.get(t)},Se={applyApplicationStudioBehaviors:function(o){return function(e,t,n){var a=n.dsRead,r=p.selectors.getFocusedPage(t());if(r&&a.pages.isWidgetPage(r.id)){var i=S.head(a.components.getChildren(r));e(de(i)),e(function(e){e(W.setGridLinesOverrides(s.GRID_LINES_TYPES.PAGE,[]))}),o&&(e(K.selectComponents([i])),e(ae()),e(B.setComponent(i)))}else e(function(e){e(W.setGridLinesOverrides(s.GRID_LINES_TYPES.PAGE,null))})}},createWidget:ge,deleteWidget:function(d){return function(e,t,n){var a=n.dsActions,r=n.dsRead,i=n.editorAPI,o=r.pages.getCurrentPageId(),s=S.get(r.appStudio.widgets.getByRootCompId(o),"id"),u=r.appStudio.widgets.getAll();if(1!==u.length){var c=S.findIndex(u,{pointer:d})?0:1;if(s===d.id){var l=u[c];e(pe(l.pointer,function(){a.appStudio.widgets.remove(d),i.history.add("deleted widget")}))}else a.appStudio.widgets.remove(d),i.history.add("deleted widget");e(fe(J.delete_widget,{widget_name:me(r,d),widget_id:d.id}))}}},displayWidget:pe,duplicateWidget:function(o){return function(t,e,n){var a=n.dsActions,r=n.dsRead,i=n.editorAPI;a.appStudio.widgets.duplicate(o,function(e){t(pe(e)),t(fe(J.duplicate_widget,{origin_id:o.id,widget_id:e.id,widget_name:me(r,e),origin:"leftBar"}))}),i.history.add("duplicated widget")}},notifyPropertiesUpdateToWorker:function(a,r,i){return function(e,t,n){n.dsActions.appStudio.widgets.notifyPropertiesUpdateToWorker(a,r,i)}},openApplicationStudio:function(){return function(o,s,e){var u=e.editorAPI;return new Promise(function(e){var t=s(),n=c.appStudioUtils.getAppDefIdIfExists();o(U.overrideItems(m.getOverriddenTopBarItems(t,o))),o(k.overrideExternalLinks(m.getOverrideExternalLinks(t))),o(x.overrideItems(m.getOverriddenLetfBarButtons())),o(F.overrideItems(m.getOverriddenLeftTreeItems())),o(G.overrideItems(m.getOverriddenAddPanelItems(t))),o(H.overrideSections(m.getOverriddenDesignPanelSections(t))),o(Y.intros.disable(t)),o(_.overrideSaveAndPublish(function(){return o(E.saveAndPackage())})),o(E.setIsFirstAppBuild(!c.appStudioUtils.isAppPublishedOnLoad())),o(_.overrideDomainPanel(m.getOverriddenDomainPenelData())),o(_.overrideSiteWasSavedPanel({disabled:!0})),o(_.overrideSaveReminderPanel({disabled:!0})),o(_.overrideSiteDefaultName(m.getOverriddenSiteDefaultName()));var a=c.appStudioUtils.getApplicationNameOnLoad();a&&(o(_.setIsForceSaveInBackground(!0)),o(ie(a))),o(E.setAppVersion(c.appStudioUtils.getAppVersioOnLoad())),o(P.overrideWixAdsBanner({alwaysHidden:!0})),o(A.overrideRightClickMenu({copyDesign:{isHidden:!0}})),o(j.setOverridden(m.getOverriddenLinkPanelSections())),o(v.overrideWixCodeIDE(m.getOverriddenWixCodeIdeData())),o(O.disableConnectToData()),o(b.setOverrideItem({panels:[{shouldShow:le,show:ce}]})),n&&(o(T.fetchAppLink(n)),o(re(n)),o(ue(n))),u.wixCode.registerToCodeEditorLoaded(function(){o(ae())});var r=ee(u),i=$(u);Promise.all([r,i]).then(e)})}},propertiesToTernDef:ne,renameWidget:function(i,o){return function(e,t,n){var a=n.dsActions,r=n.editorAPI;a.appStudio.widgets.name.set(i,o),r.history.add("renamed widget"),e(fe(J.rename_widget,{widget_name:o,widget_id:i.id}))}},setProperties:function(i,o){return function(e,t,n){var a=n.dsActions,r=n.editorAPI;N.isOpen("se_appBuilderPropertyAsSchema")?a.appStudio.widgets.propertiesSchemas.set(i,o):a.appStudio.widgets.properties.set(i,o),e(te(o)),r.history.add("set widget property",{postAction:function(){return e(ae())}})}},setDefinition:function(i,o){return function(e,t,n){var a=n.dsActions,r=n.editorAPI;a.appStudio.definitions.set(i,o),r.history.add("set app definition")}},removeDefinition:function(i){return function(e,t,n){var a=n.dsActions,r=n.editorAPI;a.appStudio.definitions.remove(i),r.history.add("removed app definition")}},setEvents:function(i,o){return function(e,t,n){var a=n.dsActions,r=n.editorAPI;a.appStudio.widgets.events.set(i,o),r.history.add("set widget event")}},addFunctionTemplate:function(){return function(e,t,n){var a=n.dsRead,r=n.editorAPI,i=r.wixCode.fileSystem.getRoots().pages,o=void 0;r.wixCode.fileSystem.getChildren(i).then(function(e){var t=a.pages.getCurrentPageId();return o=S.find(e,["name",t+".js"]),r.wixCode.fileSystem.readFile(o)}).then(function(e){e+=Q.CODE.EXPORTED_FUNCTION;var t=r.wixCode.fileSystem.getVirtualDescriptor(o.location,!1);return r.wixCode.fileSystem.writeFile(t,e)}).then(function(){r.developerMode.ui.idePane.unMinimize()}).catch(function(e){c.ravenUtils.captureError(e,{tags:{pagesFolder:i,description:"failed getting adding function template"}})})}},openCustomTypeDefinitionPanel:function(t){return function(e){return e(X.updateOrOpenPanel("panels.focusPanels.customTypeDefinitionPanel",{typeNameToEdit:t}))}},setAppDefID:re,setNamespace:oe,setAppName:ie,sendBi:fe,exportWidget:function(){return function(e,t,n){var a,r=n.dsRead,i=n.editorAPI,o=r.pages.getCurrentPageId(),s=r.appStudio.widgets.getByRootCompId(o),u=i.components.serialize(r.pages.getCurrentPage()).components[0],c=r.appStudio.widgets.propertiesSchemas.get(s),l=r.appStudio.definitions.getAllSerialized(),d=r.appStudio.widgets.events.get(s);(a=i.wixCode.fileSystem.getRoots().pages,i.wixCode.fileSystem.getChildren(a).then(function(e){var t=r.pages.getCurrentPageId(),n=S.find(e,["name",t+".js"]);return i.wixCode.fileSystem.readFile(n)})).then(function(e){var t={serializedRootContainer:u,properties:c,definitions:l,events:d,code:e};window.localStorage.setItem("exportedWidget",JSON.stringify(t))})}},importWidget:function(){return function(o,e,t){var s=t.dsRead,u=t.dsActions,c=t.editorAPI,l=function(e,t){var n,a,r=(n=e,a=S.map(n,function(e){var t=S.head(S.keys(e)),n=e[t].$id,a=S.get(S.find(s.appStudio.definitions.getAll(),{name:t}),"pointer"),r=a?s.appStudio.definitions.get(a)[t].$id:null;return r?[n,r]:null}),S.fromPairs(S.compact(a))),i=JSON.stringify(t);return S.forEach(r,function(e,t){i=i.replace('"$ref":"'+t+'"','"$ref":"'+e+'"')}),JSON.parse(i)},n=JSON.parse(window.localStorage.getItem("exportedWidget"))||{},d=n.serializedRootContainer,p=n.properties,g=n.definitions,f=n.events,m=n.code;d&&(o(ge()),setTimeout(function(){o(B.setComponent(null)),c.selection.deselectComponents();var r,e,t=s.pages.getCurrentPageId(),n=s.appStudio.widgets.getByRootCompId(t),a=c.pages.getCurrentPage(),i=c.components.getChildren(a)[0];u.components.remove(i),c.components.add(a,d),r=m,e=c.wixCode.fileSystem.getRoots().pages,c.wixCode.fileSystem.getChildren(e).then(function(e){var t=s.pages.getCurrentPageId(),n=S.find(e,["name",t+".js"]),a=c.wixCode.fileSystem.getVirtualDescriptor(n.location,!1);return c.wixCode.fileSystem.writeFile(a,r)}),u.appStudio.widgets.events.set(n,f),S.forEach(g,function(e){var t=S.head(S.keys(e)),n=s.appStudio.definitions.getAll(),a=S.get(S.find(n,{name:t}),"pointer");u.appStudio.definitions.set(a,S.cloneDeep(e))}),setTimeout(function(){var e=S.map(p,function(e){return l(g,e)});u.appStudio.widgets.propertiesSchemas.set(n,e)},500)},4e3))}}};return S.assign(Se,E,T)}),define("stateManagement/applicationStudio/packageAndPublish/packageAndPublishReducer",["lodash","stateManagement/store/initialEditorState","stateManagement/applicationStudio/applicationStudioActionTypes"],function(n,a,r){"use strict";return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.applicationStudio.packageAndPublish,t=arguments[1];switch(t.type){case r.SET_CURR_PACKAGE_TASK:return n.defaults({currTask:t.displayName},e);case r.SET_APP_VERSION:return n.defaults({appVersion:t.appVersion},e);case r.SET_PACKAGE_ERROR:return n.defaults({errorMessage:t.errorMessage},e);case r.SET_NUM_OF_TASKS_DONE:return n.defaults({numOfTasksDone:t.numOfTasksDone},e);case r.SET_TOTAL_NUM_OF_PACKAGE_TASKS:return n.defaults({totalNumOfPackageTasks:t.totalNumOfPackageTasks},e);case r.SET_PACKAGE_STEP:return n.defaults({packageStep:t.packageStep},e);case r.SET_IS_FIRST_APP_BUILD:return n.defaults({isFirstAppBuild:t.isFirstAppBuild},e);case r.SET_CURR_BUILD_VERSION:return n.defaults({currBuildVersion:t.currBuildVersion},e);case r.SET_IS_PACKAGING:return n.defaults({isPackaging:t.isPackageInProgress},e);default:return e}}}),define("stateManagement/applicationStudio/appLink/appLinkReducer",["lodash","stateManagement/store/initialEditorState","stateManagement/applicationStudio/applicationStudioActionTypes"],function(n,a,r){"use strict";return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.applicationStudio.appLink,t=arguments[1];switch(t.type){case r.SET_APP_LINK:return n.defaults({link:t.link},e);case r.SET_IS_CREATE_LINK_FAIL:return n.defaults({fail:t.isCreateFail},e);case r.SET_IS_CREATING_APP_LINK:return n.defaults({creating:t.isCreating},e);case r.SET_IS_REVOKE_LINK_FAIL:return n.defaults({failRevoke:t.isRevokeFail},e);case r.SET_IS_REVOKING_APP_LINK:return n.defaults({revoking:t.isRevoking},e);default:return e}}}),define("stateManagement/applicationStudio/applicationStudioReducer",["lodash","reduxLibs","stateManagement/applicationStudio/packageAndPublish/packageAndPublishReducer","stateManagement/applicationStudio/appLink/appLinkReducer","stateManagement/applicationStudio/applicationStudioActionTypes","stateManagement/store/initialEditorState"],function(n,e,t,a,r,i){"use strict";return e.redux.combineReducers({packageAndPublish:t,appLink:a,appInfo:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:i.applicationStudio.appInfo,t=arguments[1];switch(t.type){case r.SET_APP_DEF_ID:return n.defaults({appDefId:t.appDefId},e);case r.SET_APP_NAME:return n.defaults({appName:t.appName},e);case r.SET_APP_NAMESPACE:return n.defaults({namespace:t.namespace},e);default:return e}}})}),define("stateManagement/applicationStudio/applicationStudio",["stateManagement/applicationStudio/applicationStudioActions","stateManagement/applicationStudio/applicationStudioReducer","stateManagement/applicationStudio/applicationStudioSelectors"],function(e,t,n){"use strict";return{actions:e,reducer:t,selectors:n}}),define("stateManagement/appsStore/appsStoreActionTypes",[],function(){"use strict";return{UPDATE_APP_STORE:"update-app-store"}}),define("stateManagement/appsStore/appsStoreReducer",["lodash","stateManagement/appsStore/appsStoreActionTypes","stateManagement/store/initialEditorState"],function(o,e,s){"use strict";var u=e.UPDATE_APP_STORE;return function(){var e,t,n,a,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:s.appsStore,i=arguments[1];switch(i.type){case u:return e=r,n=(t=i).appDefinitionId,a=t.partialState,o.defaults(_defineProperty({},n,o.defaults(a,o.get(e,n))),e);default:return r}}}),define("stateManagement/appsStore/appsStoreSelectors",["lodash"],function(n){"use strict";return{getAppStore:function(e,t){return t?n.get(e.appsStore,t):null}}}),define("stateManagement/appsStore/appsStoreActions",["stateManagement/appsStore/appsStoreActionTypes"],function(n){"use strict";return{updateAppsStore:function(e,t){return{type:n.UPDATE_APP_STORE,appDefinitionId:e,partialState:t}}}}),define("stateManagement/appsStore/appsStore",["stateManagement/appsStore/appsStoreReducer","stateManagement/appsStore/appsStoreSelectors","stateManagement/appsStore/appsStoreActions"],function(e,t,n){"use strict";return{reducer:e,selectors:t,actions:n}}),define("stateManagement/store/combineReducers",["lodash","wixImmutable"],function(o,a){"use strict";var n=function(e){var t,i=(t=e,a.Iterable.isIterable(t)?e:a.Map(e)),n=i.map(function(){});return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:n,a=arguments[1],r=!1,t=e.map(function(e,t){var n=(i.get(t)||o.identity)(e,a);return n!==e&&(r=!0),n});return r?t:e}};return function(e,t){return t?n(e):(i=e,function(e,a){var r=!1,t=o.mapValues(e,function(e,t){var n=(i[t]||o.identity)(e,a);return n!==e&&(r=!0),n});return r?t:e});var i}}),define("stateManagement/inlinePopup/inlinePopupReducer",["lodash","stateManagement/inlinePopup/inlinePopupActionTypes","stateManagement/store/initialEditorState"],function(n,e,a){"use strict";var r=e.SET_OPEN_INLINE_POPUP;return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.inlinePopup,t=arguments[1];switch(t.type){case r:return n.defaultsDeep({openedInlinePopup:t.inlinePopupRef},e);default:return e}}}),define("stateManagement/userProfile/userProfileActionTypes",[],function(){"use strict";return{SET_USER_PROFILE:"setUserProfile"}}),define("stateManagement/userProfile/userProfileReducer",["stateManagement/userProfile/userProfileActionTypes"],function(e){"use strict";var n=e.SET_USER_PROFILE;return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case n:return t.userProfile;default:return e}}}),define("stateManagement/layers/layersActionTypes",[],function(){"use strict";return{SET_SPOTLIGHT:"setSpotlight"}}),define("stateManagement/layers/layersReducer",["lodash","stateManagement/layers/layersActionTypes"],function(n,e){"use strict";var a=e.SET_SPOTLIGHT;return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case a:return n.defaults({spotlight:t.component},e);default:return e}}}),define("stateManagement/pinMode/pinModeActionTypes",[],function(){"use strict";return{OPEN_PIN_MODE:"openPinMode",CLOSE_PIN_MODE:"closePinMode",SHOW_PIN_PREVIEW_RECT:"showPinPreviewRect",HIDE_COMPONENT_PREVIEW_RECT:"hideComponentPreviewRect"}}),define("stateManagement/pinMode/pinModeReducer",["lodash","stateManagement/pinMode/pinModeActionTypes"],function(a,r){"use strict";return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case r.OPEN_PIN_MODE:return a.defaults({isOpen:!0},e);case r.CLOSE_PIN_MODE:return a.defaults({isOpen:!1},e);case r.SHOW_PIN_PREVIEW_RECT:return a.defaults({pinPreviewRectStyle:t.style},e);case r.HIDE_COMPONENT_PREVIEW_RECT:var n=a.defaults({opacity:0},e.pinPreviewRectStyle);return a.defaults({pinPreviewRectStyle:n},e);default:return e}}}),define("stateManagement/easterEggs/easterEggsActionTypes",[],function(){"use strict";return{SET_FLYING_MUSA_STYLE:"setFlyingMusaStyle",CLEAR_FLYING_MUSA_STYLE:"clearFlyingMusaStyle"}}),define("stateManagement/easterEggs/easterEggsActions",["lodash","stateManagement/easterEggs/easterEggsActionTypes","stateManagement/domMeasurements/domMeasurements"],function(S,t,e){"use strict";var E=e.selectors.getViewPort,_=function(e){return{type:t.SET_FLYING_MUSA_STYLE,musaData:e}},T=function(e){return{type:t.CLEAR_FLYING_MUSA_STYLE,id:e}};return{showFlyingMusa:function(){return function(e,t){var n=E(t()),a=S.uniqueId(),r=8+Math.floor(5*Math.random()),i=-200,o=72+Math.random()*(n.height-144),s=72+Math.random()*(n.height-144),u=Math.abs(o-s)*(r/n.width);s<o&&(u*=-1);var c=o,l=0,d=3608,p=143;e(_({id:a,style:{top:o+"px",right:i+"px",backgroundPosition:"0 "+l+"px"}}));var g=setInterval(function(){e(_({id:a,style:{right:(i+=r)+"px",top:(c+=u)+"px",backgroundPosition:"0 -"+l+"px"}})),l=(l+82)%d,i>n.width+p&&(clearInterval(g),clearTimeout(m),e(T(a)))},33),f=33*(10+(n.width+p)/r),m=setTimeout(function(){clearInterval(g),e(T(a))},f)}}}}),define("stateManagement/easterEggs/easterEggsSelectors",[],function(){"use strict";return{getFlyingMusaStyle:function(e,t){return e.easterEggs.flyingMusa[t].style}}}),define("stateManagement/easterEggs/easterEggsReducer",["lodash","stateManagement/easterEggs/easterEggsActionTypes"],function(a,r){"use strict";return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case r.SET_FLYING_MUSA_STYLE:var n=a.defaults(_defineProperty({},t.musaData.id,t.musaData),e.flyingMusa);return a.defaults({flyingMusa:n},e);case r.CLEAR_FLYING_MUSA_STYLE:return a.defaults({flyingMusa:a.omit(e.flyingMusa,[t.id])},e);default:return e}}}),define("stateManagement/easterEggs/easterEggs",["stateManagement/easterEggs/easterEggsActions","stateManagement/easterEggs/easterEggsSelectors","stateManagement/easterEggs/easterEggsReducer"],function(e,t,n){"use strict";return{actions:e,selectors:t,reducer:n}}),define("stateManagement/pinMode/pinModeSelectors",[],function(){"use strict";return{isOpen:function(e){return e.pinMode.isOpen},getPinnedCompType:function(e){return e.pinMode.pinnedCompType},getPinPreviewRectStyle:function(e){return e.pinMode.pinPreviewRectStyle}}}),define("stateManagement/pinMode/pinModeActions",["lodash","constants","stateManagement/panels/panelsActions","stateManagement/pinMode/pinModeActionTypes","stateManagement/pinMode/pinModeSelectors","stateManagement/selection/selection"],function(d,p,g,f,r,e){"use strict";var m=e.selectors,t={default:"compPanels.dynamicPanels.pinnedDockPanel",PopupContainer:p.COMP_PANELS.POPUP.CONTAINER.POPUP_GRID_LAYOUT_PANEL.NAME},i=function(){return{type:f.HIDE_COMPONENT_PREVIEW_RECT}},S=p.EDITOR_API.BLOCKING_LAYER_STYLE,E=function(e){return t[e]||t.default};return{open:function(c,l){return function(e,t,n){var a=n.dsRead,r=n.tooltipManager,i=t(),o=m.getSelectedComponentType(i,a),s="WRichText"===o?["LEFT","MIDDLE","RIGHT"]:["MIDDLE"];r.hide(p.ROOT_COMPS.TOOLTIPS.FIRST_TIME_EXIT_POPUP_MODE);var u=d.assign({origin:c,selectedComponents:m.getSelectedCompsRefs(i),disabledValues:s},l);e(g.openComponentPanel(E(o),u)),e(function(e,t,n){var a=n.dsActions,r=t();a.renderPlugins.setCompsToShowOnTop(d.map(m.getSelectedCompsRefs(r),"id")),a.renderPlugins.setBlockingLayer(S)}),e({type:f.OPEN_PIN_MODE})}},close:function(){return function(e,t){var n=t();if(r.isOpen(n)){var a=r.getPinnedCompType(n);e(g.closePanelByName(E(a))),e(i()),e(function(e,t,n){var a=n.dsActions;a.renderPlugins.setCompsToShowOnTop(null),a.renderPlugins.setBlockingLayer(null)}),e({type:f.CLOSE_PIN_MODE})}}},showPinPreviewRect:function(e){return{type:f.SHOW_PIN_PREVIEW_RECT,style:e}},hidePinPreviewRect:i}}),define("stateManagement/pinMode/pinMode",["stateManagement/pinMode/pinModeActions","stateManagement/pinMode/pinModeActionTypes","stateManagement/pinMode/pinModeReducer","stateManagement/pinMode/pinModeSelectors"],function(e,t,n,a){"use strict";return{actions:e,actionTypes:t,reducer:n,selectors:a}}),define("stateManagement/contextMenu/contextMenuActionTypes",[],function(){"use strict";return{OPEN_CONTEXT_MENU:"openContextMenu"}}),define("stateManagement/contextMenu/contextMenuReducer",["lodash","stateManagement/pinMode/pinMode","stateManagement/contextMenu/contextMenuActionTypes"],function(n,e,a){"use strict";var r=e.actionTypes;return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=arguments[1];switch(t.type){case a.OPEN_CONTEXT_MENU:return n.defaults({editorMousePosition:{x:t.editorPositionX,y:t.editorPositionY},viewerPosition:{x:t.viewerPositionX,y:t.viewerPositionY},isRulerMenu:t.isRulerMenu,removeAllGuidesInRuler:t.removeAllGuidesInRuler},e);case r.OPEN_PIN_MODE:return null;default:return e}}}),define("stateManagement/services/servicesActionTypes",[],function(){"use strict";return{SET_STATE:"set-state",UPDATE_VIEWER_RENDERS_COUNTER:"updateViewerRendersCounter"}}),define("stateManagement/services/setStateReducer",["lodash","stateManagement/services/servicesActionTypes"],function(e,t){"use strict";var n=t.SET_STATE,a=t.UPDATE_VIEWER_RENDERS_COUNTER,r=e.assign,i=e.defaults;return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case n:return r({},e,t.state);case a:return i({viewerRendersCounter:(e.viewerRendersCounter+1)%16},e);default:return e}}}),define("stateManagement/services/servicesReducer",["lodash","stateManagement/services/setStateReducer"],function(e,r){"use strict";return function(a){return function(e,t){var n=r(e,t);return a(n,t)}}}),define("stateManagement/devMode/devModeReducer",["lodash","constants","stateManagement/devMode/devModeActionTypes"],function(e,t,n){"use strict";var a={type:t.DEVELOPER_MODE.CONTEXT_TYPES.PAGE,data:void 0},r=n.RESET_CONTEXT;return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a;switch(arguments[1].type){case r:return a;default:return e}}}),define("stateManagement/store/stateFreezer",["util"],function(e){"use strict";var a=e.deepFreeze;return function(n){return function(e,t){return a(n(e,t))}}}),define("stateManagement/spotlightStage/spotlightStageActionTypes",[],function(){"use strict";return{SET_CONFIG:"setConfig",SET_DEFAULT_CONFIG:"setDefaultConfig"}}),define("stateManagement/spotlightStage/spotlightStageReducer",["lodash","stateManagement/spotlightStage/spotlightStageActionTypes"],function(n,e){"use strict";var a=e.SET_CONFIG,r=e.SET_DEFAULT_CONFIG,i={color:null,shouldShowGridLines:!1};return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:i,t=arguments[1];switch(t.type){case a:return n.assign({},e,t.config);case r:return n.assign({},e,i);default:return e}}}),define("stateManagement/text/textActionTypes",[],function(){"use strict";return{OPEN_TEXT_EDITOR:"openTextEditor",CLOSE_TEXT_EDITOR:"closeTextEditor"}}),define("stateManagement/text/textReducer",["lodash","stateManagement/text/textActionTypes"],function(n,e){"use strict";var a=e.OPEN_TEXT_EDITOR,r=e.CLOSE_TEXT_EDITOR;return function(e,t){switch(t.type){case a:return n.assign({},e,{isTextEditorOpen:!0});case r:return n.assign({},e,{isTextEditorOpen:!1});default:return e}}}),define("stateManagement/mouseActions/mouseActionsReducer",["lodash","stateManagement/mouseActions/mouseActionsActionTypes"],function(n,a){"use strict";return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case a.SET_USING_WINDOW_MOUSE_EVENTS:return n.defaults({usingWindowMouseEvents:t.usingWindowMouseEvents},e);case a.SET_PERFORMING_MOUSE_ACTION:return n.defaults({performingMouseMoveAction:t.performingMouseMoveAction});default:return e}}}),define("stateManagement/tpa/tpaActionTypes",[],function(){"use strict";return{ADD_APP_IDS_TO_REFRESH_ON_DASHBOARD_CLOSE:"ADD_APP_IDS_TO_REFRESH_ON_DASHBOARD_CLOSE",SET_APP_IDS_TO_REFRESH_ON_DASHBOARD_CLOSE:"SET_APP_IDS_TO_REFRESH_ON_DASHBOARD_CLOSE",ADD_APP_TO_TRACK_FOR_UPGRADE:"ADD_APP_TO_TRACK_FOR_UPGRADE",REMOVE_APP_FROM_TRACK_FOR_UPGRADE:"REMOVE_APP_FROM_TRACK_FOR_UPGRADE"}}),define("stateManagement/tpa/tpaReducer",["lodash","coreUtilsLib","stateManagement/tpa/tpaActionTypes"],function(i,o,s){"use strict";var u="appIds found for appDefIds must be an array of numbers",c=function(e){return i.reduce(e,function(e,t){return e[t]=!0,e},{})},l=function(e){return!t(e)},t=function(e){return i.isArray(e)&&e.every(function(e){return i.isNumber(e)&&0<e||i.isNumber(parseInt(e,10))&&0<parseInt(e,10)})};return function(e,t){switch(i.isNil(e)&&(e={appsIdsToRefreshOnDashboardClose:{},trackedAppsForUpgrade:{}}),t.type){case s.ADD_APP_IDS_TO_REFRESH_ON_DASHBOARD_CLOSE:if(l(t.appIds))return o.log.error(u),e;var n=e.appsIdsToRefreshOnDashboardClose,a=c(t.appIds),r=i.merge({},n,a);return i.assign({},e,{appsIdsToRefreshOnDashboardClose:r});case s.SET_APP_IDS_TO_REFRESH_ON_DASHBOARD_CLOSE:return l(t.appIds)?(o.log.error(u),e):i.assign({},e,{appsIdsToRefreshOnDashboardClose:c(t.appIds)});case s.ADD_APP_TO_TRACK_FOR_UPGRADE:return i.assign({},e,{trackedAppsForUpgrade:i.assign({},e.trackedAppsForUpgrade,_defineProperty({},t.applicationId,t.applicationData))});case s.REMOVE_APP_FROM_TRACK_FOR_UPGRADE:return i.assign({},e,{trackedAppsForUpgrade:i.omit(e.trackedAppsForUpgrade,[t.applicationId])});default:return e}}}),define("stateManagement/uploadedFonts/uploadedFontsActionTypes",[],function(){"use strict";return{SET_LIST:"setList",SET_QUEUE:"setQueue",SET_FLAG_TO_QUEUE_ITEM:"setFlagToQueueItem",SET_UPLOADED_ITEMS:"setUploadedItems",ADD_TIME_OUT_TOKEN:"addTimeOutToken",CLEAR_TIME_OUT_TOKENS:"clearTimeOutTokens"}}),define("stateManagement/uploadedFonts/uploadedFontsReducer",["lodash","stateManagement/uploadedFonts/uploadedFontsActionTypes"],function(i,e){"use strict";var o=e.SET_LIST,s=e.SET_QUEUE,u=e.SET_FLAG_TO_QUEUE_ITEM,c=e.SET_UPLOADED_ITEMS,l=e.ADD_TIME_OUT_TOKEN,d=e.CLEAR_TIME_OUT_TOKENS;return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{list:[],queue:[],uploadedItems:{},timeOutTokens:[]},n=arguments[1];switch(n.type){case o:return i.assign({},e,{list:n.list});case s:return i.assign({},e,{queue:n.queue});case u:var a=i.assign({},e.queue[n.queueItemIndex],n.flag),t=i.map(e.queue,function(e,t){return t===n.queueItemIndex?a:e});return i.assign({},e,{queue:t});case c:return i.assign({},e,{uploadedItems:n.uploadedItems});case l:var r=[].concat(_toConsumableArray(e.timeOutTokens),[n.timeOutToken]);return i.assign({},e,{timeOutTokens:r});case d:return i.assign({},e,{timeOutTokens:[]});default:return e}}}),define("stateManagement/siteDisplayName/siteDisplayNameActionTypes",[],function(){"use strict";return{SET_SITE_DISPLAY_NAME:"set-site-display-name"}}),define("stateManagement/siteDisplayName/siteDisplayNameReducer",["lodash","stateManagement/siteDisplayName/siteDisplayNameActionTypes","stateManagement/store/initialEditorState"],function(e,t,n){"use strict";var a=t.SET_SITE_DISPLAY_NAME;return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:n.siteDisplayName,t=arguments[1];switch(t.type){case a:return t.siteDisplayName;default:return e}}}),define("stateManagement/domMeasurements/domMeasurementsReducer",["lodash","stateManagement/store/initialEditorState","stateManagement/domMeasurements/domMeasurementsActionTypes"],function(n,a,e){"use strict";var r=e.SET_MEASURED_DOM,i=e.CLEAR_MEASURED_DOM,o=e.SET_STAGE_LAYOUT,s=e.SET_MEASURED_SCROLL,u=e.SET_STAGE_RECT,c=e.SET_PREVIEW_POS,l=e.SET_EDITOR_CONTENT_LAYOUT;return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.domMeasurements,t=arguments[1];switch(t.type){case r:return n.defaults(_defineProperty({},t.measureKey,t.measuredRes),e);case i:return n.omit(e,[t.measureKey]);case o:return n.defaults({stageLayout:t.stageLayout},e);case s:return n.defaults({scroll:t.scroll},e);case u:return n.defaults({stageRect:t.stageRect},e);case c:return n.defaults({previewPosition:t.previewPos},e);case l:return n.defaults({editorContentLayout:t.editorContentLayout},e);default:return e}}}),define("stateManagement/multilingual/multilingualActionTypes",["lodash"],function(e){"use strict";return e.mapKeys(["MULTILINGUAL_LOAD_START","MULTILINGUAL_LOAD_STOP","LANGUAGE_CHANGE_START","LANGUAGE_CHANGE_SUCCESS","LOAD_SUPPORTED_LANGUAGES","LOAD_SUPPORTED_LANGUAGES_SUCCESS","LOAD_SUPPORTED_LANGUAGES_ERROR"])}),define("stateManagement/multilingual/multilingualConstants",["lodash","util"],function(e,t){"use strict";return{linguistLanguageUrl:t.serviceTopology.linguistUrl+"/languages",apiMethods:e.mapKeys(["POST","PUT","GET"]),dataLoadTypes:e.mapKeys(["LOAD_LANGUAGES","CHECK_LANGUAGE_STATUS","INITIALIZE_LANGUAGES","ADD_LANGUAGE","UPDATE_LANGUAGE_STATUS","UPDATE_LANGUAGE"])}}),define("stateManagement/multilingual/multilingualUtils",["zepto","lodash","stateManagement/multilingual/multilingualConstants"],function(n,r,e){"use strict";var t=e.apiMethods,i=t.POST,o=t.PUT;return{callAjax:function(t){return new Promise(function(e,a){return n.ajax(r.assign({dataType:"json",contentType:"application/json"},t,{data:t.type===i||t.type===o?JSON.stringify(t.data):t.data,success:e,error:function(e){var t=e.response,n=e.status;a({response:t,status:n})}}))})},addLanguageCode:function(e){return r.assign({},e,{languageCode:e.languageCode||e.code})},pickLanguageCode:function(e){var t=e.languageCode,n=e.code;return{languageCode:t||n}}}}),define("stateManagement/multilingual/multilingualDataConverters",["lodash","stateManagement/multilingual/multilingualUtils"],function(n,a){"use strict";return{supportedLanguages:function(e){var t=e.languages;return n.map(t,a.addLanguageCode)}}}),define("stateManagement/multilingual/multilingualReducer",["lodash","stateManagement/multilingual/multilingualActionTypes","stateManagement/multilingual/multilingualDataConverters","stateManagement/store/initialEditorState"],function(i,e,o,s){"use strict";var t=function(a){return function(e,t){var n=e.producer;return i.assign({},t,{loading:{isLoading:a,producer:n}})}},u=t(!0),c=t(!1),l=e.LOAD_SUPPORTED_LANGUAGES,d=e.LOAD_SUPPORTED_LANGUAGES_SUCCESS,p=e.LOAD_SUPPORTED_LANGUAGES_ERROR,g=e.MULTILINGUAL_LOAD_START,f=e.MULTILINGUAL_LOAD_STOP,m=e.LANGUAGE_CHANGE_START,S=e.LANGUAGE_CHANGE_SUCCESS;return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:s.multilingual,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.type,a=t.payload,r=t.error;switch(n){case l:return u({producer:n},e);case g:return u(a,e);case f:return c(a,e);case d:return c({producer:n},i.assign({},e,{supportedLanguages:o.supportedLanguages(a)}));case p:return c({producer:n},i.assign({},e,{error:r}));case m:return i.assign({},e,{isChanging:!0,nextLanguage:a});case S:return i.assign({},e,{isChanging:!1,nextLanguage:null});default:return e}}}),define("stateManagement/appInstaller/appInstallerActionTypes",[],function(){"use strict";return{START_INSTALL_PROCESS:"start-install-process",START_APP_INSTALL:"start-app-install",DONE_APP_INSTALL:"done-app-install"}}),define("stateManagement/appInstaller/appInstallerReducer",["lodash","stateManagement/appInstaller/appInstallerActionTypes","stateManagement/store/initialEditorState"],function(a,e,r){"use strict";var i=e.START_INSTALL_PROCESS,o=e.START_APP_INSTALL,s=e.DONE_APP_INSTALL;return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:r.appInstaller,t=arguments[1];switch(t.type){case i:return a.assign({},e,{totalApps:t.totalApps});case o:return a.assign({},e,{installingAppName:t.installingAppName});case s:var n=e.finishedCounter+1;return a.assign({},e,{finishedCounter:n,done:n===e.totalApps});default:return e}}}),define("stateManagement/notifications/notificationsReducer",["lodash","stateManagement/notifications/notificationsActionTypes"],function(n,a){"use strict";return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case a.ADD_NOTIFICATION:return e.concat([t.notification]);case a.CLOSE_NOTIFICATION:return n.reject(e,["id",t.id]);case a.CLOSE_ALL_NOTIFICATIONS:return[];case a.RESET_NOTIFICATION_TIMER:return t.notificationState[t.index].timerId=t.timerId,t.notificationState[t.index].startTime=t.startTime,t.notificationState;case a.CLEAR_NOTIFICATION_TIMER:return clearTimeout(t.notification.timerId),e;default:return e}}}),define("stateManagement/googleMap/googleMapActionTypes",[],function(){"use strict";return{SET_SINGLE_PANEL_STATE:"setGoogleMapsLocationsPanelState",SET_LOCATION_INDEX:"setLocationIndex"}}),define("stateManagement/googleMap/googleMapReducer",["lodash","stateManagement/googleMap/googleMapActionTypes","stateManagement/store/initialEditorState"],function(n,a,r){"use strict";return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:r.googleMap,t=arguments[1];switch(t.type){case a.SET_SINGLE_PANEL_STATE:return n.defaultsDeep({panel:t.panel,locationIndex:t.locationIndex},e);case a.SET_LOCATION_INDEX:return n.defaultsDeep({locationIndex:t.locationIndex},e);default:return e}}}),define("stateManagement/preview/previewActionTypes",[],function(){"use strict";return{SET_PREVIEW_MODE:"setPreviewMode"}}),define("stateManagement/preview/previewReducer",["stateManagement/preview/previewActionTypes","stateManagement/store/initialEditorState"],function(n,a){"use strict";return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.previewMode,t=arguments[1];switch(t.type){case n.SET_PREVIEW_MODE:return t.previewMode;default:return e}}}),define("stateManagement/savePublish/savePublishReducer",["lodash","stateManagement/savePublish/savePublishActionTypes","stateManagement/store/initialEditorState"],function(n,a,r){"use strict";return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:r.savePublish,t=arguments[1];switch(t.type){case a.OVERRIDE_SITE_WAS_SAVED_PANEL:return n.defaultsDeep({overridden:{siteWasSavedPanel:t.overrides}},e);case a.OVERRIDE_DOMAIN_PANEL:return n.defaultsDeep({overridden:{domainPanel:t.overrides}},e);case a.OVERRIDE_SAVE_AND_PUBLISH:return n.defaultsDeep({overridden:{saveAndPublish:t.overridingFunc}},e);case a.OVERRIDE_SAVE_REMINDER_PANEL:return n.defaultsDeep({overridden:{saveReminderPanel:t.overrides}},e);case a.OVERRIDE_SITE_DEFAULT_NAME:return n.defaultsDeep({overridden:{siteDefaultName:t.overridingDefaultName}},e);case a.OVERRIDE_SHOULD_CHECK_FOR_CONCURRENT_USERS:return n.defaultsDeep({overridden:{shouldCheckForConcurrentUsers:t.shouldCheckForConcurrentUsers}},e);case a.SET_IS_FORCE_SAVE_IN_BACKGROUND:return n.defaults({isForceSaveInBackground:t.isForceSaveInBackground},e);case a.SET_PUBLISH_PANEL_PROMOTION_INDEX:return n.defaults({publishPanelPromotionIndex:t.publishPanelPromotionIndex},e);case a.SET_IS_SAVE_IN_PROGRESS:return n.defaults({isSaveInProgress:t.isSaveInProgress},e);case a.SET_IS_PUBLISH_IN_PROGRESS:return n.defaults({isPublishInProgress:t.isPublishInProgress},e);case a.SET_IS_BUILD_IN_PROGRESS:return n.defaults({isBuildInProgress:t.isBuildInProgress},e);case a.SET_IS_DIFF_SAVE_IN_PROGRESS:return n.defaults({isDiffSaveInProgress:t.isDiffSaveInProgress},e);case a.SET_IS_DEALER_LOADED:return n.defaults({isDealerLoaded:t.isDealerLoaded},e);default:return e}}}),define("stateManagement/rulers/rulersActionTypes",[],function(){"use strict";return{RESET_HISTORY:"rulers/reset-history",UNDO:"rulers/undo",REDO:"rulers/redo",UPDATE_HISTORY:"rulers/update-history",UPDATE_STATE:"rulers/update-state",SET_RULERS_STATE:"rulers/set-rulers-state"}}),define("stateManagement/rulers/rulersReducer",["lodash","stateManagement/rulers/rulersActionTypes","stateManagement/store/initialEditorState"],function(n,e,a){"use strict";var r=e.RESET_HISTORY,i=e.UNDO,o=e.REDO,s=e.UPDATE_HISTORY,u=e.UPDATE_STATE,c=e.SET_RULERS_STATE;return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.rulers,t=arguments[1];switch(t.type){case c:return n.assign({},e,t.rulersState);case r:return n.assign({},e,{history:{stack:[e.guidesState],currentIndex:0}});case i:return n.assign({},e,{history:n.assign({},e.history,{currentIndex:e.history.currentIndex-1})});case o:return n.assign({},e,{history:n.assign({},e.history,{currentIndex:e.history.currentIndex+1})});case s:return n.assign({},e,{history:n.assign({},e.history,{stack:n.concat(n.take(e.history.stack,e.history.currentIndex+1),e.guidesState),currentIndex:e.history.currentIndex+1})});case u:return t.state;default:return e}}}),define("stateManagement/wixAd/wixAdReducer",["lodash","stateManagement/wixAd/wixAdActionTypes","stateManagement/store/initialEditorState"],function(n,a,r){"use strict";return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:r.wixAd,t=arguments[1];switch(t.type){case a.OVERRIDE_WIX_AD:return n.defaultsDeep({overridden:{alwaysHidden:t.overrides.alwaysHidden}},e);default:return e}}}),define("stateManagement/wixCodeIDE/wixCodeIDEReducer",["lodash","stateManagement/wixCodeIDE/wixCodeIDEActionTypes","stateManagement/store/initialEditorState"],function(n,a,r){"use strict";return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:r.wixCodeIDE,t=arguments[1];switch(t.type){case a.OVERRIDE_WIX_CODE_IDE:return n.defaultsDeep({},{overridden:t.overrides},e);default:return e}}}),define("stateManagement/publishingStatus/publishingStatusActionTypes",[],function(){"use strict";return{SET_PUBLISHING_STATUS:"SET_PUBLISHING_STATUS"}}),define("stateManagement/publishingStatus/publishingStatusReducer",["lodash","constants","stateManagement/store/initialEditorState","stateManagement/publishingStatus/publishingStatusActionTypes"],function(a,e,r,i){"use strict";var o=e.PROGRESS_STATUS;return function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:r.publishingStatus,n=arguments[1];switch(n.type){case i.SET_PUBLISHING_STATUS:return e=n.publishingStatus,a.includes(a.values(o),e)?n.publishingStatus:t;default:return t}}}),define("stateManagement/rightClickMenu/rightClickMenuReducer",["lodash","stateManagement/rightClickMenu/rightClickMenuActionTypes","stateManagement/store/initialEditorState"],function(n,a,r){"use strict";return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:r.rightClickMenu,t=arguments[1];switch(t.type){case a.OVERRIDE_RIGHT_CLICK_MENU:return n.defaultsDeep({overridden:t.overrides},e);default:return e}}}),define("stateManagement/featuresOverridden/featuresOverriddenReducer",["lodash","stateManagement/featuresOverridden/featuresOverriddenActionTypes","constants"],function(n,e){"use strict";var a=e.DISABLE_FEATURE;return function(e,t){switch(t.type){case a:return n.defaultsDeep(_defineProperty({},t.featureName,{isDisabled:!0}),e);default:return e}}}),define("stateManagement/wixData/wixDataActionTypes",[],function(){"use strict";return{LOAD_COLLECTIONS:"LOAD_COLLECTIONS",START_LOADING:"START_LOADING",INDICATE_ABOUT_ERROR:"INDICATE_ABOUT_ERROR"}}),define("stateManagement/wixData/wixDataReducer",["lodash","stateManagement/wixData/wixDataActionTypes","stateManagement/store/initialEditorState"],function(e,n,a){"use strict";return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.wixData,t=arguments[1];switch(t.type){case n.START_LOADING:return Object.assign({},e,{isLoading:!0});case n.LOAD_COLLECTIONS:return Object.assign({},e,{isLoading:!1,hasError:!1,userCollections:t.userCollections,dbDriverSections:t.dbDriverSections,externalDbDriverSections:t.externalDbDriverSections,appSections:t.appSections});case n.INDICATE_ABOUT_ERROR:return Object.assign({},e,{isLoading:!1,hasError:!0});default:return e}}}),define("stateManagement/hoverBox/hoverBoxActionTypes",[],function(){"use strict";return{SET_HOVER_BOX:"setHoverBox",CLEAR_HOVER_BOX:"clearHoverBox"}}),define("stateManagement/hoverBox/hoverBoxReducer",["lodash","stateManagement/hoverBox/hoverBoxActionTypes","stateManagement/store/initialEditorState"],function(e,n,a){"use strict";return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.hoverBox,t=arguments[1];switch(t.type){case n.SET_HOVER_BOX:return{hoveredComp:t.hoveredComp,hoverBoxOverlay:t.hoverBoxOverlay};case n.CLEAR_HOVER_BOX:return a.hoverBox;default:return e}}}),define("stateManagement/welcomeScreen/welcomeScreenReducer",["lodash","stateManagement/welcomeScreen/welcomeScreenActionTypes","stateManagement/store/initialEditorState"],function(n,a,r){"use strict";return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:r.welcomeScreen,t=arguments[1];switch(t.type){case a.SET_CONFIG:return n.defaultsDeep({},t.welcomeScreen,e);case a.SET_OVERRIDE:return n.defaultsDeep({},{overrides:t.overrides},e);default:return e}}}),define("stateManagement/meshMigration/meshMigrationActions",[],function(){"use strict";var t={UPDATE:"MESH_MIGRATION_UPDATE"};return{ACTION_TYPES:t,update:function(e){return{type:t.UPDATE,status:e}}}}),define("stateManagement/meshMigration/meshMigrationReducer",["lodash","stateManagement/meshMigration/meshMigrationActions"],function(n,e){"use strict";var a=e.ACTION_TYPES,r={isDone:!1,maxValue:0,value:0,viewMode:"DESKTOP"};return function(e,t){switch(t.type){case a.UPDATE:return n.assign({},e,t.status)}return n.isEmpty(e)?r:e}}),define("stateManagement/localMode/localModeActionTypes",[],function(){"use strict";return{ENABLE_LOCAL_MODE:"enableLocalMode",SET_PUSHING_STATUS:"setPushingStatus",SET_IS_RECONNECTING:"setIsReconnecting"}}),define("stateManagement/localMode/localModeReducer",["stateManagement/localMode/localModeActionTypes","constants"],function(e,n){"use strict";var a=e.ENABLE_LOCAL_MODE,r=e.SET_PUSHING_STATUS,i=e.SET_IS_RECONNECTING,o={enabled:!1};return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case a:return Object.assign({},e,{enabled:!0});case r:return Object.assign({},e,{pushingStatus:t.pushingStatus,isLocalPushInProgress:t.pushingStatus===n.PROGRESS_STATUS.IN_PROGRESS});case i:return Object.assign({},e,{isReconnecting:t.isReconnecting});default:return e}}}),define("stateManagement/developerToolBar/developerToolBarActionTypes",[],function(){"use strict";return{OVERRIDE:"OVERRIDE"}}),define("stateManagement/developerToolBar/developerToolBarReducer",["lodash","stateManagement/developerToolBar/developerToolBarActionTypes","stateManagement/store/initialEditorState"],function(a,r,i){"use strict";return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:i.developerToolBar,t=arguments[1];switch(t.type){case r.OVERRIDE:var n=a.get(t,"overrides",e.overrides);return a.defaultsDeep({},{overrides:n},e);default:return e}}}),define("stateManagement/permanentBorder/permanentBorderReducer",["lodash","stateManagement/permanentBorder/permanentBorderActionTypes","stateManagement/store/initialEditorState"],function(n,e,a){"use strict";var r=e.SET_COMPONENT;return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.permanentBorder,t=arguments[1];switch(t.type){case r:return n.defaults({},{component:t.compRef},e);default:return e}}}),define("stateManagement/store/createEditorStore",["lodash","reduxLibs","util","coreUtilsLib","stateManagement/addPanel/addPanelReducer","stateManagement/designPanel/designPanelReducer","stateManagement/applicationStudio/applicationStudioReducer","stateManagement/platform/platformReducer","stateManagement/componentsStore/componentsStoreReducer","stateManagement/gridLines/gridLinesReducer","stateManagement/store/combineReducers","stateManagement/panels/panelsReducer","stateManagement/selection/selectionReducer","stateManagement/inlinePopup/inlinePopupReducer","stateManagement/userProfile/userProfileReducer","stateManagement/layers/layersReducer","stateManagement/highlights/highlightsReducer","stateManagement/mobile/mobileReducer","stateManagement/pinMode/pinModeReducer","stateManagement/easterEggs/easterEggs","stateManagement/contextMenu/contextMenuReducer","stateManagement/helpPanel/helpPanelReducer","stateManagement/services/servicesReducer","stateManagement/devMode/devModeReducer","stateManagement/store/initialEditorState","stateManagement/store/stateFreezer","stateManagement/leftBar/leftBarReducer","stateManagement/leftTree/leftTreeReducer","stateManagement/sectionedPanel/sectionedPanelReducer","stateManagement/spotlightStage/spotlightStageReducer","stateManagement/text/textReducer","stateManagement/dynamicPages/dynamicPagesReducer","stateManagement/topBar/topBarReducer","stateManagement/mouseActions/mouseActionsReducer","stateManagement/userPreferences/userPreferencesReducer","stateManagement/tpa/tpaReducer","stateManagement/uploadedFonts/uploadedFontsReducer","stateManagement/siteDisplayName/siteDisplayNameReducer","stateManagement/domMeasurements/domMeasurementsReducer","stateManagement/pages/pagesReducer","stateManagement/multilingual/multilingualReducer","stateManagement/appInstaller/appInstallerReducer","stateManagement/notifications/notificationsReducer","stateManagement/googleMap/googleMapReducer","stateManagement/preview/previewReducer","stateManagement/savePublish/savePublishReducer","stateManagement/rulers/rulersReducer","stateManagement/appsStore/appsStoreReducer","stateManagement/linkPanel/linkPanelReducer","stateManagement/wixAd/wixAdReducer","stateManagement/wixCodeIDE/wixCodeIDEReducer","stateManagement/publishingStatus/publishingStatusReducer","stateManagement/rightClickMenu/rightClickMenuReducer","stateManagement/featuresOverridden/featuresOverriddenReducer","stateManagement/wixData/wixDataReducer","stateManagement/hoverBox/hoverBoxReducer","stateManagement/welcomeScreen/welcomeScreenReducer","stateManagement/externalLinks/externalLinksReducer","stateManagement/meshMigration/meshMigrationReducer","stateManagement/localMode/localModeReducer","stateManagement/developerToolBar/developerToolBarReducer","stateManagement/permanentBorder/permanentBorderReducer"],function(u,e,c,l,d,p,g,f,m,S,E,_,T,P,A,I,M,v,O,h,R,y,N,C,D,L,b,B,w,U,k,x,F,G,H,V,W,K,Y,z,q,j,X,Q,Z,J,$,ee,te,ne,ae,re,ie,oe,se,ue,ce,le,de,pe,ge,fe){"use strict";var me=e.redux,Se=e.reduxThunk;return function(e,t){var n,a=N(E({addPanel:d,designPanel:p,applicationStudio:g,platform:f,componentsStore:m,gridLines:S,panelData:_,helpProps:y,devModeContext:C,localMode:pe,stage:E({highlights:M}),domMeasurements:Y,mobile:v,contextMenu:R,pinMode:O,uploadedFonts:W,userProfile:A,layers:I,selection:T,inlinePopup:P,leftBar:b,leftTree:B,spotlightStage:U,text:k,dynamicPages:x,topBar:F,mouseActions:G,tpa:V,userPreferences:H,easterEggs:h.reducer,siteDisplayName:K,pages:z,multilingual:q,appInstaller:j,notifications:X,googleMap:Q,previewMode:Z,rulers:$,savePublish:J,sectionedPanel:w,appsStore:ee,linkPanel:te,wixAd:ne,rightClickMenu:ie,wixCodeIDE:ae,publishingStatus:re,featuresOverridden:oe,wixData:se,hoverBox:ue,welcomeScreen:ce,externalLinks:le,meshMigration:de,developerToolBar:ge,permanentBorder:fe})),r=e?L(a):a,i=Se.withExtraArgument(t),o=c.url.getParameterByName("debug")&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:me.compose,s=me.createStore(r,D,o(me.applyMiddleware(i)));return s.dispatch=l.wSpy.enabled()?(n=s.dispatch,function(e){var t=u.get(e,"type")||u.get(e,"name");return l.wSpy.log("dispatch",[t,e]),n(e)}):s.dispatch,s}}),define("stateManagement/store/throttledStore",["lodash","util"],function(s,e){"use strict";var u=function(e){return e()},c=e.animationFrameRenderer;return function(e,t,n){var a=[],r=function(){return s.forEach(a,u)},i=c(e,t,r),o=s.noop;n.subscribe(function(){o=i()});return s.defaults({subscribe:function(e){return a=s.concat(a,e),function(){a=s.without(a,e)}},flush:function(){o(),r()}},n)}}),define("stateManagement/preview/previewSelectors",[],function(){"use strict";return{isPreviewReady:function(e){return e.previewReady},getPreviewMode:function(e){return e.previewMode}}}),define("stateManagement/preview/previewActions",["stateManagement/preview/previewActionTypes"],function(t){"use strict";return{setPreviewMode:function(e){return{type:t.SET_PREVIEW_MODE,previewMode:e}}}}),define("stateManagement/preview/preview",["stateManagement/preview/previewSelectors","stateManagement/preview/previewActions","stateManagement/preview/previewReducer"],function(e,t,n){"use strict";return{selectors:e,actions:t,reducer:n}}),define("stateManagement/popups/popupsSelectors",["stateManagement/preview/preview"],function(e){"use strict";var n=e.selectors.isPreviewReady;return{isPopUpMode:function(e,t){return Boolean(n(e)&&t.pages.popupPages.getCurrentPopupId())}}}),define("stateManagement/popups/popups",["stateManagement/popups/popupsSelectors"],function(e){"use strict";return{selectors:e}}),define("stateManagement/siteDisplayName/siteDisplayNameActions",["coreUtilsLib","stateManagement/siteDisplayName/siteDisplayNameActionTypes"],function(n,t){"use strict";var a=function(e){return{type:t.SET_SITE_DISPLAY_NAME,siteDisplayName:e}};return{fetchSiteDisplayName:function(e){return function(t){return n.requestsUtil.fetchJson("/_api/site-properties-service/properties?fields.paths=siteDisplayName",{contentType:"application/json",credentials:"same-origin",headers:new Headers({Authorization:"MSID."+e}),method:"GET"}).then(function(e){t(a(e.properties.siteDisplayName))})}},setSiteDisplayName:a}}),define("stateManagement/siteDisplayName/siteDisplayName",["stateManagement/siteDisplayName/siteDisplayNameActions","stateManagement/siteDisplayName/siteDisplayNameReducer"],function(e,t){"use strict";return{actions:e,reducer:t}}),define("stateManagement/dataFixers/dataFixersActions",["lodash","util","stateManagement/bi/bi","coreBi"],function(s,u,c,l){"use strict";return{runDataFixers:function(){return function(e){s.defer(function(){e(function(e,t,n){var a=n.dsRead,r=n.dsActions,i=s.find(a.pages.getPagesData(),{appPageId:"7326bfbb-4b10-4a8e-84c1-73f776051e10"}),o=u.translate("Pages_Blog_Post_Title");i&&i.title!==o&&(r.pages.data.update(i.id,{title:o}),e(c.actions.event(l.events.dataFixers.blogSinglePostFix,{msid:a.generalInfo.getMetaSiteId()})))})})}}}}),define("stateManagement/dataFixers/dataFixers",["stateManagement/dataFixers/dataFixersActions"],function(e){"use strict";return{actions:e}}),define("stateManagement/services/servicesActions",["lodash","stateManagement/popups/popups","stateManagement/leftBar/leftBar","stateManagement/mouseActions/mouseActions","stateManagement/siteDisplayName/siteDisplayName","stateManagement/dataFixers/dataFixers","stateManagement/services/servicesActionTypes","stateManagement/mobile/mobile","stateManagement/selection/selectionActions"],function(o,e,s,t,u,n,a,r,i){"use strict";var c=i.setFocusedTabDefinition,l=n.actions,d=a.SET_STATE,p=a.UPDATE_VIEWER_RENDERS_COUNTER,g=e.selectors.isPopUpMode,f=t.selectors.isPerformingMouseMoveAction,m=function(){return{type:p}};return{setState:function(e){return{type:d,state:e}},loadDocumentServices:function(i){return function(e,t,n){var a=o.merge(i.getConstants(),i.getReadMethods()),r=i.getActions();return o.assign(n,{dsRead:a,dsActions:r}),a.viewerRendersCounter=1,{dsRead:a,dsActions:r}}},createSantaPreview:function(a,r,i,o,s,u,c,l){return function(e,t,n){return n.createSantaPreview(a,r,i,o,s,u,c,l)}},onPreviewReady:function(){return function(e,t,n){var a=n.dsRead,r=t(),i=a.generalInfo.getMetaSiteId();e(s.actions.sendBIButtonsCount(g(r,a))),e(u.actions.fetchSiteDisplayName(i)),e(l.runDataFixers())}},onViewerChanged:function(){return function(e,t){var n=t();f(n)||(e(r.actions.hiddenItems.refreshMobileHiddenComponentsIfPanelIsOpen()),e(c())),e(m())}},loadService:function(a,r){return function(e,t,n){return o.assign(n,_defineProperty({},a,r))}}}}),define("stateManagement/services/servicesSelectors",[],function(){"use strict";return{getViewerRendersCounter:function(e){return e.viewerRendersCounter}}}),define("stateManagement/services/services",["stateManagement/services/servicesReducer","stateManagement/services/servicesActions","stateManagement/services/servicesSelectors"],function(e,t,n){"use strict";return{reducer:e,actions:t,selectors:n}}),define("stateManagement/meshMigration/meshMigrationSelectors",[],function(){"use strict";return{isDone:function(e){return e.meshMigration.isDone},getValue:function(e){return e.meshMigration.value},getMaxValue:function(e){return e.meshMigration.maxValue},getViewMode:function(e){return e.meshMigration.viewMode}}}),define("stateManagement/meshMigration/meshMigration",["stateManagement/meshMigration/meshMigrationReducer","stateManagement/meshMigration/meshMigrationSelectors","stateManagement/meshMigration/meshMigrationActions"],function(e,t,n){"use strict";return{actions:n,reducer:e,selectors:t}}),define("stateManagement/userProfile/userProfileSelectors",[],function(){"use strict";return{getUserProfile:function(e){return e.userProfile}}}),define("stateManagement/userProfile/userProfileActions",["stateManagement/userProfile/userProfileActionTypes"],function(e){"use strict";var t=e.SET_USER_PROFILE;return{setUserProfile:function(e){return{type:t,userProfile:e}}}}),define("stateManagement/userProfile/userProfile",["stateManagement/userProfile/userProfileReducer","stateManagement/userProfile/userProfileSelectors","stateManagement/userProfile/userProfileActions"],function(e,t,n){"use strict";return{reducer:e,selectors:t,actions:n}}),define("stateManagement/layers/layersSelectors",[],function(){"use strict";return{getSpotlightComponent:function(e){return e.layers.spotlight}}}),define("stateManagement/layers/layersActions",["stateManagement/layers/layersActionTypes"],function(e){"use strict";var t=e.SET_SPOTLIGHT;return{setSpotlight:function(e){return{type:t,component:e}}}}),define("stateManagement/layers/layers",["stateManagement/layers/layersReducer","stateManagement/layers/layersSelectors","stateManagement/layers/layersActions"],function(e,t,n){"use strict";return{reducer:e,selectors:t,actions:n}}),define("stateManagement/domain/domain",["stateManagement/domain/domainSelectors"],function(e){"use strict";return{selectors:e}}),define("stateManagement/stylableEditor/stylableEditorActions",["lodash","stateManagement/services/services","stateManagement/userPreferences/userPreferences","constants"],function(u,e,t,n){"use strict";var a="stylableEditor",r=n.STYLABLE.EDITOR,g=r.SITE_PATH,l=r.COMPONENTS_INDEX_PATH,d=r.THEME_PRESET_FILENAME,f=r.UNWANTED_PALETTE_COLORS,m=r.COLOR_ROWS,i=r.INITIAL_PALETTE_COLORS,c=n.USER_PREFS.THEME.COLORS.CUSTOM.USER_ADDED,p=u.values(i),o=e.actions,S=t.selectors,E=function(e,t){return e.stylableDriver.getStylesheet(t||g)},_=function(e){return"/"+e+".st.css"};return{load:function(t){return function(e){e(o.loadService(a,t)),t.write(g,"")}},unload:function(){return function(e){return e(o.loadService(a,null))}},initVariant:function(s,u,c){return function(e,t,n){var a=n.stylableEditor,r=a.stylableDriver.getSiteVarsDriver(g),i=E(a,c),o={selector:"."+u};i.upsertImport({path:g,named:r.siteColors.map(function(e){return e.name})}),i.upsertImport({path:l,named:[s]}),i.upsertStyleRule(o),i.upsertDeclarationToRule(o,{prop:"-st-extends",value:s})}},loadVariant:function(o,s,u,c){return function(e,t,n){var a=n.stylableEditor,r=_(s),i=a.getComponentConfig(o).variantsPath+"/"+d;null===a.stylableDriver.readFile(r)&&a.stylableDriver.writeFile(r,c||""),a.open(r,o,u,i)}},setSiteColors:function(p){return function(e,t,n){var a=n.stylableEditor,r=n.editorAPI;if(r){for(var i=p?_(p):void 0,o=a.createSiteVarsDriver(E(a,i)),s=r.theme.colors.getAll(),u=Object.values(s).slice(f),c=[],l=u.length/m,d=0;d<m;d++)c.push(u.splice(0,l));o.setSiteColors(c),p||a.stylableDriver.getSiteVarsDriver(g).setSiteColors(c)}}},setUserColors:function(){return function(e,t,n){var a=n.stylableEditor,r=t(),i=a.stylableDriver.getSiteVarsDriver(g),o=S.getSessionUserPreferences(c)(r)||[],s=p.concat(o);i.clearCategory("user"),u.forEach(s,function(e){return i.addUserColor(e)})}}}}),define("stateManagement/stylableEditor/stylableEditor",["stateManagement/stylableEditor/stylableEditorActions"],function(e){"use strict";return{actions:e}}),define("stateManagement/spotlightStage/spotlightStageSelectors",[],function(){"use strict";return{getConfig:function(e){return e.spotlightStage}}}),define("stateManagement/spotlightStage/spotlightStageActions",["lodash","stateManagement/spotlightStage/spotlightStageActionTypes"],function(e,t){"use strict";var n=t.SET_CONFIG,a=t.SET_DEFAULT_CONFIG;return{setConfig:function(e){return{type:n,config:e}},setDefaultConfig:function(){return{type:a}}}}),define("stateManagement/spotlightStage/spotlightStage",["stateManagement/spotlightStage/spotlightStageReducer","stateManagement/spotlightStage/spotlightStageSelectors","stateManagement/spotlightStage/spotlightStageActions"],function(e,t,n){"use strict";return{reducer:e,selectors:t,actions:n}}),define("stateManagement/text/textSelectors",[],function(){"use strict";return{isTextEditorOpen:function(e){return e.text.isTextEditorOpen}}}),define("stateManagement/text/textActions",["lodash","stateManagement/text/textActionTypes","stateManagement/selection/selection","stateManagement/components/components","coreUtilsLib"],function(m,e,t,n,S){"use strict";var a=e.OPEN_TEXT_EDITOR,r=e.CLOSE_TEXT_EDITOR,E=t.selectors,_=n.selectors;return{invisibleTextEditor:{load:function(a){return function(e,t,n){m.assign(n,{invisibleTextManager:a})}},unload:function(){return function(e,t,n){m.assign(n,{invisibleTextManager:null})}},execCmd:function(f){return function(e,t,n){var r=n.invisibleTextManager,i=n.invisibleLinksHelper,a=n.textManager,o=n.dsRead,s=n.editorAPI,u=m.head(E.getSelectedCompsRefs(t())),c="wysiwyg.viewer.components.WRichText"===_.getCompType(u,o),l=o.components.getRepeatedComponents(u);if(S.wSpy.log("textEditor",["execInvisibleCommand",u,c,l]),c&&1<l.length){var d=m.reject(l,{id:u.id}),p=_.getCompsDataOrRuntime(d,o),g=function(e,t){if("fontFamily"===e.commandName){var n=e.commandData.toLowerCase().replace(/['"\s]/g,"");return t.getFonts()[n].fontFamily}if("textShadow"!==e.commandName)return e.commandData;var a=t.getAvailableTextShadowEffects();return m.findKey(a,{cssData:e.commandData})}(f.data,a);m.forEach(p,function(e,t){r.setData(e.text,{validateHtml:!1,removeNestedStyles:!0}),i.setCurrentLinks(e.linkList),r.execCommand("selectAll"),r.execCommand(f.data.commandName,g,{execWithoutHistory:!0});var n=r.getData();e.text=n,e.linkList=i.getAllLinks();var a=d[t];s.components.data.update(a,e)}),a.focus()}}},loadLinksHelper:function(a){return function(e,t,n){m.assign(n,{invisibleLinksHelper:a})}},unloadLinksHelper:function(){return function(e,t,n){m.assign(n,{invisibleLinksHelper:null})}}},textEditor:{load:function(a){return function(e,t,n){m.assign(n,{textManager:a})}},unload:function(){return function(e,t,n){m.assign(n,{textManager:null})}}},openTextEditor:function(){return{type:a}},closeTextEditor:function(){return{type:r}}}}),define("stateManagement/text/text",["stateManagement/text/textReducer","stateManagement/text/textSelectors","stateManagement/text/textActions"],function(e,t,n){"use strict";return{reducer:e,selectors:t,actions:n}}),define("stateManagement/tpa/tpaSelectors",["lodash"],function(t){"use strict";return{getAppIdsToRefreshAfterDashboardClose:function(e){return t.map(t.keys(e.tpa.appsIdsToRefreshOnDashboardClose),function(e){return parseInt(e,10)})},getAppsToTrackForUpgrade:function(e){return e.tpa.trackedAppsForUpgrade}}}),define("stateManagement/tpa/tpaActions",["lodash","stateManagement/tpa/tpaActionTypes","stateManagement/tpa/tpaSelectors","stateManagement/selection/selectionActions","stateManagement/panels/panelsActions","platformEvents","experiment","util"],function(d,u,a,p,g,f,m,S){"use strict";var s=function(e){return d.map(e,t)},t=function(e){return parseInt(e,10)},c=function(e,t){return d(e).map(t.tpa.app.getDataByAppDefId).map("applicationId").compact().value()},E=function(n){return function(e){var t;e((t=n,{type:u.REMOVE_APP_FROM_TRACK_FOR_UPGRADE,applicationId:t}))}};return{addAppDefIdsToRefreshOnDashboardClose:function(o){return function(e,t,n){var a,r=n.dsRead,i=c(o,r);e((a=s(i),{type:u.ADD_APP_IDS_TO_REFRESH_ON_DASHBOARD_CLOSE,appIds:a}))}},setAppDefIdsToRefreshOnDashboardClose:function(o){return function(e,t,n){var a,r=n.dsRead,i=c(o,r);e((a=s(i),{type:u.SET_APP_IDS_TO_REFRESH_ON_DASHBOARD_CLOSE,appIds:a}))}},addAppToTrackForUpgrade:function(s){return function(e,t,n){var a,r,i=n.dsRead.tpa.app.getData(s),o={appDefinitionId:i.appDefinitionId,vendorProductId:i.vendorProductId,upgradedToYearly:!0===i.upgradedToYearly,instance:i.instance};e((a=s,r=o,{type:u.ADD_APP_TO_TRACK_FOR_UPGRADE,applicationId:a,applicationData:r}))}},removeAppFromTrackForUpgrade:E,updateUpgradedApplications:function(){return function(i,e,t){var o=t.dsRead,c=t.dsActions,n=a.getAppsToTrackForUpgrade(e());if(0!==d.size(n)){var l=o.generalInfo.getMetaSiteId();o.tpa.billing.getPremiumApps(l,function(e){var r=d.keyBy(e,"appDefinitionId");d.forEach(n,function(e,t){var s,u,n,a=r[e.appDefinitionId];d.isObject(a)?e.vendorProductId===a.vendorProductId&&e.upgradedToYearly===((n=a)&&6===n.cycle)||(i(E(t)),c.tpa.provision.refreshAppSpecMap(t,l,function(){i(p.clearSelectedComponents()),i(g.closeOpenedPanels()),c.tpa.app.refreshApp(o.tpa.app.getRenderedReactCompsByApplicationId(t)),c.platform.notifyApplication(t,f.factory.appUpgradeCompleted({vendorProductId:a.vendorProductId,cycle:a.cycle,instance:e.instance}))})):i((s=r,u=t,function(e,t,n){var a=n.dsRead,r=n.editorAPI;if(m.isOpen("se_refreshForAscend")){var i=a.tpa.app.getData(u),o=d.get(i,"appFields.premiumBundle.parentAppId");"ee21fe60-48c5-45e9-95f4-6ca8f9b1c9d9"===o&&d.isObject(s[o])&&(r.panelManager.openPanel("tpaPanels.confirmation.refreshForUpgrade",{},!1),e(E(u)))}}))})})}}},deleteApp:function(u){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},l=arguments[2];return function(e,t,n){var a=n.editorAPI,r=a.dsRead.tpa.app.getDataByAppDefId(u),i=d.get(r,"applicationId"),o=d.get(a.pages.getCurrentPage(),"id"),s=d(a.pages.getPagesData()).filter(function(e){return e.tpaApplicationId===i||e.managingAppDefId===u}).map("id").value();d.includes(s,o)?a.pages.beforePagesRemoveHook(s,function(){a.dsActions.tpa.app.delete(i,l,l)}):a.dsActions.tpa.app.delete(i,l,l),a.bi.reportBI(S.bi.events.COMPONENT_REMOVED,[{app_id:u,app_site_id:r.instanceId,is_last_tpa:1,removal_method:c.removal_method}])}}}}),define("stateManagement/tpa/tpa",["stateManagement/tpa/tpaActions","stateManagement/tpa/tpaSelectors"],function(e,t){"use strict";return{actions:e,selectors:t}}),define("stateManagement/uploadedFonts/logic/fontsUploader",["lodash","util"],function(r,i){"use strict";return{upload:function(e,t,n){if(t){var a=r.map(n,function(e){return{uploadFn:t.item.upload,source:{file:e,name:e.name,size:e.size,folderId:null,folderName:"All Media",mediaType:i.fontsManagerUtils.constants.FONTS_MEDIA_TYPE}}});e.Uploader.upload(a)}},clearUploadQueue:function(e){e.Uploader.uploadIsInProgress||e.Uploader.clearQueue()},getUploadQueue:function(e){return e.Uploader.uploadQueue},cancelUpload:function(e){var t=!1;if(e.canAbort())try{e.abort(),t=!0}catch(e){t=!1}return t},retryUpload:function(e){!r.isEmpty(e.Uploader.uploadQueue)&e.Uploader.uploadIsInProgress&&e.Uploader.upload()}}}),define("stateManagement/uploadedFonts/logic/uploadedFontsLogicUtils",["lodash","util","coreUtilsLib"],function(n,a,r){"use strict";var t=function(e){return n.map(e,function(e){return n.assign(e,{name:e.source.name})})},i=function(e){return n.map(e,function(e){if(e.status!==a.fontsManagerUtils.constants.FONT_STATUS.SUCCEEDED)return e;var t=n.get(e,"serverResponse.data");return n.assign({},e,a.fontsManagerUtils.getUploadedFontData(t))})};return{getFontObject:function(e){return e=n.reject(e,function(e){return!e.fileInput}),n.map(e,function(e){return a.fontsManagerUtils.getUploadedFontData(e)})},buildUploadedItems:function(e){return n.transform(e,function(e,t){t.status===a.fontsManagerUtils.constants.FONT_STATUS.SUCCEEDED&&(e[t.id]={finished:!0})},{})},buildQueueItemForStore:function(e){var t=n.pick(e,["canceled","cssFontFamily","displayName","downloadUrl","error_code","fileUrl","fontFace","fontFamily","id","isAborted","name","removed","status","stillUploading"]);return t.source=r.objectUtils.cloneDeep(e.source),t.fileInput=r.objectUtils.cloneDeep(e.fileInput),t.fileOutput=r.objectUtils.cloneDeep(e.fileOutput),t.serverResponse=r.objectUtils.cloneDeep(e.serverResponse),t},getInitialQueueWithData:function(e){return n.flow([t,i])(e)},getNewQueueData:t}}),define("stateManagement/uploadedFonts/uploadedFontsSelectors",[],function(){"use strict";return{getList:function(e){return e.uploadedFonts.list},getQueue:function(e){return e.uploadedFonts.queue},getUploadedItems:function(e){return e.uploadedFonts.uploadedItems},getTimeOutTokens:function(e){return e.uploadedFonts.timeOutTokens}}}),define("stateManagement/uploadedFonts/logic/uploadedFontsActions",["lodash","wixmp","coreBi","util","coreUtilsLib","stateManagement/bi/bi","stateManagement/uploadedFonts/logic/fontsUploader","stateManagement/uploadedFonts/logic/uploadedFontsLogicUtils","stateManagement/uploadedFonts/uploadedFontsActionTypes","stateManagement/uploadedFonts/uploadedFontsSelectors"],function(l,d,u,p,g,c,i,s,e,t){"use strict";var n=e.SET_LIST,a=e.SET_QUEUE,r=e.SET_FLAG_TO_QUEUE_ITEM,o=e.SET_UPLOADED_ITEMS,f=e.ADD_TIME_OUT_TOKEN,m=e.CLEAR_TIME_OUT_TOKENS,S=t.getQueue,E=t.getUploadedItems,_=t.getTimeOutTokens,T=p.fontsManagerUtils.constants,P=function(e){return{type:n,list:e}},A=function(e){return{type:a,queue:e}},I=function(e,t){return{type:r,queueItemIndex:e,flag:t}},M=function(e){return{type:o,uploadedItems:e}},v=function(e){return{type:f,timeOutToken:e}},O=function(){return{type:m}},h=function(n,e){var t={mediaType:T.FONTS_MEDIA_TYPE,paging:{cursor:null,size:500}};return e.wixmpSource.items.list(null,t).then(function(e){var t=g.objectUtils.cloneDeep(e.data);n(P(s.getFontObject(t)))})},R=function(r,i){return function(e,t,n){var a=n.wixmpFonts;i.id&&l.assign(a.uploadQueue[r],{id:i.id}),e(I(r,i))}},y=function(){return function(e,t){var n=s.getInitialQueueWithData(l.map(i.getUploadQueue(d),s.buildQueueItemForStore)),a=s.buildUploadedItems(E(t()));e(A(n)),e(M(a)),N(e,t)}},N=function(e,t){var n=_(t());l.forEach(n,function(e){window.clearTimeout(e)}),e(O())},C=function(t,n){d.events.on(d.events.ITEMS.REMOVE,function(e){l.forEach(e,function(e){e.then(function(){return h(t,n)}).catch(function(e){g.log.error(e)})})})},D=function(s,u,c){d.Uploader.on("fileStatusChanged",function(e){e.currentFileProgress.status===T.FONT_STATUS.SUCCEEDED&&h(s,c).catch(function(e){return g.log.error(e)});var t=S(u()),n={},a=e.currentFileQueueIdx,r=e.currentFileProgress.status;switch(n.status=r){case p.fontsManagerUtils.constants.FONT_STATUS.PROCESSING:L(s,t,a);break;case p.fontsManagerUtils.constants.FONT_STATUS.FAILED:var i=b(e,t,a);l.assign(n,i);break;case p.fontsManagerUtils.constants.FONT_STATUS.SUCCEEDED:var o=B(s,u,e,t,a);l.assign(n,o)}s(R(a,n))})},L=function(e,t,n){e(c.actions.event(u.events.fontsUploadPanel.Start_Font_Upload_Process,{name:t[n].name}));var a=window.setTimeout(function(){e(R(n,{stillUploading:!0}))},3e4);e(v(a))},b=function(e,t,n){var a=l.get(e,"currentFileProgress.file.serverResponse.data"),r=l.get(a,"error_code")||"unknown";if(!t[n].canceled){var i=g.objectUtils.cloneDeep(t[n]);i.error_code=r,k(r,i)}return{error_code:r}},B=function(e,t,n,a,r){var i=l.get(n,"currentFileProgress.file.serverResponse.data"),o=_defineProperty({},i.id,!0),s=l.assign(_defineProperty({},i.id,{finished:!1}),E(t()),o);return e(M(s)),c.actions.event(u.events.fontsUploadPanel.Fonts_Uploaded,{name:a[r].name}),p.fontsManagerUtils.getUploadedFontData(i)},w=function(r,i,o){d.Uploader.on("queueChanged",function(e){o.uploadQueue=e;var n=S(i()),t=s.getNewQueueData(l.map(e,s.buildQueueItemForStore)),a=l.map(t,function(e,t){return l.defaults({},n[t],e)});r(A(a))})},U=function(){d.Uploader.on("uploadQueueFinished",function(){i.clearUploadQueue(d)})},k=function(e,t){var n=p.fontsManagerUtils.getErrorMessage(e).bi_msg;c.actions.event(u.events.fontsUploadPanel.Upload_Failed,{message:n,name:t.name})};return{loadWixmpSdk:function(r,i){return function(e,t,n){var a=i?new d.Source(d.sources.PRIVATE_SITE,{asyncFontUpload:!0,siteMediaToken:r}):new d.Source(d.sources.PRIVATE,{asyncFontUpload:!0});return l.assign(n.wixmpFonts,{wixmpSource:a}),{wixmpSource:a}}},init:function(){return function(e,t,n){var a=n.wixmpFonts;h(e,a).catch(function(e){return g.log.error(e)}),e(y()),D(e,t,a),w(e,t,a),C(e,a),U()}},removeFonts:function(a){return function(e,t,n){n.wixmpFonts.wixmpSource.items.remove(a)}},assignFlagToQueueItem:R,cancelUpload:function(r){return function(e,t,n){var a=n.wixmpFonts;-1!==r&&i.cancelUpload(a.uploadQueue[r])&&e(R(r,{canceled:!0}))}},prepareUploadedFontsData:y,uploadItems:function(r){return function(e,t,n){var a=n.wixmpFonts;i.upload(d,a.wixmpSource,r)}},clearUploadQueue:function(){return function(){i.clearUploadQueue(d)}},setUploadedItems:M,setQueue:A,addTimeOutToken:v,setList:P,setFlagToQueueItem:I,clearTimeOutTokens:O}}),define("stateManagement/uploadedFonts/uploadedFonts",["stateManagement/uploadedFonts/logic/uploadedFontsActions","stateManagement/uploadedFonts/uploadedFontsReducer","stateManagement/uploadedFonts/uploadedFontsSelectors"],function(e,t,n){"use strict";return{actions:e,reducer:t,selectors:n}}),define("stateManagement/componentsLoadService/componentsLoadServiceActions",["lodash"],function(o){"use strict";return{load:function(i){return function(e,t,n){var a=n.compFactoryService,r=i.filter(function(e){return!a.getCompClass(e)});return o.isEmpty(r)?Promise.resolve():new Promise(function(e){return requirejs(["wix-ui-santa/viewerComponentService.bundle"],e)}).then(function(e){return Promise.all(r.map(function(n){return e.load(n,""+requirejs.toUrl("wix-ui-santa")).then(function(e){var t=_slicedToArray(e,1)[0];return{compType:n,compClass:t}})}))}).then(function(e){o.forEach(e,function(e){var t=e.compType,n=e.compClass;return a.registerComp(t,n.default.component)})})}},getCompClass:function(a){return function(e,t,n){return n.compFactoryService.getCompClass(a)}}}}),define("stateManagement/componentsLoadService/componentsLoadService",["stateManagement/componentsLoadService/componentsLoadServiceActions"],function(e){"use strict";return{actions:e}}),define("stateManagement/rendererPanelsWorkerService/rendererPanelsWorkerServiceActions",[],function(){"use strict";return{setWorkerMessagesAPI:function(a){return function(e,t,n){n.panelsWorkerService.workerMessagesAPI=a}},getWorkerMessagesAPI:function(){return function(e,t,n){return n.panelsWorkerService.workerMessagesAPI}}}}),define("stateManagement/rendererPanelsWorkerService/rendererPanelsWorkerService",["stateManagement/rendererPanelsWorkerService/rendererPanelsWorkerServiceActions"],function(e){"use strict";return{actions:e}}),define("stateManagement/componentMetaData/componentMetaData",["stateManagement/componentMetaData/componentMetaDataSelectors"],function(e){"use strict";return{selectors:e}}),define("stateManagement/applyModeFromClipboard/applyModeFromClipboardSelectors",[],function(){"use strict";return{selectApplyModeFromClipboardSuggestion:function(e){return e.applyModeFromClipboardSuggestion}}}),define("stateManagement/applyModeFromClipboard/applyModeFromClipboard",["stateManagement/applyModeFromClipboard/applyModeFromClipboardSelectors"],function(e){"use strict";return{selectors:e}}),define("stateManagement/contextMenu/contextMenuActions",["stateManagement/contextMenu/contextMenuActionTypes"],function(s){"use strict";return{openContextMenu:function(e){var t=e.editorPositionX,n=e.editorPositionY,a=e.viewerPositionX,r=e.viewerPositionY,i=e.isRulerMenu,o=e.removeAllGuidesInRuler;return{type:s.OPEN_CONTEXT_MENU,editorPositionX:t,editorPositionY:n,viewerPositionX:a,viewerPositionY:r,isRulerMenu:i,removeAllGuidesInRuler:o}}}}),define("stateManagement/contextMenu/contextMenuSelectors",[],function(){"use strict";var t=function(e){return e.pinMode.pinnedCompType};return{isOpen:function(e){return Boolean(t(e))},getPinnedCompType:t}}),define("stateManagement/contextMenu/contextMenu",["stateManagement/contextMenu/contextMenuActions","stateManagement/contextMenu/contextMenuReducer","stateManagement/contextMenu/contextMenuSelectors"],function(e,t,n){"use strict";return{actions:e,reducer:t,selectors:n}}),define("stateManagement/multilingual/multilingualSelectors",["lodash"],function(n){"use strict";var e=function(t){return function(e){return n.get(e.multilingual,t)}};return{supportedLanguages:e("supportedLanguages"),loading:e("loading"),isChanging:e("isChanging"),nextLanguage:e("nextLanguage")}}),define("stateManagement/multilingual/multilingualRequestSignatures",["lodash","constants","stateManagement/multilingual/multilingualConstants"],function(n,e,t){"use strict";var a=e.MULTILINGUAL.sitePropertyServiceUrl,r=t.linguistLanguageUrl,i=t.apiMethods,o=i.GET,s=i.POST,u=i.PUT;return{loadLanguages:function(e){return{type:o,url:r+"/?instance-id="+e}},initLanguages:function(e,t){return{type:s,url:r+"/?instance-id="+e,data:{initialize:t}}},addNewLanguage:function(e,t){return{type:u,url:r+"/?instance-id="+e,data:{data:n.pick(t,["code","locale"])}}},updateLanguageStatus:function(e,t,n){return{type:u,url:r+"/"+t+"/status?instance-id="+e,data:{data:{status:n}}}},loadSupportedLanguages:function(){return{type:o,url:r+"/supported"}},checkLanguageAppStatus:function(e){return{url:a+"?fields.paths=multilingual",headers:{Authorization:"MSID."+e}}}}}),define("stateManagement/multilingual/multilingualActions",["lodash","constants","stateManagement/panels/panelsActions","stateManagement/multilingual/multilingualActionTypes","stateManagement/multilingual/multilingualUtils","stateManagement/multilingual/multilingualSelectors","stateManagement/multilingual/multilingualConstants","stateManagement/multilingual/multilingualRequestSignatures","experiment","util"],function(m,a,f,e,S,t,n,E,_,T){"use strict";var r=e.LOAD_SUPPORTED_LANGUAGES,i=e.LOAD_SUPPORTED_LANGUAGES_SUCCESS,o=e.LOAD_SUPPORTED_LANGUAGES_ERROR,s=e.MULTILINGUAL_LOAD_START,u=e.MULTILINGUAL_LOAD_STOP,c=e.LANGUAGE_CHANGE_START,l=e.LANGUAGE_CHANGE_SUCCESS,d=a.MULTILINGUAL,p=d.LANGUAGE_STATUSES,P=d.linguistDefId,g=n.dataLoadTypes,A=g.LOAD_LANGUAGES,I=g.CHECK_LANGUAGE_STATUS,M=g.INITIALIZE_LANGUAGES,v=g.ADD_LANGUAGE,O=g.UPDATE_LANGUAGE_STATUS,h=t.supportedLanguages,R={loadSupportedLanguages:function(){return{type:r}},loadSupportedLanguagesSuccess:function(e){return{type:i,payload:e}},loadSupportedLanguagesError:function(e){return{type:o,error:e}},multilingualLoadStart:function(e){return{type:s,payload:e}},multilingualLoadStop:function(e){return{type:u,payload:e}},startLanguageChange:function(e){return{type:c,payload:e}},completeLanguageChange:function(e){return{type:l,payload:e}}},y=function(e){return e.data},N=function(e){return m.get(e.app.getDataByAppDefId(P),"instanceId")},C=function(a){return function(e){var t=e.originalLanguage,n=e.translationLanguages;return a({originalLanguage:S.addLanguageCode(t[0]),translationLanguages:n.map(S.addLanguageCode)})}},D=function(t){return function(e){return t(e.payload),e}},L=m.curry(function(e,t,n){return e(m.assign({},n,{producer:t}))}),b=L(R.multilingualLoadStart),B=L(R.multilingualLoadStop),w=function(n,a){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:m.identity;return function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:y;return n(b(a,e)),S.callAjax(e).then(t).then(B(a)).then(D(r)).catch(B(a)).then(n)}},U=function(){return function(e,t,n){var a=n.dsRead.tpa,r=n.dsActions.language.init,i=N(a);return w(e,A,C(r))(E.loadLanguages(i))}},k=function(e){return e.props.appDefinitionId===P},x=function(){return function(n,e,t){var a,r=t.editorAPI,i=r.saveManager,o=r.panelManager,s=r.history,u=r.tpa.services,c=t.dsRead,l=c.tpa,d=c.generalInfo,p=t.dsActions.platform,g=function(){return s.add("before adding multilingual platform app")};return(d.isFirstSave()?(g(),a=i,new Promise(function(e,t){return a.saveInBackground(e,t)}).then(function(){return!0})):Promise.resolve(!1)).then(function(e){var t=N(l);return m.isUndefined(t)?(T.fedopsLogger.interactionStarted(T.fedopsLogger.INTERACTIONS.INIT_MULTILINGUAL),e||g(),_.isOpen("se_multilingualHideOnboardingPanel")&&n(f.addPanelFilter("ml_onboarding_platform_app_panel",k)),Promise.all([!1,p.provision(P)])):[!0,t]}).catch(function(e){throw s.undo(),u.tpaAlertsService.openProvisionFailedAlert(o.openPanel,P,!1),e})}},F=function(o,s){return function(e,t,n){var a=n.dsRead.tpa,r=n.dsActions.language.status.set,i=N(a);return w(e,O,function(e){return r(S.addLanguageCode(e),s)})(E.updateLanguageStatus(i,o,s))}},G=function(){return function(e,t,n){n.editorAPI.topBarMenuBar.openDropDown(a.ROOT_COMPS.TOPBAR.DROP_PANELS.LANGUAGE_DROP_PANEL)}};return m.assign(R,{initializeAppThunk:x,addLanguageSelectorToSiteHeaderThunk:function(o){return function(e,t,n){var a=n.dsRead,r=a.selection,i=a.siteSegments;n.dsActions.components.add(i.getHeader(),o.structure,void 0,function(e){return r.selectComponentByCompRef(e)})}},openLanguageSelectorThunk:G,addLanguageThunk:function(s){return function(e,t,n){var o,a=n.dsRead,r=n.dsActions,i=a.language.getFull();return(m.find(i,m.pick(s,["languageCode","locale"]))?F(s.languageCode,p.INACTIVE):(o=s,function(e,t,n){var a=n.dsRead.tpa,r=n.dsActions.language,i=N(a);return w(e,v,m.flow(S.addLanguageCode,r.add))(E.addNewLanguage(i,o))}))(e,t,{dsRead:a,dsActions:r})}},loadLanguagesThunk:U,loadSupportedLanguagesThunk:function(){return function(e){return e(R.loadSupportedLanguages()),S.callAjax(E.loadSupportedLanguages()).then(y).then(R.loadSupportedLanguagesSuccess,R.loadSupportedLanguagesError).then(e)}},updateLanguageStatusThunk:F,checkLanguageStatusThunk:function(){return function(e,t,n){var a=n.dsRead,r=a.tpa,i=a.generalInfo.getMetaSiteId;return N(r)?w(e,I)(E.checkLanguageAppStatus(i()),function(e){return{status:!!e.properties.multilingual}}):Promise.resolve(R.multilingualLoadStop({status:!1}))}},initializeLanguagesThunk:function(f){return function(e,t,n){var a,r,i,o=n.dsActions.language.init,s=n.dsRead.tpa,u=n.editorAPI,c=u.panelManager,l=u.tpa.services,d=N(s),p={primaryLang:S.pickLanguageCode(f),additionalLang:S.pickLanguageCode((a=t(),r=f,i=m.reject(h(a),{languageCode:r.languageCode}),i[m.random(i.length-1)]))},g=E.initLanguages(d,p);return e(b(M,g)),S.callAjax(g).then(y).then(B(M)).then(D(C(o))).catch(function(e){return l.tpaAlertsService.openProvisionFailedAlert(c.openPanel,P,!1),B(M)(e)}).then(e)}},setCurrentLanguageThunk:function(a){return function(e,t,n){return n.dsActions.language.current.set(a)}},sendOpenOnboardingEventThunk:function(){return function(e,t,n){var a=n.editorAPI,r=a.platform.getAppDataByAppDefId(P).applicationId;a.dsActions.platform.notifyApplication(r,{eventType:"openOnboarding"})}},notifyMultilingualAppToOpen:function(){return function(n){return new Promise(function(t){n(x()).then(function(e){_slicedToArray(e,1)[0]&&require(["tpa"],function(e){e.superApps.openDashboardUrl(P,{state:"",widgetless:!0,title:null,origin:"gfpp_languageSelector",onClose:function(){n(U())},shouldNotCloseOnBlur:!1,isBareMode:!1},{type:"constants.BI.type.GFPP_MANAGE"}),T.fedopsLogger.interactionStarted(T.fedopsLogger.INTERACTIONS.BM_MULTILINGUAL),t()})})})}},dataUpdated:function(){return function(e){e(U()).then(function(){e(G())})}}})}),define("stateManagement/multilingual/multilingual",["stateManagement/multilingual/multilingualActions","stateManagement/multilingual/multilingualActionTypes","stateManagement/multilingual/multilingualReducer","stateManagement/multilingual/multilingualSelectors"],function(e,t,n,a){"use strict";return{actionTypes:t,actions:e,reducer:n,selectors:a}}),define("stateManagement/leavePopup/leavePopupActions",["util"],function(n){"use strict";var a=function(e){var t=n.translate("GENERAL_Close_Warning_Message");return(e||window.event).returnValue=t};return{setLeavePopup:function(t){return function(){var e="false"===n.url.getParameterByName("leavePagePopUp");window.onbeforeunload=!e&&t?a:null}}}}),define("stateManagement/leavePopup/leavePopup",["stateManagement/leavePopup/leavePopupActions"],function(e){"use strict";return{actions:e}}),define("stateManagement/businessManager/businessManagerActions",["coreUtilsLib"],function(e){"use strict";return{prefetchBizMgr:function(){return function(){return e.requestsUtil.fetch("/_api/business-manager/prefetch",{credentials:"same-origin",method:"GET"})}}}}),define("stateManagement/businessManager/businessManager",["stateManagement/businessManager/businessManagerActions"],function(e){"use strict";return{actions:e}}),define("stateManagement/appInstaller/appInstallerSelectors",[],function(){"use strict";return{getAppsInstallerPanelData:function(e){return e.appInstaller}}}),define("stateManagement/appInstaller/appInstallerActions",["lodash","util","stateManagement/panels/panels","stateManagement/appInstaller/appInstallerActionTypes"],function(f,m,e,S){"use strict";var E=e.actions;return{installChosenApps:function(){return function(s,e,t){var n,a,r,i,o,u,c=t.editorAPI,l=t.dsRead,d=t.dsActions,p=m.url.parseUrl(window.location.href).query;return n=l.generalInfo.isFirstSave()||"true"===p.runAppInstaller,u=p.appInstallerApps,a=u?u.split(","):[],r=f.uniq(f.reject(a,g)),n&&0!==r.length?(s((o=r.length,{type:S.START_INSTALL_PROCESS,totalApps:o})),i=r,s(E.updateOrOpenPanel("panels.focusPanels.appInstallerPanel",{appDefIds:i,progressBarPace:p.progressBarPace||5})),function(e){m.fedopsLogger.interactionStarted(m.fedopsLogger.INTERACTIONS.TRIGGER_APP_INSTALLER_PANEL);var t=new Promise(function(e,t){c.saveManager.saveInBackground(e,t)});return e.forEach(function(e){t=t.then(function(){return o=e,m.fedopsLogger.interactionStarted(m.fedopsLogger.INTERACTIONS.APP_INSTALLER_INSTALL_SINGLE_APP),l.tpa.appMarket.getDataAsync(o).then(function(e){var t,n=e.name,a={};if(!e.hasSection&&"Wix Chat"!==e.name){var r=n.replace("Wix ",""),i=d.pages.add(r);a.pageId=i.id}return s((t=n,{type:S.START_APP_INSTALL,installingAppName:t})),new Promise(function(e){d.waitForChangesApplied(function(){c.tpa.addApplication(o,a).then(function(){m.fedopsLogger.interactionEnded(m.fedopsLogger.INTERACTIONS.APP_INSTALLER_INSTALL_SINGLE_APP),e()}).catch(function(){m.ravenUtils.captureError(new Error("Install App Failed "+n),{tags:{app_installer:!0}}),e()})})})}).then(function(){s({type:S.DONE_APP_INSTALL})});var o})}),t}(r).catch(function(){m.ravenUtils.captureError(new Error("Install Apps Failed"),{tags:{app_installer:!0}})}).then(function(){return new Promise(function(t){var n=new Date,e=function(){var e=Math.max(0,3e3-(new Date-n));setTimeout(function(){try{s(E.closeAllPanels())}finally{m.fedopsLogger.interactionEnded(m.fedopsLogger.INTERACTIONS.TRIGGER_APP_INSTALLER_PANEL),t()}},e)};c.saveManager.saveInBackground(e,function(){m.ravenUtils.captureError(new Error("Save from Install Apps Failed"),{tags:{app_installer:!0}}),e()})})})):Promise.resolve();function g(e){return l.tpa.app.isInstalled(e)}}}}}),define("stateManagement/appInstaller/appInstaller",["stateManagement/appInstaller/appInstallerReducer","stateManagement/appInstaller/appInstallerSelectors","stateManagement/appInstaller/appInstallerActions"],function(e,t,n){"use strict";return{reducer:e,selectors:t,actions:n}}),define("stateManagement/notifications/notifications",["stateManagement/notifications/notificationsActions","stateManagement/notifications/notificationsSelectors"],function(e,t){"use strict";return{actions:e,selectors:t}}),define("stateManagement/googleMap/googleMapActions",["stateManagement/googleMap/googleMapActionTypes"],function(n){"use strict";return{setGoogleMapsLocationsPanelState:function(e,t){return{type:n.SET_SINGLE_PANEL_STATE,panel:e,locationIndex:t}},setLocationIndex:function(e){return{type:n.SET_LOCATION_INDEX,locationIndex:e}}}}),define("stateManagement/googleMap/googleMapSelectors",[],function(){"use strict";return{getCurrentPanel:function(e){return e.googleMap.panel},getLocationIndex:function(e){return e.googleMap.locationIndex}}}),define("stateManagement/googleMap/googleMap",["stateManagement/googleMap/googleMapActions","stateManagement/googleMap/googleMapReducer","stateManagement/googleMap/googleMapSelectors"],function(e,t,n){"use strict";return{actions:e,reducer:t,selectors:n}}),define("stateManagement/rulers/rulersSelectors",["lodash","reduxLibs","stateManagement/mobile/mobile","stateManagement/siteSegments/siteSegments"],function(a,e,t,n){"use strict";var r=t.selectors,i=n.selectors,o=e.reselect.createSelector,s=function(e){return e.rulers.guidesState},u=o(s,r.isMobileEditor,function(e,t){return t?e.mobile:e.desktop}),c=o(u,function(e){return e.horizontalGuides}),l=o(u,function(e){return e.verticalGuides}),d=function(e){return e.rulers.selectedGuide};return{getSelectedGuideId:d,getHistoryState:function(e){return e.rulers.history.stack[e.rulers.history.currentIndex]},getGuidesState:s,getCurrentViewModeGuides:u,getHorizontalGuides:c,getVerticalGuides:l,getVerticalGuideRealPosition:function(e,t){return t+Math.round(i.getPagesContainerAbsLayout(e).x)},getSelectedGuideData:o(d,s,function(e,t){return function(e,t){if(!t)return null;var n=void 0;return a.some(e.mobile.verticalGuides,["guideId",t])?n="mobile.verticalGuides":a.some(e.mobile.horizontalGuides,["guideId",t])?n="mobile.horizontalGuides":a.some(e.desktop.verticalGuides,["guideId",t])?n="desktop.verticalGuides":a.some(e.desktop.horizontalGuides,["guideId",t])&&(n="desktop.horizontalGuides"),{guideId:t,guidePosition:a.find(a.get(e,n),{guideId:t}).guidePosition,guidePath:n}}(t,e)}),isRulersEnabled:function(e){return e.viewTools.rulersEnabled},canUndo:function(e){return 0<e.rulers.history.currentIndex},canRedo:function(e){return e.rulers.history.stack.length>e.rulers.history.currentIndex+1}}}),define("stateManagement/rulers/rulersActions",["lodash","constants","coreBi","util","stateManagement/leftBar/leftBar","stateManagement/bi/bi","stateManagement/preview/preview","stateManagement/rulers/rulersSelectors","stateManagement/rulers/rulersActionTypes","stateManagement/userPreferences/userPreferences","stateManagement/store/initialEditorState"],function(l,o,s,d,e,u,t,p,n,r,i){"use strict";var c=t.selectors.getPreviewMode,g=r.actions,a=e.selectors,f=a.getDeviceType,m=a.isMobileEditor,S=n.RESET_HISTORY,E=n.UNDO,_=n.REDO,T=n.UPDATE_HISTORY,P=n.UPDATE_STATE,A=n.SET_RULERS_STATE,I=function(){return{type:S}},M=function(e){return{type:P,state:e}},v=function(r,i){return function(e,t){var n=s.events.rulers[r],a={editor_view_mode:f(t())};l.merge(a,i),e(u.actions.event(n,a))}},O=function(r){return function(e,t){var n=r.guidesState;e(g.setSiteUserPreferences(o.USER_PREFS.VIEW_TOOLS.GUIDES_STATE,n)),e(M(r));var a=p.getHistoryState(t());l.isEqual(a,r.guidesState)||e({type:T})}},h=function(e,t,n){return l.defaults(_defineProperty({},e,t),n)},R=function(u,c){return function(e,t,n){var a,r=n.editorAPI,i=l.cloneDeep(p.getGuidesState(t())),o=(a=c,{guideId:"GUIDE_"+l.uniqueId(Date.now().toString(36)),guidePosition:a});l.get(i,u).push(o);var s=h("guidesState",i,t().rulers);return r.selection.deselectComponents(),s.selectedGuide=o.guideId,d.keyboardShortcuts.setContext(d.keyboardShortcuts.CONTEXTS.RULERS),e(O(s)),o.guideId}},y=function(e,t){return(t?"mobile.":"desktop.")+e+"Guides"},N=function(e,t,n){var a=l.cloneDeep(e),r=l.reject(l.get(a,t),{guideId:n});return l.set(a,t,r),a},C=function(s,u,c){return function(e,t){var n=t(),a=y(s,m(n)),r=N(p.getGuidesState(n),a,u),i={guidePosition:c,guideId:u};l.get(r,a).push(i);var o=h("guidesState",r,n.rulers);e(O(o))}},D=function(o){return function(e,t){var n=t(),a=function(e,t){if(!t)return null;var n=void 0;return l.some(e.mobile.verticalGuides,["guideId",t])?n="mobile.verticalGuides":l.some(e.mobile.horizontalGuides,["guideId",t])?n="mobile.horizontalGuides":l.some(e.desktop.verticalGuides,["guideId",t])?n="desktop.verticalGuides":l.some(e.desktop.horizontalGuides,["guideId",t])&&(n="desktop.horizontalGuides"),{guideId:t,guidePosition:l.find(l.get(e,n),{guideId:t}).guidePosition,guidePath:n}}(l.cloneDeep(p.getGuidesState(n)),o),r=N(p.getGuidesState(n),a.guidePath,a.guideId),i=h("guidesState",r,n.rulers);i.selectedGuide=null,d.keyboardShortcuts.setContext(c(n)?d.keyboardShortcuts.CONTEXTS.PREVIEW:d.keyboardShortcuts.CONTEXTS.EDITOR),e(O(i))}},L=function(){return function(e,t){e(D(t().rulers.selectedGuide))}},b=function(n,a){return function(e,t){e(M(l.defaults(_defineProperty({},n,a),t().rulers)))}},B=function(t){return function(e){e(g.setSiteUserPreferences(o.USER_PREFS.VIEW_TOOLS.GUIDES_STATE,t)),e(b("guidesState",t))}},w=function(r,i){return function(e,t,n){var a=n.editorAPI;i&&e(v("GUIDE_TOOLTIP_IN_EDIT_MODE",{origin:i})),r&&(a.selection.deselectComponents(),d.keyboardShortcuts.setContext(d.keyboardShortcuts.CONTEXTS.RULERS)),e(b("selectedGuide",r))}},U=function(){return function(e,t){e(w(null)),d.keyboardShortcuts.setContext(c(t())?d.keyboardShortcuts.CONTEXTS.PREVIEW:d.keyboardShortcuts.CONTEXTS.EDITOR)}};return{undo:function(){return function(e,t){if(p.canUndo(t())){e(U()),e({type:E});var n=p.getHistoryState(t());e(B(n))}}},redo:function(){return function(e,t){if(p.canRedo(t())){e(U()),e({type:_});var n=p.getHistoryState(t());e(B(n))}}},changeGuidePosition:C,changeGuidePositionByPixels:function(a,r){return function(e,t){var n=p.getSelectedGuideData(t());l.includes(n.guidePath,a)&&e(C(a,n.guideId,n.guidePosition+r))}},updateEditorRulersState:b,sendBIEvent:v,selectGuide:w,deselectGuide:U,setVerticalGuide:function(a){return function(e,t){var n=y("vertical",m(t()));return e(R(n,a))}},setHorizontalGuide:function(a){return function(e,t){var n=y("horizontal",m(t()));return e(R(n,a))}},updateStateOnDragEnd:function(a){return function(e,t){var n=l.clone(t().rulers);n.isDragging=!1,a||(n.isHovered=!1),e(M(n))}},toggleRulers:function(){return function(e,t,n){var a=n.editorAPI,r=!p.isRulersEnabled(t());a.updateEditorViewTools("rulersEnabled",r);var i=e(g.setSiteUserPreferences(o.USER_PREFS.VIEW_TOOLS.RULERS_ENABLED,r));return e(I()),i}},resetHistory:I,updateRulersAndHistory:O,setGuide:R,removeGuideViaDelBtn:function(){return function(e){e(v("GUIDE_DELETED",{origin:"delete_button"})),e(L())}},removeGuideById:D,removeSelectedGuide:L,updateGuides:B,initRulersFromUserPreferences:function(){return function(e,t){var n,a={guidesState:r.selectors.getSiteUserPreferences(o.USER_PREFS.VIEW_TOOLS.GUIDES_STATE)(t())};e((n=l.defaults(a,i.rulers),{type:A,rulersState:n}))}},removeAllGuidesInRuler:function(s,u){return function(e,t){var n=t(),a=l.cloneDeep(p.getGuidesState(n)),r=s?"mobile":"desktop",i=u?"verticalGuides":"horizontalGuides";if(!l.isEmpty(a[r][i])){a[r][i]=[];var o=h("guidesState",a,n.rulers);o.selectedGuide=null,d.keyboardShortcuts.setContext(c(n)?d.keyboardShortcuts.CONTEXTS.PREVIEW:d.keyboardShortcuts.CONTEXTS.EDITOR),e(O(o))}}}}}),define("stateManagement/rulers/rulers",["stateManagement/rulers/rulersReducer","stateManagement/rulers/rulersSelectors","stateManagement/rulers/rulersActions"],function(e,t,n){"use strict";return{reducer:e,selectors:t,actions:n}}),define("stateManagement/topBarTooltip/topBarTooltipActions",["lodash","stateManagement/topBar/topBar","stateManagement/userPreferences/userPreferences"],function(t,e,n){"use strict";var a=e.actions,r="hasSeenBackToAdiTooltip";return{showBackToAdiTooltip:function(){return function(e){e(a.setAdiTooltipVisibility(!0)),t.delay(function(){e(a.setAdiTooltipVisibility(!1)),e(n.actions.setSiteUserPreferences(r,!0))},1e4)}},closeBackToAdiTooltip:function(){return function(e){e(a.setAdiTooltipVisibility(!1)),e(n.actions.setSiteUserPreferences(r,!0))}}}}),define("stateManagement/topBarTooltip/topBarTooltip",["stateManagement/topBarTooltip/topBarTooltipActions"],function(e){"use strict";return{actions:e}}),define("stateManagement/background/backgroundActions",["lodash","util","stateManagement/userPreferences/userPreferences"],function(g,e,c){"use strict";var f=e.backgroundUtils,l=e.guidUtils,m=function(u){return function(e,t,n){var a=n.dsRead,r=a.pages.getPrimaryPageId(),i=a.pages.background.get(r,"mobile"),o=u.ref.id||i.ref.id,s=c.selectors.getSessionUserPreferences("bg_panel_mobile_data_duplications_"+o)(t());s&&s.count&&(u.ref.id=l.getUniqueId(r,"_")+"_mobile_bg",u.ref.mediaRef&&(u.ref.mediaRef.id=void 0),e(c.actions.setSessionUserPreferences("bg_panel_mobile_data_duplications_"+o,{count:s.count-1})),e(c.actions.setSessionUserPreferences("bg_panel_mobile_data_duplications_"+u.ref.id,{count:0})))}};function S(e){"fixed"!==e.ref.scrollType&&(e.ref.scrollType="scroll")}return{updatePageBackground:function(l,d,p){return function(e,t,n){var i,o,s,a=n.dsRead,r=n.editorAPI,u=g.cloneDeep(d);if("mobile"===l)u.isPreset=!1,S(u),e(m(u));else{var c=a.pages.background.get(p,"mobile");c.isPreset&&(e(m(c)),e((i=u,o=c,s=p,function(e,t,n){var a=n.editorAPI,r=void 0;o=g.cloneDeep(o),f.clearOverlayData(o),g.assign(o.ref,g.omit(i.ref,["id","mediaRef","metaData"])),S(o),i.ref.mediaRef?(r="WixVideo"===i.ref.mediaRef.type?i.ref.mediaRef.posterImageRef:i.ref.mediaRef,o.ref.mediaRef=g.omit(r,"id")):o.ref.mediaRef=null,a.pages.background.update(s,o,"mobile")})))}r.pages.background.update(p,u,l)}}}}),define("stateManagement/background/background",["stateManagement/background/backgroundActions"],function(e){"use strict";return{actions:e}}),define("stateManagement/componentLocator/componentLocatorActions",["lodash","stateManagement/highlights/highlightsActions","stateManagement/services/servicesActions","stateManagement/domMeasurements/domMeasurements"],function(e,E,_,t){"use strict";var T=t.selectors.getStageRect;return{locateComponentAndHighlight:function(m,S){return function(e,t,n){var a=n.dsRead.components.layout.getRelativeToScreen(m);e(E.handleComponentHighlight(m,a,S));var r,i,o,s,u,c,l,d,p,g=T(t()),f=(i=g,o=(r=a).y<i.top,s=r.y>i.bottom,u=r.y>i.top&&r.y<i.bottom,c=r.y+r.height<i.bottom,l=r.height>i.bottom-i.top,d=function(e){return Math.max(e.y-30,0)},p=function(e,t){return t.top+(e.y-t.bottom)+e.height+30},o?d(r):u&&l?d(r):!u||c||l?s&&!l?p(r,i):s&&l?d(r):i.top:p(r,i));f!==g.top&&e(_.setState({animateScrollTo:{position:{x:0,y:f},duration:.5}}))}}}}),define("stateManagement/componentLocator/componentLocator",["stateManagement/componentLocator/componentLocatorActions"],function(e){"use strict";return{actions:e}}),define("stateManagement/savePublish/savePublishSelectors",[],function(){"use strict";return{getOverridingSiteWasSavedPanel:function(e){return e.savePublish.overridden.siteWasSavedPanel},getOverridingDomainPanel:function(e){return e.savePublish.overridden.domainPanel},getOverridingSaveAndPublish:function(e){return e.savePublish.overridden.saveAndPublish},getOverridingSaveReminderPanel:function(e){return e.savePublish.overridden.saveReminderPanel},getOverridingSiteDefaultName:function(e){return e.savePublish.overridden.siteDefaultName},getOverridingShouldCheckForConcurrentUsers:function(e){return e.savePublish.overridden.shouldCheckForConcurrentUsers},getIsDiffSaveInProgress:function(e){return e.savePublish.isDiffSaveInProgress},getIsBuildInProgress:function(e){return e.savePublish.isBuildInProgress},getIsPublishInProgress:function(e){return e.savePublish.isPublishInProgress},getIsSaveInProgress:function(e){return e.savePublish.isSaveInProgress},getIsForceSaveInBackground:function(e){return e.savePublish.isForceSaveInBackground},getPublishPanelPromotionIndex:function(e){return e.savePublish.publishPanelPromotionIndex},getIsDealerLoaded:function(e){return e.savePublish.isDealerLoaded}}}),define("stateManagement/savePublish/savePublish",["stateManagement/savePublish/savePublishActions","stateManagement/savePublish/savePublishReducer","stateManagement/savePublish/savePublishSelectors","stateManagement/savePublish/savePublishActionTypes"],function(e,t,n,a){"use strict";return{actions:e,reducer:t,selectors:n,actionTypes:a}}),define("stateManagement/history/historyActions",[],function(){"use strict";return{undo:function(){return function(e,t,n){var a=n.editorAPI;a.text.isEditingText()?a.text.undo():a.history.undo()}},redo:function(){return function(e,t,n){var a=n.editorAPI;a.text.isEditingText()?a.text.redo():a.history.redo()}}}}),define("stateManagement/history/history",["stateManagement/history/historyActions"],function(e){"use strict";return{actions:e}}),define("stateManagement/window/windowActions",["stateManagement/tpa/tpa","stateManagement/platform/platform"],function(a,r){"use strict";return{onFocus:function(){return function(e,t,n){n.dsRead&&(e(a.actions.updateUpgradedApplications()),e(r.actions.fetchFreshAppsData()))}}}}),define("stateManagement/window/window",["stateManagement/window/windowActions"],function(e){"use strict";return{actions:e}}),define("stateManagement/wixAd/wixAdSelectors",[],function(){"use strict";return{getOverriddenItems:function(e){return e.wixAd.overridden}}}),define("stateManagement/wixAd/wixAd",["stateManagement/wixAd/wixAdActions","stateManagement/wixAd/wixAdReducer","stateManagement/wixAd/wixAdSelectors","stateManagement/wixAd/wixAdActionTypes"],function(e,t,n,a){"use strict";return{actions:e,reducer:t,selectors:n,actionTypes:a}}),define("stateManagement/rightClickMenu/rightClickMenuSelectors",[],function(){"use strict";return{getOverriddenItems:function(e){return e.rightClickMenu.overridden}}}),define("stateManagement/rightClickMenu/rightClickMenu",["stateManagement/rightClickMenu/rightClickMenuActions","stateManagement/rightClickMenu/rightClickMenuReducer","stateManagement/rightClickMenu/rightClickMenuSelectors","stateManagement/rightClickMenu/rightClickMenuActionTypes"],function(e,t,n,a){"use strict";return{actions:e,reducer:t,selectors:n,actionTypes:a}}),define("stateManagement/wixCodeIDE/wixCodeIDESelectors",[],function(){"use strict";return{getOverriddenItems:function(e){return e.wixCodeIDE.overridden}}}),define("stateManagement/wixCodeIDE/wixCodeIDE",["stateManagement/wixCodeIDE/wixCodeIDEActions","stateManagement/wixCodeIDE/wixCodeIDEReducer","stateManagement/wixCodeIDE/wixCodeIDESelectors","stateManagement/wixCodeIDE/wixCodeIDEActionTypes"],function(e,t,n,a){"use strict";return{actions:e,reducer:t,selectors:n,actionTypes:a}}),define("stateManagement/publishingStatus/publishingStatusActions",["stateManagement/publishingStatus/publishingStatusActionTypes"],function(t){"use strict";return{setPublishingStatus:function(e){return{type:t.SET_PUBLISHING_STATUS,publishingStatus:e}}}}),define("stateManagement/publishingStatus/publishingStatusSelectors",[],function(){"use strict";return{getPublishingStatus:function(e){return e.publishingStatus}}}),define("stateManagement/publishingStatus/publishingStatus",["stateManagement/publishingStatus/publishingStatusActions","stateManagement/publishingStatus/publishingStatusReducer","stateManagement/publishingStatus/publishingStatusSelectors"],function(e,t,n){"use strict";return{actions:e,reducer:t,selectors:n}}),define("stateManagement/featuresOverridden/featuresOverriddenSelectors",[],function(){"use strict";return{isConnectToDataDisabled:function(e){return e.featuresOverridden.connectToData.isDisabled}}}),define("stateManagement/featuresOverridden/featuresOverridden",["stateManagement/featuresOverridden/featuresOverriddenReducer","stateManagement/featuresOverridden/featuresOverriddenSelectors","stateManagement/featuresOverridden/featuresOverriddenActions"],function(e,t,n){"use strict";return{reducer:e,selectors:t,actions:n}}),define("stateManagement/media/mediaActions",["lodash","util","stateManagement/selection/selection"],function(e,u,t){"use strict";var c=t.selectors;return{vectorImage:{replace:function(o,s){return function(e,t,n){var a=n.editorAPI,r=c.getSelectedCompsRefs(t()),i=a.components.data.get(r);u.vectorImageUtils.replaceVectorImage(a,r,i,o,s)}},change:function(i,o,s){return function(e,t,n){var a=n.editorAPI,r=c.getSelectedCompsRefs(t());a.mediaServices.changeVectorImage(r,i,o,s)}}}}}),define("stateManagement/media/media",["stateManagement/media/mediaActions"],function(e){"use strict";return{actions:e}}),define("stateManagement/wixData/collectionTypes",[],function(){"use strict";return{labels:{CONTENT_FOR_YOUR_SITE:"SiteApp_WixData_DataManager_Tab_Permissions_SiteContent",FORM_INPUTS:"SiteApp_WixData_DataManager_Tab_Permissions_FormSubmit",USER_GENERATED_CONTENT:"SiteApp_WixData_DataManager_Tab_Permissions_MemberContent",CONTENT_FOR_SITE_MEMBERS:"SiteApp_WixData_DataManager_Tab_Permissions_MembersOnlyContent",FORM_INPUTS_FOR_SITE_MEMBERS:"SiteApp_WixData_DataManager_Tab_Permissions_MembersFormSubmit",PRIVATE_DATA:"SiteApp_WixData_DataManager_Tab_Permissions_Private",CUSTOM:"SiteApp_WixData_DataManager_Tab_Permissions_Custom"},permissions:{CONTENT_FOR_YOUR_SITE:{anonymous:{insert:!1,update:!1,remove:!1,read:!0},siteMember:{insert:!1,update:!1,remove:!1,read:!0},dataOwner:{update:!1,remove:!1,read:!0},siteOwner:{insert:!0,update:!0,remove:!0,read:!0}},FORM_INPUTS:{anonymous:{insert:!0,update:!1,remove:!1,read:!1},siteMember:{insert:!0,update:!1,remove:!1,read:!1},dataOwner:{update:!1,remove:!1,read:!1},siteOwner:{insert:!0,update:!0,remove:!0,read:!0}},USER_GENERATED_CONTENT:{anonymous:{insert:!1,update:!1,remove:!1,read:!0},siteMember:{insert:!0,update:!1,remove:!1,read:!0},dataOwner:{update:!0,remove:!0,read:!0},siteOwner:{insert:!0,update:!0,remove:!0,read:!0}},CONTENT_FOR_SITE_MEMBERS:{anonymous:{insert:!1,update:!1,remove:!1,read:!1},siteMember:{insert:!1,update:!1,remove:!1,read:!0},dataOwner:{update:!1,remove:!1,read:!0},siteOwner:{insert:!0,update:!0,remove:!0,read:!0}},FORM_INPUTS_FOR_SITE_MEMBERS:{anonymous:{insert:!1,update:!1,remove:!1,read:!1},siteMember:{insert:!0,update:!1,remove:!1,read:!1},dataOwner:{update:!1,remove:!1,read:!1},siteOwner:{insert:!0,update:!0,remove:!0,read:!0}},PRIVATE_DATA:{anonymous:{insert:!1,update:!1,remove:!1,read:!1},siteMember:{insert:!1,update:!1,remove:!1,read:!1},dataOwner:{update:!1,remove:!1,read:!1},siteOwner:{insert:!0,update:!0,remove:!0,read:!0}},CUSTOM:{anonymous:{insert:!1,update:!1,remove:!1,read:!1},siteMember:{insert:!1,update:!1,remove:!1,read:!1},dataOwner:{update:!1,remove:!1,read:!1},siteOwner:{insert:!1,update:!1,remove:!1,read:!1}}},CUSTOM_TYPE:"CUSTOM"}}),define("stateManagement/wixData/wixDataActions",["util","lodash","stateManagement/wixData/collectionTypes","stateManagement/wixData/wixDataActionTypes"],function(s,i,r,u){"use strict";var c=function(e){return!e.directory},o=function(e){return e.directory},n=function(e){if(i.get(e,"meta.customPreset"))return r.CUSTOM_TYPE;var t=i.omit(e,["meta","initialData"]);return i.findKey(r.permissions,t)||r.CUSTOM_TYPE},l=function(e){return r.labels[e]},d=function(e){return e.readFile(e.getVirtualDescriptor("backend/authorization-config.json",!1)).then(JSON.parse).then(function(e){var t=e["wix-data"];return i.mapValues(t,n)})},p=function(i){return function(e){var t=e.name,n=e.location,a=i.getRoots().schemas.location,r=t.split(".json")[0];return{id:n.split(a)[1].split(".json")[0],name:r}}},g=function(e){var t=e.getRoots().schemas;return e.getChildren(t)},f=function(e,t){return Promise.all(t.map((n=e,function(e){return n.getChildren(e).then(function(e){return e.map(p(n))})})));var n},m=function(a,e,r){return Promise.all(e.map(function(n){return a.getChildren(n).then(function(e){var t=_slicedToArray(e,1)[0];return a.readFile(t)}).then(function(e){var t=JSON.parse(e);return r(t,n)})}))},S=function(e,n){return(t=e,a=function(e,t){return n(e)?t:null},g(t).then(function(e){return e.filter(o)}).then(function(e){return m(t,e,a)})).then(function(e){return e.filter(function(e){return null!==e})});var t,a},t=function(e){return"app"===e.storage},a=function(e){return!t(e)},E=function(e){return a(e)&&"external"!==e.storage},_=function(e){return a(e)&&"external"===e.storage},T=function(t,e){return S(t,e).then(function(e){return Promise.all([e.map(function(e){return e.name}),f(t,e)])}).then(function(e){var t=_slicedToArray(e,2),n=t[0],a=t[1];return i.map(i.zip(n,a),function(e){var t=_slicedToArray(e,2);return{name:t[0],collections:t[1].map(function(e){return{id:e.id,name:e.name,type:r.CUSTOM_TYPE,typeLabelKey:l(r.CUSTOM_TYPE)}})}})})},P=function(a){return S(a,t).then(function(e){if(0<e.length)return Promise.all([(t=a,n=e,m(t,n,function(e){return e.displayNamespace})),f(a,e),d(a)]);var t,n}).then(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=_slicedToArray(e,3),n=t[0],a=t[1],r=t[2];return i(i.zip(n,a)).map(function(e){var t=_slicedToArray(e,2);return{name:t[0],collections:t[1].map(function(e){var t=e.id,n=e.name,a=r[t];return{id:t,name:n,type:a,typeLabelKey:l(a)}})}}).sortBy("name").value()})},A=function(e){var t=_slicedToArray(e,4),n=t[0],a=t[1],r=t[2],i=t[3];return function(e){return e({type:u.LOAD_COLLECTIONS,userCollections:n,dbDriverSections:a,externalDbDriverSections:r,appSections:i})}};return{loadCollections:function(){return function(t,e,n){var a,r,i=n.editorAPI.wixCode.fileSystem,o=(a=i,g(a).then(function(e){return e.filter(c)}).then(function(e){if(0<e.length)return Promise.all([e.map(p(a)),d(a)])}).then(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[[]],t=_slicedToArray(e,2),n=t[0],r=t[1];return n.map(function(e){var t=e.id,n=e.name,a=r[t];return{id:t,name:n,type:a,typeLabelKey:l(a)}})})).then(function(e){return Promise.all([e,T(i,E),T(i,_),P(i)])});return Promise.race([o,(r=100,new Promise(function(e){return setTimeout(e,r,"timeout")}))]).then(function(e){"timeout"===e?(t({type:u.START_LOADING}),o.then(function(e){return t(A(e))})):t(A(e))}).catch(function(e){t({type:u.INDICATE_ABOUT_ERROR}),s.ravenUtils.captureError(e,{tags:{collection_manager_panel:!0}})})}}}}),define("stateManagement/wixData/wixDataSelectors",["lodash"],function(t){"use strict";var n=function(e){return e.wixData.userCollections},a=function(e){return e.wixData.dbDriverSections},r=function(e){return e.wixData.externalDbDriverSections},i=function(e){return e.wixData.appSections};return{isBlank:function(e){return null===e.wixData.isLoading},isLoading:function(e){return e.wixData.isLoading},hasError:function(e){return e.wixData.hasError},getUserCollections:n,getDbDriverSections:a,getExternalDbDriverSections:r,getAppSections:i,hasCollections:function(e){return!(t.isEmpty(n(e))&&t.isEmpty(a(e))&&t.isEmpty(r(e))&&t.isEmpty(i(e)))}}}),define("stateManagement/wixData/wixData",["stateManagement/wixData/wixDataActions","stateManagement/wixData/wixDataReducer","stateManagement/wixData/wixDataSelectors","stateManagement/wixData/wixDataActionTypes"],function(e,t,n,a){"use strict";return{actions:e,reducer:t,selectors:n,actionTypes:a}}),define("stateManagement/hoverBox/hoverBoxActions",["stateManagement/hoverBox/hoverBoxActionTypes"],function(n){"use strict";return{setHoverBox:function(e,t){return{type:n.SET_HOVER_BOX,hoveredComp:e,hoverBoxOverlay:t}},clearHoverBox:function(){return{type:n.CLEAR_HOVER_BOX}}}}),define("stateManagement/hoverBox/hoverBoxSelectors",[],function(){"use strict";return{getHoverBoxOverlay:function(e){return e.hoverBox.hoverBoxOverlay},getHoveredComp:function(e){return e.hoverBox.hoveredComp}}}),define("stateManagement/hoverBox/hoverBox",["stateManagement/hoverBox/hoverBoxActions","stateManagement/hoverBox/hoverBoxReducer","stateManagement/hoverBox/hoverBoxSelectors"],function(e,t,n){"use strict";return{actions:e,reducer:t,selectors:n}}),define("stateManagement/welcomeScreen/welcomeScreenSelectors",["lodash"],function(t){"use strict";return{getWelcomeScreenConfig:function(e){return t.get(e.welcomeScreen,"config",null)},isWelcomeScreenDirty:function(e){return t.get(e.welcomeScreen,"isDirty")},getWelcomeScreenOverride:function(e){return t.get(e.welcomeScreen,"overrides",{panels:[]})}}}),define("stateManagement/welcomeScreen/welcomeScreen",["stateManagement/welcomeScreen/welcomeScreenActions","stateManagement/welcomeScreen/welcomeScreenReducer","stateManagement/welcomeScreen/welcomeScreenSelectors","stateManagement/welcomeScreen/welcomeScreenActionTypes"],function(e,t,n,a){"use strict";return{actions:e,reducer:t,selectors:n,actionTypes:a}}),define("stateManagement/inlinePopup/inlinePopupSelectors",[],function(){"use strict";return{getOpenedInlinePopup:function(e){return e.inlinePopup.openedInlinePopup}}}),define("stateManagement/inlinePopup/inlinePopup",["stateManagement/inlinePopup/inlinePopupActions","stateManagement/inlinePopup/inlinePopupReducer","stateManagement/inlinePopup/inlinePopupSelectors"],function(e,t,n){"use strict";return{actions:e,reducer:t,selectors:n}}),define("stateManagement/localMode/localModeSelectors",[],function(){"use strict";return{isEnabled:function(e){return e.localMode.enabled},getPushingStatus:function(e){return e.localMode.pushingStatus},getIsLocalPushInProgress:function(e){return e.localMode.isLocalPushInProgress},getIsReconnecting:function(e){return e.localMode.isReconnecting}}}),define("stateManagement/localMode/setPushingStatus",["stateManagement/localMode/localModeActionTypes"],function(e){"use strict";var t=e.SET_PUSHING_STATUS;return function(e){return{type:t,pushingStatus:e}}}),define("stateManagement/localMode/isSavePublishOrPushAllowed",["lodash","stateManagement/savePublish/savePublishSelectors","stateManagement/localMode/localModeSelectors"],function(e,t,n){"use strict";var a=n.getIsLocalPushInProgress,r=n.getIsReconnecting,i=t.getIsPublishInProgress,o=t.getIsSaveInProgress;return function(e){return!r(e)&&!(i(e)||o(e)||a(e))}}),define("stateManagement/localMode/localPushWrapper",["lodash","constants","stateManagement/localMode/setPushingStatus","stateManagement/localMode/isSavePublishOrPushAllowed"],function(c,l,d,p){"use strict";return function(e){var s=e.editorAPI;function r(i,e,o){return new Promise(function(e,t){var n=s.store.getState();function a(){window.pushedInThisSession=!0,e(),s.store.dispatch(d(l.PROGRESS_STATUS.DONE_SUCCESS)),window.setTimeout(function(){s.store.dispatch(d(l.PROGRESS_STATUS.IDLE_SAVED))},l.SAVE_PUBLISH.DURATION_TO_SHOW_RESULT)}function r(e){s.store.dispatch(d(l.PROGRESS_STATUS.DONE_FAILED)),window.setTimeout(function(){s.updateState({savingStatus:l.PROGRESS_STATUS.IDLE})},l.SAVE_PUBLISH.DURATION_TO_SHOW_RESULT),t(e)}s.store.dispatch(d(l.PROGRESS_STATUS.IN_PROGRESS)),s.dsRead.generalInfo.isFirstSave()&&t("Local mode push should not work on first save!"),p(n)||e(),c.defer(function(){s.dsActions.localMode.push(a,r,i,o)})})}function i(){s.panelManager.openPanel("localMode.panels.pushSuccessPanel",{},!0)}function o(e,t,n,a){r(!0,0,a).then(function(){return i()}).then(e).catch(t)}function u(a,r){return new Promise(function(e,t){var n=c.partial(o,e,t,a,r);s.panelManager.openPanel("localMode.panels.localVersionOutdatedPushPanel",{onForcePush:function(){return e={performFullPushBound:n},void s.panelManager.openPanel("localMode.panels.forcePushPanel",{onForcePush:e.performFullPushBound},!0);var e}},!0)})}function n(e,n,a){return a=a||{},s.savePublish.isSaveInProgress()?Promise.reject():r(e,0,a).then(function(e){return s.wasLocalPushedInThisSession=!0,i(),e||{}}).catch(function(e){var t;if(t=e,(c.get(t,"document.errorType")||c.get(t,"documentServices.errorType"))===s.dsRead.errors.save.CONCURRENT_SAVE)return u(n,a).then(function(){return{preventSiteWasPushedPanel:!0}});throw s.panelManager.openPanel("localMode.panels.failedPushGenericPanel",{},!0),e})}return{localPush:function(e){e=e||{};var t=s.store.getState();return p(t)?n(!1,e.origin,e):Promise.resolve()},wasPushedInThisSession:function(){return window.pushedInThisSession}}}}),define("stateManagement/localMode/localSave",["lodash","stateManagement/localMode/isSavePublishOrPushAllowed"],function(e,s){"use strict";return function(e){var r=e.origin,i=e.options,o=e.editorAPI;return new Promise(function(e,t){i=i||{};var n=o.store.getState();function a(){o.savePublish.setSaveProgress(!1)}return s(n)||e(),o.savePublish.setSaveProgress(!0),o.savePublish.save(!1,r,i).then(function(e){return a(),e||{}}).catch(function(e){throw a(),t(e),o.panelManager.openPanel("localMode.panels.failedLocalSaveGenericPanel",{},!0),e})})}}),define("stateManagement/localMode/localModeOverrideHelpers",["lodash","constants","util","stateManagement/localMode/localModeSelectors","stateManagement/localMode/localPushWrapper","stateManagement/localMode/localSave","stateManagement/localMode/isSavePublishOrPushAllowed","coreBi"],function(r,i,o,e,s,u,c,l){"use strict";var t,n=i.ROOT_COMPS.TOPBAR,d=n.MENU_BAR_ITEMS,a=n.SETTINGS_MENU_ITEMS,p=i.ROOT_COMPS.TOPBAR.MODES,g=e.getPushingStatus,f=(_defineProperty(t={},i.PROGRESS_STATUS.IDLE_SAVED,"top-bar-btn-idle-saved"),_defineProperty(t,i.PROGRESS_STATUS.IN_PROGRESS,"top-bar-btn-in-progress-indicator"),_defineProperty(t,i.PROGRESS_STATUS.DONE_SUCCESS,"top-bar-btn-done-successfully"),t),m={content:{right:"6px"}},S={key:d.CODE,devToolsButtonEnabled:!1},E=function(e){var t,n=e.state,a=e.editorAPI,r=s({editorAPI:a});return{key:i.ROOT_COMPS.TOPBAR.BUTTONS.LOCAL_PUSH,label:o.translate("Topbar_Local_Push_Version"),customSymbol:(t=g(n),t===i.PROGRESS_STATUS.DONE_SUCCESS?"vi":null),automationId:"top-bar-button-local-push",ref:"localPushButton",className:["top-bar-btn-push","top-bar-edit-mode-last-btn",f[g(n)]||""].join(" "),MODES:[p.EDITOR],onClick:function(){r.localPush({origin:"top_bar_local_push"}),a.bi.event(l.events.push.pushClick,{}),a.topBarMenuBar.closeDropDown(i.ROOT_COMPS.TOPBAR.DROP_PANELS.LOCAL_PUSH)},__isExtraItem:!0,bubbleStyleOverrides:m,disabled:!c(n),dropPanelData:{title:"Topbar_Local_Push_Version_Tooltip_Title",body:"Topbar_Local_Push_Version_Tooltip_Text",linkText:null,linkAction:null},onMouseEnter:function(){a.topBarMenuBar.openDropDown(i.ROOT_COMPS.TOPBAR.DROP_PANELS.LOCAL_PUSH)},onMouseLeave:function(){a.topBarMenuBar.closeDropDown(i.ROOT_COMPS.TOPBAR.DROP_PANELS.LOCAL_PUSH)}}},_=function(){return[{key:a.ACCESSIBILITY},{key:a.MOBILE_FRIENDLY},{key:a.IMAGE_OPTIMIZATION},{key:a.MULTILINGUAL},{key:"separator",isSeparator:!0,__isExtraItem:!0},{key:a.SITE_DASHBOARD}]},T=function(e,t){return[{key:i.ROOT_COMPS.TOPBAR.BUTTONS.ZOOM},{key:i.ROOT_COMPS.TOPBAR.BUTTONS.UNDO},{key:i.ROOT_COMPS.TOPBAR.BUTTONS.REDO},{key:i.ROOT_COMPS.TOPBAR.BUTTONS.WIXSTORES_MIGRATION_UPGRADE_SITE},(n={state:e,editorAPI:t},a=n.state,r=n.editorAPI,{key:i.ROOT_COMPS.TOPBAR.BUTTONS.SAVE,label:o.translate("Topbar_Local_Save"),disabled:!c(a),dropPanelData:{title:"Topbar_Local_Save_Tooltip_Title",body:"Topbar_Local_Save_Tooltip_Text",linkText:null,linkAction:null},onClick:function(){u({origin:"topbar",editorAPI:r}),r.bi.event(l.events.localSave.localSaveClick,{initiatorName:"manual"}),r.topBarMenuBar.closeDropDown(i.ROOT_COMPS.TOPBAR.DROP_PANELS.SAVE)}}),{key:i.ROOT_COMPS.TOPBAR.BUTTONS.PREVIEW},E({state:e,editorAPI:t}),{key:i.ROOT_COMPS.TOPBAR.BUTTONS.BACK_TO_EDITOR}];var n,a,r};return{getOverriddenTopBarItems:function(e){var t=e.topBar.overridden,n=[{key:d.SETTINGS},{key:d.TOOLS},S,{key:d.HELP},{key:d.UPGRADE}],a={getMenuOverrides:function(){return n},getSettingsMenuOverrides:_,getRightButtonsOverrides:T};return r.assign({},t,{overrideGetters:a})},overriddenWixCodeIdeData:{shouldShow:!1},overriddenLeftTree:{shouldShow:!1},overriddenDeveloperToolBar:{showOnlySavedEvents:!0,isReadOnlyEvents:!0,disableLinkToCode:!0}}}),define("stateManagement/localMode/setIsReconnecting",["stateManagement/localMode/localModeActionTypes"],function(e){"use strict";var t=e.SET_IS_RECONNECTING;return function(e){return{type:t,isReconnecting:e}}}),define("stateManagement/developerToolBar/developerToolBarActions",["stateManagement/developerToolBar/developerToolBarActionTypes"],function(t){"use strict";return{override:function(e){return{type:t.OVERRIDE,overrides:e}}}}),define("stateManagement/localMode/localServerEventsHandlerCreator",["stateManagement/notifications/notificationsActions","stateManagement/localMode/setIsReconnecting","stateManagement/localMode/localModeSelectors"],function(a,r,e){"use strict";var i=e.getIsReconnecting;return function(t){var n=function(e){return t.panelManager.closePanelByName(e)};return{handleEvents:function(e){switch(e.event){case"SOCKET_RECONNECTING":i(t.store.getState())||(t.store.dispatch(r(!0)),t.store.dispatch(a.closeAllNotifications()),t.panelManager.openPanel("localMode.panels.reconnectPanel",{},!0));break;case"SOCKET_RECONNECTED":t.store.dispatch(r(!1)),t.panelManager.closePanelByName("localMode.panels.reconnectPanel"),t.store.dispatch(a.showUserActionNotification({message:"Notifications_LocalMode_Reconnected",title:"Reconnected successfully",type:"info"}));break;case"LOCAL_DOCUMENT_UPDATED":t.panelManager.openPanel("localMode.panels.localEditorUnsyncedPanel",{closePanel:n},!0)}}}}}),define("stateManagement/localMode/localModeActions",["stateManagement/topBar/topBar","stateManagement/localMode/localModeActionTypes","stateManagement/localMode/localModeOverrideHelpers","stateManagement/localMode/setPushingStatus","stateManagement/localMode/setIsReconnecting","stateManagement/wixCodeIDE/wixCodeIDEActions","stateManagement/savePublish/savePublishActions","stateManagement/leftTree/leftTreeActions","stateManagement/developerToolBar/developerToolBarActions","stateManagement/localMode/localServerEventsHandlerCreator"],function(s,e,u,t,n,c,l,d,p,g){"use strict";var f=s.actions,a=e.ENABLE_LOCAL_MODE,m=function(){return{type:a}};return{enableLocalMode:m,openLocalMode:function(){return function(r,i,e){var o=e.editorAPI;return new Promise(function(e){var a,t=i(),n=g(o);r(s.actions.setBannerTitle("Topbar_Local_Title")),r(m()),r(f.overrideItems(u.getOverriddenTopBarItems(t))),r(c.overrideWixCodeIDE(u.overriddenWixCodeIdeData)),r(d.overrideItems(u.overriddenLeftTree)),r(l.overrideShouldCheckForConcurrentUsers(!1)),r(p.override(u.overriddenDeveloperToolBar)),o.localMode.registerToMessages(n.handleEvents),(a=o,new Promise(function(e){var t=function(){a.developerMode.isEnabled()||a.developerMode.toggle({showWelcomePanel:!1,notifyApps:!1})},n=window.setTimeout(function(){t(),e()},5e3);a.registerInitUserPrefsCallback(function(){t(),window.clearTimeout(n),e()})})).then(e)})}},setPushingStatus:t,setIsReconnecting:n}}),define("stateManagement/localMode/localMode",["stateManagement/localMode/localModeActions","stateManagement/localMode/localModeReducer","stateManagement/localMode/localModeSelectors"],function(e,t,n){"use strict";return{actions:e,reducer:t,selectors:n}}),define("stateManagement/developerToolBar/developerToolBarSelectors",[],function(){"use strict";return{showOnlySavedEvents:function(e){return e.developerToolBar.overrides.showOnlySavedEvents},isReadOnlyEvents:function(e){return e.developerToolBar.overrides.isReadOnlyEvents},disableLinkToCode:function(e){return e.developerToolBar.overrides.disableLinkToCode}}}),define("stateManagement/developerToolBar/developerToolBar",["stateManagement/developerToolBar/developerToolBarActions","stateManagement/developerToolBar/developerToolBarSelectors","stateManagement/developerToolBar/developerToolBarReducer"],function(e,t,n){"use strict";return{actions:e,selectors:t,reducer:n}}),define("stateManagement/permanentBorder/permanentBorderSelectors",[],function(){"use strict";return{getComponent:function(e){return e.permanentBorder.component}}}),define("stateManagement/permanentBorder/permanentBorder",["stateManagement/permanentBorder/permanentBorderActions","stateManagement/permanentBorder/permanentBorderReducer","stateManagement/permanentBorder/permanentBorderSelectors"],function(e,t,n){"use strict";return{actions:e,reducer:t,selectors:n}}),define("stateManagement",["lodash","stateManagement/applicationStudio/applicationStudio","stateManagement/addPanel/addPanel","stateManagement/designPanel/designPanel","stateManagement/componentsStore/componentsStore","stateManagement/appsStore/appsStore","stateManagement/boxSlideShow/boxSlideShow","stateManagement/gridLines/gridLines","stateManagement/store/createEditorStore","stateManagement/store/throttledStore","stateManagement/services/services","stateManagement/panels/panels","stateManagement/helpPanel/helpPanel","stateManagement/meshMigration/meshMigration","stateManagement/leftBar/leftBar","stateManagement/leftTree/leftTree","stateManagement/sectionedPanel/sectionedPanel","stateManagement/topBar/topBar","stateManagement/mobile/mobile","stateManagement/siteSegments/siteSegments","stateManagement/dynamicPages/dynamicPages","stateManagement/selection/selection","stateManagement/userProfile/userProfile","stateManagement/layers/layers","stateManagement/domain/domain","stateManagement/highlights/highlights","stateManagement/stylableEditor/stylableEditor","stateManagement/spotlightStage/spotlightStage","stateManagement/text/text","stateManagement/tpa/tpa","stateManagement/uploadedFonts/uploadedFonts","stateManagement/componentsLoadService/componentsLoadService","stateManagement/rendererPanelsWorkerService/rendererPanelsWorkerService","stateManagement/componentMetaData/componentMetaData","stateManagement/applyModeFromClipboard/applyModeFromClipboard","stateManagement/bi/bi","stateManagement/pinMode/pinMode","stateManagement/easterEggs/easterEggs","stateManagement/contextMenu/contextMenu","stateManagement/components/components","stateManagement/mouseActions/mouseActions","stateManagement/store/combineReducers","stateManagement/userPreferences/userPreferences","stateManagement/siteDisplayName/siteDisplayName","stateManagement/multilingual/multilingual","stateManagement/domMeasurements/domMeasurements","stateManagement/pages/pages","stateManagement/leavePopup/leavePopup","stateManagement/businessManager/businessManager","stateManagement/appInstaller/appInstaller","stateManagement/platform/platform","stateManagement/notifications/notifications","stateManagement/googleMap/googleMap","stateManagement/rulers/rulers","stateManagement/leftBar/leftBarData","stateManagement/topBarTooltip/topBarTooltip","stateManagement/background/background","stateManagement/componentLocator/componentLocator","stateManagement/preview/preview","stateManagement/savePublish/savePublish","stateManagement/history/history","stateManagement/window/window","stateManagement/linkPanel/linkPanel","stateManagement/wixAd/wixAd","stateManagement/rightClickMenu/rightClickMenu","stateManagement/wixCodeIDE/wixCodeIDE","stateManagement/publishingStatus/publishingStatus","stateManagement/featuresOverridden/featuresOverridden","stateManagement/media/media","stateManagement/wixData/wixData","stateManagement/hoverBox/hoverBox","stateManagement/welcomeScreen/welcomeScreen","stateManagement/externalLinks/externalLinks","stateManagement/inlinePopup/inlinePopup","stateManagement/localMode/localMode","stateManagement/developerToolBar/developerToolBar","stateManagement/permanentBorder/permanentBorder"],function(e,t,n,a,r,i,o,s,u,c,l,d,p,g,f,m,S,E,_,T,P,A,I,M,v,O,h,R,y,N,C,D,L,b,B,w,U,k,x,F,G,H,V,W,K,Y,z,q,j,X,Q,Z,J,$,ee,te,ne,ae,re,ie,oe,se,ue,ce,le,de,pe,ge,fe,me,Se,Ee,_e,Te,Pe,Ae,Ie){"use strict";var Me={addPanel:n,appInstaller:X,applicationStudio:t,applyModeFromClipboard:B,bi:w,businessManager:j,componentMetaData:b,components:F,componentsStore:r,appsStore:i,boxSlideShow:o,contextMenu:x,designPanel:a,domain:v,domMeasurements:Y,dynamicPages:P,easterEggs:k,gridLines:s,highlights:O,leftBar:f,leftTree:m,sectionedPanel:S,services:l,mobile:_,mouseActions:G,multilingual:K,notifications:Z,googleMap:J,pages:z,leavePopup:q,panels:d,helpPanel:p,topBarTooltip:te,topBar:E,siteSegments:T,selection:A,userProfile:I,layers:M,stylableEditor:h,spotlightStage:R,text:y,tpa:N,uploadedFonts:C,componentsLoadService:D,rendererPanelsWorkerService:L,pinMode:U,userPreferences:V,siteDisplayName:W,platform:Q,rulers:$,background:ne,componentLocator:ae,preview:re,savePublish:ie,history:oe,window:se,linkPanel:ue,wixAd:ce,rightClickMenu:le,wixCodeIDE:de,publishingStatus:pe,featuresOverridden:ge,media:fe,wixData:me,hoverBox:Se,welcomeScreen:Ee,externalLinks:_e,inlinePopup:Te,meshMigration:g,localMode:Pe,developerToolBar:Ae,permanentBorder:Ie};return e.defaults({editorPlugins:Me,createEditorStore:u,throttledStore:c,leftBarData:ee,combineReducers:H},Me)});
//# sourceMappingURL=stateManagement.min.js.map